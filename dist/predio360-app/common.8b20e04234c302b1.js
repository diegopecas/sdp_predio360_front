"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[8592],{85840:(_e,q,t)=>{t.d(q,{Z:()=>g});var _=t(17626),C=t(14517),K=t(79608),L=t(61996),V=t(86810),G=t(62208),U=t(77712),Z=(t(90912),t(85931),t(76898));let B=0,W=class extends((0,V.eC)((0,K.J)((0,L.IG)(C.Z)))){constructor(F){super(F),this.id=`${Date.now().toString(16)}-analysis-${B++}`,this.title=null}get parent(){return this._get("parent")}set parent(F){const A=this.parent;if((0,G.pC)(A))switch(A.type){case"line-of-sight":case"dimension":A.releaseAnalysis(this);break;case"2d":case"3d":A.analyses.includes(this)&&A.analyses.remove(this)}this._set("parent",F)}get isEditable(){return this.requiredPropertiesForEditing.every(G.pC)}};(0,_._)([(0,U.Cb)({type:String,constructOnly:!0,clonable:!1})],W.prototype,"id",void 0),(0,_._)([(0,U.Cb)({type:String})],W.prototype,"title",void 0),(0,_._)([(0,U.Cb)({constructOnly:!0})],W.prototype,"type",void 0),(0,_._)([(0,U.Cb)({clonable:!1,value:null})],W.prototype,"parent",null),(0,_._)([(0,U.Cb)({readOnly:!0})],W.prototype,"isEditable",null),(0,_._)([(0,U.Cb)({readOnly:!0})],W.prototype,"requiredPropertiesForEditing",void 0),W=(0,_._)([(0,Z.j)("esri.analysis.Analysis")],W);const g=W},69186:(_e,q,t)=>{t.d(q,{Z:()=>F});var _=t(17626),K=(t(29132),t(97662)),L=t(79608),V=t(23719),G=t(86810),U=t(77712),X=t(66656),Z=(t(85931),t(76898)),B=t(90912),W=t(72642);let g=class extends((0,G.eC)(L.j)){constructor(A){super(A),this.type="length",this.startPoint=null,this.endPoint=null,this.measureType=K.n.Direct,this.offset=0,this.orientation=0}};(0,_._)([(0,U.Cb)({type:["length"],json:{write:{isRequired:!0}}})],g.prototype,"type",void 0),(0,_._)([(0,U.Cb)({type:W.Z,json:{write:!0}})],g.prototype,"startPoint",void 0),(0,_._)([(0,U.Cb)({type:W.Z,json:{write:!0}})],g.prototype,"endPoint",void 0),(0,_._)([(0,U.Cb)({type:K.V,nonNullable:!0,json:{write:{isRequired:!0}}})],g.prototype,"measureType",void 0),(0,_._)([(0,U.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}})],g.prototype,"offset",void 0),(0,_._)([(0,U.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,X.p)(A=>V.BV.normalize((0,B.q9)(A),0,!0))],g.prototype,"orientation",void 0),g=(0,_._)([(0,Z.j)("esri.analysis.LengthDimension")],g);const F=g},61642:(_e,q,t)=>{t.d(q,{Z:()=>A});var _=t(17626),C=t(8425),K=t(14517),L=t(79608),V=t(86810),G=t(62208),U=t(77712),Z=(t(90912),t(85931),t(76898)),B=t(128),W=t(72642),g=t(82706);let F=class extends((0,V.eC)((0,L.J)(K.Z))){constructor(v){super(v),this.position=null,this.elevationInfo=null,this.feature=null}equals(v){return(0,G._W)(this.position,v.position)&&(0,G._W)(this.elevationInfo,v.elevationInfo)&&(0,C.kk)(this.feature,v.feature)}};(0,_._)([(0,U.Cb)({type:W.Z}),(0,B.B)()],F.prototype,"position",void 0),(0,_._)([(0,U.Cb)({type:g.Z}),(0,B.B)()],F.prototype,"elevationInfo",void 0),(0,_._)([(0,U.Cb)(C.rX)],F.prototype,"feature",void 0),F=(0,_._)([(0,Z.j)("esri.analysis.LineOfSightAnalysisObserver")],F);const A=F},57574:(_e,q,t)=>{t.d(q,{Z:()=>F});var _=t(17626),C=t(8425),K=t(79608),L=t(86810),V=t(62208),G=t(77712),H=(t(90912),t(85931),t(76898)),Z=t(128),B=t(72642),W=t(82706);let g=class extends((0,L.eC)(K.j)){constructor(A){super(A),this.position=null,this.elevationInfo=null,this.feature=null}equals(A){return(0,V._W)(this.position,A.position)&&(0,V._W)(this.elevationInfo,A.elevationInfo)&&(0,C.kk)(this.feature,A.feature)}};(0,_._)([(0,G.Cb)({type:B.Z}),(0,Z.B)()],g.prototype,"position",void 0),(0,_._)([(0,G.Cb)({type:W.Z}),(0,Z.B)()],g.prototype,"elevationInfo",void 0),(0,_._)([(0,G.Cb)(C.rX)],g.prototype,"feature",void 0),g=(0,_._)([(0,H.j)("esri.analysis.LineOfSightAnalysisTarget")],g);const F=g},97662:(_e,q,t)=>{var _,K;t.d(q,{V:()=>C,n:()=>_}),(K=_||(_={})).Horizontal="horizontal",K.Vertical="vertical",K.Direct="direct";const C=[_.Horizontal,_.Vertical,_.Direct]},8425:(_e,q,t)=>{t.d(q,{kk:()=>C,pD:()=>K,rX:()=>L});var _=t(62208);function C(U,X){return K(U)===K(X)}function K(U){if((0,_.Wi)(U))return null;let H=null;return H=null!=U.objectId?U.objectId:null!=U.layer&&"objectIdField"in U.layer&&null!=U.layer.objectIdField&&null!=U.attributes?U.attributes[U.layer.objectIdField]:U.uid,null==H?null:`o-${null!=U.layer?U.layer.id:""}-${H}`}const L={json:{write:{writer:function V(U,X){(0,_.Wi)(U)||null==U.layer?.objectIdField||null==U.attributes||(X.feature={layerId:U.layer.id,objectId:U.attributes[U.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function G(U){if(null!=U.layerId&&null!=U.objectId)return{uid:null,layer:{id:U.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:U.objectId}}}}}}}},57577:(_e,q,t)=>{function _(C){throw new Error('Could not dynamically require "'+C+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}t.d(q,{c:()=>_})},7006:(_e,q,t)=>{t.d(q,{A:()=>J,B:()=>Q,C:()=>te,D:()=>N,E:()=>k,F:()=>$,G:()=>Y,H:()=>z,I:()=>ee,J:()=>re,K:()=>se,L:()=>le,M:()=>ae,N:()=>ce,a:()=>V,b:()=>G,c:()=>L,d:()=>U,e:()=>K,f:()=>X,g:()=>de,h:()=>H,i:()=>Z,j:()=>g,k:()=>v,l:()=>o,m:()=>n,n:()=>h,o:()=>F,p:()=>I,q:()=>w,r:()=>A,s:()=>D,t:()=>B,u:()=>M,v:()=>S,w:()=>W,x:()=>R,y:()=>P,z:()=>T});var _=t(4918),C=t(15994);function K(ne){return _.G.extendedSpatialReferenceInfo(ne)}function L(ne,oe,ie){return _.G.clip(C.N,ne,oe,ie)}function V(ne,oe,ie){return _.G.cut(C.N,ne,oe,ie)}function G(ne,oe,ie){return _.G.contains(C.N,ne,oe,ie)}function U(ne,oe,ie){return _.G.crosses(C.N,ne,oe,ie)}function X(ne,oe,ie,ue){return _.G.distance(C.N,ne,oe,ie,ue)}function H(ne,oe,ie){return _.G.equals(C.N,ne,oe,ie)}function Z(ne,oe,ie){return _.G.intersects(C.N,ne,oe,ie)}function B(ne,oe,ie){return _.G.touches(C.N,ne,oe,ie)}function W(ne,oe,ie){return _.G.within(C.N,ne,oe,ie)}function g(ne,oe,ie){return _.G.disjoint(C.N,ne,oe,ie)}function F(ne,oe,ie){return _.G.overlaps(C.N,ne,oe,ie)}function A(ne,oe,ie,ue){return _.G.relate(C.N,ne,oe,ie,ue)}function v(ne,oe){return _.G.isSimple(C.N,ne,oe)}function D(ne,oe){return _.G.simplify(C.N,ne,oe)}function o(ne,oe,ie=!1){return _.G.convexHull(C.N,ne,oe,ie)}function n(ne,oe,ie){return _.G.difference(C.N,ne,oe,ie)}function h(ne,oe,ie){return _.G.symmetricDifference(C.N,ne,oe,ie)}function I(ne,oe,ie){return _.G.intersect(C.N,ne,oe,ie)}function M(ne,oe,ie=null){return _.G.union(C.N,ne,oe,ie)}function w(ne,oe,ie,ue,he,pe,ye){return _.G.offset(C.N,ne,oe,ie,ue,he,pe,ye)}function S(ne,oe,ie,ue,he=!1){return _.G.buffer(C.N,ne,oe,ie,ue,he)}function R(ne,oe,ie,ue,he,pe,ye){return _.G.geodesicBuffer(C.N,ne,oe,ie,ue,he,pe,ye)}function P(ne,oe,ie,ue=!0){return _.G.nearestCoordinate(C.N,ne,oe,ie,ue)}function T(ne,oe,ie){return _.G.nearestVertex(C.N,ne,oe,ie)}function J(ne,oe,ie,ue,he){return _.G.nearestVertices(C.N,ne,oe,ie,ue,he)}function Q(ne,oe,ie,ue){if(null==oe||null==ue)throw new Error("Illegal Argument Exception");const he=_.G.rotate(oe,ie,ue);return he.spatialReference=ne,he}function te(ne,oe,ie){if(null==oe||null==ie)throw new Error("Illegal Argument Exception");const ue=_.G.flipHorizontal(oe,ie);return ue.spatialReference=ne,ue}function N(ne,oe,ie){if(null==oe||null==ie)throw new Error("Illegal Argument Exception");const ue=_.G.flipVertical(oe,ie);return ue.spatialReference=ne,ue}function k(ne,oe,ie,ue,he){return _.G.generalize(C.N,ne,oe,ie,ue,he)}function $(ne,oe,ie,ue){return _.G.densify(C.N,ne,oe,ie,ue)}function Y(ne,oe,ie,ue,he=0){return _.G.geodesicDensify(C.N,ne,oe,ie,ue,he)}function z(ne,oe,ie){return _.G.planarArea(C.N,ne,oe,ie)}function ee(ne,oe,ie){return _.G.planarLength(C.N,ne,oe,ie)}function re(ne,oe,ie,ue){return _.G.geodesicArea(C.N,ne,oe,ie,ue)}function se(ne,oe,ie,ue){return _.G.geodesicLength(C.N,ne,oe,ie,ue)}function le(ne,oe,ie){return null==oe||null==ie?[]:_.G.intersectLinesToPoints(C.N,ne,oe,ie)}function ae(ne,oe){_.G.changeDefaultSpatialReferenceTolerance(ne,oe)}function ce(ne){_.G.clearDefaultSpatialReferenceTolerance(ne)}const de=Object.freeze(Object.defineProperty({__proto__:null,buffer:S,changeDefaultSpatialReferenceTolerance:ae,clearDefaultSpatialReferenceTolerance:ce,clip:L,contains:G,convexHull:o,crosses:U,cut:V,densify:$,difference:n,disjoint:g,distance:X,equals:H,extendedSpatialReferenceInfo:K,flipHorizontal:te,flipVertical:N,generalize:k,geodesicArea:re,geodesicBuffer:R,geodesicDensify:Y,geodesicLength:se,intersect:I,intersectLinesToPoints:le,intersects:Z,isSimple:v,nearestCoordinate:P,nearestVertex:T,nearestVertices:J,offset:w,overlaps:F,planarArea:z,planarLength:ee,relate:A,rotate:Q,simplify:D,symmetricDifference:h,touches:B,union:M,within:W},Symbol.toStringTag,{value:"Module"}))},75327:(_e,q,t)=>{t.d(q,{Qc:()=>B,WU:()=>V,lt:()=>Z});var _=t(77275),C=t(56683);const K={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function L(v=(0,C.Kd)()){let D=(v=v.toLowerCase())in K;if(!D){const I=v.split("-");I.length>1&&I[0]in K&&(v=I[0],D=!0),D||(v="en")}const[o,n,h="#,##0.###"]=K[v];return{decimal:o,group:n,pattern:h}}function V(v,D){const o=L((D={...D}).locale);D.customs=o;const n=D.pattern||o.pattern;return isNaN(v)||Math.abs(v)===1/0?null:function U(v,D,o){const n=(o=o||{}).customs.group,h=o.customs.decimal,I=D.split(";"),M=I[0];if((D=I[v<0?1:0]||"-"+M).includes("%"))v*=100;else if(D.includes("\u2030"))v*=1e3;else{if(D.includes("\xa4"))throw new Error("currency notation not supported");if(D.includes("E"))throw new Error("exponential notation not supported")}const w=G,S=M.match(w);if(!S)throw new Error("unable to find a number expression in pattern: "+D);return!1===o.fractional&&(o.places=0),D.replace(w,function X(v,D,o){!0===(o=o||{}).places&&(o.places=0),o.places===1/0&&(o.places=6);const n=D.split("."),h="string"==typeof o.places&&o.places.indexOf(",");let I=o.places;h?I=o.places.substring(h+1):I>=0||(I=(n[1]||[]).length),o.round<0||(v=Number(v.toFixed(Number(I))));const M=String(Math.abs(v)).split("."),w=M[1]||"";if(n[1]||o.places){h&&(o.places=o.places.substring(0,h));const te=void 0!==o.places?o.places:n[1]&&n[1].lastIndexOf("0")+1;te>w.length&&(M[1]=w.padEnd(Number(te),"0")),I<w.length&&(M[1]=w.substr(0,Number(I)))}else M[1]&&M.pop();const S=n[0].replace(",","");let R=S.indexOf("0");-1!==R&&(R=S.length-R,R>M[0].length&&(M[0]=M[0].padStart(R,"0")),S.includes("#")||(M[0]=M[0].substr(M[0].length-R)));let P,T,J=n[0].lastIndexOf(",");if(-1!==J){P=n[0].length-J-1;const te=n[0].substr(0,J);J=te.lastIndexOf(","),-1!==J&&(T=te.length-J-1)}const Q=[];for(let te=M[0];te;){const N=te.length-P;Q.push(N>0?te.substr(N):te),te=N>0?te.slice(0,N):"",T&&(P=T,T=void 0)}return M[0]=Q.reverse().join(o.group||","),M.join(o.decimal||".")}(v,S[0],{decimal:h,group:n,places:o.places,round:o.round}))}(v,n,D)}const G=/[#0,]*[#0](?:\.0*#*)?/;function Z(v){const D=L((v=v||{}).locale),o=v.pattern||D.pattern,n=D.group,h=D.decimal;let I=1;if(o.includes("%"))I/=100;else if(o.includes("\u2030"))I/=1e3;else if(o.includes("\xa4"))throw new Error("currency notation not supported");const M=o.split(";");return 1===M.length&&M.push("-"+M[0]),{regexp:F(M,S=>(S="(?:"+(0,_.Qs)(S,".")+")").replace(G,R=>{const P={signed:!1,separator:v.strict?n:[n,""],fractional:v.fractional,decimal:h,exponent:!1},T=R.split(".");let J=v.places;1===T.length&&1!==I&&(T[1]="###"),1===T.length||0===J?P.fractional=!1:(void 0===J&&(J=v.pattern?T[1].lastIndexOf("0")+1:1/0),J&&null==v.fractional&&(P.fractional=!0),!v.places&&J<T[1].length&&(J+=","+T[1].length),P.places=J);const Q=T[0].split(",");return Q.length>1&&(P.groupSize=Q.pop().length,Q.length>1&&(P.groupSize2=Q.pop().length)),"("+function W(v){"places"in(v=v||{})||(v.places=1/0),"string"!=typeof v.decimal&&(v.decimal="."),"fractional"in v&&!/^0/.test(String(v.places))||(v.fractional=[!0,!1]),"exponent"in v||(v.exponent=[!0,!1]),"eSigned"in v||(v.eSigned=[!0,!1]);const D=g(v),o=F(v.fractional,h=>{let I="";return h&&0!==v.places&&(I="\\"+v.decimal,v.places===1/0?I="(?:"+I+"\\d+)?":I+="\\d{"+v.places+"}"),I},!0);let n=D+o;return o&&(n="(?:(?:"+n+")|(?:"+o+"))"),n+F(v.exponent,h=>h?"([eE]"+g({signed:v.eSigned})+")":"")}(P)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:n,decimal:h,factor:I}}function B(v,D){const o=Z(D),n=new RegExp("^"+o.regexp+"$").exec(v);if(!n)return NaN;let h=n[1];if(!n[1]){if(!n[2])return NaN;h=n[2],o.factor*=-1}return h=h.replace(new RegExp("["+o.group+"\\s\\xa0]","g"),"").replace(o.decimal,"."),Number(h)*o.factor}function g(v){return"signed"in(v=v||{})||(v.signed=[!0,!1]),"separator"in v?"groupSize"in v||(v.groupSize=3):v.separator="",F(v.signed,D=>D?"[-+]":"",!0)+F(v.separator,D=>{if(!D)return"(?:\\d+)";" "===(D=(0,_.Qs)(D))?D="\\s":"\xa0"===D&&(D="\\s\\xa0");const o=v.groupSize,n=v.groupSize2;if(n){const h="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+D+"]\\d{"+n+"})*["+D+"]\\d{"+o+"})";return o-n>0?"(?:"+h+"|(?:0|[1-9]\\d{0,"+(o-1)+"}))":h}return"(?:0|[1-9]\\d{0,"+(o-1)+"}(?:["+D+"]\\d{"+o+"})*)"},!0)}const F=(v,D,o)=>{if(!(v instanceof Array))return D(v);const n=[];for(let h=0;h<v.length;h++)n.push(D(v[h]));return A(n.join("|"),Boolean(o))},A=(v,D)=>"("+(D?"?:":"")+v+")"},88070:(_e,q,t)=>{t.d(q,{E:()=>B,H:()=>Z});var _=t(30217),C=t(550),K=t(67831),L=t(84161);const G=(0,t(28093).c)(),U=(0,C.c)(),X=(0,C.c)(),H=(0,C.c)();function Z(g,F,A){return(0,L.s)(G,F[0],F[1],1),(0,L.t)(G,G,(0,_.t)(U,A)),0===G[2]?(0,K.s)(g,G[0],G[1]):(0,K.s)(g,G[0]/G[2],G[1]/G[2])}function B(g,F,A){return W(X,F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7]),W(H,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7]),(0,_.m)(g,(0,_.a)(X,X),H),0!==g[8]&&(g[0]/=g[8],g[1]/=g[8],g[2]/=g[8],g[3]/=g[8],g[4]/=g[8],g[5]/=g[8],g[6]/=g[8],g[7]/=g[8],g[8]/=g[8]),g}function W(g,F,A,v,D,o,n,h,I){(0,_.s)(g,F,v,o,A,D,n,1,1,1),(0,L.s)(G,h,I,1),(0,_.a)(U,g);const[M,w,S]=(0,L.t)(G,G,(0,_.t)(U,U));return(0,_.s)(U,M,0,0,0,w,0,0,0,S),(0,_.m)(g,U,g)}},32825:(_e,q,t)=>{t.r(q),t.d(q,{buffer:()=>K.v,changeDefaultSpatialReferenceTolerance:()=>K.M,clearDefaultSpatialReferenceTolerance:()=>K.N,clip:()=>K.c,contains:()=>K.b,convexHull:()=>K.l,crosses:()=>K.d,cut:()=>K.a,densify:()=>K.F,difference:()=>K.m,disjoint:()=>K.j,distance:()=>K.f,equals:()=>K.h,extendedSpatialReferenceInfo:()=>K.e,flipHorizontal:()=>K.C,flipVertical:()=>K.D,generalize:()=>K.E,geodesicArea:()=>K.J,geodesicBuffer:()=>K.x,geodesicDensify:()=>K.G,geodesicLength:()=>K.K,intersect:()=>K.p,intersectLinesToPoints:()=>K.L,intersects:()=>K.i,isSimple:()=>K.k,nearestCoordinate:()=>K.y,nearestVertex:()=>K.z,nearestVertices:()=>K.A,offset:()=>K.q,overlaps:()=>K.o,planarArea:()=>K.H,planarLength:()=>K.I,relate:()=>K.r,rotate:()=>K.B,simplify:()=>K.s,symmetricDifference:()=>K.n,touches:()=>K.t,union:()=>K.u,within:()=>K.w}),t(4918),t(15994);var K=t(7006)},99746:(_e,q,t)=>{t.d(q,{Z:()=>S});var I,_=t(17626),C=t(86810),K=t(62208),L=t(77712),U=(t(90912),t(85931),t(76898)),X=t(28347),H=t(43703),Z=t(48977),B=t(78451),W=t(84161),g=t(28093),F=t(72642),A=t(55915),v=t(81863),D=t(89586),o=t(60479),n=t(79800),h=t(9554);let M=I=class extends C.wq{constructor(R){super(R),this.origin=(0,g.c)(),this.translation=(0,g.c)(),this.rotation=(0,D.Ue)(),this.scale=(0,g.f)(1,1,1),this.geographic=!0}get localMatrix(){const R=(0,H.c)();return(0,Z.s)(w,(0,D.ZZ)(this.rotation),(0,D.WH)(this.rotation)),(0,X.g)(R,w,this.translation,this.scale),R}get localMatrixInverse(){return(0,X.a)((0,H.c)(),this.localMatrix)}applyLocal(R,P){return(0,W.m)(P,R,this.localMatrix)}applyLocalInverse(R,P){return(0,W.m)(P,R,this.localMatrixInverse)}project(R,P){const T=new Float64Array(R.length),J=o.fP.fromTypedArray(T),Q=o.fP.fromTypedArray(R);if(this.geographic){const k=(0,v.rS)(P),$=(0,H.c)();return(0,A.Bm)(P,this.origin,$,k),(0,X.m)($,$,this.localMatrix),(0,n.t)(J,Q,$),(0,A.CM)(T,k,0,T,P,0,T.length/3),T}const{localMatrix:te,origin:N}=this;(0,X.h)(te,H.I)?(0,h.c)(J,Q):(0,n.t)(J,Q,te);for(let k=0;k<T.length;k+=3)T[k+0]+=N[0],T[k+1]+=N[1],T[k+2]+=N[2];return T}getOriginPoint(R){const[P,T,J]=this.origin;return new F.Z({x:P,y:T,z:J,spatialReference:R})}equals(R){return(0,K.pC)(R)&&this.geographic===R.geographic&&(0,W.k)(this.origin,R.origin)&&(0,X.j)(this.localMatrix,R.localMatrix)}clone(){const R={origin:(0,g.a)(this.origin),translation:(0,g.a)(this.translation),rotation:(0,D.Ue)(this.rotation),scale:(0,g.a)(this.scale),geographic:this.geographic};return new I(R)}};(0,_._)([(0,L.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],M.prototype,"origin",void 0),(0,_._)([(0,L.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],M.prototype,"translation",void 0),(0,_._)([(0,L.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],M.prototype,"rotation",void 0),(0,_._)([(0,L.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],M.prototype,"scale",void 0),(0,_._)([(0,L.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],M.prototype,"geographic",void 0),(0,_._)([(0,L.Cb)()],M.prototype,"localMatrix",null),(0,_._)([(0,L.Cb)()],M.prototype,"localMatrixInverse",null),M=I=(0,_._)([(0,U.j)("esri.geometry.support.MeshTransform")],M);const w=(0,B.a)(),S=M},92545:(_e,q,t)=>{function _(C,K){return C.isGeographic||C.isWebMercator&&(K?.geographic??!0)}t.d(q,{h:()=>_})},60853:(_e,q,t)=>{t.d(q,{FF:()=>D,I5:()=>A,Yq:()=>o,iv:()=>F,w1:()=>v});var _=t(62208),C=t(16730),K=t(550),L=t(28347),V=t(43703),G=t(30217),U=t(55915),X=t(81863),H=t(99746),Z=t(60479),B=t(79800),W=t(92545),g=t(65231);function F(z,ee,re){return(0,W.h)(ee.spatialReference,re)?function h(z,ee,re){const se=ee.spatialReference,le=P(ee,re,N),ae=new Float64Array(z.position.length),ce=function I(z,ee,re,se){(0,B.t)(Z.fP.fromTypedArray(se),Z.fP.fromTypedArray(z),ee);const le=new Float64Array(z.length);return(0,g.To)(se,le,re)}(z.position,le,se,ae),de=(0,G.b)($,le);return{position:ce,normal:M(ce,ae,z.normal,de,se),tangent:w(ce,ae,z.tangent,de,se)}}(z,ee,re):function n(z,ee,re){const se=new Float64Array(z.position.length),le=z.position,ae=ee.x,ce=ee.y,de=ee.z||0,{horizontal:ne,vertical:oe}=te(re?re.unit:null,ee.spatialReference);for(let ie=0;ie<le.length;ie+=3)se[ie+0]=le[ie+0]*ne+ae,se[ie+1]=le[ie+1]*ne+ce,se[ie+2]=le[ie+2]*oe+de;return{position:se,normal:z.normal,tangent:z.tangent}}(z,ee,re)}function A(z,ee,re){const{position:se,normal:le,tangent:ae}=z;if((0,_.Wi)(ee))return{position:se,normal:le,tangent:ae};const ce=ee.localMatrix;return F({position:(0,g.zZ)(se,new Float64Array(se.length),ce),normal:(0,_.pC)(le)?(0,g.w9)(le,new Float32Array(le.length),ce):null,tangent:(0,_.pC)(ae)?(0,g.VS)(ae,new Float32Array(ae.length),ce):null},ee.getOriginPoint(re),{geographic:ee.geographic})}function v(z,ee,re){if(re?.useTransform){const{position:se,normal:le,tangent:ae}=z;return{vertexAttributes:{position:se,normal:le,tangent:ae},transform:new H.Z({origin:[ee.x,ee.y,ee.z??0],geographic:(0,W.h)(ee.spatialReference,re)})}}return{vertexAttributes:F(z,ee,re),transform:null}}function D(z,ee,re){return(0,W.h)(ee.spatialReference,re)?function R(z,ee,re){const se=ee.spatialReference;P(ee,re,N);const le=(0,L.a)(k,N),ae=new Float64Array(z.position.length),ce=function T(z,ee,re,se){const le=(0,g.XO)(z,ee,se),ae=Z.fP.fromTypedArray(le),ce=new Float64Array(le.length),de=Z.fP.fromTypedArray(ce);return(0,B.t)(de,ae,re),ce}(z.position,se,le,ae),de=(0,G.b)($,le);return{position:ce,normal:J(z.normal,z.position,ae,se,de),tangent:Q(z.tangent,z.position,ae,se,de)}}(z,ee,re):S(z,ee,re)}function o(z,ee,re,se){if((0,_.Wi)(ee))return D(z,re,se);const le=A(z,ee,re.spatialReference);return re.equals(ee.getOriginPoint(re.spatialReference))?S(le,re,se):D(le,re,se)}function M(z,ee,re,se,le){if((0,_.Wi)(re))return null;const ae=new Float32Array(re.length);return(0,B.a)(Z.ct.fromTypedArray(ae),Z.ct.fromTypedArray(re),se),(0,g.Yk)(ae,z,ee,le,ae),ae}function w(z,ee,re,se,le){if((0,_.Wi)(re))return null;const ae=new Float32Array(re.length);(0,B.a)(Z.ct.fromTypedArray(ae,4*Float32Array.BYTES_PER_ELEMENT),Z.ct.fromTypedArray(re,4*Float32Array.BYTES_PER_ELEMENT),se);for(let ce=3;ce<ae.length;ce+=4)ae[ce]=re[ce];return(0,g.M2)(ae,z,ee,le,ae),ae}function S(z,ee,re){const se=new Float64Array(z.position.length),le=z.position,ae=ee.x,ce=ee.y,de=ee.z||0,{horizontal:ne,vertical:oe}=te(re?re.unit:null,ee.spatialReference);for(let ie=0;ie<le.length;ie+=3)se[ie+0]=(le[ie+0]-ae)/ne,se[ie+1]=(le[ie+1]-ce)/ne,se[ie+2]=(le[ie+2]-de)/oe;return{position:se,normal:z.normal,tangent:z.tangent}}function P(z,ee,re){(0,U.Bm)(z.spatialReference,[z.x,z.y,z.z||0],re,(0,X.rS)(z.spatialReference));const{horizontal:se,vertical:le}=te(ee?ee.unit:null,z.spatialReference);return(0,L.k)(re,re,[se,se,le]),re}function J(z,ee,re,se,le){if((0,_.Wi)(z))return null;const ae=(0,g.Iz)(z,ee,re,se,new Float32Array(z.length)),ce=Z.ct.fromTypedArray(ae);return(0,B.a)(ce,ce,le),ae}function Q(z,ee,re,se,le){if((0,_.Wi)(z))return null;const ae=(0,g.wi)(z,ee,re,se,new Float32Array(z.length)),ce=Z.ct.fromTypedArray(ae,4*Float32Array.BYTES_PER_ELEMENT);return(0,B.a)(ce,ce,le),ae}function te(z,ee){if((0,_.Wi)(z))return Y;const re=ee.isGeographic?1:(0,C.c9)(ee),se=ee.isGeographic?1:(0,C._R)(ee),le=(0,C.En)(1,z,"meters");return{horizontal:le*re,vertical:le*se}}const N=(0,V.c)(),k=(0,V.c)(),$=(0,K.c)(),Y={horizontal:1,vertical:1}},28678:(_e,q,t)=>{t.r(q),t.d(q,{default:()=>te});var J,_=t(15861),C=t(17626),L=(t(29132),t(84792)),V=t(26584),G=t(99959),U=t(77275),X=t(21726),H=t(77712),W=(t(90912),t(85931),t(68653)),g=t(76898),F=t(99433),A=t(44917),v=t(552),D=t(49286),o=t(6647),n=t(30346),h=t(99555),I=t(12585),M=t(72258),w=t(2584),S=t(91309),R=t(2004),P=t(65234),T=t(72642);let Q=J=class extends((0,v.h)((0,n.Q)((0,h.M)((0,D.q)((0,o.I)((0,G.R)(A.Z))))))){constructor(...N){super(...N),this.copyright="",this.fullExtent=new R.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,P.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=P.Z.WebMercator,this.subDomains=null,this.tileInfo=new w.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new T.Z({x:-20037508.342787,y:20037508.342787,spatialReference:P.Z.WebMercator}),spatialReference:P.Z.WebMercator,lods:[new M.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new M.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new M.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new M.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new M.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new M.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new M.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new M.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new M.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new M.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new M.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new M.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new M.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new M.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new M.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new M.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new M.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new M.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new M.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new M.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new M.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new M.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new M.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new M.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(N,k){return"string"==typeof N?{urlTemplate:N,...k}:N}load(N){const k=this.loadFromPortal({supportedTypes:["WMTS"]},N).then(()=>{let $="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const Y=new X.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&Y.authority?.includes("{subDomain}")&&($="is missing 'subDomains' property")}else $="spatialReference must match tileInfo.spatialReference";else $="is missing the required 'urlTemplate' property value";if($)throw new V.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${$}`)});return this.addResolvingPromise(k),Promise.resolve(this)}get levelValues(){const N=[];if(!this.tileInfo)return null;for(const k of this.tileInfo.lods)N[k.level]=k.levelValue||k.level;return N}readSpatialReference(N,k){return N||k.fullExtent&&k.fullExtent.spatialReference&&P.Z.fromJSON(k.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const N=[],{urlTemplate:k,subDomains:$}=this,Y=new X.R9(k),z=Y.scheme?Y.scheme+"://":"//",ee=z+Y.authority+"/",re=Y.authority;if(re?.includes("{subDomain}")){if($&&$.length>0&&re.split(".").length>1)for(const se of $)N.push(z+re.replace(/\{subDomain\}/gi,se)+"/")}else N.push(ee);return N.map(se=>("/"!==se.charAt(se.length-1)&&(se+="/"),se))}get urlPath(){if(!this.urlTemplate)return null;const N=this.urlTemplate,k=new X.R9(N);return N.substring(((k.scheme?k.scheme+"://":"//")+k.authority+"/").length)}readUrlTemplate(N,k){return N||k.templateUrl}writeUrlTemplate(N,k){N&&(0,X.oC)(N)&&(N="https:"+N),N&&(N=N.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),N=(0,X.Fv)(N)),k.templateUrl=N}fetchTile(N,k,$,Y={}){const{signal:z}=Y,ee=this.getTileUrl(N,k,$),re={responseType:"image",signal:z,query:{...this.refreshParameters}};return(0,L.default)(ee,re).then(se=>se.data)}fetchImageBitmapTile(N,k,$,Y={}){var z=this;return(0,_.Z)(function*(){const{signal:ee}=Y;if(z.fetchTile!==J.prototype.fetchTile){const ae=yield z.fetchTile(N,k,$,Y);try{return createImageBitmap(ae)}catch(ce){throw new V.Z("request:server",`Unable to load tile ${N}/${k}/${$}`,{error:ce,level:N,row:k,col:$})}}const re=z.getTileUrl(N,k,$),se={responseType:"blob",signal:ee,query:{...z.refreshParameters}},{data:le}=yield(0,L.default)(re,se);return(0,I.g)(le,re)})()}getTileUrl(N,k,$){const{levelValues:Y,tileServers:z,urlPath:ee}=this;if(!Y||!z||!ee)return"";const re=Y[N];return z[k%z.length]+(0,U.gx)(ee,{level:re,z:re,col:$,x:$,row:k,y:k})}};(0,C._)([(0,H.Cb)({type:String,value:"",json:{write:!0}})],Q.prototype,"copyright",void 0),(0,C._)([(0,H.Cb)({type:R.Z,json:{write:!0},nonNullable:!0})],Q.prototype,"fullExtent",void 0),(0,C._)([(0,H.Cb)({readOnly:!0,json:{read:!1,write:!1}})],Q.prototype,"legendEnabled",void 0),(0,C._)([(0,H.Cb)({type:["show","hide"]})],Q.prototype,"listMode",void 0),(0,C._)([(0,H.Cb)({json:{read:!0,write:!0}})],Q.prototype,"blendMode",void 0),(0,C._)([(0,H.Cb)()],Q.prototype,"levelValues",null),(0,C._)([(0,H.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Q.prototype,"isReference",void 0),(0,C._)([(0,H.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],Q.prototype,"operationalLayerType",void 0),(0,C._)([(0,H.Cb)({readOnly:!0,json:{read:!1,write:!1}})],Q.prototype,"popupEnabled",void 0),(0,C._)([(0,H.Cb)({type:P.Z})],Q.prototype,"spatialReference",void 0),(0,C._)([(0,W.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],Q.prototype,"readSpatialReference",null),(0,C._)([(0,H.Cb)({type:[String],json:{write:!0}})],Q.prototype,"subDomains",void 0),(0,C._)([(0,H.Cb)({type:w.Z,json:{write:!0}})],Q.prototype,"tileInfo",void 0),(0,C._)([(0,H.Cb)({readOnly:!0})],Q.prototype,"tileServers",null),(0,C._)([(0,H.Cb)({json:{read:!1}})],Q.prototype,"type",void 0),(0,C._)([(0,H.Cb)()],Q.prototype,"urlPath",null),(0,C._)([(0,H.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],Q.prototype,"urlTemplate",void 0),(0,C._)([(0,W.r)("urlTemplate",["urlTemplate","templateUrl"])],Q.prototype,"readUrlTemplate",null),(0,C._)([(0,F.c)("urlTemplate",{templateUrl:{type:String}})],Q.prototype,"writeUrlTemplate",null),(0,C._)([(0,H.Cb)({type:S.B,json:{write:!0}})],Q.prototype,"wmtsInfo",void 0),Q=J=(0,C._)([(0,g.j)("esri.layers.WebTileLayer")],Q);const te=Q},20925:(_e,q,t)=>{t.d(q,{Z:()=>v});var B,_=t(17626),C=t(46160),K=t(47877),L=t(14889),V=t(77712),X=(t(90912),t(85931),t(76898)),H=t(49410),Z=t(11136);const W={type:C.Z,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:g}}},read:!1}};function g(D,o,n){if(D&&Array.isArray(D))return new C.Z(D.map(h=>{const I=function A(D){return"group"===D.layerType?F:H.Z}(h);if(I){const M=new I;return M.read(h,n),M}return n&&n.messages&&h&&n.messages.push(new L.Z("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(h.type||"unknown")+"' are not supported",{definition:h,context:n})),null}))}let F=B=class extends Z.Z{constructor(D){super(D),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,K.w)(this,D=>B.forEachSublayer(this.sublayers,o=>{"building-group"!==o.type&&D(o)}))}};var D;(0,_._)([(0,V.Cb)({type:["hide","show","hide-children"],json:{write:!0}})],F.prototype,"listMode",void 0),(0,_._)([(0,V.Cb)(W)],F.prototype,"sublayers",void 0),F=B=(0,_._)([(0,X.j)("esri.layers.buildingSublayers.BuildingGroupSublayer")],F),(D=F||(F={})).sublayersProperty=W,D.readSublayers=g,D.forEachSublayer=function o(n,h){n.forEach(I=>{h(I),"building-group"===I.type&&o(I.sublayers,h)})};const v=F},47519:(_e,q,t)=>{var _,C;t.d(q,{i:()=>_}),(C=_||(_={}))[C.PROJECT_VERTICES=1]="PROJECT_VERTICES"},1476:(_e,q,t)=>{t.d(q,{S:()=>C,X:()=>_});const _=1;function C(K,L){let V=0;for(const G of L){const U=G.attributes?.[K];"number"==typeof U&&isFinite(U)&&(V=Math.max(V,U))}return V}},35775:(_e,q,t)=>{t.d(q,{O0:()=>B,av:()=>U,b:()=>D,d1:()=>H,og:()=>F});var _=t(15861),C=t(62208),K=t(37053),L=t(36630);class V{constructor(){this.code=null,this.description=null}}class G{constructor(h){this.error=new V,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=h}}function U(n){return new G(n)}class X{constructor(h){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=h}}function H(n){return new X(n)}const Z=new Set;function B(n,h,I,M=!1,w){Z.clear();for(const S in I){const R=n.get(S);if(!R)continue;const P=I[S],T=W(R,P);if(T!==P&&w&&w.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:R,originalValue:P,sanitizedValue:T}}),Z.add(R.name),R&&(M||R.editable)){const J=(0,L.Qc)(R,T);if(J)return U((0,L.vP)(J,R,T));h[R.name]=T}}for(const S of n?.requiredFields??[])if(!Z.has(S.name))return U(`missing required field "${S.name}"`);return null}function W(n,h){let I=h;return"string"==typeof h&&(0,L.H7)(n)?I=parseFloat(h):null!=h&&(0,L.qN)(n)&&"string"!=typeof h&&(I=String(h)),(0,L.Pz)(I)}let g;function F(n,h){if(!n||!(0,K.JY)(h))return n;if("rings"in n||"paths"in n){if((0,C.Wi)(g))throw new TypeError("geometry engine not loaded");return g.simplify(h,n)}return n}function v(){return(v=(0,_.Z)(function*(){return(0,C.Wi)(g)&&(g=yield Promise.all([t.e(4918),t.e(8592)]).then(t.bind(t,32825))),g})).apply(this,arguments)}function D(n,h){return o.apply(this,arguments)}function o(){return o=(0,_.Z)(function*(n,h){!(0,K.JY)(n)||"esriGeometryPolygon"!==h&&"esriGeometryPolyline"!==h||(yield function A(){return v.apply(this,arguments)}())}),o.apply(this,arguments)}},5143:(_e,q,t)=>{t.d(q,{Z:()=>B});var _=t(17626),K=(t(29132),t(77712)),G=(t(90912),t(85931),t(68653)),U=t(76898),X=t(51026),H=t(28930),Z=t(65234);const B=W=>{let g=class extends W{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(F,A){return null!=A.minLOD&&null!=A.maxLOD?F:0}readMaxScale(F,A){return null!=A.minLOD&&null!=A.maxLOD?F:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(F,A){return A.capabilities&&A.capabilities.includes("Tilemap")?new H.y({layer:this}):null}};return(0,_._)([(0,K.Cb)({json:{read:{source:"copyrightText"}}})],g.prototype,"copyright",void 0),(0,_._)([(0,K.Cb)()],g.prototype,"minScale",void 0),(0,_._)([(0,G.r)("service","minScale")],g.prototype,"readMinScale",null),(0,_._)([(0,K.Cb)()],g.prototype,"maxScale",void 0),(0,_._)([(0,G.r)("service","maxScale")],g.prototype,"readMaxScale",null),(0,_._)([(0,K.Cb)({type:Z.Z})],g.prototype,"spatialReference",void 0),(0,_._)([(0,K.Cb)({readOnly:!0})],g.prototype,"supportsBlankTile",null),(0,_._)([(0,K.Cb)(X.h)],g.prototype,"tileInfo",void 0),(0,_._)([(0,K.Cb)()],g.prototype,"tilemapCache",void 0),(0,_._)([(0,G.r)("service","tilemapCache",["capabilities"])],g.prototype,"readTilemapCache",null),(0,_._)([(0,K.Cb)()],g.prototype,"version",void 0),g=(0,_._)([(0,U.j)("esri.layers.mixins.ArcGISCachedService")],g),g}},22825:(_e,q,t)=>{t.d(q,{A:()=>C});const _=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function C(K){return null!=K&&_.some(([L,V])=>K>=L&&K<=V)}},51920:(_e,q,t)=>{t.d(q,{j:()=>H});var _=t(17626),C=t(14517),K=t(80542),L=t(77712),U=(t(90912),t(85931),t(76898));const X={visible:"visibleSublayers"};let H=class extends((0,K.p)(C.Z)){constructor(Z){super(Z),this.scale=0}set layer(Z){this._get("layer")!==Z&&(this._set("layer",Z),this.handles.remove("layer"),Z&&this.handles.add([Z.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),Z.on("wms-sublayer-update",B=>this.notifyChange(X[B.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:Z})=>Z).map(({name:Z})=>Z).join()}get version(){this.commitProperty("layers");const Z=this.layer;return Z&&Z.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:Z,scale:B}=this,W=Z?.sublayers,g=[],F=A=>{const{minScale:v,maxScale:D,sublayers:o,visible:n}=A;n&&(0===B||(0===v||B<=v)&&(0===D||B>=D))&&(o?o.forEach(F):g.push(A))};return W?.forEach(F),g}toJSON(){const{layer:Z,layers:B}=this,{imageFormat:W,imageTransparency:g,version:F}=Z;return{format:W,request:"GetMap",service:"WMS",styles:"",transparent:g?"TRUE":"FALSE",version:F,layers:B}}};(0,_._)([(0,L.Cb)()],H.prototype,"layer",null),(0,_._)([(0,L.Cb)({readOnly:!0})],H.prototype,"layers",null),(0,_._)([(0,L.Cb)({type:Number})],H.prototype,"scale",void 0),(0,_._)([(0,L.Cb)({readOnly:!0})],H.prototype,"version",null),(0,_._)([(0,L.Cb)({readOnly:!0})],H.prototype,"visibleSublayers",null),H=(0,_._)([(0,U.j)("esri.layers.support.ExportWMSImageParameters")],H)},74711:(_e,q,t)=>{t.d(q,{W:()=>H});var _=t(15861),C=t(24263),K=t(84792),L=t(62208),V=t(10699),G=t(80415),U=t(84687),X=t(55463);class H{constructor(B,W,g,F){this._parsedUrl=B,this._portalItem=W,this._apiKey=g,this.signal=F,this._rootDocument=null;const A=this._parsedUrl?.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);A&&(this._urlParts={root:A[1],layerId:parseInt(A[2],10)})}fetch(){var B=this;return(0,_.Z)(function*(){if(!B._urlParts)return null;const W=B._portalItem??(yield B._portalItemFromServiceItemId());if((0,L.Wi)(W))return B._loadFromUrl();const g=yield B._findAndLoadRelatedPortalItem(W);return(0,L.Wi)(g)?null:B._loadFeatureLayerFromPortalItem(g)})()}fetchPortalItem(){var B=this;return(0,_.Z)(function*(){if(!B._urlParts)return null;const W=B._portalItem??(yield B._portalItemFromServiceItemId());return(0,L.Wi)(W)?null:B._findAndLoadRelatedPortalItem(W)})()}_fetchRootDocument(){var B=this;return(0,_.Z)(function*(){if((0,L.pC)(B._rootDocument))return B._rootDocument;if((0,L.Wi)(B._urlParts))return B._rootDocument={},{};const W={query:{f:"json",token:B._apiKey},responseType:"json",signal:B.signal},g=`${B._urlParts.root}/SceneServer`;try{const F=yield(0,K.default)(g,W);B._rootDocument=F.data}catch{B._rootDocument={}}return B._rootDocument})()}_fetchServiceOwningPortalUrl(){var B=this;return(0,_.Z)(function*(){const W=B._parsedUrl?.path,g=W?C.id?.findServerInfo(W):null;if(g?.owningSystemUrl)return g.owningSystemUrl;const F=W?W.replace(/(.*\/rest)\/.*/i,"$1")+"/info":null;try{const A=(yield(0,K.default)(F,{query:{f:"json"},responseType:"json",signal:B.signal})).data.owningSystemUrl;if(A)return A}catch(A){(0,V.r9)(A)}return null})()}_findAndLoadRelatedPortalItem(B){var W=this;return(0,_.Z)(function*(){try{return(yield B.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:W.signal})).find(g=>"Feature Service"===g.type)||null}catch(g){return(0,V.r9)(g),null}})()}_loadFeatureLayerFromPortalItem(B){var W=this;return(0,_.Z)(function*(){yield B.load({signal:W.signal});const g=yield W._findMatchingAssociatedSublayerUrl(B.url??"");return new G.default({url:g,portalItem:B}).load({signal:W.signal})})()}_loadFromUrl(){var B=this;return(0,_.Z)(function*(){const W=yield B._findMatchingAssociatedSublayerUrl(`${B._urlParts?.root}/FeatureServer`);return new G.default({url:W}).load({signal:B.signal})})()}_findMatchingAssociatedSublayerUrl(B){var W=this;return(0,_.Z)(function*(){const g=B.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),F={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:W.signal},A=W._urlParts?.layerId,v=W._fetchRootDocument(),D=(0,K.default)(g,F),[o,n]=yield Promise.all([D,v]),h=n&&n.layers,I=o.data&&o.data.layers;if(!Array.isArray(I))throw new Error("expected layers array");if(Array.isArray(h)){for(let M=0;M<Math.min(h.length,I.length);M++)if(h[M].id===A)return`${g}/${I[M].id}`}else if(null!=A&&A<I.length)return`${g}/${I[A].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var B=this;return(0,_.Z)(function*(){const W=(yield B._fetchRootDocument()).serviceItemId;if(!W)return null;const g=new X.default({id:W,apiKey:B._apiKey}),F=yield B._fetchServiceOwningPortalUrl();(0,L.pC)(F)&&(g.portal=new U.Z({url:F}));try{return g.load({signal:B.signal})}catch(A){return(0,V.r9)(A),null}})()}}},17732:(_e,q,t)=>{t.d(q,{L:()=>W});var _=t(17626),C=t(14517),K=t(62208),L=t(77712),U=(t(90912),t(85931),t(76898)),X=t(37118),H=t(55915),Z=t(65401),B=t(65629);let W=class extends C.Z{constructor(g){super(g)}get bounds(){const g=this.coords;return(0,K.Wi)(g)||(0,K.Wi)(g.extent)?null:(0,Z.oJ)(g.extent)}get coords(){const g=(0,K.Wg)(this.element.georeference)?.coords;return(0,H.dz)(g,this.spatialReference).geometry}get normalizedCoords(){return X.Z.fromJSON((0,B.Ui)(this.coords))}get normalizedBounds(){const g=(0,K.pC)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,K.pC)(g)?(0,Z.oJ)(g):null}};(0,_._)([(0,L.Cb)()],W.prototype,"spatialReference",void 0),(0,_._)([(0,L.Cb)()],W.prototype,"element",void 0),(0,_._)([(0,L.Cb)()],W.prototype,"bounds",null),(0,_._)([(0,L.Cb)()],W.prototype,"coords",null),(0,_._)([(0,L.Cb)()],W.prototype,"normalizedCoords",null),(0,_._)([(0,L.Cb)()],W.prototype,"normalizedBounds",null),W=(0,_._)([(0,U.j)("esri.layers.support.MediaElementView")],W)},28930:(_e,q,t)=>{t.d(q,{y:()=>R});var S,_=t(15861),C=t(17626),K=t(84792),L=t(14517),V=t(27306),G=t(26584),U=t(80542),X=t(63290),H=t(93961),Z=t(77029),B=t(10699),W=t(32917),g=t(50618),F=t(21726),A=t(77712),v=t(66656),D=t(85931),o=t(76898),n=t(68511),h=t(58817);class I{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(T,J){if("unknown"!==this._allAvailability)return this._allAvailability;const Q=(T-this.location.top)*this.location.width+(J-this.location.left),N=Q>>3,k=this._tileAvailabilityBitSet;return N<0||N>k.length?"unknown":k[N]&1<<Q%8?"available":"unavailable"}_updateFromData(T){let te=!0,N=!0;const k=Math.ceil(this.location.width*this.location.height/8),$=new Uint8Array(k);let Y=0;for(let z=0;z<T.length;z++){const ee=z%8;T[z]?(N=!1,$[Y]|=1<<ee):te=!1,7===ee&&++Y}N?this._allAvailability="unavailable":te?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=$,this.byteSize+=$.length)}static fromDefinition(T,J){const Q=T.service.request||K.default,{row:te,col:N,width:k,height:$}=T,Y={query:{f:"json"}};return J=J?{...Y,...J}:Y,Q(function w(P){let T;if("vector-tile"===P.service.type)T=`${P.service.url}/tilemap/${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`;else{const Q=P.service.tileServers;T=`${Q&&Q.length?Q[P.row%Q.length]:P.service.url}/tilemap/${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`}const J=P.service.query;return J&&(T=`${T}?${J}`),T}(T),J).then(z=>z.data).catch(z=>{if(z&&z.details&&422===z.details.httpStatus)return{location:{top:te,left:N,width:k,height:$},valid:!0,data:(0,D.a9)(k*$,0)};throw z}).then(z=>{if(z.location&&(z.location.top!==te||z.location.left!==N||z.location.width!==k||z.location.height!==$))throw new G.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:z,definition:{top:te,left:N,width:k,height:$}});return I.fromJSON(z)})}static fromJSON(T){I._validateJSON(T);const J=new I;return J.location=Object.freeze((0,h.d9)(T.location)),J._updateFromData(T.data),Object.freeze(J)}static _validateJSON(T){if(!T||!T.location)throw new G.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===T.valid)throw new G.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!T.data)throw new G.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(T.data))throw new G.Z("tilemap:data-mismatch","Data must be an array of numbers");if(T.data.length!==T.location.width*T.location.height)throw new G.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function M(P){return`${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`}let R=S=class extends((0,U.p)(L.Z)){constructor(P){super(P),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*V.Y8.MEGABYTES,this.request=K.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new H.Z(this.cacheByteSize),this.addHandles([(0,W.YP)(()=>{const{layer:P}=this;return[P?.parsedUrl,P?.tileServers,P?.apiKey,P?.customParameters]},()=>this._initializeTilemapDefinition()),(0,W.YP)(()=>this.layer?.tileInfo?.lods,P=>this._initializeAvailableLevels(P),W.tX)]),this._initializeTilemapDefinition()}castLevels(P){return P<=2?(X.Z.getLogger(this.declaredClass).error("Minimum levels for Tilemap is 3, but got ",P),3):P}get size(){return 1<<this.levels}fetchTilemap(P,T,J,Q){if(!this._availableLevels[P])return Promise.reject(new G.Z("tilemap-cache:level-unavailable",`Level ${P} is unavailable in the service`));const te=this._tmpTilemapDefinition,N=this._tilemapFromCache(P,T,J,te);if(N)return Promise.resolve(N);const k=Q&&Q.signal;return Q={...Q,signal:null},new Promise(($,Y)=>{(0,B.fu)(k,()=>Y((0,B.zE)()));const z=M(te);let ee=this._pendingTilemapRequests[z];if(!ee){ee=I.fromDefinition(te,Q).then(se=>(this._tilemapCache.put(z,se,se.byteSize),se));const re=()=>delete this._pendingTilemapRequests[z];this._pendingTilemapRequests[z]=ee,ee.then(re,re)}ee.then($,Y)})}getAvailability(P,T,J){if(!this._availableLevels[P])return"unavailable";const Q=this._tilemapFromCache(P,T,J,this._tmpTilemapDefinition);return Q?Q.getAvailability(T,J):"unknown"}fetchAvailability(P,T,J,Q){return this._availableLevels[P]?this.fetchTilemap(P,T,J,Q).catch(te=>te).then(te=>{if(te instanceof I){const N=te.getAvailability(T,J);if("unavailable"===N)throw new G.Z("tile-map:tile-unavailable","Tile is not available",{level:P,row:T,col:J});return N}if((0,B.D_)(te))throw te;return"unknown"}):Promise.reject(new G.Z("tilemap-cache:level-unavailable",`Level ${P} is unavailable in the service`))}fetchAvailabilityUpsample(P,T,J,Q,te){Q.level=P,Q.row=T,Q.col=J;const N=this.layer.tileInfo;N.updateTileInfo(Q);const k=this.fetchAvailability(P,T,J,te).catch($=>{if((0,B.D_)($))throw $;if(N.upsampleTile(Q))return this.fetchAvailabilityUpsample(Q.level,Q.row,Q.col,Q);throw $});return this._fetchAvailabilityUpsamplePrefetch(Q.id,P,T,J,te,k),k}_fetchAvailabilityUpsamplePrefetch(P,T,J,Q,te,N){var k=this;return(0,_.Z)(function*(){if(!k._prefetchingEnabled||null==P)return;const $=`prefetch-${P}`;if(k.handles.has($))return;const Y=new AbortController;N.then(()=>Y.abort(),()=>Y.abort());let z=!1;if(k.handles.add({remove(){z||(z=!0,Y.abort())}},$),yield(0,g.MU)(10,Y.signal).catch(()=>{}),z||(z=!0,k.handles.remove($)),(0,B.Hc)(Y))return;const re=new n.f(P,T,J,Q),se={...te,signal:Y.signal},le=k.layer.tileInfo;for(let ae=0;S._prefetches.length<S._maxPrefetch&&le.upsampleTile(re);++ae){const ce=k.fetchAvailability(re.level,re.row,re.col,se);S._prefetches.push(ce);const de=()=>{S._prefetches.removeUnordered(ce)};ce.then(de,de)}})()}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:P,apiKey:T,customParameters:J}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:P.path,query:(0,F.B7)({...P.query,...J,token:T??P.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(P,T,J,Q){Q.level=P,Q.row=T-T%this.size,Q.col=J-J%this.size;const te=M(Q);return this._tilemapCache.get(te)}_initializeAvailableLevels(P){this._availableLevels={},P&&P.forEach(T=>this._availableLevels[T.level]=!0)}get test(){const P=this;return{get prefetchingEnabled(){return P._prefetchingEnabled},set prefetchingEnabled(T){P._prefetchingEnabled=T},hasTilemap:(T,J,Q)=>!!P._tilemapFromCache(T,J,Q,P._tmpTilemapDefinition)}}};R._maxPrefetch=4,R._prefetches=new Z.Z({initialSize:S._maxPrefetch}),(0,C._)([(0,A.Cb)({constructOnly:!0,type:Number})],R.prototype,"levels",void 0),(0,C._)([(0,v.p)("levels")],R.prototype,"castLevels",null),(0,C._)([(0,A.Cb)({readOnly:!0,type:Number})],R.prototype,"size",null),(0,C._)([(0,A.Cb)({constructOnly:!0,type:Number})],R.prototype,"cacheByteSize",void 0),(0,C._)([(0,A.Cb)({constructOnly:!0})],R.prototype,"layer",void 0),(0,C._)([(0,A.Cb)({constructOnly:!0})],R.prototype,"request",void 0),R=S=(0,C._)([(0,o.j)("esri.layers.support.TilemapCache")],R)},91309:(_e,q,t)=>{t.d(q,{B:()=>X});var U,_=t(17626),C=t(86810),K=t(58817),L=t(77712),G=(t(90912),t(76898));let X=U=class extends C.wq{constructor(H){super(H)}clone(){return new U({customLayerParameters:(0,K.d9)(this.customLayerParameters),customParameters:(0,K.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,_._)([(0,L.Cb)({json:{type:Object,write:!0}})],X.prototype,"customLayerParameters",void 0),(0,_._)([(0,L.Cb)({json:{type:Object,write:!0}})],X.prototype,"customParameters",void 0),(0,_._)([(0,L.Cb)({type:String,json:{write:!0}})],X.prototype,"layerIdentifier",void 0),(0,_._)([(0,L.Cb)({type:String,json:{write:!0}})],X.prototype,"tileMatrixSet",void 0),(0,_._)([(0,L.Cb)({type:String,json:{write:!0}})],X.prototype,"url",void 0),X=U=(0,_._)([(0,G.j)("esri.layer.support.WMTSLayerInfo")],X)},98686:(_e,q,t)=>{t.d(q,{CS:()=>A,Cw:()=>F,Yu:()=>h,j5:()=>v,lm:()=>M});var _=t(15861),C=t(59318),K=t(24263),L=t(73281),V=t(84792),G=t(58817),U=t(21726),X=t(65234),H=t(5548),Z=t(32442),B=t(33474),W=t(17253);const g={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function F(w){const S=w.folders||[],R=S.slice(),P=new Map,T=new Map,J=new Map,Q=new Map,te=new Map,N={esriGeometryPoint:T,esriGeometryPolyline:J,esriGeometryPolygon:Q};(w.featureCollection&&w.featureCollection.layers||[]).forEach($=>{const Y=(0,G.d9)($);Y.featureSet.features=[];const z=$.featureSet.geometryType;P.set(z,Y);const ee=$.layerDefinition.objectIdField;"esriGeometryPoint"===z?D(T,ee,$.featureSet.features):"esriGeometryPolyline"===z?D(J,ee,$.featureSet.features):"esriGeometryPolygon"===z&&D(Q,ee,$.featureSet.features)}),w.groundOverlays&&w.groundOverlays.forEach($=>{te.set($.id,$)}),S.forEach($=>{$.networkLinkIds.forEach(Y=>{const z=function n(w,S,R){const P=function o(w,S){let R;return S.some(P=>P.id===w&&(R=P,!0)),R}(w,R);return P&&(P.parentFolderId=S,P.networkLink=P),P}(Y,$.id,w.networkLinks);z&&R.push(z)})}),R.forEach($=>{if($.featureInfos){$.points=(0,G.d9)(P.get("esriGeometryPoint")),$.polylines=(0,G.d9)(P.get("esriGeometryPolyline")),$.polygons=(0,G.d9)(P.get("esriGeometryPolygon")),$.mapImages=[];for(const Y of $.featureInfos)switch(Y.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const z=N[Y.type].get(Y.id);z&&$[g[Y.type]].featureSet.features.push(z);break}case"GroundOverlay":{const z=te.get(Y.id);z&&$.mapImages.push(z);break}}$.fullExtent=M([$])}});const k=M(R);return{folders:S,sublayers:R,extent:k}}function A(w,S,R,P){const T=K.id&&K.id.findCredential(w);return w=(0,U.fl)(w,{token:T&&T.token}),(0,V.default)(C.Z.kmlServiceUrl,{query:{url:w,model:"simple",folders:"",refresh:0!==R||void 0,outSR:JSON.stringify(S)},responseType:"json",signal:P})}function v(w,S,R=null,P=[]){const T=[],J={},Q=S.sublayers,te=S.folders.map(N=>N.id);return Q.forEach(N=>{const k=new w;if(R?k.read(N,R):k.read(N),P.length&&te.includes(k.id)&&(k.visible=P.includes(k.id)),J[N.id]=k,null!=N.parentFolderId&&-1!==N.parentFolderId){const $=J[N.parentFolderId];$.sublayers||($.sublayers=[]),$.sublayers?.unshift(k)}else T.unshift(k)}),T}function D(w,S,R){R.forEach(P=>{w.set(P.attributes[S],P)})}function h(w){return I.apply(this,arguments)}function I(){return(I=(0,_.Z)(function*(w){const S=W.Z.fromJSON(w.featureSet).features,P=(0,B.i)(w.layerDefinition.drawingInfo.renderer),T=L.Z.fromJSON(w.popupInfo),J=[];for(const Q of S){const te=yield P.getSymbolAsync(Q);Q.symbol=te,Q.popupTemplate=T,Q.visible=!0,J.push(Q)}return J})).apply(this,arguments)}function M(w){const S=(0,H.Ue)(H.Gv),R=(0,H.Ue)(H.Gv);for(const P of w){if(P.polygons&&P.polygons.featureSet&&P.polygons.featureSet.features)for(const T of P.polygons.featureSet.features)(0,Z.Yg)(S,T.geometry),(0,H.TC)(R,S);if(P.polylines&&P.polylines.featureSet&&P.polylines.featureSet.features)for(const T of P.polylines.featureSet.features)(0,Z.Yg)(S,T.geometry),(0,H.TC)(R,S);if(P.points&&P.points.featureSet&&P.points.featureSet.features)for(const T of P.points.featureSet.features)(0,Z.Yg)(S,T.geometry),(0,H.TC)(R,S);if(P.mapImages)for(const T of P.mapImages)(0,Z.Yg)(S,T.extent),(0,H.TC)(R,S)}return(0,H.fS)(R,H.Gv)?void 0:{xmin:R[0],ymin:R[1],zmin:R[2],xmax:R[3],ymax:R[4],zmax:R[5],spatialReference:X.Z.WGS84}}},61068:(_e,q,t)=>{t.d(q,{OE:()=>W,Gc:()=>A,Qg:()=>g,Rq:()=>X,gX:()=>F,z2:()=>H,ET:()=>Z,Vx:()=>D}),t(29132);var C=t(62208),L=t(28594),V=t(72642);const G=new Map,U=new class K{constructor(n=15e3,h=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=n,this._interval=Math.min(n,h)}decreaseRefCount(n,h){const I=n+"/"+h,M=this._cachedBlocks;if(M.has(I)){const w=M.get(I);return w.refCount--,w.refCount<=0&&(M.delete(I),w.controller&&w.controller.abort()),w.refCount}return 0}getBlock(n,h){const I=n+"/"+h,M=this._cachedBlocks;if(M.has(I)){const w=M.get(I);return w.ts=Date.now(),w.refCount++,M.delete(I),M.set(I,w),w.block}return null}putBlock(n,h,I,M){const w=this._cachedBlocks,S=n+"/"+h;if(w.has(S)){const R=w.get(S);R.ts=Date.now(),R.refCount++}else w.set(S,{block:I,ts:Date.now(),refCount:1,controller:M});this._trim(),this._updateTimer()}deleteBlock(n,h){const I=this._cachedBlocks,M=n+"/"+h;I.has(M)&&I.delete(M)}updateMaxSize(n){this._size=n,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const n=this._cachedBlocks;this._timer=setInterval(()=>{const h=Array.from(n),I=Date.now();for(let M=0;M<h.length&&h[M][1].ts<=I-this._duration;M++)n.delete(h[M][0]);0===n.size&&this._clearTimer()},this._interval)}_trim(){const n=this._cachedBlocks;if(-1===this._size||this._size>=n.size)return;const h=Array.from(n);for(let I=0;I<h.length-this._size;I++)n.delete(h[I][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function X(o,n){return null==n?o:`${o}?sliceId=${n}`}function H(o,n){const h={extent:null,rasterInfo:n,cache:new Map},I=G.get(o);return I?(I.push(h),I.length-1):(G.set(o,[h]),0)}function Z(o,n){const h=G.get(o);h&&(h[n]=null,h.some(I=>null!=I)||G.delete(o))}function W(o,n,h){const I=G.get(o);if(!I)return null==n?U.decreaseRefCount(o,h):0;if(null==n||null==I[n])return U.decreaseRefCount(o,h);const M=I[n]?.cache,w=M?.get(h);if(M&&w){if(w.refCount--,0===w.refCount){M.delete(h);for(let S=0;S<I.length;S++)I[S]?.cache.delete(h);w.controller&&w.controller.abort()}return w.refCount}return 0}function g(o,n,h){const I=G.get(o);if(!I)return null==n?U.getBlock(o,h):null;if(null==n||null==I[n]){for(let w=0;w<I.length;w++){const S=I[w]?.cache.get(h);if(S)return S.refCount++,S.block}return U.getBlock(o,h)}const M=I[n]?.cache.get(h);if(M)return M.refCount++,M.block;for(let w=0;w<I.length;w++){if(w===n||!I[w])continue;const S=I[w]?.cache,R=S?.get(h);if(S&&R)return R.refCount++,S.set(h,R),R.block}return null}function F(o,n,h,I,M=null){const w=G.get(o);if(!w)return void(null==n&&U.putBlock(o,h,I,M));if(null==n||null==w[n])return void U.putBlock(o,h,I,M);const S={refCount:1,block:I,isResolved:!1,isRejected:!1,controller:M};I.then(()=>S.isResolved=!0).catch(()=>S.isRejected=!0),w[n]?.cache.set(h,S)}function A(o,n,h){const I=G.get(o);I?null!=n&&null!=I[n]?I[n]?.cache.delete(h):U.deleteBlock(o,h):null==n&&U.deleteBlock(o,h)}function D(o,n,h,I,M,w,S=null){const R=function v(o,n){const h=G.get(o);return h?h[n]??null:null}(o,n);if(!R)return;const P=R.extent,{cache:T,rasterInfo:J}=R;if(P&&P.xmin===h.xmin&&P.xmax===h.xmax&&P.ymin===h.ymin&&P.ymax===h.ymax)return;I=I??0;const Q=h.clone().normalize(),{spatialReference:te,transform:N}=J,k=new Set;for(let $=0;$<Q.length;$++){const Y=Q[$];if(Y.xmax-Y.xmin<=I||Y.ymax-Y.ymin<=I)continue;let z=(0,L.tB)(Y,te,S);(0,C.pC)(N)&&(z=N.inverseTransform(z));const ee=new V.Z({x:I,y:I,spatialReference:Y.spatialReference});if(null==M&&!(M=(0,L.VO)(ee,te,Y,S)))return;const{pyramidLevel:re,pyramidResolution:se,excessiveReading:le}=(0,L.kr)(M,J,w||"closest");if(le)return;const{storageInfo:ae}=J,{origin:ce}=ae,de={x:Math.max(0,Math.floor((z.xmin-ce.x)/se.x)),y:Math.max(0,Math.floor((ce.y-z.ymax)/se.y))},ne=Math.ceil((z.xmax-z.xmin)/se.x-.1),oe=Math.ceil((z.ymax-z.ymin)/se.y-.1),ie=re>0?ae.pyramidBlockWidth:ae.blockWidth,ue=re>0?ae.pyramidBlockHeight:ae.blockHeight,he=1,pe=Math.max(0,Math.floor(de.x/ie)-he),ye=Math.max(0,Math.floor(de.y/ue)-he),me=Math.floor((de.x+ne-1)/ie)+he,ge=Math.floor((de.y+oe-1)/ue)+he;for(let fe=ye;fe<=ge;fe++)for(let Ee=pe;Ee<=me;Ee++)k.add(`${re}/${fe}/${Ee}`)}T.forEach(($,Y)=>{if(!k.has(Y)){const z=T.get(Y);(null==z||z.isResolved||z.isRejected)&&T.delete(Y)}}),R.extent={xmin:h.xmin,ymin:h.ymin,xmax:h.xmax,ymax:h.ymax}}},51026:(_e,q,t)=>{t.d(q,{d:()=>K,h:()=>C});var _=t(2584);const C={type:_.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:K}}}}};function K(L,V,G,U){if(!L)return null;const{minScale:X,maxScale:H,minLOD:Z,maxLOD:B}=V;if(null!=Z&&null!=B)return _.Z.fromJSON(U&&U.ignoreMinMaxLOD?L:{...L,lods:L.lods.filter(({level:W})=>null!=W&&W>=Z&&W<=B)});if(0!==X&&0!==H){const W=A=>Math.round(1e4*A)/1e4,g=X?W(X):1/0,F=H?W(H):-1/0;return _.Z.fromJSON({...L,lods:L.lods.filter(A=>{const v=W(A.scale);return v<=g&&v>=F})})}return _.Z.fromJSON(L)}},72581:(_e,q,t)=>{t.d(q,{IJ:()=>B,m5:()=>A,vB:()=>D,w7:()=>g});var _=t(15861),C=t(84792),K=t(62208),L=t(21726),V=t(91179),G=t(93555),U=t(76391),X=t(61515);const H="Layer does not support extent calculation.";function Z(n,h){const I=n.geometry,M=n.toJSON(),w=M;if((0,K.pC)(I)&&(w.geometry=JSON.stringify(I),w.geometryType=(0,V.Ji)(I),w.inSR=I.spatialReference.wkid||JSON.stringify(I.spatialReference)),M.topFilter?.groupByFields&&(w.topFilter.groupByFields=M.topFilter.groupByFields.join(",")),M.topFilter?.orderByFields&&(w.topFilter.orderByFields=M.topFilter.orderByFields.join(",")),M.topFilter&&(w.topFilter=JSON.stringify(w.topFilter)),M.objectIds&&(w.objectIds=M.objectIds.join(",")),M.orderByFields&&(w.orderByFields=M.orderByFields.join(",")),M.outFields&&!(h?.returnCountOnly||h?.returnExtentOnly||h?.returnIdsOnly)?w.outFields=M.outFields.includes("*")?"*":M.outFields.join(","):delete w.outFields,M.outSR?w.outSR=M.outSR.wkid||JSON.stringify(M.outSR):I&&M.returnGeometry&&(w.outSR=w.inSR),M.returnGeometry&&delete M.returnGeometry,M.timeExtent){const S=M.timeExtent,{start:R,end:P}=S;null==R&&null==P||(w.time=R===P?R:`${R??"null"},${P??"null"}`),delete M.timeExtent}return w}function B(n,h,I,M){return W.apply(this,arguments)}function W(){return(W=(0,_.Z)(function*(n,h,I,M){const w=yield o(n,h,"json",M);return(0,X.p)(h,I,w.data),w})).apply(this,arguments)}function g(n,h,I){return F.apply(this,arguments)}function F(){return(F=(0,_.Z)(function*(n,h,I){return(0,K.pC)(h.timeExtent)&&h.timeExtent.isEmpty?{data:{objectIds:[]}}:o(n,h,"json",I,{returnIdsOnly:!0})})).apply(this,arguments)}function A(n,h,I){return v.apply(this,arguments)}function v(){return(v=(0,_.Z)(function*(n,h,I){return(0,K.pC)(h.timeExtent)&&h.timeExtent.isEmpty?{data:{count:0,extent:null}}:o(n,h,"json",I,{returnExtentOnly:!0,returnCountOnly:!0}).then(M=>{const w=M.data;if(w.hasOwnProperty("extent"))return M;if(w.features)throw new Error(H);if(w.hasOwnProperty("count"))throw new Error(H);return M})})).apply(this,arguments)}function D(n,h,I){return(0,K.pC)(h.timeExtent)&&h.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):o(n,h,"json",I,{returnIdsOnly:!0,returnCountOnly:!0})}function o(n,h,I,M={},w={}){const S="string"==typeof n?(0,L.mN)(n):n,R=h.geometry?[h.geometry]:[];return M.responseType="pbf"===I?"array-buffer":"json",(0,G.aX)(R,null,M).then(P=>{const T=P&&P[0];(0,K.pC)(T)&&((h=h.clone()).geometry=T);const J=(0,U.A)({...S.query,f:I,...w,...Z(h,w)});return(0,C.default)((0,L.v_)(S.path,"queryTopFeatures"),{...M,query:{...J,...M.query}})})}},47123:(_e,q,t)=>{t.d(q,{T:()=>v});var _=t(15861),C=t(10699),K=t(35133),L=t(28082),V=t(26268),G=t(62208),U=t(23841),X=t(16730),H=t(21254),Z=t(87526),B=t(17807),W=t(25575),g=t(31637);function F(D,o){const n=o.length;if(D<o[0].value||1===n)return o[0].size;for(let h=1;h<n;h++)if(D<o[h].value)return o[h-1].size+(D-o[h-1].value)/(o[h].value-o[h-1].value)*(o[h].size-o[h-1].size);return o[n-1].size}class A{constructor(){this.symbolLevels=[],this.vvColorValues=new Float32Array(8),this.vvColors=new Float32Array(32),this.vvOpacityValues=new Float32Array(8),this.vvOpacities=new Float32Array(8),this.vvSizeMinMaxValue=new Float32Array(4),this.outsideLabelsVisible=!1,this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",vvOpacityEnabled:!1},this._technique=B.v}getSizeVVFieldStops(o){const n=this._vvSizeFieldStops;if(n)switch(n.type){case"static":return n;case"level-dependent":return(0,G.Pt)(n.levels[o],()=>{let h=1/0,I=0;for(const R in n.levels){const P=parseFloat(R),T=Math.abs(o-P);T<h&&(h=T,I=P)}if(h===1/0)return{sizes:new Float32Array([0,0,0,0,0,0]),values:new Float32Array([0,0,0,0,0,0])};const M=2**((o-I)/2),w=(0,G.Wg)(n.levels[I]),S=new Float32Array(w.values);return S[2]*=M,S[3]*=M,{sizes:(0,G.Wg)(w.sizes),values:S}});default:return}}get vvMaterialParameters(){return this._vvMaterialParameters}update(o){(0,G.pC)(this._vvInfo)&&this._updateVisualVariables(this._vvInfo.vvRanges,o)}setInfo(o,n,h){this._updateEffects(h),this._vvInfo=n,this._technique=(0,W.EJ)(o),this.rendererSchema=this._technique.createOrUpdateRendererSchema(this.rendererSchema,o)}getVariation(){return{...this._technique.getVariation(this.rendererSchema),outsideLabelsVisible:this.outsideLabelsVisible,supportsTextureFloat:(0,g.hc)("2d").supportsTextureFloat}}getVariationHash(){return this._technique.getVariationHash(this.rendererSchema)<<1|(this.outsideLabelsVisible?1:0)}_updateEffects(o){this.outsideLabelsVisible=!!(0,G.pC)(o)&&o.excludedLabelsVisible}_updateVisualVariables(o,n){const h=this._vvMaterialParameters;if(h.vvOpacityEnabled=!1,h.vvSizeEnabled=!1,h.vvColorEnabled=!1,h.vvRotationEnabled=!1,!o)return;const I=o.size;if(I){if(h.vvSizeEnabled=!0,I.minMaxValue){const R=I.minMaxValue;let P,T;if((0,Z.$K)(R.minSize)&&(0,Z.$K)(R.maxSize))if((0,Z.hj)(R.minSize)&&(0,Z.hj)(R.maxSize))P=(0,U.F2)(R.minSize),T=(0,U.F2)(R.maxSize);else{const J=n.scale;P=(0,U.F2)(F(J,R.minSize.stops)),T=(0,U.F2)(F(J,R.maxSize.stops))}this.vvSizeMinMaxValue.set([R.minDataValue,R.maxDataValue,P,T])}if(I.scaleStops&&(this.vvSizeScaleStopsValue=(0,U.F2)(F(n.scale,I.scaleStops.stops))),I.unitValue){const R=(0,X.c9)(n.spatialReference)/H.a[I.unitValue.unit];this.vvSizeUnitValueToPixelsRatio=R/n.resolution}I.fieldStops&&(this._vvSizeFieldStops=I.fieldStops)}const M=o.color;M&&(h.vvColorEnabled=!0,this.vvColorValues.set(M.values),this.vvColors.set(M.colors));const w=o.opacity;w&&(h.vvOpacityEnabled=!0,this.vvOpacityValues.set(w.values),this.vvOpacities.set(w.opacities));const S=o.rotation;S&&(h.vvRotationEnabled=!0,h.vvRotationType=S.type)}}class v extends V.Z{constructor(o){super(o),this._rendererInfo=new A,this._materialItemsRequestQueue=new K.Z,this.attributeView=new L.H(()=>this.onAttributeStoreUpdate())}destroy(){this.children.forEach(o=>o.destroy()),this.removeAllChildren(),this.attributeView.destroy(),this._materialItemsRequestQueue.clear()}setRendererInfo(o,n,h){this._rendererInfo.setInfo(o,n,h),this.requestRender()}getMaterialItems(o,n){var h=this;return(0,_.Z)(function*(){if(!o||0===o.length)return[];const I=(0,C.hh)();return h._materialItemsRequestQueue.push({items:o,abortOptions:n,resolver:I}),h.requestRender(),I.promise})()}doRender(o){if(o.context.capabilities.enable("textureFloat"),o.context.capabilities.enable("vao"),this._materialItemsRequestQueue.length>0){let n=this._materialItemsRequestQueue.pop();for(;n;)this._processMaterialItemRequest(o,n),n=this._materialItemsRequestQueue.pop()}super.doRender(o)}renderChildren(o){for(const n of this.children)n.commit(o);this._rendererInfo.update(o.state),super.renderChildren(o)}updateTransforms(o){if(this.children.some(n=>n.hasData))for(const n of this.children)n.setTransform(o)}createRenderParams(o){const n=super.createRenderParams(o);return n.rendererInfo=this._rendererInfo,n.attributeView=this.attributeView,n}onAttributeStoreUpdate(){}_processMaterialItemRequest(o,{items:n,abortOptions:h,resolver:I}){const{painter:M,pixelRatio:w}=o,S=n.map(R=>M.textureManager.rasterizeItem(R.symbol,w,R.glyphIds,h));Promise.all(S).then(R=>{if(!this.stage)return void I.reject();const P=R.map((T,J)=>({id:n[J].id,mosaicItem:T}));I.resolve(P)},I.reject)}}},47326:(_e,q,t)=>{t.d(q,{Z:()=>o});var _=t(919),C=t(31656),K=t(80322);const L=n=>(0,K.K)({ID:n.id,PATTERN:n.pattern}),V={shaders:n=>({vertexShader:L(n)+(0,C.w)("background/background.vert"),fragmentShader:L(n)+(0,C.w)("background/background.frag")})},G=n=>(0,K.K)({ID:n.id}),U={shaders:n=>({vertexShader:G(n)+(0,C.w)("circle/circle.vert"),fragmentShader:G(n)+(0,C.w)("circle/circle.frag")})},X=n=>(0,K.K)({ID:n.id,PATTERN:n.pattern}),H={shaders:n=>({vertexShader:X(n)+(0,C.w)("fill/fill.vert"),fragmentShader:X(n)+(0,C.w)("fill/fill.frag")})},Z=n=>(0,K.K)({ID:n.id}),B={shaders:n=>({vertexShader:Z(n)+(0,C.w)("outline/outline.vert"),fragmentShader:Z(n)+(0,C.w)("outline/outline.frag")})},W=n=>(0,K.K)({ID:n.id,SDF:n.sdf}),g={shaders:n=>({vertexShader:W(n)+(0,C.w)("icon/icon.vert"),fragmentShader:W(n)+(0,C.w)("icon/icon.frag")})},F=n=>(0,K.K)({ID:n.id,PATTERN:n.pattern,SDF:n.sdf}),A={shaders:n=>({vertexShader:F(n)+(0,C.w)("line/line.vert"),fragmentShader:F(n)+(0,C.w)("line/line.frag")})},v=n=>(0,K.K)({ID:n.id}),D={shaders:n=>({vertexShader:v(n)+(0,C.w)("text/text.vert"),fragmentShader:v(n)+(0,C.w)("text/text.frag")})};class o{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach(h=>h.dispose()),this._programByKey.clear()}getMaterialProgram(h,I,M){const w=I.key<<3|this._getMaterialOptionsValue(I.type,M);if(this._programByKey.has(w))return this._programByKey.get(w);const S=this._getProgramTemplate(I.type),{shaders:R}=S,{vertexShader:P,fragmentShader:T}=R(M),J=I.getShaderHeader(),Q=I.getShaderMain(),te=P.replace("#pragma header",J).replace("#pragma main",Q),N=h.programCache.acquire(te,T,I.getAttributeLocations());return this._programByKey.set(w,N),N}_getMaterialOptionsValue(h,I){switch(h){case _._K.BACKGROUND:case _._K.FILL:return(I.pattern?1:0)<<1|(I.id?1:0);case _._K.OUTLINE:return I.id?1:0;case _._K.LINE:return(I.sdf?1:0)<<2|(I.pattern?1:0)<<1|(I.id?1:0);case _._K.ICON:return(I.sdf?1:0)<<1|(I.id?1:0);case _._K.CIRCLE:case _._K.TEXT:return I.id?1:0;default:return 0}}_getProgramTemplate(h){switch(h){case _._K.BACKGROUND:return V;case _._K.CIRCLE:return U;case _._K.FILL:return H;case _._K.ICON:return g;case _._K.LINE:return A;case _._K.OUTLINE:return B;case _._K.TEXT:return D;default:return null}}}},45e3:(_e,q,t)=>{t.d(q,{G:()=>K});var _=t(44589),C=t(67969);class K extends _.Z{constructor(){super(...arguments),this._prevFBO=void 0,this.requiresDedicatedFBO=!1}dispose(){}doRender(V){const G=this.createRenderParams(V),{context:U,painter:X,profiler:H}=G;this._prevFBO=U.getBoundFramebufferObject(),H.recordContainerStart(this.name);const Z=this._getFbo(G),B=X.getRenderTarget();U.bindFramebuffer(Z),X.setRenderTarget(Z),U.setDepthWriteEnabled(!0),U.setColorMask(!0,!0,!0,!0),U.setClearColor(0,0,0,0),U.setClearDepth(1),U.clear(U.gl.COLOR_BUFFER_BIT|U.gl.DEPTH_BUFFER_BIT),U.setDepthWriteEnabled(!1);for(const W of this.children)W.beforeRender(V);for(const W of this.children)W.processRender(G);for(const W of this.children)W.afterRender(V);X.setRenderTarget(B),X.releaseFbo(Z),U.bindFramebuffer(this._prevFBO),X.beforeRenderLayer(G,this._clippingInfos?255:0,this.computedOpacity),Z.colorTexture&&(U.setStencilTestEnabled(!1),U.setStencilWriteMask(0),X.blitTexture(U,Z.colorTexture,C.cw.NEAREST)),X.compositeLayer(G,this.computedOpacity),H.recordContainerEnd()}createRenderParams(V){return{...super.createRenderParams(V),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(V){const{context:G,painter:U}=V,{width:X,height:H}=G.getViewport();return U.acquireFbo(X,H)}}},86859:(_e,q,t)=>{t.d(q,{s:()=>V});var _=t(37977),C=t(80322);const K=G=>{let U="";U+=G[0].toUpperCase();for(let X=1;X<G.length;X++){const H=G[X];H===H.toUpperCase()?(U+="_",U+=H):U+=H.toUpperCase()}return U},V=(G,U,X,H)=>{const Z=G+G.substring(G.lastIndexOf("/")),B=U+U.substring(U.lastIndexOf("/")),W=(G=>{const U={};for(const X in G)U[K(X)]=G[X];return(0,C.K)(U)})(H);return{attributes:X,shaders:{vertexShader:W+(0,_.w)(`${Z}.vert`),fragmentShader:W+(0,_.w)(`${B}.frag`)}}}},55746:(_e,q,t)=>{t.d(q,{k:()=>g,p:()=>F});var _=t(65389),C=t(61885),L=(t(8314),t(62208)),V=t(76279),G=t(5548),U=t(16669),X=t(52397);const H=(0,G.Ue)();function Z(A,v){return A<<16|v}function B(A){return(4294901760&A)>>>16}function W(A){return 65535&A}const g={getObjectId:A=>A.getObjectId(),getAttributes:A=>A.readAttributes(),getAttribute:(A,v)=>A.readAttribute(v),cloneWithGeometry:(A,v)=>A,getGeometry:A=>A.readHydratedGeometry(),getCentroid:(A,v)=>A.readCentroid()};class F extends U.J{constructor(v,D,o){super(v,D),this.featureAdapter=g,this.events=new C.Z,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new _.Z(50),this._index=(0,V.r)(9,n=>({minX:this._storage.getXMin(n),minY:this._storage.getYMin(n),maxX:this._storage.getXMax(n),maxY:this._storage.getYMax(n)})),this.mode=o}get storeStatistics(){let v=0,D=0,o=0;return this.forEach(n=>{const h=n.readGeometry();h&&(D+=h.isPoint?1:h.lengths.reduce((I,M)=>I+M,0),o+=h.isPoint?1:h.lengths.length,v+=1)}),{featureCount:v,vertexCount:D,ringCount:o}}hasInstance(v){return this._featureSetsByInstance.has(v)}onTileData(v,D){if((0,L.Wi)(D.addOrUpdate))return D;if(D.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const n=D.addOrUpdate.getCursor();for(;n.next();){const h=n.getDisplayId();this.setComputedAttributes(this._storage,n,h,v.scale)}return D}this._featureSetsByInstance.set(D.addOrUpdate.instance,D.addOrUpdate);const o=D.addOrUpdate.getCursor();for(;o.next();)this._insertFeature(o,v.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),D}search(v){this._rebuildIndex();const D=v.id,o=this._indexSearchCache.find(M=>M.tileId===D);if((0,L.pC)(o))return o.readers;const n=new Map,h=this._searchIndex(v.bounds),I=[];for(const M of h){const w=this._storage.getInstanceId(M),S=B(w),R=W(w);n.has(S)||n.set(S,[]),n.get(S).push(R)}return n.forEach((M,w)=>{const S=this._featureSetsByInstance.get(w);I.push(X.t.from(S,M))}),this._indexSearchCache.enqueue({tileId:D,readers:I}),I}insert(v){const D=v.getCursor(),o=this._storage;for(;D.next();){const n=Z(D.instance,D.getIndex()),h=D.getObjectId(),I=this._objectIdToDisplayId.get(h)??this._storage.createDisplayId();D.setDisplayId(I),o.setInstanceId(I,n),this._objectIdToDisplayId.set(h,I)}this._featureSetsByInstance.set(v.instance,v),this._spatialIndexInvalid=!0}remove(v){const D=this._objectIdToDisplayId.get(v);if(!D)return;const o=this._storage.getInstanceId(D),n=W(o),h=B(o),I=this._featureSetsByInstance.get(h);this._objectIdToDisplayId.delete(v),this._storage.releaseDisplayId(D),I.removeAtIndex(n),I.isEmpty&&this._featureSetsByInstance.delete(h),this._spatialIndexInvalid=!0}forEach(v){this._objectIdToDisplayId.forEach(D=>{const o=this._storage.getInstanceId(D),n=this._lookupFeature(o);v(n)})}forEachUnsafe(v){this._objectIdToDisplayId.forEach(D=>{const o=this._storage.getInstanceId(D),n=B(o),h=W(o),I=this._getFeatureSet(n);I.setIndex(h),v(I)})}forEachInBounds(v,D){const o=this._searchIndex(v);for(const n of o){const h=this.lookupFeatureByDisplayId(n,this._storage);D((0,L.Wg)(h))}}forEachBounds(v,D){this._rebuildIndex();for(const o of v){if(!o.readGeometry())continue;const n=o.getDisplayId();(0,G.bZ)(H,this._storage.getXMin(n),this._storage.getYMin(n),this._storage.getXMax(n),this._storage.getYMax(n)),D(H)}}sweepFeatures(v,D,o){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((n,h)=>{v.has(n)||(D.releaseDisplayId(n),o&&o.unsetAttributeData(n),this._objectIdToDisplayId.delete(h))}),this.events.emit("changed")}sweepFeatureSets(v){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((D,o)=>{v.has(o)||this._featureSetsByInstance.delete(o)})}lookupObjectId(v,D){const o=this.lookupFeatureByDisplayId(v,D);return(0,L.Wi)(o)?null:o.getObjectId()}lookupDisplayId(v){return this._objectIdToDisplayId.get(v)}lookupFeatureByDisplayId(v,D){const o=D.getInstanceId(v);return this._lookupFeature(o)}lookupByDisplayIdUnsafe(v){const D=this._storage.getInstanceId(v),o=B(D),n=W(D),h=this._getFeatureSet(o);return h?(h.setIndex(n),h):null}_insertFeature(v,D){const o=this._storage,n=v.getObjectId(),h=Z(v.instance,v.getIndex());o.getInstanceId(v.getDisplayId());let I=this._objectIdToDisplayId.get(n);I||(I=o.createDisplayId(),this._objectIdToDisplayId.set(n,I),this._spatialIndexInvalid=!0),v.setDisplayId(I),o.setInstanceId(I,h),this.setComputedAttributes(o,v,I,D)}_searchIndex(v){return this._rebuildIndex(),this._index.search({minX:v[0],minY:v[1],maxX:v[2],maxY:v[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const v=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(D=>{const o=D.getCursor();for(;o.next();){const n=o.getDisplayId();this._storage.setBounds(n,o)&&v.push(n)}}):this._objectIdToDisplayId.forEach(D=>{const o=this._storage.getInstanceId(D);this._storage.setBounds(D,this._lookupFeature(o))&&v.push(D)}),this._index.clear(),this._index.load(v),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(v){const D=B(v),o=this._getFeatureSet(D);if(!o)return;const n=o.getCursor(),h=W(v);return n.setIndex(h),n}_getFeatureSet(v){return this._featureSetsByInstance.get(v)}}},16669:(_e,q,t)=>{t.d(q,{J:()=>H});var _=t(15861),C=t(8314),K=t(62208),L=t(84682),V=t(46679),G=t(63290);const X=Promise.resolve().then(t.bind(t,22445));class H{constructor(B,W){this._canCacheExpressionValue=!1,this._sourceInfo=B,this._storage=W,this._bitsets={computed:W.getBitset(W.createBitset())}}get storage(){return this._storage}invalidate(){this._bitsets.computed.clear()}updateSchema(B,W){var g=this;return(0,_.Z)(function*(){const F=(0,L.Hg)(g._schema,W);if(g._schema=W,!W||(0,K.Wi)(F)||!(0,L.uD)(F,"attributes"))return;(0,C.Z)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",F),g._bitsets.computed.clear(),B.targets[W.name]=!0;const A=W.attributes,v=[],D=[];for(const o in A){const n=A[o];switch(n.type){case"field":break;case"expression":v.push(g._createArcadeComputedField(n));break;case"label-expression":v.push(g._createLabelArcadeComputedField(n));break;case"statistic":D.push(n)}}g._computedFields=yield Promise.all(v),g._canCacheExpressionValue=!g._computedFields.some(o=>"expression"===o.type&&(0,K.pC)(o.expression)&&o.expression.referencesScale()),g._statisticFields=D})()}setComputedAttributes(B,W,g,F){const A=this._bitsets.computed;if(!this._canCacheExpressionValue||!A.has(g)){A.set(g);for(const v of this._computedFields){const D=this._evaluateField(W,v,F);switch(v.resultType){case"numeric":B.setComputedNumericAtIndex(g,v.fieldIndex,D);break;case"string":B.setComputedStringAtIndex(g,v.fieldIndex,D)}}}}_createArcadeComputedField(B){var W=this;return(0,_.Z)(function*(){const g=W._sourceInfo.spatialReference,F=W._sourceInfo.fieldsIndex;return{...B,expression:yield(0,V.Yi)(B.valueExpression,g,F)}})()}_createLabelArcadeComputedField(B){var W=this;return(0,_.Z)(function*(){const g=W._sourceInfo.spatialReference,F=W._sourceInfo.fieldsIndex,{createLabelFunction:A}=yield X,v=yield A(B.label,F,g);return{...B,builder:v}})()}_evaluateField(B,W,g){switch(W.type){case"label-expression":{const F=B.readArcadeFeature();return W.builder.evaluate(F)||""}case"expression":{const{expression:F}=W;return function U(Z,B,W){if((0,K.Wi)(Z))return null;const g=B.readArcadeFeature();try{return Z.evaluate({...W,$feature:g})}catch(F){return G.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",F),null}}(F,B,{$view:{scale:g}})}}}}},13112:(_e,q,t)=>{t.d(q,{Z:()=>X});var _=t(17626),C=t(80542),K=t(77712),G=(t(90912),t(85931),t(76898));let U=class extends C.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const H=this.get("tileStore.tileScheme.spatialReference");return H&&H.toJSON()||null}};(0,_._)([(0,K.Cb)({readOnly:!0})],U.prototype,"supportsTileUpdates",null),(0,_._)([(0,K.Cb)({constructOnly:!0})],U.prototype,"remoteClient",void 0),(0,_._)([(0,K.Cb)({constructOnly:!0})],U.prototype,"service",void 0),(0,_._)([(0,K.Cb)()],U.prototype,"spatialReference",null),(0,_._)([(0,K.Cb)({constructOnly:!0})],U.prototype,"tileInfo",void 0),(0,_._)([(0,K.Cb)({constructOnly:!0})],U.prototype,"tileStore",void 0),U=(0,_._)([(0,G.j)("esri.views.2d.layers.features.processors.BaseProcessor")],U);const X=U},52397:(_e,q,t)=>{t.d(q,{t:()=>C});var _=t(25208);class C extends _.s{static from(L,V){return new C(L.copy(),V)}constructor(L,V){super(_.s.createInstance(),L.fullSchema()),this._currentIndex=-1,this._reader=L,this._indices=V}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const L=new C(this._reader.copy(),this._indices);return L._currentIndex=this._currentIndex,L}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(L){this._reader.setArcadeSpatialReference(L)}attachStorage(L){this._reader.attachStorage(L)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(L){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(L,V){return this._reader.setComputedNumericAtIndex(V,0)}getComputedString(L){return this._reader.getComputedStringAtIndex(0)}setComputedString(L,V){return this._reader.setComputedStringAtIndex(0,V)}getComputedNumericAtIndex(L){return this._reader.getComputedNumericAtIndex(L)}setComputedNumericAtIndex(L,V){this._reader.setComputedNumericAtIndex(L,V)}getComputedStringAtIndex(L){return this._reader.getComputedStringAtIndex(L)}setComputedStringAtIndex(L,V){return this._reader.setComputedStringAtIndex(L,V)}transform(L,V,G,U){const X=this.copy();return X._reader=this._reader.transform(L,V,G,U),X}readAttribute(L,V=!1){return this._reader.readAttribute(L,V)}readAttributes(){return this._reader.readAttributes()}joinAttributes(L){return this._reader.joinAttributes(L)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(L){return this.readAttribute(L,!0)}hasField(L){return this._reader.hasField(L)}setField(L,V){return this._reader.setField(L,V)}keys(){return this._reader.keys()}castToText(L=!1){return this._reader.castToText(L)}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getFieldNames(){return this._reader.getFieldNames()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(L){return this._reader.setDisplayId(L)}getGroupId(){return this._reader.getGroupId()}setGroupId(L){return this._reader.setGroupId(L)}getXHydrated(){return this._reader.getXHydrated()}getYHydrated(){return this._reader.getYHydrated()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(L){return this._reader.setIndex(L)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_readAttribute(L,V){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},84225:(_e,q,t)=>{t.d(q,{Z:()=>X});var _=t(17626),C=t(80542),K=t(77712),G=(t(90912),t(85931),t(76898));let U=class extends C.r{constructor(H){super(H),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(H){const Z=this.createTile(H);return Z.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(H.id,Z),Z}forceAttributeTextureUpload(){}forEachTile(H){this.tiles.forEach(H)}releaseTile(H){this.tiles.delete(H.key.id),this.disposeTile(H)}isUpdating(){let H=!0;return this.tiles.forEach(Z=>{H=H&&Z.isReady}),!H}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};(0,_._)([(0,K.Cb)()],U.prototype,"layer",void 0),(0,_._)([(0,K.Cb)()],U.prototype,"layerView",void 0),(0,_._)([(0,K.Cb)()],U.prototype,"tileInfoView",void 0),(0,_._)([(0,K.Cb)()],U.prototype,"updating",null),U=(0,_._)([(0,G.j)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],U);const X=U},55051:(_e,q,t)=>{t.d(q,{Z:()=>D});var _=t(62208),C=t(47123),K=t(30217),L=t(49966),V=t(9545),G=t(14658),U=t(93555),X=t(57477),H=t(87526),Z=t(83994),B=t(67969),W=t(49353);const g=Math.PI/180;class A extends X.s{constructor(n){super(),this._program=null,this._vao=null,this._vertexBuffer=null,this._indexBuffer=null,this._dvsMat3=(0,L.c)(),this._localOrigin={x:0,y:0},this._getBounds=n}destroy(){this._vao&&(this._vao.dispose(!0),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=(0,_.M2)(this._program)}doRender(n){const{context:h}=n,I=this._getBounds();if(I.length<1)return;this._createShaderProgram(h),this._updateMatricesAndLocalOrigin(n),this._updateBufferData(h,I),h.setBlendingEnabled(!0),h.setDepthTestEnabled(!1),h.setStencilWriteMask(0),h.setStencilTestEnabled(!1),h.setBlendFunction(B.zi.ONE,B.zi.ONE_MINUS_SRC_ALPHA),h.setColorMask(!0,!0,!0,!0);const M=this._program;h.bindVAO(this._vao),h.useProgram(M),M.setUniformMatrix3fv("u_dvsMat3",this._dvsMat3),h.gl.lineWidth(1),h.drawElements(B.MX.LINES,8*I.length,B.g.UNSIGNED_INT,0),h.bindVAO()}_createTransforms(){return{dvs:(0,L.c)()}}_createShaderProgram(n){this._program||(this._program=n.programCache.acquire("precision highp float;\n        uniform mat3 u_dvsMat3;\n\n        attribute vec2 a_position;\n\n        void main() {\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\n        }","precision mediump float;\n      void main() {\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\n      }",v().attributes))}_updateMatricesAndLocalOrigin(n){const{state:h}=n,{displayMat3:I,size:M,resolution:w,pixelRatio:S,rotation:R,viewpoint:P}=h,T=g*R,{x:J,y:Q}=P.targetGeometry,te=(0,U.or)(J,h.spatialReference);this._localOrigin.x=te,this._localOrigin.y=Q;const N=S*M[0],k=S*M[1],$=w*N,Y=w*k,z=(0,K.g)(this._dvsMat3);(0,K.m)(z,z,I),(0,K.h)(z,z,(0,V.f)(N/2,k/2)),(0,K.d)(z,z,(0,G.f)(M[0]/$,-k/Y,1)),(0,K.r)(z,z,-T)}_updateBufferData(n,h){const{x:I,y:M}=this._localOrigin,S=new Float32Array(8*h.length),R=new Uint32Array(8*h.length);let P=0,T=0;for(const J of h)J&&(S[2*P+0]=J[0]-I,S[2*P+1]=J[1]-M,S[2*P+2]=J[0]-I,S[2*P+3]=J[3]-M,S[2*P+4]=J[2]-I,S[2*P+5]=J[3]-M,S[2*P+6]=J[2]-I,S[2*P+7]=J[1]-M,R[T+0]=P+0,R[T+1]=P+3,R[T+2]=P+3,R[T+3]=P+2,R[T+4]=P+2,R[T+5]=P+1,R[T+6]=P+1,R[T+7]=P+0,P+=4,T+=8);if(this._vertexBuffer?this._vertexBuffer.setData(S.buffer):this._vertexBuffer=Z.f.createVertex(n,B.l1.DYNAMIC_DRAW,S.buffer),this._indexBuffer?this._indexBuffer.setData(R):this._indexBuffer=Z.f.createIndex(n,B.l1.DYNAMIC_DRAW,R),!this._vao){const J=v();this._vao=new W.U(n,J.attributes,J.bufferLayouts,{geometry:this._vertexBuffer},this._indexBuffer)}}}const v=()=>(0,H.cM)("bounds",{geometry:[{location:0,name:"a_position",count:2,type:B.g.FLOAT}]});let D=class extends C.T{constructor(o){super(o),this.hasHighlight=()=>!0}destroy(){super.destroy(),this._boundsRenderer=(0,_.SC)(this._boundsRenderer)}enableRenderingBounds(o){this._boundsRenderer=new A(o),this.requestRender()}get hasLabels(){return!1}onTileData(o,n){o.patch(n),this.contains(o)||this.addChild(o),this.requestRender()}onTileError(o){o.clear(),this.contains(o)||this.addChild(o)}_renderChildren(o,n){for(const h of this.children)h.isReady&&h.hasData&&(h.commit(o),o.context.setStencilFunction(B.wb.EQUAL,h.stencilRef,255),h.getDisplayList().replay(o,h,n))}}},36275:(_e,q,t)=>{t.d(q,{Z:()=>K});var _=t(39406),C=t(55051);class K extends C.Z{renderChildren(V){this.attributeView.update(),this.children.some(G=>G.hasData)&&(this.attributeView.bindTextures(V.context,!1),super.renderChildren(V),V.drawPhase===_.jx.MAP&&this._renderChildren(V),this.hasHighlight()&&V.drawPhase===_.jx.HIGHLIGHT&&this._renderHighlight(V),this._boundsRenderer&&this._boundsRenderer.doRender(V))}_renderHighlight(V){const{painter:G}=V,U=G.effects.highlight;U.bind(V),this._renderChildren(V,U.defines),U.draw(V),U.unbind()}}},13305:(_e,q,t)=>{t.d(q,{Z:()=>W});var _=t(17626),U=(t(63290),t(90912),t(85931),t(26584),t(8314),t(76898)),X=t(39406),H=t(55051),Z=t(67969);let B=class extends H.Z{doRender(g){g.drawPhase===X.jx.HIGHLIGHT&&super.doRender(g)}renderChildren(g){if(this.attributeView.update(),!this.children.some(v=>v.hasData))return;this.attributeView.bindTextures(g.context),super.renderChildren(g);const{painter:F}=g,A=F.effects.highlight;A.bind(g),g.context.setColorMask(!0,!0,!0,!0),g.context.clear(Z.lk.COLOR_BUFFER_BIT),this._renderChildren(g,A.defines.concat(["highlightAll"])),A.draw(g),A.unbind()}};B=(0,_._)([(0,U.j)("esri.views.2d.layers.support.HighlightGraphicContainer")],B);const W=B},67802:(_e,q,t)=>{t.d(q,{Z:()=>R});var _=t(15861),C=t(17626),K=t(14517),V=(t(8314),t(10699)),G=t(77712),H=(t(90912),t(85931),t(76898)),Z=t(65401),B=t(37053),W=t(2584);const g=Math.PI/180;var D=t(90301),o=t(9598),n=t(58098);const h=(0,Z.Ue)(),I=[0,0],M=new n.Z(0,0,0,0);let S=class extends K.Z{constructor(P){var T;super(P),T=this,this._imagePromise=null,this.bitmaps=[],this.hidpi=false,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=false,this.imageNormalizationSupported=false,this.update=(0,V.Ds)(function(){var J=(0,_.Z)(function*(Q,te){if((0,V.k_)(te),!Q.stationary||T.destroyed)return;const N=Q.state,k=(0,B.C5)(N.spatialReference),$=T.hidpi?Q.pixelRatio:1,Y=T.imageNormalizationSupported&&N.worldScreenWidth&&N.worldScreenWidth<N.size[0],z=T.imageMaxWidth??0,ee=T.imageMaxHeight??0;Y?(I[0]=N.worldScreenWidth,I[1]=N.size[1]):T.imageRotationSupported?(I[0]=N.size[0],I[1]=N.size[1]):function A(P,T){const J=function F(P){return P*g}(T.rotation),Q=Math.abs(Math.cos(J)),te=Math.abs(Math.sin(J)),[N,k]=T.size;return P[0]=Math.round(k*te+N*Q),P[1]=Math.round(k*Q+N*te),P}(I,N);const re=Math.floor(I[0]*$)>z||Math.floor(I[1]*$)>ee,le=!T.imageNormalizationSupported&&k&&(N.extent.xmin<k.valid[0]||N.extent.xmax>k.valid[1]),ae=!re&&!le,ce=T.imageRotationSupported?N.rotation:0,de=T.container.children.slice();if(ae){const ne=Y?N.paddedViewState.center:N.center;T._imagePromise&&console.error("Image promise was not defined!"),T._imagePromise=T._singleExport(N,I,ne,N.resolution,ce,$,te)}else{let ne=Math.min(z,ee);le&&(ne=Math.min(N.worldScreenWidth,ne)),T._imagePromise=T._tiledExport(N,ne,$,te)}try{const ne=(yield T._imagePromise)??[];(0,V.k_)(te);const oe=[];if(T._imagePromise=null,T.destroyed)return;T.bitmaps=ne;for(const ie of de)ne.includes(ie)||oe.push(ie.fadeOut().then(()=>{ie.remove(),ie.destroy()}));for(const ie of ne)oe.push(ie.fadeIn());yield Promise.all(oe)}catch(ne){T._imagePromise=null,(0,V.r9)(ne)}});return function(Q,te){return J.apply(this,arguments)}}(),5e3),this.updateExports=(0,V.Ds)(function(){var J=(0,_.Z)(function*(Q){const te=[];for(const N of T.container.children){if(!N.visible||!N.stage)return;te.push(Q(N).then(()=>{N.invalidateTexture(),N.requestRender()}))}T._imagePromise=(0,V.as)(te).then(()=>T._imagePromise=null),yield T._imagePromise});return function(Q){return J.apply(this,arguments)}}())}destroy(){this.bitmaps.forEach(P=>P.destroy()),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}_export(P,T,J,Q,te,N){var k=this;return(0,_.Z)(function*(){const $=yield k.fetchSource(P,Math.floor(T*te),Math.floor(J*te),{rotation:Q,pixelRatio:te,signal:N});(0,V.k_)(N);const Y=new D.eY(null,{immutable:!0,requestRenderOnSourceChangedEnabled:!0});return Y.x=P.xmin,Y.y=P.ymax,Y.resolution=P.width/T,Y.rotation=Q,Y.pixelRatio=te,Y.opacity=0,k.container.addChild(Y),yield Y.setSourceAsync($,N),(0,V.k_)(N),Y})()}_singleExport(P,T,J,Q,te,N,k){var $=this;return(0,_.Z)(function*(){!function v(P,T,J,Q){const[te,N]=T,[k,$]=Q,Y=.5*J;P[0]=te-Y*k,P[1]=N-Y*$,P[2]=te+Y*k,P[3]=N+Y*$}(h,J,Q,T);const Y=(0,Z.HH)(h,P.spatialReference);return[yield $._export(Y,T[0],T[1],te,N,k)]})()}_tiledExport(P,T,J,Q){const te=W.Z.create({size:T,spatialReference:P.spatialReference,scales:[P.scale]}),N=new o.Z(te),k=N.getTileCoverage(P);if(!k)return null;const $=[];return k.forEach((Y,z,ee,re)=>{M.set(Y,z,ee,0),N.getTileBounds(h,M);const se=(0,Z.HH)(h,P.spatialReference);$.push(this._export(se,T,T,0,J,Q).then(le=>(0!==re&&(M.set(Y,z,ee,re),N.getTileBounds(h,M),le.x=h[0],le.y=h[3]),le)))}),Promise.all($)}};(0,C._)([(0,G.Cb)()],S.prototype,"_imagePromise",void 0),(0,C._)([(0,G.Cb)()],S.prototype,"bitmaps",void 0),(0,C._)([(0,G.Cb)()],S.prototype,"container",void 0),(0,C._)([(0,G.Cb)()],S.prototype,"fetchSource",void 0),(0,C._)([(0,G.Cb)()],S.prototype,"hidpi",void 0),(0,C._)([(0,G.Cb)()],S.prototype,"imageMaxWidth",void 0),(0,C._)([(0,G.Cb)()],S.prototype,"imageMaxHeight",void 0),(0,C._)([(0,G.Cb)()],S.prototype,"imageRotationSupported",void 0),(0,C._)([(0,G.Cb)()],S.prototype,"imageNormalizationSupported",void 0),(0,C._)([(0,G.Cb)()],S.prototype,"requestUpdate",void 0),(0,C._)([(0,G.Cb)()],S.prototype,"updating",null),S=(0,C._)([(0,H.j)("esri.views.2d.layers.support.ExportStrategy")],S);const R=S},25601:(_e,q,t)=>{t.d(q,{O:()=>V,s:()=>G});const _="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAnFBMVEUAAAD/gAD/gAD/cAD/gAD/eAD/gAD/eQD/gAD/egD/gAD/ewD/gAD/fAD/gAD/fAD/gAD/fAD/fQD/fQD/fQD/fQD/fQD/fgD/jR7/mjn/mjf/p1H/plH/smf/sWb/vHr/u3n/xYz/xIv/zZz/zJv/zJr/1Kv/1Kr/06r/06n/27n/27f/4cX/4cT/59D/7dr/8uX/9u7/+/f////u2EN0AAAAM3RSTlMACBAQICAoKDAwODhAQEhIUFBYYGhweICIkJCXmJ+gp6ivsLe4uL+/wMDHx8/P19/n7/cWvjXwAAACeUlEQVR42tWX3XqiMBCGY2pbtbrUnzhhdak/lHWliJD7v7fdJ+KG5AMhh30P8zCTmS+TycDaeBoHi5Wgf4jVYvbKmRfPgSAHMX9mPRnM1tSIGHM/c2QddLp4c8wxCvYIvqROBPfbHlm/sRYC6smMNTKn3sxZAyvyYNW1v38MM/IkcPQnZHPMLtciz9P9hhqwzoLD+cnfpTIUaYinyZlBkE2YKZcMXCyN/YhsPkuFlMfWJLiwo89VMxfpJDForMCwuG+Zx7ttGO2S/w4LJ42ZURDty5M0a4dqsZAQAihQfXqWdlhnpcmdEPAI0tv2EbnsbsKmdgi6/1GN7T1XJLx5sF0P9SWABMC+co5JBE4Ge/1NTM3EGIJgjFONXCdAbeQYwhN7pRrRV20LJNIhWOczdu+xPFzIBiQ62iIsyIOTvlZUY+HXySLQaMUEeSC1CPYxENIlwk+q8e0clFAIfiKG+qpaIvod4wfU8sqvkDLda+xCCqgDaAk7uyeNqD+feFlfGCcg3Hzsk+xS7Nz1Aq4CcauhhMc0uxaqIgcFsF0J+1WQyoCN7Y9ezeCVH5LhSxmyRvsihKbK1m7LafpSpkpj6yJgtsiVBh6AX5UyCVmMbrNpcwj5/h6DPN79JjAiQAhXVeN6SZI0q5bQnn4wBiHEqpUybp1ZJzWxStVCHhKhAhVLp/Emh6trHpGLaB6yZHk7wu3Z+ChOxhwUNEmYYjpUvqJDksSHraQmJm2DdqQK6sGUObybYtpSN+8Phm3pN2xjDH33R6b0CKxAZNLvl8foD3BBnSw5e8RI+G2P8GD9wHw6YN3wkfA0R4Zz8CGCIfOCv8zM738walXuLw6nXBvPr8wvAAAAAElFTkSuQmCC",C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAACtVBMVEUAAAD/AAD/gAD/VQD/gAD/gAD/bQD/gAD/cQD/gAD/dAD/gAD/gAD/eAD/gAD/eQD/gAD/egD/gAD/ewD/fAD/gAD/gAD/fAD/gAD/fQD/fQD/gAD/fQD/egD/fQD/gAD/egD/fQD/gAD/ewD/gAD/ewD/gAD/ewD/fQD/fQD/gAD/ewD/fQD/gAD/fAD/gAD/fAD/fgD/gAD/fAD/fgD/fAD/fgD/gAD/fAD/fgD/fAD/fgD/fQD/fQD/fgD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fQD/fgD/gAL/fgD/gAb/gAT/gwr/hAz/hxH/hQ//iBX/iBP/ixn/iRf/jBr/jR7/jyP/jyL/kif/kCX/kyr/lS7/lCz/ljH/li//mTX/nDr/mjn/nTz/oEL/okf/o0r/pU3/pU7/qFL/plH/qFX/q1j/q1r/rl7/sGL/rmH/s2v/tW//tW7/t3L/uHL/unb/unf/vHv/vX3/v4D/vX7/v4D/wYT/v4L/wYX/x4//x5H/yZX/y5n/zZv/y5n/zJv/zZ3/zp//0aL/z6H/1Kr/1av/06r/1q//17H/2bT/2LP/2rb/27n/3bz/3r7/37//4MH/38D/4ML/4sX/4sb/4sf/48n/5cv/48r/5cz/5s7/6dT/6tb/69j/69n/7Nn/7dv/7dz/7t7/7t3/7+H/7+D/7+H/8eL/8uX/8uX/8ub/8+j/8+f/9On/9er/9Or/9ez/9e3/9ez/9u7/9e3/9+//9+7/+PD/+PH/+fT/+fL/+vb/+vX/+vb/+/f/+vb//Pn/+/j//Pr//Pn//fv//Pr//fv//v3//fz//////v7//v3///8ZYzD6AAAA5nRSTlMAAQIDBAYHCAkKCwwQERITGBkaGyUmKCkqKy0uLzAxMjIzNDQ2Njg4OTs+Pj9AQEJCQ0RERUZHUlJTVFVWWFlfYGFiY2RlZmdoaWprbG1ucHFyc3R1dnd4eXp8f4CAgYGCg4SEhYWGhoeIiYmKiouMjI2Nj5CQkZOUlZaXmJiZmpudnp6io6OkpaanqKmqqqusrK2xs7W2t7e4ubq7u7/AwMLExcXGyMrLzM3NztDR0tPU1NXW29zd3t/g4eLi5OTl5ufo6erq6+zs7e7u7+/w8PHy9PT29vf4+Pn5+vr7+/z9/f7+/pNrFTEAAAO8SURBVHjaldf5W1RVGAfwl4kGxa2yIDPbF82EJhkVUEOiUiDMcJa482XCijStNLLVpoWCbLHFaZUoMSkq2wgtW8mobFcryiiWkffv6J557jh3zj33zvD56f3h3vM873nP+z7nkJ3cPE9JxdX+OgSWX15aMG0CjcnUoiuRSls2byplyH1eDZSqZrkz+d0ThC1/QQ45c521Eo58p5GTSZcirbIpZGtGEBkI5pNaVhEyo3mzSCF7ITJW7CKLYxbDTsPG5qe33QezxdkkySqGndYY615CilI5Cy9sRVjYgVRzKcXJGmzdwsKHkEwnkylB2AsNse5zSIITKWkJnPzCut8gW5IsxRlw9CnrRuohO5MM43xw9D4Lt0JWm2jOOXD2Ogv3w6LQaGA/nL3AwuOwCLpJmIU0nmDheVidQ0IV0niAhQ5YVcfnH2zcCMNtLLwHheOJaB5s7OxuQlx4hHV7oeAhokrYaOeBjkYIv7LuJyhUEU3QYONFZj4YrQfwGeuGQrDSxtM0KK2N7h5koa8V+ICFdVA4SX2Kbt5xmA2j7SHsZGETFOZQqarwhzjhUAuAl1nYDIUFdAVkoe0s/LiLmT9eD91TLDwHhXJaDtmbrPvyEWzg4dfCEB5kYTsUrqIgJK8w8/C2MHDDgWYgromFXVDwkQbDRsRFhpkHWyHcBMO1oyzSgcI1VGdEd8V6o6uA8D7m2BZIDrJuPxTqKGBEnczc33nHFmZ+A7IvWDegTmEF4lb1s3Dk+wH+oxGyj1hYC6saqkDcVk74u6cJsk4W7oXVZVSCuK84aXTP5pBcGeFRWM2nQmMPOw+zyQ9t62DyLAtRWM2mPBgao1+zyVD3wyEkPMTCq7DKo/Gmdo50DbDJd22JbbudhXdgoeUSVcNkTfRbNvnv3U0QGmKs2w2LpUR0MVI1d4+wSW/0egC/i7APFkXKobq+7Wc2+avrHvSK4B/1UKUaWNQ/1nOEk2Kf7GdhNSTLSDgfKhvaDrDsbkhmkuAOQKnhmb2cqkVuBDfFeWDnzo4/2WQrUl2QuB7XwtZ1T+7ho9qRYmUOGc6Gk8hb/xoLvI0Up1KCqxyOVkf3sdADs0soaVIQaUS6Bpm/gUlgMplMR1pron39SNLyKcVcpBduCQMJXpLMx5gsdJEkexHGYJGLLFzFyFhJNilkeTVkxkM28oPIQOAUsjW5DGmVTSQnM3xwVHt6FjnLudAPW4GLMnq7zqyEUvW5x1KGTvAulSqiVRYeR2OSmz+7uKLGpwX8K8oXFJw4zu67/wFaspwc84wT2QAAAABJRU5ErkJggg==";var K=t(81695);const L={mipmap:!0,preMultiplyAlpha:!0,width:64,height:64};function V(U){return U.fromData(_,()=>new K.x(_,L))}function G(U){return U.fromData(C,()=>new K.x(C,L))}},8859:(_e,q,t)=>{t.d(q,{J4:()=>J,_N:()=>v,gv:()=>Q});var T,$,_=t(62208),C=t(23841),L=(t(84161),t(28093)),G=(t(55915),t(90014)),U=t(70562),H=(t(34054),t(26242)),B=(t(60507),t(26046)),W=t(62483),g=t(67857),F=t(40841);function v($,Y){return function o($,Y){const z=(0,L.c)(),ee=(0,L.c)();let re=!1;return se=>{const le=Y(se);if("start"===se.action){const de=(0,C.md)(se.screenStart,(0,C.c$)(H.qW.get())),ne=(0,B.u4)($.state.camera,de,k);(0,_.pC)(ne)&&(re=(0,G.BR)(le,ne,z))}if(!re)return null;const ae=(0,C.md)(se.screenEnd,(0,C.c$)(H.qW.get())),ce=(0,B.u4)($.state.camera,ae,k);return(0,_.Wi)(ce)?null:(0,G.BR)(le,ce,ee)?{...se,renderStart:z,renderEnd:ee,plane:le,ray:ce}:null}}($,()=>Y)}function J($){let Y=null;return z=>{switch(z.action){case"start":Y=$.disableDisplay();break;case"end":case"cancel":(0,_.pC)(Y)&&(Y.remove(),Y=null)}return z}}function Q($,Y=null){const z=(0,W.Z8)($.state.viewingMode);z.options.selectionMode=!0,z.options.store=g.eC.MIN,z.options.hud=!1;const ee=(0,C.s1)(),re={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},se=(0,L.c)(),le=(0,_.Pt)(Y,$.spatialReference),ae=de=>{$.map.ground&&$.map.ground.opacity<1?re.exclude.add(F.cy):re.exclude.delete(F.cy),$.sceneIntersectionHelper.intersectIntersectorScreen((0,C.md)(de,ee),z,re);const ne=z.results.min;let oe;if(ne.getIntersectionPoint(se))oe=ne.intersector===g.q7.TERRAIN?T.GROUND:T.OTHER;else{if(!z.results.ground.getIntersectionPoint(se))return null;oe=T.GROUND}return{location:$.renderCoordsHelper.fromRenderCoords(se,le),surfaceType:oe}};let ce;return de=>{if("start"===de.action){const oe=ae(de.screenStart);ce=(0,_.pC)(oe)?oe.location:null}if((0,_.Wi)(ce))return null;const ne=ae(de.screenEnd);return(0,_.pC)(ne)&&(0,_.pC)(ne.location)?{...de,mapStart:ce,mapEnd:ne.location,surfaceType:ne.surfaceType}:null}}t(30260),($=T||(T={}))[$.GROUND=0]="GROUND",$[$.OTHER=1]="OTHER",(0,L.c)(),(0,L.c)();const k=(0,U.Ue)()},82755:(_e,q,t)=>{t.d(q,{i:()=>v});var _=t(17626),C=t(14517),K=t(61996),L=t(62208),V=t(77712),X=(t(90912),t(85931),t(76898)),H=t(62600),Z=t(54840),B=t(23147);class W{constructor(o){this._resourceFactory=o,this._resources=null,this._visible=!0,this._attached=!1,this._renderGroup=H.eZ.Outline}destroy(){this._destroyResources()}get resources(){return(0,L.pC)(this._resources)?this._resources.external:null}get visible(){return this._visible}set visible(o){o!==this._visible&&(this._visible=o,this._syncGeometriesToRenderer())}get attached(){return this._attached}set attached(o){o!==this._attached&&(this._attached=o,this._createOrDestroyResources())}get renderGroup(){return this._renderGroup}set renderGroup(o){this._renderGroup=o;const n=(0,L.WG)(this._resources)?.layerView;n&&(n.renderGroup=o)}recreate(){this.attached&&this._createResources()}recreateGeometry(){this._resourceFactory.recreateGeometry?(0,L.Wi)(this._resources)||(this._ensureRenderGeometriesRemoved(),this._resourceFactory.recreateGeometry(this._resources.external),this._syncGeometriesToRenderer()):this.recreate()}_createOrDestroyResources(){this._attached?(0,L.Wi)(this._resources)&&this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const o=this._resourceFactory.createResources(),n=new g({view:this._resourceFactory.view,renderGroup:this._renderGroup}),h=this._resourceFactory.view.basemapTerrain?.overlayManager;this._resources={layerView:new g({view:this._resourceFactory.view,renderGroup:this._renderGroup}),external:o,geometriesAdded:!1},h&&(this._resources.drapeSourceRenderer=h.registerGeometryDrapeSource(n)),this._syncGeometriesToRenderer()}_destroyResources(){if((0,L.Wi)(this._resources))return;this._ensureRenderGeometriesRemoved();const o=this._resourceFactory.view.basemapTerrain?.overlayManager;o&&o.unregisterDrapeSource(this._resources.layerView),this._resourceFactory.destroyResources(this._resources.external),this._resources=null}_syncGeometriesToRenderer(){this._visible?this._ensureRenderGeometriesAdded():this._ensureRenderGeometriesRemoved()}_ensureRenderGeometriesRemoved(){(0,L.Wi)(this._resources)||(0,L.Wi)(this._resources.drapeSourceRenderer)||this._resources.geometriesAdded&&(this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries,Z.T.UPDATE),this._resources.geometriesAdded=!1)}_ensureRenderGeometriesAdded(){(0,L.Wi)(this._resources)||(0,L.Wi)(this._resources.drapeSourceRenderer)||this._resources.geometriesAdded||(this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries,Z.T.UPDATE),this._resources.geometriesAdded=!0)}}let g=class extends((0,K.IG)(C.Z)){constructor(D){super(D),this.drapeSourceType=H.Lw.Features,this.updatePolicy=B.j.SYNC,this.renderGroup=H.eZ.Outline}};(0,_._)([(0,V.Cb)({constructOnly:!0})],g.prototype,"view",void 0),(0,_._)([(0,V.Cb)({readOnly:!0})],g.prototype,"drapeSourceType",void 0),(0,_._)([(0,V.Cb)()],g.prototype,"renderGroup",void 0),g=(0,_._)([(0,X.j)("DrapedVisualElementLayerView")],g);var F=t(68604),A=t(94375);class v extends F.l{constructor({view:o,isDraped:n}){super(o),this._isDraped=!1,this.object3dResources=new A.O(this.createObject3DResourceFactory(o)),this.drapedResources=new W(this.createDrapedResourceFactory(o)),this.isDraped=n??!1}get isDraped(){return this._isDraped}set isDraped(o){o!==this._isDraped&&(this._isDraped=o,this.object3dResources.attached=this.attached&&!o,this.drapedResources.attached=this.attached&&o)}get renderGroup(){return this.drapedResources.renderGroup}set renderGroup(o){this.drapedResources.renderGroup=o}createResources(){this.object3dResources.attached=!this._isDraped,this.drapedResources.attached=this._isDraped}destroyResources(){this.object3dResources.attached=!1,this.drapedResources.attached=!1}recreate(){this.object3dResources.recreate(),this.drapedResources.recreate()}recreateGeometry(){this.object3dResources.recreateGeometry(),this.drapedResources.recreateGeometry()}destroy(){this.object3dResources.destroy(),this.drapedResources.destroy(),super.destroy()}updateVisibility(o){this.object3dResources.visible=o,this.drapedResources.visible=o}}},77603:(_e,q,t)=>{t.d(q,{R:()=>I});var _=t(62208),C=t(32917),K=t(28347),L=t(43703),V=t(84161),G=t(28093),U=t(993),X=t(4794),H=t(26242),Z=t(38114),B=t(82755),W=t(64835),g=t(94255),F=t(41120),A=t(57521),v=t(40723),D=t(64232),o=t(16396),n=t(92972),h=t(92222);class I extends B.i{constructor(R){super(R),this._maxSize=0,this._position=(0,G.c)(),this._up=(0,G.c)(),this._right=(0,G.c)(),this._renderOccluded=v.yD.OccludeAndTransparent,this._color=(0,X.f)(1,0,0,1),this._outlineColor=(0,X.f)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=v.yD.Opaque,this.applyProps(R)}createObject3DResourceFactory(R){return{view:R,createResources:P=>this._createObject3DResources(P),destroyResources:P=>this._destroyObject3DResources(P),cameraChanged:()=>this._updateTransformObject3D()}}createDrapedResourceFactory(R){return{view:R,createResources:()=>this._createDrapedResources(),destroyResources:P=>this._destroyDrapedResources(P)}}get renderOccluded(){return this._renderOccluded}set renderOccluded(R){R!==this._renderOccluded&&(this._renderOccluded=R,this._updateQuadMaterial())}get color(){return this._color}set color(R){(0,U.c)(this._color,R),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(R){(0,U.c)(this._outlineColor,R),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(R){const P=0===this._outlineSize!=(0===R);this._outlineSize=R,P?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(R){R!==this._size&&(this._size=R,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(R){this._outlineRenderOccluded=R,this._updateOutlineMaterial()}set geometry({previous:R,center:P,next:T}){this._maxSize=Math.min((0,V.i)(P,R),(0,V.i)(P,T))/3,(0,V.n)(this._up,(0,V.b)(this._up,R,P)),(0,V.n)(this._right,(0,V.b)(this._right,T,P)),(0,V.c)(this._position,P),this.recreateGeometry()}_createObject3DResources(R){const P=new n.E(this._quadMaterialParameters),T=0===this._outlineSize?void 0:new h.U(this._outlineMaterialParameters);return this._createObject3DGeometries(R,P,T),{quadMaterial:P,outlineMaterial:T,forEach:J=>{J(P),T&&J(T)}}}_destroyObject3DResources(R){R.quadMaterial.dispose(),R.outlineMaterial?.dispose()}_createObject3DGeometries(R,P,T){if((0,V.k)(this._up,G.Z)&&(0,V.k)(this._right,G.Z))return;const J=this._createGeometries(P,T);for(const Q of J)R.addGeometry(Q);this._updateTransformObject3D(R)}_createDrapedResources(){const R=new n.E(this._quadMaterialParameters),P=0===this._outlineSize?void 0:new h.U(this._outlineMaterialParameters),T=this._createGeometries(R,P).map(J=>new D.z(J,{boundingInfo:J.boundingInfo}));return this._setTransformDraped(T),{quadMaterial:R,outlineMaterial:P,geometries:T,pixelRatioHandle:(0,C.YP)(()=>this.view.state.contentPixelRatio,()=>{this.drapedResources.recreateGeometry()})}}_destroyDrapedResources(R){R.pixelRatioHandle.remove(),R.geometries=[],R.outlineMaterial?.dispose(),R.quadMaterial.dispose()}_createGeometries(R,P){const{up:T,right:J,corner:Q}=this._getVertices(),te=this._quadGeometryData(T,J,Q,R);return P?[te,(0,A.rh)(P,[T,Q,J])]:[te]}_getVertices(){let R=this._up,P=this._right;const T=(0,V.a)(H.WM.get(),R,P);return this.isDraped&&(R=(0,V.c)(H.WM.get(),R),P=(0,V.c)(H.WM.get(),P),R[2]=0,P[2]=0,T[2]=0),{up:R,right:P,corner:T}}_updateTransform(){this.isDraped?this.drapedResources.recreateGeometry():this._updateTransformObject3D()}_updateTransformObject3D(R=(0,_.WG)(this.object3dResources.object)){if(!R)return;const T=this._size*this.view.state.camera.computeScreenPixelSizeAt(this._position),J=Math.min(this._maxSize,T);(0,K.f)(M,this._position),(0,K.k)(M,M,[J,J,J]),R.transformation=M}_setTransformDraped(R){if(0===R.length)return;const{view:{basemapTerrain:{overlayManager:P},state:{contentPixelRatio:T}}}=this,{_position:J,_size:Q}=this,te=(0,V.c)(H.WM.get(),J);te[2]=W.Rn;const N=w;N.spatialReference=(0,_.Wg)(P.renderer.spatialReference),N.x=te[0],N.y=te[1];const k=Q*(P.overlayPixelSizeInMapUnits(N)*T),$=Math.min(this._maxSize,k);(0,K.f)(M,te),(0,K.k)(M,M,[$,$,1]);for(const Y of R)Y.updateTransformation(z=>{(0,K.c)(z,M)})}_quadGeometryData(R,P,T,J){return new F.Z(J,[[o.T.POSITION,new g.a([0,0,0,...P,...R,...T],3,!0)]],[[o.T.POSITION,[0,1,2,1,2,3]]])}get _quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){(0,_.WG)(this.object3dResources.resources)?.quadMaterial.setParameters(this._quadMaterialParameters),(0,_.WG)(this.drapedResources.resources)?.quadMaterial.setParameters(this._quadMaterialParameters)}get _outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){(0,_.WG)(this.object3dResources.resources)?.outlineMaterial?.setParameters(this._outlineMaterialParameters),(0,_.WG)(this.drapedResources.resources)?.outlineMaterial?.setParameters(this._outlineMaterialParameters)}}const M=(0,L.c)(),w=(0,Z.Tx)(0,0,void 0,null)},50916:(_e,q,t)=>{t.d(q,{r:()=>B});var _=t(17626),C=t(26584),K=t(62208),L=t(32917),V=t(77712),X=(t(90912),t(85931),t(76898)),H=t(41632),Z=t(61779);const B=W=>{let g=class extends W{get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get dataLevelRange(){const F=this.tileInfo.lods;return this.levelRangeFromScaleRange(F[0].scale,F[F.length-1].scale)}get displayLevelRange(){const F=this.tileInfo.lods,D=this.levelRangeFromScaleRange(this.layer.minScale||F[0].scale,this.layer.maxScale||F[F.length-1].scale);return this.layer.maxScale&&D.maxLevel++,D}getTileUrl(F,A,v){return this.layer.getTileUrl(F,A,v)}_addTilingSchemeMatchPromise(){if((0,K.Wi)(this.fullExtent))return this.addResolvingPromise(Promise.reject(new C.Z("tilingscheme:extent-not-defined","This layer doesn't define a fullExtent.")));const F=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if((0,K.pC)(F))return this.addResolvingPromise(Promise.reject(F));const A=(0,L.N1)(()=>this.view?.basemapTerrain?.tilingSchemeLocked).then(()=>{const D=this._getTileInfoCompatibilityError(this.tileInfo,this.view.basemapTerrain.tilingScheme);if(D)throw D});this.addResolvingPromise(A)}_getTileInfoSupportError(F,A){const v=(0,Z.er)(F,A,this.view.spatialReference,this.view.state.viewingMode);if(v){const D={layer:this.layer,error:v};let o;switch(v.name){case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":case"tilingscheme:local-unsupported-spatial-reference":o=new C.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",D);break;default:o=new C.Z("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",D)}return o}return null}_getTileInfoCompatibilityError(F,A){return(0,K.Wi)(F)||!A.compatibleWith(F)?new C.Z("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface"):null}levelRangeFromScaleRange(F,A){const v={minLevel:0,maxLevel:1/0},D=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!D)return v;const o=D.levels[0],n=h=>{const I=Math.log(o.scale/h)/Math.LN2;return.5-Math.abs(.5-I%1)<1e-9?Math.round(I):Math.ceil(I)};return null!=F&&F>0&&(v.minLevel=Math.max(0,n(F))),null!=A&&A>0&&(v.maxLevel=Math.max(0,n(A))),v}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return(0,_._)([(0,V.Cb)({readOnly:!0})],g.prototype,"imageFormatIsOpaque",null),(0,_._)([(0,V.Cb)({readOnly:!0})],g.prototype,"updating",void 0),(0,_._)([(0,V.Cb)(H.q)],g.prototype,"updatingProgress",void 0),(0,_._)([(0,V.Cb)(H.V)],g.prototype,"updatingProgressValue",void 0),(0,_._)([(0,V.Cb)()],g.prototype,"fullExtent",null),(0,_._)([(0,V.Cb)({readOnly:!0})],g.prototype,"isOpaque",null),(0,_._)([(0,V.Cb)({readOnly:!0})],g.prototype,"dataLevelRange",null),(0,_._)([(0,V.Cb)({readOnly:!0})],g.prototype,"displayLevelRange",null),(0,_._)([(0,V.Cb)()],g.prototype,"layer",void 0),(0,_._)([(0,V.Cb)()],g.prototype,"tileInfo",void 0),g=(0,_._)([(0,X.j)("esri.views.3d.layers.TiledLayerView3D")],g),g}},32400:(_e,q,t)=>{t.d(q,{D:()=>Q});var _=t(15861),C=t(17626),K=t(88879),L=t(46160),V=t(80542),G=t(54024),U=t(62208),X=t(10699),H=t(32917),Z=t(77712),g=(t(90912),t(85931),t(76898)),F=t(84682),A=t(44917),v=t(84786),D=t(39256),o=t(96854),n=t(62600),h=t(80960),I=t(1191),M=t(94991),w=t(83518),S=t(14752),R=t(67873),P=t(67225),T=t(42743),J=t(23147);let Q=class extends V.r{constructor(N){super(N),this.type="graphics-3d",this.graphicsCore=null,this.drapeSourceType=n.Lw.Features,this.scaleVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this._suspendResumeExtent=null}initialize(){const{layer:N}=this,k="effectiveScaleRange"in N?N:null,$=this.scaleVisibilityEnabled&&(0,U.pC)(k),Y=new I.w({owner:this,layer:this.owner.layer,preferredUpdatePolicy:J.j.SYNC,graphicSymbolSupported:!0,componentFactories:{elevationAlignment:(z,ee)=>new M.Z({graphicsCoreOwner:this,graphicsCore:z,queryGraphicUIDsInExtent:ee,elevationProvider:this.view.elevationProvider}),scaleVisibility:$?(z,ee)=>new R.Z({graphicsCoreOwner:this,layer:k,queryGraphicUIDsInExtent:ee,graphicsCore:z,basemapTerrain:this.owner.view.basemapTerrain}):null,objectStates:z=>new S.d(z)}});if(this._set("graphicsCore",Y),this.frustumVisibilityEnabled&&this._set("frustumVisibility",new w.Z({graphicsCoreOwner:this})),"fullOpacity"in this.owner){const z=this.owner;this.updatingHandles.add(()=>z.fullOpacity,()=>this.graphicsCore.opacityChange())}if("elevationInfo"in N){const z=N;this.updatingHandles.add(()=>z.elevationInfo,(ee,re)=>{(0,F.Hg)(ee,re)&&this.updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())})}this._set("initializePromise",this._initializeAsync()),this.updatingHandles.addPromise(this.initializePromise)}_initializeAsync(){var N=this;return(0,_.Z)(function*(){try{yield N.graphicsCore.initializePromise}catch(k){if((0,X.D_)(k))return;throw k}N.destroyed||(N.handles.add((0,H.YP)(()=>N.view.clippingArea,()=>N._updateClippingExtent(),H.Z_)),N._updateClippingExtent(),N._setupSuspendResumeExtent(),N.graphicsCore.startCreateGraphics())})()}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("frustumVisibility",(0,U.SC)(this.frustumVisibility)),this._set("graphicsCore",(0,U.SC)(this.graphicsCore))}get layer(){return this.owner.layer}get view(){return this.owner.view}get scaleVisibility(){return this.graphicsCore?.scaleVisibility}get elevationAlignment(){return this.graphicsCore?.elevationAlignment}get objectStates(){return this.graphicsCore?.objectStates}get scaleVisibilitySuspended(){return!(!(0,U.pC)(this.scaleVisibility)||!this.scaleVisibility.suspended)}get frustumVisibilitySuspended(){return(0,U.pC)(this.frustumVisibility)&&this.frustumVisibility.suspended}get suspended(){return this.owner.suspended??!1}get updating(){return!!(this.graphicsCore?.updating||(0,U.pC)(this.scaleVisibility)&&this.scaleVisibility.updating||(0,U.pC)(this.frustumVisibility)&&this.frustumVisibility.updating||this.updatingHandles.updating)}get graphics3DGraphics(){return this.graphicsCore?.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphicsCore?.graphics3DGraphicsByObjectID}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){return this.owner.fullOpacity??1}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}notifyGraphicGeometryChanged(N){this.graphicsCore.notifyGraphicGeometryChanged(N)}notifyGraphicVisibilityChanged(N){this.graphicsCore.notifyGraphicVisibilityChanged(N)}getRenderingInfo(N,k,$){const Y=(0,D.Kb)(N,{renderer:k,arcade:$});if((0,U.pC)(Y)&&Y.color){const z=Y.color;z[0]=z[0]/255,z[1]=z[1]/255,z[2]=z[2]/255}return Y}getRenderingInfoAsync(N,k,$,Y){return(0,D.xn)(N,{renderer:k,arcade:$,...Y})}getHit(N){if(this.owner.loadedGraphics){const k=this.owner.loadedGraphics.find($=>$.uid===N);if(k){const Y=(0,v.mW)(k,this.layer instanceof A.Z?this.layer:null);return{type:"graphic",graphic:Y,layer:Y.layer}}}return null}whenGraphicBounds(N,k){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(N,k):Promise.reject()}computeAttachmentOrigin(N,k){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(N,k):null}getSymbolLayerSize(N,k){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(N,k):null}maskOccludee(N){const{set:k,handle:$}=this.objectStates.acquireSet(T.V_.MaskOccludee,null);return this.objectStates.setUid(k,N.uid),$}highlight(N){if(N instanceof o.Z)return te;if("number"==typeof N)return this.highlight([N]);if(N instanceof K.Z)return this.highlight([N]);if(N instanceof L.Z&&(N=N.toArray()),Array.isArray(N)&&N.length>0){if(N[0]instanceof K.Z){const k=N.map(z=>z.uid),{set:$,handle:Y}=this.objectStates.acquireSet(T.V_.Highlight,null);return this.objectStates.setUids($,k),Y}if("number"==typeof N[0]){const k=N,{set:$,handle:Y}=this.objectStates.acquireSet(T.V_.Highlight,null);return this.objectStates.setObjectIds($,k),Y}}return te}_setupSuspendResumeExtent(){const{scaleVisibility:N,frustumVisibility:k}=this;if((0,U.Wi)(N)&&(0,U.Wi)(k))return;const $=({computedExtent:Y,extentPadding:z})=>{this._suspendResumeExtent=(0,P.Go)(Y,this._suspendResumeExtent,h.Z,z),(0,U.pC)(N)&&N.setExtent(this._suspendResumeExtent),(0,U.pC)(k)&&k.setExtent(this._suspendResumeExtent)};this.handles.add((0,H.YP)(()=>({computedExtent:this.graphicsCore?.computedExtent,extentPadding:this.graphicsCore?.extentPadding}),Y=>$(Y),H.tX))}_updateClippingExtent(){this.graphicsCore.setClippingExtent(this.view.clippingArea,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}};(0,C._)([(0,Z.Cb)()],Q.prototype,"type",void 0),(0,C._)([(0,Z.Cb)({constructOnly:!0})],Q.prototype,"owner",void 0),(0,C._)([(0,Z.Cb)()],Q.prototype,"layer",null),(0,C._)([(0,Z.Cb)()],Q.prototype,"view",null),(0,C._)([(0,Z.Cb)({constructOnly:!0})],Q.prototype,"graphicsCore",void 0),(0,C._)([(0,Z.Cb)()],Q.prototype,"scaleVisibility",null),(0,C._)([(0,Z.Cb)({constructOnly:!0})],Q.prototype,"frustumVisibility",void 0),(0,C._)([(0,Z.Cb)()],Q.prototype,"elevationAlignment",null),(0,C._)([(0,Z.Cb)()],Q.prototype,"objectStates",null),(0,C._)([(0,Z.Cb)()],Q.prototype,"scaleVisibilitySuspended",null),(0,C._)([(0,Z.Cb)({readOnly:!0})],Q.prototype,"frustumVisibilitySuspended",null),(0,C._)([(0,Z.Cb)()],Q.prototype,"suspended",null),(0,C._)([(0,Z.Cb)({readOnly:!0})],Q.prototype,"updating",null),(0,C._)([(0,Z.Cb)()],Q.prototype,"loadedGraphics",null),(0,C._)([(0,Z.Cb)()],Q.prototype,"fullOpacity",null),(0,C._)([(0,Z.Cb)()],Q.prototype,"slicePlaneEnabled",null),(0,C._)([(0,Z.Cb)()],Q.prototype,"drapeSourceType",void 0),(0,C._)([(0,Z.Cb)()],Q.prototype,"updatePolicy",null),(0,C._)([(0,Z.Cb)({constructOnly:!0})],Q.prototype,"scaleVisibilityEnabled",void 0),(0,C._)([(0,Z.Cb)({constructOnly:!0})],Q.prototype,"frustumVisibilityEnabled",void 0),(0,C._)([(0,Z.Cb)()],Q.prototype,"initializePromise",void 0),Q=(0,C._)([(0,g.j)("esri.views.3d.layers.graphics.GraphicsProcessor")],Q);const te=(0,G.kB)()},3493:(_e,q,t)=>{t.d(q,{Z6:()=>X,ZS:()=>U,sw:()=>G});var _=t(58817),C=t(62208),K=t(97445);const L={setAttribute(){},rollback(){},commit(){}};var V,A;function G(A,v){const D=v.attributes[A.objectIdField],o=A.sessions.get(D);if(o)return o;const n=(0,_.d9)(v.attributes),h=new Set;if(null==D)return L;const I=A.i3sOverrides.createInteractiveEditSession(D),M=new Map;let S=V.EDITING;const R={setAttribute(P,T){if(S!==V.EDITING)return;const J=A.fieldsIndex.get(P);if((0,C.Wi)(J))return;const Q=A.attributeStorageInfo.findIndex(k=>k.name===J.name);if(Q<0)return;I.set(Q,T);const te=A.attributeStorageInfo[Q];let N=!1;h.add(P),A.forEachNode((k,$)=>{const Y=((P,T)=>{const J=M.get(P);if(null==J){const Q=T.indexOf(D);return M.set(P,Q),Q}return J})(k,$);if(-1===Y)return;const z=A.getAttributeData(k.index);if(z){const ee=z[te.name];ee&&(ee[Y]=T,A.setAttributeData(k.index,z,v),N=!0)}}),N&&A.clearMemCache()},rollback(){if(S===V.EDITING){for(const P of h)this.setAttribute(P,n[P]);I.rollback(),S=V.ROLLED_BACK,A.sessions.delete(D)}},commit(){S===V.EDITING&&(I.commit(),S=V.COMMITTED,A.sessions.delete(D))}};return A.sessions.set(D,R),R}function U(A,v){const D=[...v.addedFeatures,...v.updatedFeatures,...v.deletedFeatures];for(const o of D)o.objectId&&A.i3sOverrides.updateGeometry(o.objectId)}function X(A,v){const D=function H(A,v){const D=v.edits.updateFeatures;if(!D||0===D.length)return new F;const o=function W(A){const v=new Set;if(!A.updatedFeatures)return v;for(const D of A.updatedFeatures)null!=D.objectId&&null==D.error&&v.add(D.objectId);return v}(v),n=new F,h=new Map;for(let S=0;S<A.attributeStorageInfo.length;S++)h.set(A.attributeStorageInfo[S].name,S);const I=A.fieldsIndex,M=A.objectIdField,w=D.filter(S=>{const R=(0,K.g)(I,S.attributes,M);return o.has(R)});return A.forEachNode((S,R)=>{const P=new Set(R);for(const T of w){const J=(0,K.g)(I,T.attributes,M);if(!P.has(J))continue;const Q=R.indexOf(J);for(const te in T.attributes){const N=A.fieldsIndex.normalizeFieldName(te);Z(n,S.index,N).push({featureIndex:Q,featureId:J,value:T.attributes[te]})}}}),n}(A,v);if(0===D.size)return;const o=new Map;for(let h=0;h<A.attributeStorageInfo.length;h++)o.set(A.attributeStorageInfo[h].name,h);let n=!1;D.forEach((h,I)=>{const M=A.getAttributeData(I);let w=!1;h.forEach((S,R)=>{const P=(0,C.pC)(M)?M[R]:null,T=o.get(R);for(const{featureIndex:J,value:Q,featureId:te}of S)P&&(P[J]=Q,w=!0,n=!0),A.i3sOverrides.updateAttributeValue(te,T,Q)}),w&&A.setAttributeData(I,M,null)}),n&&A.clearMemCache()}function Z(A,v,D){const o=function B(A,v){const D=A.get(v);if(D)return D;const o=new g;return A.set(v,o),o}(A,v),n=null!=D&&o.get(D);if(n)return n;const h=new Array;return o.set(D,h),h}(A=V||(V={}))[A.EDITING=0]="EDITING",A[A.ROLLED_BACK=1]="ROLLED_BACK",A[A.COMMITTED=2]="COMMITTED";const g=Map,F=Map},40465:(_e,q,t)=>{t.d(q,{i:()=>W});var _=t(15861),C=t(17626),K=t(26584),L=t(62208),H=(t(63290),t(90912),t(85931),t(8314),t(76898)),Z=t(36630),B=t(10023);const W=g=>{let F=class extends g{_validateFetchPopupFeatures(A){const{layer:v}=this,{popupEnabled:D}=v;if(!D)throw new K.Z("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:v});if(!(0,B.V)(v,A))throw new K.Z("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:v})}prepareFetchPopupFeatures(A){return(0,_.Z)(function*(){})()}fetchPopupFeatures(A,v){var D=this;return(0,_.Z)(function*(){D._validateFetchPopupFeatures(v);const o=(0,L.pC)(v)?v.clientGraphics:null;if(!o||0===o.length)return[];const n="scene"===D.layer.type&&(0,L.pC)(D.layer.associatedLayer)?D.layer.associatedLayer:D.layer;let h=[];"fieldsIndex"in D.layer&&(h=(0,Z.Lk)(D.layer.fieldsIndex,yield(0,B.e)(n,(0,B.V)(D.layer,v)))),yield D.prepareFetchPopupFeatures(h);const I=new Set,M=[],w=[];for(const S of o)(0,Z.Gm)(h,S,I)?w.push(S):M.push(S);return 0===w.length?M:D.whenGraphicAttributes(w,[...I]).catch(()=>w).then(S=>M.concat(S))})()}};return F=(0,C._)([(0,H.j)("esri.views.3d.layers.support.PopupSceneLayerView")],F),F}},57610:(_e,q,t)=>{t.d(q,{K:()=>n});var _=t(15861),C=t(17626),K=t(14517),L=t(63290),V=t(36082),G=t(77712),U=t(76898),X=t(819);const H=M=>{let w=class extends M{constructor(){super(...arguments),this._numUpdating=0,this._asyncUpdateState=new Map}get updating(){return this._numUpdating>0}autoUpdateAsync(S,R){return function B(M,w){const R=()=>{if(!T||J)return w();T.clear(),J=!0;const Q=(0,V.LJ)(T,w);return J=!1,Q};let T=new X.M(()=>{T&&!J&&M(R)}),J=!1;return M(R),{remove:()=>{T&&(T.destroy(),T=null)}}}(P=>this._updateAsync(S,P),R)}_updateAsync(S,R){var P=this;return(0,_.Z)(function*(){if(!P._startAsyncUpdate(S)){try{const T=yield R();P._set(S,T)}catch{L.Z.getLogger(P.declaredClass).warn(`Async update of "${String(S)}" failed. Async update functions should not throw exceptions.`)}P._endAsyncUpdate(S)&&P._updateAsync(S,R)}})()}_startAsyncUpdate(S){const R=this._asyncUpdateState.get(S)??Z.None;return R&Z.Updating?(this._asyncUpdateState.set(S,R|Z.Invalidated),!0):(++this._numUpdating,this._asyncUpdateState.set(S,R|Z.Updating),!1)}_endAsyncUpdate(S){--this._numUpdating;const R=(this._asyncUpdateState.get(S)??Z.None)&~Z.Updating;return R&Z.Invalidated?(this._asyncUpdateState.set(S,R&~Z.Invalidated),!0):(this._asyncUpdateState.set(S,R),!1)}};return(0,C._)([(0,G.Cb)({readOnly:!0})],w.prototype,"updating",null),(0,C._)([(0,G.Cb)()],w.prototype,"_numUpdating",void 0),w=(0,C._)([(0,U.j)("esri.core.AsyncUpdate")],w),w};var Z,M;(M=Z||(Z={}))[M.None=0]="None",M[M.Updating=1]="Updating",M[M.Invalidated=2]="Invalidated";let W=class extends(H(K.Z)){};W=(0,C._)([(0,U.j)("esri.core.AsyncUpdate")],W);var g=t(80542),F=t(62208),D=(t(90912),t(85931),t(36630));const o="esri.views.3d.layers.support.SceneLayerViewRequiredFields";let n=class extends(H(g.r)){get layer(){return this.layerView.layer}get requiredFields(){const{layerView:{layer:{fieldsIndex:M},definitionExpressionFields:w},rendererFields:S,labelingFields:R,viewFilterFields:P}=this;return(0,D.Q0)(M,[...(0,F.Pt)(w,[]),...(0,F.Pt)(S,[]),...(0,F.Pt)(R,[]),...(0,F.Pt)(P,[])])}constructor(M){super(M)}initialize(){var M=this;this.handles.add([this.autoUpdateAsync("rendererFields",(0,_.Z)(function*(){const{fieldsIndex:w,renderer:S}=M.layer;return S?h(R=>S.collectRequiredFields(R,w)):null})),this.autoUpdateAsync("labelingFields",(0,_.Z)(function*(){const{layer:w}=M;return w.labelsVisible?h(S=>(0,D.Mu)(S,w)):null})),this.autoUpdateAsync("viewFilterFields",()=>{const{layer:w,filter:S}=this.layerView;return h(R=>(0,D.Ll)(R,w,S))})])}};function h(M){return I.apply(this,arguments)}function I(){return I=(0,_.Z)(function*(M){const w=new Set;try{return yield M(w),Array.from(w).sort()}catch(S){return L.Z.getLogger(o).error(S),null}}),I.apply(this,arguments)}(0,C._)([(0,G.Cb)()],n.prototype,"layerView",void 0),(0,C._)([(0,G.Cb)()],n.prototype,"layer",null),(0,C._)([(0,G.Cb)()],n.prototype,"requiredFields",null),(0,C._)([(0,G.Cb)()],n.prototype,"rendererFields",void 0),(0,C._)([(0,G.Cb)()],n.prototype,"labelingFields",void 0),(0,C._)([(0,G.Cb)()],n.prototype,"viewFilterFields",void 0),n=(0,C._)([(0,U.j)(o)],n)},67966:(_e,q,t)=>{t.d(q,{v:()=>C});var _=t(36630);function C(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:K,layer:{fieldsIndex:L},requiredFields:V}=this;return(0,_.Q0)(L,K.outFields?[...(0,_.Lk)(L,K.outFields),...V]:V)}}}}},70211:(_e,q,t)=>{t.d(q,{x:()=>L});var _=t(33351),C=t(97979),K=t(19038);class L extends C.a{constructor(G){super({...G,constraint:new _.Hk(G.targetPoint)})}get hints(){return[new K.n(this.targetPoint,this.isDraped,this.domain)]}}},9218:(_e,q,t)=>{t.d(q,{X:()=>X,g:()=>H});var _=t(62208),C=t(28093),K=t(59550),L=t(61430),V=t(75897),G=t(70211);function U({x:Z,y:B,z:W}){return(0,K.uc)((0,C.f)(Z,B,W??0))}function X(Z,B){switch(Z.type){case"edge":return Z.draped?new L.k({edgeStart:U(Z.start),edgeEnd:U(Z.end),targetPoint:U(Z.target),objectId:Z.objectId,getGroundElevation:B}):new V.L({edgeStart:U(Z.start),edgeEnd:U(Z.end),targetPoint:U(Z.target),objectId:Z.objectId,isDraped:!1});case"vertex":return new G.x({targetPoint:U(Z.target),objectId:Z.objectId,isDraped:!1})}}function H(Z){return(0,_.pC)(Z)&&"3d"===Z.type?(B,W,g)=>Z.elevationProvider.getElevation(B,W,g??0,Z.spatialReference,"ground"):()=>null}},17936:(_e,q,t)=>{t.d(q,{p:()=>H});var _=t(15861),K=(t(8314),t(93961)),L=t(88159),V=t(62208),G=t(10699),U=t(16730),X=t(29505);function H(v=!1,D){if(v){const{elevationInfo:o,alignPointsInFeatures:n,spatialReference:h}=D;return new W(o,n,h)}return new Z}class Z{alignCandidates(D,o){return(0,_.Z)(function*(){return D})()}notifyElevationSourceChange(){}}class W{constructor(D,o,n){this._elevationInfo=D,this._alignPointsInFeatures=o,this.spatialReference=n,this._alignmentsCache=new K.Z(1024),this._cacheVersion=0,this._metersPerVerticalUnit=(0,U._R)(n)}alignCandidates(D,o){var n=this;return(0,_.Z)(function*(){const h=n._elevationInfo;return(0,V.pC)(h)&&"absolute-height"===h.mode&&!h.featureExpressionInfo?(n._alignAbsoluteElevationCandidates(D,h),D):n._alignComputedElevationCandidates(D,o)})()}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}_alignAbsoluteElevationCandidates(D,o){const{offset:n,unit:h}=o;if((0,V.Wi)(n))return;const I=n*((0,X.Z7)(h??"meters")/this._metersPerVerticalUnit);for(const M of D)switch(M.type){case"edge":M.start.z+=I,M.end.z+=I;continue;case"vertex":M.target.z+=I;continue}}_alignComputedElevationCandidates(D,o){var n=this;return(0,_.Z)(function*(){const h=new Map;for(const J of D)(0,L.s1)(h,J.objectId,A).push(J);const[I,M,w]=n._prepareQuery(h),S=yield n._alignPointsInFeatures(I,o);if((0,G.k_)(o),w!==n._cacheVersion)return n._alignComputedElevationCandidates(D,o);n._applyCacheAndResponse(I,S,M);const{drapedObjectIds:R,failedObjectIds:P}=S,T=[];for(const J of D){const{objectId:Q}=J;R.has(Q)&&"edge"===J.type&&(J.draped=!0),P.has(Q)||T.push(J)}return T})()}_prepareQuery(D){const o=[],n=[];for(const[h,I]of D){const M=[];for(const w of I)this._addToQueriesOrCachedResult(h,w.target,M,n),"edge"===w.type&&(this._addToQueriesOrCachedResult(h,w.start,M,n),this._addToQueriesOrCachedResult(h,w.end,M,n));0!==M.length&&o.push({objectId:h,points:M})}return[o,n,this._cacheVersion]}_addToQueriesOrCachedResult(D,o,n,h){const I=F(D,o),M=this._alignmentsCache.get(I);(0,V.pC)(M)?h.push(new g(o,M)):n.push(o)}_applyCacheAndResponse(D,{elevations:o,drapedObjectIds:n,failedObjectIds:h},I){for(const S of I)S.apply();let M=0;const w=this._alignmentsCache;for(const{objectId:S,points:R}of D){if(h.has(S)){M+=R.length;continue}const P=!n.has(S);for(const T of R){const J=F(S,T),Q=o[M++];T.z=Q,P&&w.put(J,Q,1)}}}}class g{constructor(D,o){this.point=D,this.z=o}apply(){this.point.z=this.z}}function F(v,{x:D,y:o,z:n}){return`${v}-${D}-${o}-${n??0}}`}function A(){return[]}},1520:(_e,q,t)=>{t.d(q,{c:()=>V}),t(8314);class C{filter(W,g){return g}notifyElevationSourceChange(){}}class K{filter(W,g){const{point:F,distance:A}=W,{z:v}=F;if(null==v||0===g.length)return g;const D=function H(B){return"number"==typeof B?{x:B,y:B,z:B}:B}(A),o=this._updateCandidatesTo3D(g,F,D).filter(L);return o.sort(Z),o}_updateCandidatesTo3D(W,g,F){for(const A of W)switch(A.type){case"edge":G(A,g,F);continue;case"vertex":X(A,g,F);continue}return W}}function L(B){return B.distance<=1}function V(B=!1){return B?new K:new C}function G(B,W,{x:g,y:F,z:A}){const{start:v,end:D,target:o}=B;B.draped||function U(B,W,g,F){const A=F.x-g.x,v=F.y-g.y,D=F.z-g.z,h=Math.min(1,Math.max(0,((W.x-g.x)*A+(W.y-g.y)*v+D*(W.z-g.z))/(A*A+v*v+D*D))),M=g.y+v*h,w=g.z+D*h;B.x=g.x+A*h,B.y=M,B.z=w}(o,W,v,D);const n=(W.x-o.x)/g,h=(W.y-o.y)/F,I=(W.z-o.z)/A;B.distance=Math.sqrt(n*n+h*h+I*I)}function X(B,W,{x:g,y:F,z:A}){const{target:v}=B,D=(W.x-v.x)/g,o=(W.y-v.y)/F,n=(W.z-v.z)/A,h=Math.sqrt(D*D+o*o+n*n);B.distance=h}function Z(B,W){return B.distance-W.distance}},83010:(_e,q,t)=>{t.d(q,{k:()=>U});var _=t(15861),K=(t(8314),t(58817)),L=t(93961),V=t(10699),G=t(77275);function U(W=!1,g){return W?new Z(g):new X}class X{fetch(){return(0,_.Z)(function*(){return[]})()}notifySymbologyChange(){}}class Z{constructor(g){this._getSymbologyCandidates=g,this._candidatesCache=new L.Z(1024),this._cacheVersion=0}fetch(g,F){var A=this;return(0,_.Z)(function*(){if(0===g.length)return[];const v=[],D=[],o=A._candidatesCache;for(const S of g){const R=B(S),P=o.get(R);if(P)for(const T of P)D.push((0,K.d9)(T));else v.push(S),o.put(R,[],1)}if(0===v.length)return D;const n=A._cacheVersion,{candidates:h,sourceCandidateIndices:I}=yield A._getSymbologyCandidates(v,F);if((0,V.k_)(F),n!==A._cacheVersion)return A.fetch(g,F);const M=[],{length:w}=h;for(let S=0;S<w;++S){const R=h[S],P=B(v[I[S]]),T=o.get(P);T.push(R),o.put(P,T,T.length),M.push((0,K.d9)(R))}return D.concat(M)})()}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function B(W){switch(W.type){case"vertex":{const{objectId:g,target:F}=W;return(0,G.hP)(`${g}-vertex-${F.x}-${F.y}-${F.z??0}`).toString()}case"edge":{const{objectId:g,start:F,end:A}=W;return(0,G.hP)(`${g}-edge-${F.x}-${F.y}-${F.z??0}-to-${A.x}-${A.y}-${A.z??0}`).toString()}default:return""}}},961:(_e,q,t)=>{t.r(q),t.d(q,{default:()=>W});var _=t(17626),C=t(46160),K=t(89726),L=t(62208),V=t(32917),G=t(77712),H=(t(90912),t(85931),t(76898)),Z=t(45611);let B=class extends Z.Z{constructor(g){super(g),this.type="group",this.layerViews=new C.Z}_allLayerViewVisibility(g){this.layerViews.forEach(F=>{F.visible=g})}initialize(){this.handles.add([this.layerViews.on("change",g=>this._layerViewsChangeHandler(g)),(0,V.YP)(()=>this.layer.visibilityMode,()=>this._applyVisibility(()=>this._allLayerViewVisibility(this.visible),()=>this._applyExclusiveVisibility(null)),V.Z_),(0,V.YP)(()=>this.visible,g=>{this._applyVisibility(()=>this._allLayerViewVisibility(g),()=>{})},V.Z_)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}set layerViews(g){this._set("layerViews",(0,K.Z)(g,this._get("layerViews")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce((g,F)=>g+F.updatingProgress,0)/this.layerViews.length}isUpdating(){return this.layerViews.some(g=>g.updating)}_hasLayerViewVisibleOverrides(){return this.layerViews.some(g=>g._isOverridden("visible"))}_findLayerViewForLayer(g){return g&&this.layerViews.find(F=>F.layer===g)}_firstVisibleOnLayerOrder(){const g=this.layer.layers.find(F=>!!this._findLayerViewForLayer(F)?.visible);return g&&this._findLayerViewForLayer(g)}_applyExclusiveVisibility(g){(0,L.Wi)(g)&&(g=this._firstVisibleOnLayerOrder(),(0,L.Wi)(g)&&this.layerViews.length>0&&(g=this._findLayerViewForLayer(this.layer.layers.getItemAt(0)))),this.layerViews.forEach(F=>{F.visible=F===g})}_layerViewsChangeHandler(g){this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map(A=>(0,V.YP)(()=>A.visible,v=>this._applyVisibility(()=>{v!==this.visible&&(A.visible=this.visible)},()=>this._applyExclusiveVisibility(v?A:null)),V.Z_)).toArray(),"grouplayerview:visible");const F=g.added[g.added.length-1];this._applyVisibility(()=>this._allLayerViewVisibility(this.visible),()=>this._applyExclusiveVisibility(F?.visible?F:null))}_applyVisibility(g,F){this._hasLayerViewVisibleOverrides()&&("inherited"===this.layer?.visibilityMode?g():"exclusive"===this.layer?.visibilityMode&&F())}};(0,_._)([(0,G.Cb)({cast:K.R})],B.prototype,"layerViews",null),(0,_._)([(0,G.Cb)({readOnly:!0})],B.prototype,"updatingProgress",null),(0,_._)([(0,G.Cb)()],B.prototype,"view",void 0),B=(0,_._)([(0,H.j)("esri.views.layers.GroupLayerView")],B);const W=B},96942:(_e,q,t)=>{t.d(q,{Z:()=>g});var _=t(15861),C=t(17626),K=t(26584),L=t(62208),V=t(77712),X=(t(90912),t(85931),t(76898)),H=t(72642),Z=t(13812),B=t(96854),W=t(10023);const g=F=>{let A=class extends F{constructor(){super(...arguments),this.view=null}fetchPopupFeatures(v,D){var o=this;return(0,_.Z)(function*(){const{layer:n}=o;if(!v)throw new K.Z("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:n});const{popupEnabled:h}=n,I=(0,W.V)(n,D);if(!h||(0,L.Wi)(I))throw new K.Z("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:h,popupTemplate:I});const M=yield I.getRequiredFields(),w=new B.Z;w.timeExtent=o.timeExtent,w.geometry=v,w.outFields=M,w.outSpatialReference=v.spatialReference;const{resolution:S,spatialReference:R}=o.view,P="2d"===o.view.type?new H.Z(S,S,R):new H.Z(.5*S,.5*S,R),{returnTopmostRaster:T,showNoDataRecords:J}=I.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},Q={returnDomainValues:!0,returnTopmostRaster:T,pixelSize:P,showNoDataRecords:J,signal:(0,L.pC)(D)?D.signal:null};return n.queryVisibleRasters(w,Q).then(te=>te)})()}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return(0,C._)([(0,V.Cb)()],A.prototype,"layer",void 0),(0,C._)([(0,V.Cb)()],A.prototype,"suspended",void 0),(0,C._)([(0,V.Cb)(Z.qG)],A.prototype,"timeExtent",void 0),(0,C._)([(0,V.Cb)()],A.prototype,"view",void 0),A=(0,C._)([(0,X.j)("esri.views.layers.ImageryLayerView")],A),A}},12374:(_e,q,t)=>{t.d(q,{Z:()=>g});var _=t(15861),C=t(17626),K=t(88879),L=t(26584),V=t(62208),G=t(77712),H=(t(90912),t(85931),t(76898)),Z=t(13812),B=t(28594),W=t(10023);const g=F=>{let A=class extends F{constructor(){super(...arguments),this._rasterFieldPrefix="Raster.",this.layer=null,this.view=null,this.tileInfo=null}get fullExtent(){return this._getfullExtent()}_getfullExtent(){return this.projectFullExtent(this.view.spatialReference)}get hasTilingEffects(){return this.layer.renderer&&"dynamicRangeAdjustment"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}get datumTransformation(){return(0,B._D)((0,V.Wg)(this.layer.fullExtent),this.view.spatialReference,!0)}supportsSpatialReference(v){return!!this.projectFullExtent(v)}projectFullExtent(v){const D=(0,V.Wg)(this.layer.fullExtent),o=(0,B._D)(D,v,!1);return(0,B.tB)(D,v,o)}fetchPopupFeatures(v,D){var o=this;return(0,_.Z)(function*(){const{layer:n}=o;if(!v)throw new L.Z("imageryTileLayerView:fetchPopupFeatures","Nothing to fetch without area",{layer:n});const{popupEnabled:h}=n,I=(0,W.V)(n,D);if(!h||(0,V.Wi)(I))throw new L.Z("imageryTileLayerView:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:h,popupTemplate:I});const M=[],{value:w,magdirValue:S}=yield n.identify(v,{timeExtent:o.timeExtent});let R="";if(w&&w.length){R="imagery-tile"===n.type&&n.hasStandardTime()&&null!=w[0]?w.map(te=>n.getStandardTimeValue(te)).join(", "):w.join(", ");const P={ObjectId:0};P["Raster.ServicePixelValue"]=R;const T=n.rasterInfo.attributeTable;if((0,V.pC)(T)){const{fields:te,features:N}=T,k=te.find(({name:Y})=>"value"===Y.toLowerCase()),$=k?N.find(Y=>String(Y.attributes[k.name])===R):null;if($)for(const Y in $.attributes)$.attributes.hasOwnProperty(Y)&&(P[o._rasterFieldPrefix+Y]=$.attributes[Y])}const J=n.rasterInfo.dataType;"vector-magdir"!==J&&"vector-uv"!==J||(P["Raster.Magnitude"]=S?.[0],P["Raster.Direction"]=S?.[1]);const Q=new K.Z(o.fullExtent.clone(),null,P);Q.layer=n,Q.sourceLayer=Q.layer,M.push(Q)}return M})()}};return(0,C._)([(0,G.Cb)()],A.prototype,"layer",void 0),(0,C._)([(0,G.Cb)(Z.qG)],A.prototype,"timeExtent",void 0),(0,C._)([(0,G.Cb)()],A.prototype,"view",void 0),(0,C._)([(0,G.Cb)()],A.prototype,"fullExtent",null),(0,C._)([(0,G.Cb)()],A.prototype,"tileInfo",void 0),(0,C._)([(0,G.Cb)({readOnly:!0})],A.prototype,"hasTilingEffects",null),(0,C._)([(0,G.Cb)()],A.prototype,"datumTransformation",null),A=(0,C._)([(0,H.j)("esri.views.layers.ImageryTileLayerView")],A),A}},17845:(_e,q,t)=>{t.d(q,{Z:()=>X});var _=t(17626),C=t(77712),V=(t(90912),t(85931),t(76898)),G=t(13812),U=t(14772);const X=H=>{let Z=class extends H{initialize(){this.exportImageParameters=new U.R({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get floors(){return this.view?.floors??null}get exportImageVersion(){return this.exportImageParameters?.commitProperty("version"),this.commitProperty("timeExtent"),this.commitProperty("floors"),(this._get("exportImageVersion")||0)+1}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return(0,_._)([(0,C.Cb)()],Z.prototype,"exportImageParameters",void 0),(0,_._)([(0,C.Cb)({readOnly:!0})],Z.prototype,"floors",null),(0,_._)([(0,C.Cb)({readOnly:!0})],Z.prototype,"exportImageVersion",null),(0,_._)([(0,C.Cb)()],Z.prototype,"layer",void 0),(0,_._)([(0,C.Cb)()],Z.prototype,"suspended",void 0),(0,_._)([(0,C.Cb)(G.qG)],Z.prototype,"timeExtent",void 0),Z=(0,_._)([(0,V.j)("esri.views.layers.MapImageLayerView")],Z),Z}},53818:(_e,q,t)=>{t.d(q,{Z:()=>G});var _=t(17626),C=t(77712),V=(t(90912),t(85931),t(76898));const G=U=>{let X=class extends U{get availableFields(){return this.layer.fieldsIndex.fields.map(H=>H.name)}};return(0,_._)([(0,C.Cb)()],X.prototype,"layer",void 0),(0,_._)([(0,C.Cb)({readOnly:!0})],X.prototype,"availableFields",null),X=(0,_._)([(0,V.j)("esri.views.layers.OGCFeatureLayerView")],X),X}},78465:(_e,q,t)=>{t.d(q,{Z:()=>v});var _=t(15861),C=t(17626),K=t(63290),L=t(62208),V=t(76825),G=t(32917),U=t(77712),Z=(t(90912),t(85931),t(76898)),B=t(55915),W=t(45611);const g="esri.views.layers.SceneLayerView",F=K.Z.getLogger(g);let A=class extends W.Z{constructor(){super(...arguments),this.layer=null,this.filter=null,this._geometryEngine=null,this._projectionEngineLoaded=!1}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(D){throw new Error("Not implemented")}get maximumNumberOfFeaturesExceeded(){return!1}get layerFilter(){return(0,V.lK)(this._layerFilter)}get _layerFilter(){const D=this.layer.filter;if((0,L.Wi)(D)||D.geometries.length<1)return null;const o=this._geometryEngine;if((0,L.Wi)(o)||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return V.cn;const n=D.geometries.getItemAt(0).spatialReference,h=D.geometries.toArray().map(S=>{try{S=o.simplify(S)}catch{return F.warnOncePerTick("Failed to simplify scene filter mask polygon. Polygon will be ignored."),null}if(null==S)return null;if(S.spatialReference.equals(n))return S;try{return(0,B.iV)(S,n)}catch{return F.warnOncePerTick("Failed to project scene filter mask polygon. Polygon will be ignored."),null}}).filter(L.pC).sort((S,R)=>S.extent.xmin-R.extent.xmin),I=new Set,M=new Array,w=new Array;for(let S of h){const R=S.extent.xmin;if(M.length=0,I.forEach(P=>{if(R>=P.extent.xmax)return w.push(P),void I.delete(P);S.extent.ymin<=P.extent.ymax&&S.extent.ymax>=P.extent.ymin&&o.intersects(S,P)&&M.push(P)}),M.length>0){M.push(S);try{S=o.union(M)}catch{F.warnOncePerTick("Failed to unify filter mask polygons. Polygon will be ignored.");continue}M.pop(),M.forEach(P=>I.delete(P))}I.add(S)}return I.forEach(S=>w.push(S)),w.length>0?{spatialRelationship:D.spatialRelationship,geometries:w}:null}get _filterNeedsProjectionEngine(){const D=this.layer.filter;if((0,L.Wi)(D)||D.geometries.length<=1)return!1;const o=D.geometries.getItemAt(0).spatialReference;return D.geometries.some(({spatialReference:n})=>!n.equals(o)&&!(0,B.Up)(n,o))}get layerFilterUpdating(){return(0,V.j)(this._layerFilter)}initialize(){var D=this;(0,G.N1)(()=>!this._geometryEngine&&(0,L.pC)(this.layer.filter)&&this.layer.filter.geometries.length).then((0,_.Z)(function*(){return D._geometryEngine=yield Promise.all([t.e(4918),t.e(4766)]).then(t.bind(t,44766))})),this._projectionEngineLoaded=(0,B.kR)(),(0,G.N1)(()=>!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine).then((0,_.Z)(function*(){yield(0,B.zD)(),D._projectionEngineLoaded=!0}))}highlight(D){throw new Error("Not implemented")}queryFeatures(D,o){throw new Error("Not implemented")}queryObjectIds(D,o){throw new Error("Not implemented")}queryFeatureCount(D,o){throw new Error("Not implemented")}createQuery(){throw new Error("Not implemented")}queryExtent(D,o){throw new Error("Not implemented")}};(0,C._)([(0,U.Cb)()],A.prototype,"layer",void 0),(0,C._)([(0,U.Cb)()],A.prototype,"availableFields",null),(0,C._)([(0,U.Cb)()],A.prototype,"maximumNumberOfFeatures",null),(0,C._)([(0,U.Cb)({readOnly:!0})],A.prototype,"maximumNumberOfFeaturesExceeded",null),(0,C._)([(0,U.Cb)()],A.prototype,"filter",void 0),(0,C._)([(0,U.Cb)({readOnly:!0})],A.prototype,"layerFilter",null),(0,C._)([(0,U.Cb)({readOnly:!0})],A.prototype,"_layerFilter",null),(0,C._)([(0,U.Cb)()],A.prototype,"_geometryEngine",void 0),(0,C._)([(0,U.Cb)()],A.prototype,"_projectionEngineLoaded",void 0),(0,C._)([(0,U.Cb)()],A.prototype,"_filterNeedsProjectionEngine",null),(0,C._)([(0,U.Cb)()],A.prototype,"layerFilterUpdating",null),A=(0,C._)([(0,Z.j)(g)],A);const v=A},73535:(_e,q,t)=>{t.d(q,{Z:()=>Z});var _=t(17626),C=t(26584),K=t(62208),L=t(77712),U=(t(90912),t(85931),t(76898)),X=t(13812),H=t(51920);const Z=B=>{let W=class extends B{initialize(){this.exportImageParameters=new H.j({layer:this.layer})}destroy(){this.exportImageParameters=(0,K.SC)(this.exportImageParameters)}get exportImageVersion(){return this.exportImageParameters?.commitProperty("version"),this.commitProperty("timeExtent"),(this._get("exportImageVersion")||0)+1}fetchPopupFeatures(g){const{layer:F}=this;if(!g)return Promise.reject(new C.Z("wmslayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:F}));const{popupEnabled:A}=F;if(!A)return Promise.reject(new C.Z("wmslayerview:fetchPopupFeatures","popupEnabled should be true",{popupEnabled:A}));const v=this.createFetchPopupFeaturesQuery(g);if(!v)return Promise.resolve([]);const{extent:D,width:o,height:n,x:h,y:I}=v;if(!(D&&o&&n))throw new C.Z("wmslayerview:fetchPopupFeatures","WMSLayer does not support fetching features.",{extent:D,width:o,height:n});return F.fetchFeatureInfo(D,o,n,h,I)}};return(0,_._)([(0,L.Cb)()],W.prototype,"exportImageParameters",void 0),(0,_._)([(0,L.Cb)({readOnly:!0})],W.prototype,"exportImageVersion",null),(0,_._)([(0,L.Cb)()],W.prototype,"layer",void 0),(0,_._)([(0,L.Cb)(X.qG)],W.prototype,"timeExtent",void 0),W=(0,_._)([(0,U.j)("esri.layers.mixins.WMSLayerView")],W),W}},73187:(_e,q,t)=>{t.d(q,{q:()=>v});var _=t(17626),C=t(91558),K=t(88879),L=t(14517),V=t(21286),G=t(62208),U=t(77712),Z=(t(90912),t(85931),t(76898)),B=t(69852),W=t(88493),g=t(35540),F=t(21716);const A=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let v=class extends L.Z{constructor(D){super(D),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=A.map(D=>new W.Z({color:[D[0],D[1],D[2],.6],outline:{color:"black",width:1}})),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(D){this._enabled!==D&&(this._enabled=D,this.update())}update(){if(!this._enabled)return void this.clear();const o=this.getTiles(),n=new Array,h=new Set(this._labels.keys());o.forEach((M,w)=>{const S=M.lij.toString();h.delete(S);const R=M.lij[0],P=M.geometry;if(this.enablePolygons&&!this._polygons.has(S)){const T=new K.Z({geometry:P,symbol:this._symbols[R%this._symbols.length]});this._polygons.set(S,T),n.push(T)}if(this.enableLabels){const T=(M=>{if((0,G.pC)(M.label))return M.label;let w=M.lij.toString();return(0,G.pC)(M.loadPriority)&&(w+=` (${M.loadPriority})`),w})(M),J=w/(o.length-1),Q=(0,V.t7)(0,200,J),te=(0,V.t7)(20,6,J)/.75,N=(0,G.pC)(M.loadPriority)&&M.loadPriority>=o.length,k=new C.Z([Q,N?0:Q,N?0:Q]),$="3d"===this.view.type?()=>new B.Z({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new F.Z({text:T,halo:{color:"white",size:1/.75},material:{color:k},size:te})]}):()=>new g.Z({text:T,haloColor:"white",haloSize:1/.75,color:k,size:te}),Y=this._labels.get(S);if(Y){const z=$();((0,G.Wi)(Y.symbol)||JSON.stringify(z)!==JSON.stringify(Y.symbol))&&(Y.symbol=z)}else{const z=new K.Z({geometry:P.extent.center,symbol:$()});this._labels.set(S,z),n.push(z)}}});const I=new Array;h.forEach(M=>{const w=this._polygons.get(M);null!=w&&(I.push(w),this._polygons.delete(M));const S=this._labels.get(M);null!=S&&(I.push(S),this._labels.delete(M))}),this.view.graphics.removeMany(I),this.view.graphics.addMany(n)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};(0,_._)([(0,U.Cb)({constructOnly:!0})],v.prototype,"view",void 0),(0,_._)([(0,U.Cb)({readOnly:!0})],v.prototype,"updating",void 0),(0,_._)([(0,U.Cb)()],v.prototype,"enabled",null),v=(0,_._)([(0,Z.j)("esri.views.support.TileTreeDebugger")],v)},80322:(_e,q,t)=>{function _(K){const{options:L,value:V}=K;return"number"==typeof L[V]}function C(K){let L="";for(const V in K){const G=K[V];if("boolean"==typeof G)G&&(L+=`#define ${V}\n`);else if("number"==typeof G)L+=`#define ${V} ${G.toFixed()}\n`;else if("object"==typeof G)if(_(G)){const{value:U,options:X,namespace:H}=G,Z=H?`${H}_`:"";for(const B in X)L+=`#define ${Z}${B} ${X[B].toFixed()}\n`;L+=`#define ${V} ${Z}${U}\n`}else{const U=G.options;let X=0;for(const H in U)L+=`#define ${U[H]} ${(X++).toFixed()}\n`;L+=`#define ${V} ${U[G.value]}\n`}}return L}t.d(q,{K:()=>C})},60863:(_e,q,t)=>{t.d(q,{S:()=>X,d:()=>H});var _=t(15861),C=t(76210),K=t(23663),L=t(66554),V=t(85589);const X=(0,C.GH)(class extends C.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}effectiveLocaleChange(){(0,L.u)(this,this.effectiveLocale)}connectedCallback(){(0,K.c)(this),(0,L.c)(this)}componentWillLoad(){var Z=this;return(0,_.Z)(function*(){yield(0,L.s)(Z)})()}disconnectedCallback(){(0,K.d)(this),(0,L.d)(this)}render(){const{el:Z,loading:B,messages:W}=this,g=Z.innerHTML.trim().length>0,F=B?(0,C.h)("calcite-loader",{label:W.loading}):null,A=g?(0,C.h)("div",{class:"content"},(0,C.h)("slot",null)):null;return(0,C.h)("div",{class:"scrim"},F,A)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return"@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:absolute;inset:0px;z-index:700;display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}"}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32]}]);function H(){typeof customElements>"u"||["calcite-scrim","calcite-loader"].forEach(B=>{switch(B){case"calcite-scrim":customElements.get(B)||customElements.define(B,X);break;case"calcite-loader":customElements.get(B)||(0,V.d)()}})}H()},89251:(_e,q,t)=>{t.d(q,{C:()=>C,I:()=>V,M:()=>L,S:()=>K,a:()=>Z,g:()=>X,u:()=>H});var _=t(76210);const C={container:"container",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerHidden:"nested-container--hidden",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",actionsEnd:"actions-end",selectionContainer:"selection-container",openContainer:"open-container"},K={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},L=5,V={selectedMultiple:"check-circle-f",selectedSingle:"circle-f",unselected:"blank",closedLTR:"caret-right",closedRTL:"caret-left",open:"caret-down",blank:"blank"},G="calcite-list-item-group",U="calcite-list-item";function X(B){const W=B.target.assignedElements({flatten:!0});return[...W.filter(A=>A?.matches(G)).map(A=>Array.from(A.querySelectorAll(U))).reduce((A,v)=>[...A,...v],[]),...W.filter(A=>A?.matches(U))]}function H(B){B.forEach(W=>{W.setPosition=B.indexOf(W)+1,W.setSize=B.length})}function Z(B,W=!1){return _.Z5.isBrowser?document.evaluate(W?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",B,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}}}]);