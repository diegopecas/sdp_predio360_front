"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[6263],{65389:(J,z,i)=>{i.d(z,{Z:()=>B});var G=i(62208);class B{constructor(E){this.size=0,this._start=0,this.maxSize=E,this._buffer=new Array(E)}get entries(){return this._buffer}enqueue(E){if(this.size===this.maxSize){const M=this._buffer[this._start];return this._buffer[this._start]=E,this._start=(this._start+1)%this.maxSize,M}return this._buffer[(this._start+this.size++)%this.maxSize]=E,null}dequeue(){if(0===this.size)return null;const E=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,E}peek(){return 0===this.size?null:this._buffer[this._start]}find(E){if(0===this.size)return null;for(const M of this._buffer)if((0,G.pC)(M)&&E(M))return M;return null}clear(E){let M=this.dequeue();for(;(0,G.pC)(M);)E&&E(M),M=this.dequeue()}}},53023:(J,z,i)=>{i.d(z,{hN:()=>K,P0:()=>N,cW:()=>F});var G=i(15861),B=i(26584),j=i(33190),E=i(11519),D=i(91179),Z=i(37053);function v(s,r){return s?r?4:3:r?3:2}function d(s,r,_,O,x){if(!s)return!1;const P=v(r,_),{coords:t,lengths:l}=s;let o=!1,a=0;for(const u of l)o=h(o,t,P,a,u,O,x),a+=u*P;return o}function h(s,r,_,O,x,P,t){let l=s,o=O;for(let a=O,u=O+x*_;a<u;a+=_){o=a+_,o===u&&(o=O);const S=r[a],R=r[a+1],b=r[o+1];(R<t&&b>=t||b<t&&R>=t)&&S+(t-R)/(b-R)*(r[o]-S)<P&&(l=!l)}return l}var y=i(82054),m=i(88071),A=i(82959),T=i(6185);const U="feature-store:unsupported-query",w={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},C={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function F(s,r,_,O,x){if((0,D.oU)(r)&&"esriGeometryPoint"===_&&("esriSpatialRelIntersects"===s||"esriSpatialRelContains"===s)){const P=(0,y.Uy)(new m.Z,r,!1,!1);return Promise.resolve(t=>function g(s,r,_,O){return d(s,r,_,O.coords[0],O.coords[1])}(P,!1,!1,t))}if((0,D.oU)(r)&&"esriGeometryMultipoint"===_){const P=(0,y.Uy)(new m.Z,r,!1,!1);if("esriSpatialRelContains"===s)return Promise.resolve(t=>function f(s,r,_,O,x,P){const t=v(x,P),{coords:l,lengths:o}=O;if(!o)return!1;for(let a=0,u=0;a<o.length;a++,u+=t)if(!d(s,r,_,l[u],l[u+1]))return!1;return!0}(P,!1,!1,t,O,x))}if((0,D.YX)(r)&&"esriGeometryPoint"===_&&("esriSpatialRelIntersects"===s||"esriSpatialRelContains"===s))return Promise.resolve(P=>(0,j.aV)(r,(0,T.Op)(_,O,x,P)));if((0,D.YX)(r)&&"esriGeometryMultipoint"===_&&"esriSpatialRelContains"===s)return Promise.resolve(P=>(0,j.lQ)(r,(0,T.Op)(_,O,x,P)));if((0,D.YX)(r)&&"esriSpatialRelIntersects"===s){const P=function M(s){return"mesh"===s?E.h_:(0,E.IY)(s)}(_);return Promise.resolve(t=>P(r,(0,T.Op)(_,O,x,t)))}return function I(){return Promise.all([i.e(4918),i.e(8592)]).then(i.bind(i,32825))}().then(P=>{const t=P[w[s]].bind(null,r.spatialReference,r);return l=>t((0,T.Op)(_,O,x,l))})}function N(s,r,_){return W.apply(this,arguments)}function W(){return(W=(0,G.Z)(function*(s,r,_){const{spatialRel:O,geometry:x}=s;if(x){if(!function e(s){return null!=s&&!0===C.spatialRelationship[s]}(O))throw new B.Z(U,"Unsupported query spatial relationship",{query:s});if((0,Z.JY)(x.spatialReference)&&(0,Z.JY)(_)){if(!function n(s){return null!=s&&!0===C.queryGeometry[(0,D.Ji)(s)]}(x))throw new B.Z(U,"Unsupported query geometry type",{query:s});if(!function p(s){return null!=s&&!0===C.layerGeometry[s]}(r))throw new B.Z(U,"Unsupported layer geometry type",{query:s});if(s.outSR)return(0,A._W)(s.geometry&&s.geometry.spatialReference,s.outSR)}}})).apply(this,arguments)}function K(s){if((0,D.YX)(s))return!0;if((0,D.oU)(s)){for(const r of s.rings)if(5!==r.length||r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1;return!0}return!1}},76530:(J,z,i)=>{i.d(z,{R:()=>B,y:()=>E});var G=i(15861);function B(v,g){return j.apply(this,arguments)}function j(){return(j=(0,G.Z)(function*(v,g){if(!v)return null;const f=g.featureAdapter,{startTimeField:d,endTimeField:h}=v;let y=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY;if(d&&h)yield g.forEach(A=>{const T=f.getAttribute(A,d),U=f.getAttribute(A,h);null==T||isNaN(T)||(y=Math.min(y,T)),null==U||isNaN(U)||(m=Math.max(m,U))});else{const A=d||h;yield g.forEach(T=>{const U=f.getAttribute(T,A);null==U||isNaN(U)||(y=Math.min(y,U),m=Math.max(m,U))})}return{start:y,end:m}})).apply(this,arguments)}function E(v,g,f){if(!g||!v)return null;const{startTimeField:d,endTimeField:h}=v;if(!d&&!h)return null;const{start:y,end:m}=g;return null===y&&null===m?null:void 0===y&&void 0===m?()=>!1:d&&h?function M(v,g,f,d,h){return null!=d&&null!=h?y=>{const m=v.getAttribute(y,g),A=v.getAttribute(y,f);return(null==m||m<=h)&&(null==A||A>=d)}:null!=d?y=>{const m=v.getAttribute(y,f);return null==m||m>=d}:null!=h?y=>{const m=v.getAttribute(y,g);return null==m||m<=h}:void 0}(f,d,h,y,m):function D(v,g,f,d){return null!=f&&null!=d&&f===d?h=>v.getAttribute(h,g)===f:null!=f&&null!=d?h=>{const y=v.getAttribute(h,g);return y>=f&&y<=d}:null!=f?h=>v.getAttribute(h,g)>=f:null!=d?h=>v.getAttribute(h,g)<=d:void 0}(f,d||h,y,m)}},6185:(J,z,i)=>{i.d(z,{EG:()=>C,Op:()=>e,S2:()=>O,Up:()=>n,j6:()=>I,vF:()=>m});var G=i(15861),B=i(2076),j=i(62208),E=i(16730),M=i(55915),D=i(15176),Z=i(91179),v=i(93555),g=i(37053),f=i(82054),d=i(88071),h=i(82959);const y=new B.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),m=Object.freeze({}),A=new d.Z,T=new d.Z,U=new d.Z,w={esriGeometryPoint:f.fQ,esriGeometryPolyline:f.J6,esriGeometryPolygon:f.eG,esriGeometryMultipoint:f.Iv};function C(t,l,o,a=t.hasZ,u=t.hasM){if((0,j.Wi)(l))return null;const S=t.hasZ&&a,R=t.hasM&&u;if(o){const c=(0,f.Nh)(U,l,t.hasZ,t.hasM,"esriGeometryPoint",o,a,u);return(0,f.fQ)(c,S,R)}return(0,f.fQ)(l,S,R)}function e(t,l,o,a,u,S,R=l,c=o){const b=l&&R,L=o&&c,Y=(0,j.pC)(a)?"coords"in a?a:a.geometry:null;if((0,j.Wi)(Y))return null;if(u){let V=(0,f.zj)(T,Y,l,o,t,u,R,c);return S&&(V=(0,f.Nh)(U,V,b,L,t,S)),w[t]?.(V,b,L)??null}if(S){const V=(0,f.Nh)(U,Y,l,o,t,S,R,c);return w[t]?.(V,b,L)??null}return(0,f.hY)(A,Y,l,o,R,c),w[t]?.(A,b,L)??null}function n(t,l,o){return p.apply(this,arguments)}function p(){return(p=(0,G.Z)(function*(t,l,o){const{outFields:a,orderByFields:u,groupByFieldsForStatistics:S,outStatistics:R}=t;if(a)for(let c=0;c<a.length;c++)a[c]=a[c].trim();if(u)for(let c=0;c<u.length;c++)u[c]=u[c].trim();if(S)for(let c=0;c<S.length;c++)S[c]=S[c].trim();if(R)for(let c=0;c<R.length;c++)R[c].onStatisticField&&(R[c].onStatisticField=R[c].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),I(t,l,o)})).apply(this,arguments)}function I(t,l,o){return F.apply(this,arguments)}function F(){return F=(0,G.Z)(function*(t,l,o){if(!t)return null;let{where:a}=t;if(t.where=a=a&&a.trim(),(!a||/^1 *= *1$/.test(a)||l&&l===a)&&(t.where=null),!t.geometry)return t;let u=yield function K(t){return s.apply(this,arguments)}(t);if(t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel){const{spatialReference:S}=t.geometry;u=(0,D.aO)(u),u.spatialReference=S}if(u){yield(0,h._W)(u.spatialReference,o),u=function W(t,l){const o=t.spatialReference;return N(t,l)&&(0,Z.YX)(t)?{spatialReference:o,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:t}(u,o);const S=(yield(0,v.aX)((0,Z.im)(u)))[0];if((0,j.Wi)(S))throw m;const R="quantizationParameters"in t&&t.quantizationParameters?.tolerance||"maxAllowableOffset"in t&&t.maxAllowableOffset||0,c=R&&N(u,o)?{densificationStep:8*R}:void 0,b=S.toJSON(),L=yield(0,h.iV)(b,b.spatialReference,o,c);if(!L)throw m;L.spatialReference=o,t.geometry=L}return t}),F.apply(this,arguments)}function N(t,l){if(!t)return!1;const o=t.spatialReference;return((0,Z.YX)(t)||(0,Z.oU)(t)||(0,Z.l9)(t))&&!(0,g.fS)(o,l)&&!(0,M.Up)(o,l)}function s(){return s=(0,G.Z)(function*(t){const{distance:l,units:o}=t,a=t.geometry;if(null==l||"vertexAttributes"in a)return a;const u=a.spatialReference,S=o?y.fromJSON(o):(0,E.qE)(u),R=u&&((0,g.sT)(u)||(0,g.sS)(u))?a:yield(0,h._W)(u,g.Zn).then(()=>(0,h.iV)(a,g.Zn));return(yield function r(){return _.apply(this,arguments)}())(R.spatialReference,R,l,S)}),s.apply(this,arguments)}function _(){return(_=(0,G.Z)(function*(){return(yield Promise.all([i.e(4918),i.e(8592)]).then(i.bind(i,32825))).geodesicBuffer})).apply(this,arguments)}function O(t){return t&&x in t?JSON.parse(JSON.stringify(t,P)):t}const x="_geVersion",P=(t,l)=>t!==x?l:void 0},8967:(J,z,i)=>{i.r(z),i.d(z,{default:()=>w});var G=i(15861),B=i(26584),j=i(63290),E=i(62208),M=i(65401),D=i(32442),Z=i(53023),v=i(76530),g=i(6185),f=i(96854),d=i(55746);const h=j.Z.getLogger("esri.views.2d.layers.features.support.whereUtils"),y={getAttribute:(C,e)=>C.field(e)};function A(){return(A=(0,G.Z)(function*(C,e){const n=yield i.e(410).then(i.bind(i,10410));try{const p=n.WhereClause.create(C,e);if(!p.isStandardized){const I=new B.Z("mapview - bad input","Unable to apply filter's definition expression, as expression is not standardized.",p);h.error(I)}return I=>{const F=I.readArcadeFeature();return p.testFeature(F,y)}}catch{return h.warn("mapview-bad-where-clause","Encountered an error when evaluating where clause",C),I=>!0}})).apply(this,arguments)}class w{constructor(e){this._geometryBounds=(0,M.Ue)(),this._idToVisibility=new Map,this._serviceInfo=e}get hash(){return this._hash}check(e){return this._applyFilter(e)}clear(){const e=this._resetAllHiddenIds();return this.update(),{show:e,hide:[]}}invalidate(){this._idToVisibility.forEach((e,n)=>{this._idToVisibility.set(n,0)})}setKnownIds(e){for(const n of e)this._idToVisibility.set(n,1)}setTrue(e){const n=[],p=[],I=new Set(e);return this._idToVisibility.forEach((F,N)=>{const W=!!(1&this._idToVisibility.get(N)),K=I.has(N);!W&&K?n.push(N):W&&!K&&p.push(N),this._idToVisibility.set(N,K?3:0)}),{show:n,hide:p}}createQuery(){const{geometry:e,spatialRel:n,where:p,timeExtent:I,objectIds:F}=this;return f.Z.fromJSON({geometry:e,spatialRel:n,where:p,timeExtent:I,objectIds:F})}update(e,n){var p=this;return(0,G.Z)(function*(){p._hash=JSON.stringify(e);const I=yield(0,g.j6)(e,null,n);yield Promise.all([p._setGeometryFilter(I),p._setIdFilter(I),p._setAttributeFilter(I),p._setTimeFilter(I)])})()}_setAttributeFilter(e){var n=this;return(0,G.Z)(function*(){if(!e||!e.where)return n._clause=null,void(n.where=null);n._clause=yield function m(C,e){return A.apply(this,arguments)}(e.where,n._serviceInfo.fieldsIndex),n.where=e.where})()}_setIdFilter(e){this._idsToShow=e&&e.objectIds&&new Set(e.objectIds),this._idsToHide=e&&e.hiddenIds&&new Set(e.hiddenIds),this.objectIds=e&&e.objectIds}_setGeometryFilter(e){var n=this;return(0,G.Z)(function*(){if(!e||!e.geometry)return n._spatialQueryOperator=null,n.geometry=null,void(n.spatialRel=null);const p=e.geometry,I=e.spatialRel||"esriSpatialRelIntersects",F=yield(0,Z.cW)(I,p,n._serviceInfo.geometryType,n._serviceInfo.hasZ,n._serviceInfo.hasM);(0,D.$P)(n._geometryBounds,p),n._spatialQueryOperator=F,n.geometry=p,n.spatialRel=I})()}_setTimeFilter(e){if(this.timeExtent=this._timeOperator=null,e&&e.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=e.timeExtent,this._timeOperator=(0,v.y)(this._serviceInfo.timeInfo,e.timeExtent,d.k);else{const n=new B.Z("feature-layer-view:time-filter-not-available","Unable to apply time filter, as layer doesn't have time metadata.",e.timeExtent);j.Z.getLogger("esri.views.2d.layers.features.controllers.FeatureFilter").error(n)}}_applyFilter(e){return this._filterByGeometry(e)&&this._filterById(e)&&this._filterByTime(e)&&this._filterByExpression(e)}_filterByExpression(e){return!this.where||this._clause(e)}_filterById(e){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(e.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(e.getObjectId()))}_filterByGeometry(e){if(!this.geometry)return!0;const n=e.readHydratedGeometry();return!!n&&this._spatialQueryOperator(n)}_filterByTime(e){return!!(0,E.Wi)(this._timeOperator)||this._timeOperator(e)}_resetAllHiddenIds(){const e=[];return this._idToVisibility.forEach((n,p)=>{1&n||(this._idToVisibility.set(p,1),e.push(p))}),e}}}}]);