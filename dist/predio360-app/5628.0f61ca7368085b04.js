"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[5628],{128:(D,O,e)=>{e.d(O,{B:()=>Z});var E=e(26584),u=e(50011),L=e(22558),h=e(21726),j=e(35948),P=e(34117),x=e(31283),f=e(77712),n=e(61556),m=e(29840);function Z(r){const l=r?.origins??[void 0];return(p,o)=>{const i=function z(r,l,p){if("resource"===r?.type)return function I(r,l,p){const o=(0,P.Oe)(l,p);return{type:String,read:(i,t,a)=>{const s=(0,m.r)(i,t,a);return o.type===String?s:"function"==typeof o.type?new o.type({url:s}):void 0},write:{writer(i,t,a,s){if(!s?.resources)return"string"==typeof i?void(t[a]=(0,m.t)(i,s)):void(t[a]=i.write({},s));const c=function A(r){return null==r?null:"string"==typeof r?r:r.url}(i),d=(0,m.t)(c,{...s,verifyItemRelativeUrls:s?.verifyItemRelativeUrls?{writtenUrls:s.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},m.M.NO),g=o.type!==String&&(!(0,L.l)(this)||s?.origin&&this.originIdOf(p)>(0,x.M9)(s.origin)),y={object:this,propertyName:p,value:i,targetUrl:d,dest:t,targetPropertyName:a,context:s,params:r};s?.portalItem&&d&&!(0,h.YP)(d)?g&&r?.contentAddressed?M(y):g?function R(r){const{context:l,targetUrl:p,params:o,value:i,dest:t,targetPropertyName:a}=r;if(!l.portalItem)return;const s=l.portalItem.resourceFromPath(p),c=v(i,p,l),d=(0,n.B)(c),g=(0,h.Ml)(s.path),y=o?.compress??!1;d===g?(l.resources&&U({...r,resource:s,content:c,compress:y,updates:l.resources.toUpdate}),t[a]=p):M(r)}(y):function S({context:r,targetUrl:l,dest:p,targetPropertyName:o}){r.portalItem&&r.resources&&(r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(l),compress:!1}),p[o]=l)}(y):s?.portalItem&&(null==d||null!=(0,m.i)(d)||(0,h.jc)(d)||g)?M(y):t[a]=d}}}}(r,l,p);switch(r?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:o,write:i}=m.b;return{read:o,write:i}}}}(r,p,o);for(const t of l){const a=(0,f.CJ)(p,t,o);for(const s in i)a[s]=i[s]}}}function M(r){const{targetUrl:l,params:p,value:o,context:i,dest:t,targetPropertyName:a}=r;if(!i.portalItem)return;const s=(0,m.p)(l),c=v(o,l,i);if(p?.contentAddressed&&"json"!==c.type)return void i.messages?.push(new E.Z("persistable:contentAddressingUnsupported",`Property "${a}" is trying to serializing a resource with content of type ${c.type} with content addressing. Content addressing is only supported for json resources.`,{content:c}));const d=p?.contentAddressed&&"json"===c.type?(0,u.F)(c.jsonString):s?.filename??(0,j.DO)(),g=(0,h.v_)(p?.prefix??s?.prefix,d),y=`${g}.${(0,n.B)(c)}`;if(p?.contentAddressed&&i.resources&&"json"===c.type){const b=i.resources.toKeep.find(({resource:N})=>N.path===y)??i.resources.toAdd.find(({resource:N})=>N.path===y);if(b)return void(t[a]=b.resource.itemRelativeUrl)}const C=i.portalItem.resourceFromPath(y);(0,h.jc)(l)&&i.resources&&i.resources.pendingOperations.push((0,h.gi)(l).then(b=>{C.path=`${g}.${(0,n.B)({type:"blob",blob:b})}`,t[a]=C.itemRelativeUrl}).catch(()=>{}));const T=p?.compress??!1;i.resources&&U({...r,resource:C,content:c,compress:T,updates:i.resources.toAdd}),t[a]=C.itemRelativeUrl}function U({object:r,propertyName:l,updates:p,resource:o,content:i,compress:t}){p.push({resource:o,content:i,compress:t,finish:s=>{!function B(r,l,p){"string"==typeof r[l]?r[l]=p.url:r[l].url=p.url}(r,l,s)}})}function v(r,l,p){return"string"==typeof r?{type:"url",url:l}:{type:"json",jsonString:JSON.stringify(r.toJSON(p))}}},22558:(D,O,e)=>{function E(u){return u&&"getAtOrigin"in u&&"originOf"in u}e.d(O,{l:()=>E})},29457:(D,O,e)=>{e.r(O),e.d(O,{default:()=>i});var E=e(15861),u=e(17626),L=e(85840),h=e(61642),j=e(57574),P=e(46160),x=e(89726),f=e(32917),n=e(77712),I=(e(8314),e(63290),e(4619),e(76898)),M=e(55915),R=e(5548),S=e(60507);const U=P.Z.ofType(j.Z);let v=class extends L.Z{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles((0,f.YP)(()=>this._computeExtent(),t=>{null==t?.pending&&this._set("extent",null!=t?t.extent:null)},f.tX))}get targets(){return this._get("targets")||new U}set targets(t){this._set("targets",(0,x.Z)(t,this.targets,U))}get spatialReference(){return null!=this.observer?.position?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[this.observer?.position]}waitComputeExtent(){var t=this;return(0,E.Z)(function*(){const a=t._computeExtent();return null!=a?a.pending:Promise.resolve()})()}_computeExtent(){const t=this.spatialReference;if(null==this.observer?.position||null==t)return null;const a=g=>"absolute-height"===(0,S.VW)(g.position,g.elevationInfo),s=this.observer.position,c=(0,R.al)(s.x,s.y,s.z,s.x,s.y,s.z);for(const g of this.targets)if(null!=g.position){const y=(0,M.projectOrLoad)(g.position,t);if(null!=y.pending)return{pending:y.pending,extent:null};if(null!=y.geometry){const{x:C,y:T,z:b}=y.geometry;(0,R.pp)(c,[C,T,b])}}const d=(0,R.HH)(c,t);return a(this.observer)&&this.targets.every(a)||(d.zmin=void 0,d.zmax=void 0),{pending:null,extent:d}}clear(){this.observer=null,this.targets.removeAll()}};(0,u._)([(0,n.Cb)({type:["line-of-sight"]})],v.prototype,"type",void 0),(0,u._)([(0,n.Cb)({type:h.Z,json:{read:!0,write:!0}})],v.prototype,"observer",void 0),(0,u._)([(0,n.Cb)({cast:x.R,type:U,nonNullable:!0,json:{read:!0,write:!0}})],v.prototype,"targets",null),(0,u._)([(0,n.Cb)({value:null,readOnly:!0})],v.prototype,"extent",void 0),(0,u._)([(0,n.Cb)({readOnly:!0})],v.prototype,"spatialReference",null),(0,u._)([(0,n.Cb)({readOnly:!0})],v.prototype,"requiredPropertiesForEditing",null),v=(0,u._)([(0,I.j)("esri.analysis.LineOfSightAnalysis")],v);const A=v;var B=e(99959),r=e(44917),l=e(49286);const p=P.Z.ofType(j.Z);let o=class extends((0,l.q)((0,B.R)(r.Z))){constructor(t){super(t),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new A,this.opacity=1}initialize(){this.addHandles((0,f.YP)(()=>this.analysis,(t,a)=>{null!=a&&a.parent===this&&(a.parent=null),null!=t&&(t.parent=this)},f.tX))}load(){var t=this;return(0,E.Z)(function*(){return null!=t.analysis&&t.addResolvingPromise(t.analysis.waitComputeExtent()),t})()}get observer(){return this.analysis?.observer}set observer(t){const{analysis:a}=this;a&&(a.observer=t)}get targets(){return null!=this.analysis?this.analysis.targets:new P.Z}set targets(t){(0,x.Z)(t,this.analysis?.targets)}get fullExtent(){return null!=this.analysis?this.analysis.extent:null}get spatialReference(){return null!=this.analysis?this.analysis.spatialReference:null}releaseAnalysis(t){this.analysis===t&&(this.analysis=new A)}};(0,u._)([(0,n.Cb)({json:{read:!1},readOnly:!0})],o.prototype,"type",void 0),(0,u._)([(0,n.Cb)({type:["LineOfSightLayer"]})],o.prototype,"operationalLayerType",void 0),(0,u._)([(0,n.Cb)({type:h.Z,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],o.prototype,"observer",null),(0,u._)([(0,n.Cb)({type:p,json:{read:!0,write:{ignoreOrigin:!0}}})],o.prototype,"targets",null),(0,u._)([(0,n.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],o.prototype,"analysis",void 0),(0,u._)([(0,n.Cb)({readOnly:!0})],o.prototype,"fullExtent",null),(0,u._)([(0,n.Cb)({readOnly:!0})],o.prototype,"spatialReference",null),(0,u._)([(0,n.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],o.prototype,"opacity",void 0),(0,u._)([(0,n.Cb)({type:["show","hide"]})],o.prototype,"listMode",void 0),o=(0,u._)([(0,I.j)("esri.layers.LineOfSightLayer")],o);const i=o},61556:(D,O,e)=>{e.d(O,{B:()=>u});var E=e(21726);function u(n){return j[function L(n){return"json"===n.type?"application/json":"blob"===n.type?n.blob.type:function h(n){const m=(0,E.Ml)(n);return f[m]||P}(n.url)}(n)]||x}const j={},P="text/plain",x=j[P],f={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const n in f)j[f[n]]=n}}]);