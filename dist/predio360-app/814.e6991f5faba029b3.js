"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[814],{40814:(X,U,o)=>{o.d(U,{Z:()=>ue});var D=o(15861),n=o(17626),A=o(26584),I=o(62208),O=o(32917),c=o(77712),T=(o(8314),o(63290),o(4619),o(76898)),w=o(38114),V=o(84786),j=o(23010),y=o(46196);class N extends y.W{constructor(t,r,u,h,x,R){super(t.usedMemory,t.displayedFeatures,t.totalFeatures,t.maximumFeatures,t.nodes,t.core),this.storedFeatures=r,this.totalVertices=u,this.partial=h,this.mode=x,this.symbolComplexity=R}}var Q=o(79216),Y=o(19702),S=o(54984),Z=o(83761),W=o(10699),m=o(28862),s=o(20477),a=o(88879),i=o(55713),l=o(42930),g=o(65234),M=o(36255);class f{constructor(t){this._controller=t,this._handle=new d(r=>t.schedule(r))}destroy(){this._handle.destroy()}invoke(t,r){var u=this;return t.buffer&&0!==t.buffer.byteLength?(t.options.sourceSpatialReference&&t.options.sourceSpatialReference instanceof g.Z&&(t.options={...t.options,sourceSpatialReference:t.options.sourceSpatialReference.toJSON()}),this._handle.invoke(t,r).then(h=>{let x=0,R=0;const P=g.Z.fromJSON(h.spatialReference);h.spatialReference=P;const L=function(){var $=(0,D.Z)(function*(z){const B=h.fields;if(B)for(;x<B.length;)if(B[x]=M.Z.fromJSON(B[x]),x++,z.madeProgress())return u._controller.reschedule(G=>L(G));const ee=h.features;for(;R<ee.length;){const G=ee[R];++R,G.uid=a.Z.generateUID();const J=G.geometry;if(null!=J&&(J.spatialReference=P,p(J),z.madeProgress()))return u._controller.reschedule(de=>L(de))}return h});return function(B){return $.apply(this,arguments)}}();return this._controller.schedule($=>L($))})):Promise.resolve(null)}}function p(e){switch(e.type){case"polyline":e.paths.reduce((t,r)=>t+r.length,0)<i.c8&&(e.paths=e.paths.map(e.hasZ||e.hasM?t=>t.map(r=>[r[0],r[1],r[2]]):t=>t.map(r=>[r[0],r[1]])));break;case"polygon":e.rings.reduce((t,r)=>t+r.length,0)<i.c8&&(e.rings=e.rings.map(e.hasZ||e.hasM?t=>t.map(r=>[r[0],r[1],r[2]]):t=>t.map(r=>[r[0],r[1]])))}}class d extends l.q{constructor(t){super("PBFDecoderWorker","_parseFeatureQuery",{_parseFeatureQuery:r=>[r.buffer]},t)}}let _=class extends Z.Z{constructor(e){super(e)}get implicitFields(){if(!this.layer.outFields?.includes("*"))return new Set;const t=new Set(this.layerView.requiredFields),r=new Set(this.layerView.availableFields);return(0,m.e5)(r,t)}get queryFeaturesDehydrated(){const{layer:e}=this,t=e.capabilities,r=t&&t.query,h=e.parsedUrl;if(r&&r.supportsFormatPBF){null==this._decoder&&(this._decoder=new f(this.controller));const x={sourceSpatialReference:e.spatialReference?.toJSON()??null,applyTransform:!0,maxStringAttributeFields:this.implicitFields,maxStringAttributeLength:k};return(R,P)=>(0,s.Vn)(h,R,"pbf",this._createRequestOptions(P)).then(L=>((0,W.k_)(P),null!=this._decoder?this._decoder.invoke({buffer:L.data,options:x},P.signal):Promise.reject((0,W.zE)())))}return(x,R)=>(0,s.JT)(h,x,e.spatialReference,this._createRequestOptions(R)).then(P=>(0,w.PA)(P.data,{maxStringAttributeFields:this.implicitFields,maxStringAttributeLength:k}))}queryFeatureCount(e,t){return this.layer.queryFeatureCount(e,t)}destroy(){this._decoder=(0,I.SC)(this._decoder)}_createRequestOptions(e){return{...e,query:{...this.layer.customParameters,token:this.layer.apiKey,...e?.query}}}};(0,n._)([(0,c.Cb)({constructOnly:!0})],_.prototype,"layer",void 0),(0,n._)([(0,c.Cb)({constructOnly:!0})],_.prototype,"layerView",void 0),(0,n._)([(0,c.Cb)({constructOnly:!0})],_.prototype,"controller",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],_.prototype,"implicitFields",null),(0,n._)([(0,c.Cb)({readOnly:!0})],_.prototype,"queryFeaturesDehydrated",null),_=(0,n._)([(0,T.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D")],_);let v=class extends Z.Z{constructor(e){super(e)}queryFeaturesDehydrated(e,t){return this.layer.queryFeatures(e,t)}queryFeatureCount(e,t){return this.layer.queryFeatureCount(e,t)}};(0,n._)([(0,c.Cb)({constructOnly:!0})],v.prototype,"layer",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],v.prototype,"queryFeaturesDehydrated",null),v=(0,n._)([(0,T.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceMeshQuery3D")],v);let C=class extends Z.Z{constructor(e){super(e)}queryFeaturesDehydrated(e,t){return this.layer.queryFeatures(e,t)}};(0,n._)([(0,c.Cb)({constructOnly:!0})],C.prototype,"layer",void 0),C=(0,n._)([(0,T.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D")],C);let b=class extends Z.Z{constructor(e){super(e)}queryFeaturesDehydrated(e,t){return this.source.queryFeaturesJSON(e,t).then(w.PA,r=>{if(r&&"query-features-json:unsupported"===r.name)return this.layer.queryFeatures(e,t);throw r})}queryFeatureCount(e,t){return this.layer.queryFeatureCount(e,t)}};(0,n._)([(0,c.Cb)({constructOnly:!0})],b.prototype,"layer",void 0),(0,n._)([(0,c.Cb)({constructOnly:!0})],b.prototype,"source",void 0),b=(0,n._)([(0,T.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileClientQuery3D")],b);const k=1024;class re{constructor(t){this._memoryCache=null,this._capabilities=null;const r=t.layerView.layer;this._layerView=t.layerView,this.objectIdField=r.objectIdField,this.globalIdField="globalIdField"in r?r.globalIdField:null,this._returnZ=t.returnZ,this._returnM=t.returnM;const u=this._layerView.view.resourceController;this.query=function te(e,t){const{layer:r}=e;return"feature"===r.type&&"feature-layer"===r.source.type?null!=r.infoFor3D?new v({layer:r}):new _({layer:r,layerView:e,controller:t}):"feature"===r.type&&"memory"===r.source.type||"csv"===r.type||"geojson"===r.type||"oriented-imagery"===r.type||"wfs"===r.type?new b({layer:r,source:r.source}):"ogc-feature"===r.type?new C({layer:r}):null}(this._layerView,u.normal),u&&this._memoryCacheEnabled&&(this._memoryCache=u.memoryController.newCache(`fl-${r.uid}`))}get _memoryCacheEnabled(){switch(this._layerView.layer.source.type){case"feature-layer":case"ogc-feature":case"oriented-imagery":return!0;case"csv":case"geojson":case"memory":case"wfs":return!1}}destroy(){this._memoryCache=(0,I.SC)(this._memoryCache),this.query.destroy()}createQuery(){const t=this._layerView.layer.createQuery();return t.outFields=this._layerView.availableFields,t.returnZ=this._returnZ,t.returnM=this._returnM,t.outSpatialReference=this.tilingScheme.spatialReference,t}get memoryCache(){return this._memoryCache}get viewingMode(){return this._layerView.view.state.viewingMode}get tilingScheme(){return this._layerView.view.featureTiles.tilingScheme}get scheduler(){const t=this._layerView.view.resourceController;return t?t.scheduler:null}get geometryType(){return this._layerView.layer.geometryType}get fullExtent(){return this._layerView.layer.fullExtent}get tileMaxRecordCount(){return this._layerView.layer.capabilities.query.tileMaxRecordCount}get maxRecordCount(){return this._layerView.layer.capabilities.query.maxRecordCount}get capabilities(){return null!=this._capabilities||(this._capabilities=(0,S.A)(this._layerView.layer)),this._capabilities}logFetchError(t,r){t.error("#fetchTile()",this._layerView.layer,r?.message??r)}}var se=o(36967),ie=o(41632),K=o(23147),oe=o(56482),ne=o(45611),ae=o(94421);let F=class extends((0,ae.Z)((0,Q.R)((0,oe.Z)((0,Y.A)(ne.Z))))){constructor(e){super(e),this._controllerTotal=0,this._processorTotal=0,this._needsRefresh=!1,this.suspendResumeExtentMode="data"}initialize(){this.addHandles([(0,O.YP)(()=>this._updatingRequiredFieldsPromise,e=>this._updatingHandles.addPromise(e),O.tX),(0,O.YP)(()=>({controller:this.controller,suspended:this.suspended}),({controller:e,suspended:t})=>{e&&!t&&this._needsRefresh&&(e.refetch(),this._needsRefresh=!1)})])}destroy(){this._updatingHandles.removeAll(),this._fetcherContext=(0,I.SC)(this._fetcherContext)}get maximumNumberOfFeatures(){return this.controller?.maximumNumberOfFeatures??this._get("maximumNumberOfFeatures")}set maximumNumberOfFeatures(e){this._set("maximumNumberOfFeatures",e),this.controller&&(this.controller.maximumNumberOfFeatures=e)}get maximumNumberOfFeaturesExceeded(){return!!this.controller&&!(this.suspended||!this.controller.maximumNumberOfFeaturesExceeded)}get updatingProgressValue(){let e=0;if(this.controller?.updating){const r=this.controller.updatingRemaining,u=Math.max(this.controller.updatingTotal,this._controllerTotal);u>0&&(e=(u-r)/u,this._controllerTotal=u)}let t=0;if(this.processor?.updating){const r=this.processor.updatingRemaining,u=Math.max(r,this._processorTotal);u>0&&(t=(u-r)/u,this._processorTotal=u)}return.5*(e+t)}get updatePolicy(){if(!this.controller)return K.j.ASYNC;switch(this.controller.mode){case"snapshot":{const e=le.get(this.layer.geometryType);return null==e||this.controller.serviceDataCount>e?K.j.ASYNC:K.j.SYNC}case"tiles":return K.j.ASYNC}}get hasZ(){const e=this.layer,t=e.capabilities&&e.capabilities.data;return!(!t||!t.supportsZ)&&("returnZ"in e&&null!=e.returnZ?e.returnZ:t.supportsZ)}get hasM(){const e=this.layer,t=e.capabilities&&e.capabilities.data;return!(!t||!t.supportsM)&&"returnM"in e&&null!=e.returnM&&e.returnM}setVisibility(e,t){this.processor?.setObjectIdVisibility(e,t)}createQuery(){return super.createQuery()}queryFeatures(e,t){const r=()=>super.queryFeatures(e,t);return"mesh"===this.layer.geometryType?this._queryFeaturesMesh(this._ensureQuery(e),r):r()}beforeSetController(e){e.maximumNumberOfFeatures=this.maximumNumberOfFeatures}createController(){this._fetcherContext=new re({layerView:this,returnZ:this.hasZ,returnM:this.hasM});const e=new j.g({layerView:this,context:this._fetcherContext,graphics:new se.g,extent:this.clippingExtent});return this._updatingHandles.add(()=>e.serviceDataExtent,t=>{this.processor&&(this.processor.dataExtent=t)},O.nn),this.addHandles((0,O.YP)(()=>this.suspended,t=>{t?e.suspend():e.resume()},O.tX)),this._updatingHandles.add(()=>this.processor?.displayFeatureLimit,t=>e.displayFeatureLimit=t,O.nn),this.addHandles((0,O.gx)(()=>!this.updating,()=>{this._controllerTotal=0,this._processorTotal=0})),e}doRefresh(e){var t=this;return(0,D.Z)(function*(){const{controller:r,processor:u,suspended:h}=t;e&&r&&(h?t._needsRefresh=!0:(r.refetch(),t._needsRefresh=!1)),u.refreshFilter()})()}_popupFeatureHasRequiredFields(e,t){if(!super._popupFeatureHasRequiredFields(e,t))return!1;const r=(0,w.MS)(e,this.layer.objectIdField);if(null==r)return!0;const u=this.controller.getMissingAttributesForFeature(r);if(null==u)return!0;for(const h of t)if(u.has(h))return!1;return!0}get usedMemory(){return(this.processor?.usedMemory??0)+(this.controller?.memoryForUnusedFeatures??0)}get unloadedMemory(){const t=this.controller?.expectedFeatureDiff??0,r=this.processor?.loadedFeatures??0;return(this.processor?.unprocessedMemoryEstimate??0)+t*(this.processor?.usedMemoryPerFeature??0)*(r+t>0?r/(r+t):1)}get ignoresMemoryFactor(){return this.controller?.hasMaximumNumberOfFeaturesOverride}_queryFeaturesMesh(e,t){var r=this;return(0,D.Z)(function*(){yield r._validateQueryFeaturesMesh(e);const u=yield t();if(e?.outStatistics||null==r.graphics3DProcessor)return u;const h=r.layer.objectIdField,x=r.graphics3DProcessor.graphics3DGraphicsByObjectID,R=[];for(const P of u.features)if(P.geometry){const L=x.get(P.attributes[h]);L&&(P.geometry=(0,V.kB)(L.graphic.geometry),R.push(P))}else R.push(P);return u.features=R,u})()}_validateQueryFeaturesMesh(e){var t=this;return(0,D.Z)(function*(){if(!e)return;const r=h=>{throw new A.Z("feature-layer-view:unsupported-query",`Queries on Mesh feature collection layers do not support '${h}'`)},u=["quantizationParameters","geometryPrecision","maxAllowableOffset"];for(const h of u)null!=e[h]&&r(h);"returnM"in e&&e.returnM&&r("returnM"),"returnCentroid"in e&&e.returnCentroid&&r("returnCentroid"),null==e.outSpatialReference||e.outSpatialReference.equals(t.view.spatialReference)||r("outSpatialReference")})()}get performanceInfo(){const e=this.controller?.displayFeatureLimit,t=e?.averageSymbolComplexity;return new N(super.performanceInfo,this.controller?.performanceInfo?.storedFeatures??0,this.controller?.performanceInfo?.totalVertices??0,this.maximumNumberOfFeaturesExceeded,this.controller?.mode??"n/a",null!=t?`f:${t.verticesPerFeature},v:${t.verticesPerCoordinate}`:"n/a")}get test(){return{updatePolicy:this.updatePolicy,controller:this.controller,loadedGraphics:this.controller?.graphics,...this.getTest()}}};(0,n._)([(0,c.Cb)()],F.prototype,"layer",void 0),(0,n._)([(0,c.Cb)()],F.prototype,"controller",void 0),(0,n._)([(0,c.Cb)()],F.prototype,"_controllerTotal",void 0),(0,n._)([(0,c.Cb)()],F.prototype,"_processorTotal",void 0),(0,n._)([(0,c.Cb)()],F.prototype,"_needsRefresh",void 0),(0,n._)([(0,c.Cb)()],F.prototype,"maximumNumberOfFeatures",null),(0,n._)([(0,c.Cb)()],F.prototype,"maximumNumberOfFeaturesExceeded",null),(0,n._)([(0,c.Cb)(ie.q)],F.prototype,"updatingProgress",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],F.prototype,"updatingProgressValue",null),(0,n._)([(0,c.Cb)({readOnly:!0})],F.prototype,"updatePolicy",null),(0,n._)([(0,c.Cb)({readOnly:!0})],F.prototype,"hasZ",null),(0,n._)([(0,c.Cb)({readOnly:!0})],F.prototype,"hasM",null),(0,n._)([(0,c.Cb)()],F.prototype,"suspendResumeExtentMode",void 0),F=(0,n._)([(0,T.j)("esri.views.3d.layers.FeatureLayerViewBase3D")],F);const le=new Map([["point",5e3],["polygon",500],["polyline",1e3]]),ue=F},56482:(X,U,o)=>{o.d(U,{Z:()=>Z});var D=o(15861),n=o(17626),A=o(26584),I=o(63290),O=o(10699),c=o(32917),E=o(77712),T=(o(8314),o(4619),o(76898)),w=o(13812),V=o(2319),j=o(98624),y=o(90194),N=o(59990),Q=o(96854),Y=o(46679),S=o(10023);const Z=W=>{let m=class extends W{constructor(...s){super(...s),this._updatingRequiredFieldsPromise=null,this.dataUpdating=!1,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){this.addHandles([(0,c.YP)(()=>{const s=this.layer;return[s&&"elevationInfo"in s?s.elevationInfo?.featureExpressionInfo:null,s&&"displayField"in s?s.displayField:null,s&&"timeInfo"in s&&s.timeInfo,s&&"renderer"in s&&s.renderer,s&&"labelingInfo"in s&&s.labelingInfo,s&&"floorInfo"in s&&s.floorInfo,this.filter,this.featureEffect,this.timeExtent]},()=>this._handleRequiredFieldsChange(),c.tX),(0,c.on)(()=>this.view?.floors,"change",()=>this._handleRequiredFieldsChange()),(0,c.on)(()=>{const s=this.layer;return s&&"sublayers"in s?s.sublayers:null},"change",()=>this._handleRequiredFieldsChange())])}get availableFields(){if(!this.layer)return[];const{layer:s,layer:{fieldsIndex:a},requiredFields:i}=this;return(0,y.Q0)(a,"outFields"in s&&s.outFields?[...(0,y.Lk)(a,s.outFields),...i]:i)}get featureEffect(){return this.layer&&"featureEffect"in this.layer?this.layer.featureEffect:null}set featureEffect(s){this._override("featureEffect",s)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(s){I.Z.getLogger(this).error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(s){throw new Error("missing implementation")}createQuery(){const s={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},a=null!=this.filter?this.filter.createQuery(s):new Q.Z(s);if("floorInfo"in this.layer&&this.layer.floorInfo){const i=(0,N.c)(this);null!=i&&(a.where=a.where?`(${a.where}) AND (${i})`:i)}return null!=this.timeExtent&&(a.timeExtent=null!=a.timeExtent?a.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),a}createAggregateQuery(){return new Q.Z({outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference})}queryFeatures(s,a){throw new Error("missing implementation")}queryObjectIds(s,a){throw new Error("missing implementation")}queryFeatureCount(s,a){throw new Error("missing implementation")}queryExtent(s,a){throw new Error("missing implementation")}fetchPopupFeaturesFromGraphics(s,a){var i=this;return(0,D.Z)(function*(){return i._validateFetchPopupFeatures(s,a),i._fetchPopupFeatures(s,a)})()}_loadArcadeModules(s){return s.expressionInfos?.length||Array.isArray(s.content)&&s.content.some(a=>"expression"===a.type)?(0,Y.LC)():Promise.resolve()}_handleRequiredFieldsChange(){const s=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",s),s.then(()=>{this._updatingRequiredFieldsPromise===s&&this._set("_updatingRequiredFieldsPromise",null)})}_updateRequiredFields(){var s=this;return(0,D.Z)(function*(){if(!s.layer||!s.view)return;const a="3d"===s.view.type,{layer:i,layer:{fieldsIndex:l,objectIdField:g}}=s,M="renderer"in i&&i.renderer,f="orderBy"in i&&i.orderBy,p="featureReduction"in i?i.featureReduction:null,d=new Set,_=yield Promise.allSettled([M?M.collectRequiredFields(d,l):null,(0,y.Mu)(d,i),a&&"elevationInfo"in i?(0,y.vl)(d,i):null,null!=s.filter?(0,y.Ll)(d,i,s.filter):null,a||null==s.featureEffect?null:(0,y.Ll)(d,i,s.featureEffect.filter),!a&&p?(0,y.ZV)(d,i,p):null,!a&&f?(0,y.Qj)(d,i,f):null]);if("timeInfo"in i&&i.timeInfo&&s.timeExtent&&(0,y.gd)(d,i.fieldsIndex,[i.timeInfo.startField,i.timeInfo.endField]),"floorInfo"in i&&i.floorInfo&&(0,y.gd)(d,i.fieldsIndex,[i.floorInfo.floorField]),"feature"===i.type&&a&&null!=i.infoFor3D&&(null==i.globalIdField&&I.Z.getLogger(s).error("globalIdField missing on 3DObjectFeatureLayer"),(0,y.gd)(d,i.fieldsIndex,[i.globalIdField])),"subtype-group"===i.type){(0,y.AB)(d,l,i.subtypeField);const C=i.sublayers.map(b=>Promise.all([b.renderer?.collectRequiredFields(d,l),(0,y.Mu)(d,b)]));yield Promise.allSettled(C)}"catalog-footprint"===i.type&&(0,y.gd)(d,l,[i.parent.itemSourceField,i.parent.itemTypeField]);for(const C of _)"rejected"===C.status&&I.Z.getLogger(s).error(C.reason);(0,y.AB)(d,l,g),a&&"displayField"in i&&i.displayField&&(0,y.AB)(d,l,i.displayField);const v=Array.from(d).sort();s._set("requiredFields",v)})()}_validateFetchPopupFeatures(s,a){if(null!=a)for(const i of s){const l=i.origin&&"layer"in i.origin?i.origin.layer:i.layer;if("popupEnabled"in l&&!l.popupEnabled)throw new A.Z("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:l});if(i.isAggregate){const g="featureReduction"in l?l.featureReduction:null;if(!(g&&"popupTemplate"in g&&g.popupEnabled&&g.popupTemplate))throw new A.Z("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:l})}else if("popupTemplate"in l&&!(0,S.V5)(l,a))throw new A.Z("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:l})}}_popupFeatureHasRequiredFields(s,a){return(0,y.R9)(a,s)}_fetchPopupFeatures(s,a){var i=this;return(0,D.Z)(function*(){const l=new Array(s.length),g=new Map,M=yield i._createPopupQuery(s.map(f=>f.origin?.layer??f.layer),a);for(let f=0;f<s.length;f++){const p=s[f];if(p.isAggregate){l[f]=p;continue}const d=p.origin?.layer??p.layer;if(!d||!("popupEnabled"in d))continue;const _=(0,y.Lk)(i.layer.fieldsIndex,M.outFields),v=(0,S.V5)(d,a);if(null==v)continue;const C=yield i._loadArcadeModules(v);(0,O.k_)(a),C&&C.arcadeUtils.hasGeometryOperations(v)||!i._popupFeatureHasRequiredFields(p,_)?g.set(p.getObjectId(),{graphic:p,index:f}):l[f]=p}if("stream"===i.layer.type||0===g.size)return l.filter(Boolean);M.objectIds=Array.from(g.keys());try{const f=yield i.layer.queryFeatures(M,a);for(const p of f.features){const{graphic:{geometry:d,origin:_},index:v}=g.get(p.getObjectId());p.geometry||=d,p.origin=_,l[v]=p}}catch{}return l.filter(Boolean)})()}_createPopupQuery(s,a){var i=this;return(0,D.Z)(function*(){const l=i.layer.createQuery(),g=new Set;let M=!1;const f=s??[i.layer];for(const p of f){if(!("popupEnabled"in p))continue;const d=(0,S.V5)(p,a);if(null==d)continue;const _=yield i._loadArcadeModules(d);(0,O.k_)(a);const v=_&&_.arcadeUtils.hasGeometryOperations(d);M=!("point"!==i.layer.geometryType&&!v);const C=yield(0,S.e7)(i.layer,d);(0,O.k_)(a);for(const b of C)g.add(b)}if(l.returnGeometry=M,l.returnZ=M,l.returnM=M,l.outFields=Array.from(g),l.outSpatialReference=i.view.spatialReference,"floorInfo"in i.layer&&i.layer.floorInfo){const p=(0,N.c)(i);null!=p&&(l.where=l.where?`(${l.where}) AND (${p})`:p)}return l})()}canResume(){return!(!super.canResume()||null!=this.timeExtent&&this.timeExtent.isEmpty)}getTest(){return{createPopupQuery:s=>this._createPopupQuery(void 0,s)}}get test(){return this.getTest()}};return(0,n._)([(0,E.Cb)()],m.prototype,"_updatingRequiredFieldsPromise",void 0),(0,n._)([(0,E.Cb)({readOnly:!0})],m.prototype,"availableFields",null),(0,n._)([(0,E.Cb)({readOnly:!0})],m.prototype,"dataUpdating",void 0),(0,n._)([(0,E.Cb)({type:V.Z})],m.prototype,"featureEffect",null),(0,n._)([(0,E.Cb)({type:j.Z})],m.prototype,"filter",void 0),(0,n._)([(0,E.Cb)(w.qG)],m.prototype,"timeExtent",void 0),(0,n._)([(0,E.Cb)()],m.prototype,"layer",void 0),(0,n._)([(0,E.Cb)({type:Number})],m.prototype,"maximumNumberOfFeatures",null),(0,n._)([(0,E.Cb)({readOnly:!0,type:Boolean})],m.prototype,"maximumNumberOfFeaturesExceeded",null),(0,n._)([(0,E.Cb)({readOnly:!0})],m.prototype,"requiredFields",void 0),(0,n._)([(0,E.Cb)()],m.prototype,"suspended",void 0),(0,n._)([(0,E.Cb)()],m.prototype,"view",void 0),m=(0,n._)([(0,T.j)("esri.views.layers.FeatureLayerView")],m),m}},94421:(X,U,o)=>{o.d(U,{Z:()=>q});var D=o(17626),n=o(63290),A=o(10699),I=o(32917),H=(o(8314),o(4619),o(26584),o(76898));const q=T=>{let w=class extends T{initialize(){this.addHandles((0,I.on)(()=>this.layer,"refresh",V=>{this.doRefresh(V.dataChanged).catch(j=>{(0,A.D_)(j)||n.Z.getLogger(this).error(j)})}),"RefreshableLayerView")}};return w=(0,D._)([(0,H.j)("esri.layers.mixins.RefreshableLayerView")],w),w}}}]);