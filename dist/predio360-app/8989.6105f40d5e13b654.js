"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[8989,5611],{77044:(K,L,o)=>{o.d(L,{Y:()=>j});var u=o(62208);function m(i,h){return i?h?4:3:h?3:2}function j(i,h,f,_,c){if((0,u.Wi)(h)||!h.lengths.length)return null;const d="upperLeft"===c?.originPosition?-1:1;i.lengths.length&&(i.lengths.length=0),i.coords.length&&(i.coords.length=0);const E=i.coords,g=[],v=f?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:l,coords:y}=h,A=m(f,_);let r=0;for(const s of l){const a=W(v,y,r,s,f,_,d);a&&g.push(a),r+=s*A}if(g.sort((s,a)=>{let p=d*s[2]-d*a[2];return 0===p&&f&&(p=s[4]-a[4]),p}),g.length){let s=6*g[0][2];E[0]=g[0][0]/s,E[1]=g[0][1]/s,f&&(s=6*g[0][4],E[2]=0!==s?g[0][3]/s:0),(E[0]<v[0]||E[0]>v[1]||E[1]<v[2]||E[1]>v[3]||f&&(E[2]<v[4]||E[2]>v[5]))&&(E.length=0)}if(!E.length){const s=h.lengths[0]?function R(i,h,f,_,c){const d=m(_,c);let E=h,g=h+d,v=0,l=0,y=0,A=0;for(let r=0,s=f-1;r<s;r++,E+=d,g+=d){const a=i[E],p=i[E+1],O=i[E+2],T=i[g],D=i[g+1],M=i[g+2],C=_?U(a,p,O,T,D,M):I(a,p,T,D);if(C)if(v+=C,_){const B=P(a,p,O,T,D,M);l+=C*B[0],y+=C*B[1],A+=C*B[2]}else{const B=b(a,p,T,D);l+=C*B[0],y+=C*B[1]}}return v>0?_?[l/v,y/v,A/v]:[l/v,y/v]:f>0?_?[i[h],i[h+1],i[h+2]]:[i[h],i[h+1]]:null}(y,0,l[0],f,_):null;if(!s)return null;E[0]=s[0],E[1]=s[1],f&&s.length>2&&(E[2]=s[2])}return i}function W(i,h,f,_,c,d,E=1){const g=m(c,d);let v=f,l=f+g,y=0,A=0,r=0,s=0,a=0;for(let O=0,T=_-1;O<T;O++,v+=g,l+=g){const D=h[v],M=h[v+1],C=h[v+2],B=h[l],N=h[l+1],x=h[l+2];let S=D*N-B*M;s+=S,y+=(D+B)*S,A+=(M+N)*S,c&&(S=D*x-B*C,r+=(C+x)*S,a+=S),D<i[0]&&(i[0]=D),D>i[1]&&(i[1]=D),M<i[2]&&(i[2]=M),M>i[3]&&(i[3]=M),c&&(C<i[4]&&(i[4]=C),C>i[5]&&(i[5]=C))}if(s*E>0&&(s*=-1),a*E>0&&(a*=-1),!s)return null;const p=[y,A,.5*s];return c&&(p[3]=r,p[4]=.5*a),p}function I(i,h,f,_){const c=f-i,d=_-h;return Math.sqrt(c*c+d*d)}function U(i,h,f,_,c,d){const E=_-i,g=c-h,v=d-f;return Math.sqrt(E*E+g*g+v*v)}function b(i,h,f,_){return[i+.5*(f-i),h+.5*(_-h)]}function P(i,h,f,_,c,d){return[i+.5*(_-i),h+.5*(c-h),f+.5*(d-f)]}},60507:(K,L,o)=>{o.d(L,{Jn:()=>U,RL:()=>P,VW:()=>I,W_:()=>v,jG:()=>l,tR:()=>y,tq:()=>E,vQ:()=>_,zx:()=>c});var u=o(62208),m=o(29505);function j(r){return r?l:y}function I(r,s){return function W(r,s){return(0,u.Wi)(s)||!s.mode?j(r).mode:s.mode}(!!(0,u.pC)(r)&&r.hasZ,s)}function U(r,s){return function R(r,s){return(0,u.pC)(s)?s:j(r)}(!!(0,u.pC)(r)&&!!r.hasZ,s)}function P(r){const s=function h(r){return r.layer&&"elevationInfo"in r.layer?r.layer.elevationInfo:null}(r),a=I(r.geometry,s);return{mode:a,offset:(0,u.pC)(s)&&"on-the-ground"!==a?(0,u.Pt)(s.offset,0)*(0,m.Z7)((0,u.Pt)(s.unit,"meters")):0}}function _(r,s,a,p=null){return d(r,s.x,s.y,s.hasZ?s.z:0,s.spatialReference,a,p)}function c(r,s,a,p,O=null){return d(r,s[0],s[1],s.length>2?s[2]:0,a,p,O)}function d(r,s,a,p,O,T,D=null){if((0,u.Wi)(T))return;const M=(0,u.pC)(D)?D.mode:"absolute-height";if("on-the-ground"===M)return 0;const{absoluteZ:C}=E(s,a,p,O,r,T);return function g(r,s,a,p,O,T,D,M){const C=(0,u.pC)(D)&&(0,u.pC)(D.offset)?D.offset:0;switch(M){case"absolute-height":return r-C;case"relative-to-ground":return r-((0,u.Pt)(T.elevationProvider.getElevation(s,a,p,O,"ground"),0)+C);case"relative-to-scene":return r-((0,u.Pt)(T.elevationProvider.getElevation(s,a,p,O,"scene"),0)+C)}}(C,s,a,p,O,r,D,M)}function E(r,s,a,p,O,T){const D=(0,u.pC)(T.offset)?T.offset:0;switch(T.mode){case"absolute-height":return{absoluteZ:a+D,elevation:0};case"on-the-ground":{const M=(0,u.Pt)(O.elevationProvider.getElevation(r,s,0,p,"ground"),0);return{absoluteZ:M,elevation:M}}case"relative-to-ground":{const M=(0,u.Pt)(O.elevationProvider.getElevation(r,s,a,p,"ground"),0);return{absoluteZ:a+M+D,elevation:M}}case"relative-to-scene":{const M=(0,u.Pt)(O.elevationProvider.getElevation(r,s,a,p,"scene"),0);return{absoluteZ:a+M+D,elevation:M}}}}function v(r,s){if((0,u.Wi)(s))return!1;const{mode:a}=s;return(0,u.pC)(a)&&("scene"===r&&"relative-to-scene"===a||"ground"===r&&"absolute-height"!==a)}const l={mode:"absolute-height",offset:0},y={mode:"on-the-ground",offset:null}},62359:(K,L,o)=>{o.r(L),o.d(L,{default:()=>v});var u=o(15861),m=o(17626),j=o(26584),W=o(62208),R=o(32917),I=o(77712),P=(o(90912),o(85931),o(76898)),i=o(19702),h=o(13191),f=o(32400),_=o(46348),c=o(89765),d=o(23147),E=o(45611);let g=class extends((0,i.A)(E.Z)){constructor(){super(...arguments),this.type="graphics-3d",this.symbologySnappingSupported=!0,this._slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set("processor",new f.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.handles.add(this.layer.on("graphic-update",l=>this.processor.graphicsCore.graphicUpdateHandler(l))),this.addResolvingPromise((0,c.E)(this).then(l=>this.fullExtentInLocalViewSpatialReference=l)),this.layer.internal?this.notifyChange("updating"):this.handles.add((0,R.gx)(()=>this.view?.basemapTerrain?.ready,()=>()=>this.notifyChange("updating"),{once:!0}))}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("processor",(0,W.SC)(this.processor))}get loadedGraphics(){return this.layer.graphics}get legendEnabled(){return this.canResume()&&!this.processor?.frustumVisibilitySuspended}get slicePlaneEnabled(){return this._slicePlaneEnabled&&!this.layer.internal}set slicePlaneEnabled(l){this._slicePlaneEnabled=l}getSuspendInfo(){const l=super.getSuspendInfo();return l.outsideScaleRange=this.processor?.scaleVisibilitySuspended??!1,l.outsideOfView=this.processor?.frustumVisibilitySuspended??!1,l}fetchPopupFeatures(l,y){return(0,u.Z)(function*(){return(0,W.Wg)(y)?.clientGraphics??[]})()}getHit(l){return this.processor.getHit(l)}whenGraphicBounds(l,y){return this.processor.whenGraphicBounds(l,y)}computeAttachmentOrigin(l,y){return this.processor?.computeAttachmentOrigin(l,y)}getSymbolLayerSize(l,y){return this.processor.getSymbolLayerSize(l,y)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(l){return this.processor.maskOccludee(l)}highlight(l){return this.processor.highlight(l)}elevationAlignPointsInFeatures(l,y){var A=this;return(0,u.Z)(function*(){const{processor:r}=A;if((0,W.Wi)(r)||(0,W.Wi)(r.graphics3DGraphics))throw new j.Z("graphicslayerview3d:missing-processor","A Graphics3D processor is needed to resolve graphics elevation.");const{graphics3DGraphics:s}=r;return(0,h.W)(A.view,A.layer,p=>"number"==typeof p?s.get(p):void 0,l,y)})()}queryForSymbologySnapping(l,y){var A=this;return(0,u.Z)(function*(){return(0,_.c)(A.processor,l,y)})()}get updatePolicy(){return this.processor?.graphicsCore.effectiveUpdatePolicy||d.j.SYNC}canResume(){return super.canResume()&&!this.processor?.scaleVisibilitySuspended}isUpdating(){return!(!this.processor?.updating&&(this.layer.internal||this.view?.basemapTerrain?.ready))}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.processor?.elevationAlignment.updating??!1,visibilityFrustum:!this.processor?.frustumVisibilitySuspended}}getUsedMemory(){return this.processor?.graphicsCore?.usedMemory??0}getUnloadedMemory(){return this.processor?.graphicsCore?.unprocessedMemoryEstimate}ignoresMemoryFactor(){return!0}};(0,m._)([(0,I.Cb)()],g.prototype,"loadedGraphics",null),(0,m._)([(0,I.Cb)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,m._)([(0,I.Cb)()],g.prototype,"layer",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],g.prototype,"processor",void 0),(0,m._)([(0,I.Cb)()],g.prototype,"_slicePlaneEnabled",void 0),(0,m._)([(0,I.Cb)({type:Boolean})],g.prototype,"slicePlaneEnabled",null),g=(0,m._)([(0,P.j)("esri.views.3d.layers.GraphicsLayerView3D")],g);const v=g},19702:(K,L,o)=>{o.d(L,{A:()=>h});var u=o(15861),m=o(17626),j=o(54024),W=o(10699),R=o(32917),I=o(77712),P=(o(90912),o(85931),o(76898)),i=o(36947);const h=f=>{let _=class extends f{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(c){super.postscript(c),(0,i.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var c=this;return(0,u.Z)(function*(){const d=new AbortController,E=d.signal;c.handles.add((0,j.kB)(()=>d.abort())),yield(0,R.N1)(()=>c.view.defaultsFromMap?.heightModelInfoReady,E),(0,W.k_)(E);const g=(0,i.Wt)(c.layer,c.view.heightModelInfo,c.supportsHeightUnitConversion);if(g)throw g})()}canResume(){const c=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!c||!c.minScale||!c.maxScale||c.minScale>=c.maxScale)}getSuspendInfo(){const c=super.getSuspendInfo(),d=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return d&&d.minScale&&d.maxScale&&d.minScale<d.maxScale&&(c.outsideScaleRange=!0),c}};return(0,m._)([(0,I.Cb)()],_.prototype,"view",void 0),(0,m._)([(0,I.Cb)()],_.prototype,"slicePlaneEnabled",void 0),_=(0,m._)([(0,P.j)("esri.views.3d.layers.LayerView3D")],_),_}},13191:(K,L,o)=>{o.d(L,{W:()=>h});var u=o(15861),j=(o(29132),o(62208)),W=o(10699),R=o(38114),I=o(60507),U=o(81468),b=o(79112),P=o(74746),i=o(65234);function h(E,g,v,l,y){return f.apply(this,arguments)}function f(){return(f=(0,u.Z)(function*(E,g,v,l,y){const{elevationProvider:A,renderCoordsHelper:r,spatialReference:s}=E,{elevationInfo:a}=g,p=(0,P.WI)(a,!0),O=yield(0,P.kr)(p,s,y);(0,W.k_)(y);const T=[],D=new Set,M=new Set;for(const{objectId:C,points:B}of l){const N=v(C);if((0,j.Wi)(N)){for(const S of B)T.push(S[2]);D.add(C)}else{N.isDraped&&M.add(C),_.setFromElevationInfo((0,I.Jn)(N.graphic.geometry,a)),_.updateFeatureExpressionInfoContext(O,N.graphic,g),c.spatialReference=E.spatialReference;for(const{x:S,y:G,z:V}of B)c.x=S,c.y=G,c.z=V??0,(0,U.qZ)(c,A,_,r,d),T.push(d.z)}}return{elevations:T,drapedObjectIds:M,failedObjectIds:D}})).apply(this,arguments)}const _=new b.o,c=(0,R.Tx)(0,0,0,i.Z.WGS84),d=new U.Lm},46348:(K,L,o)=>{o.d(L,{c:()=>R});var u=o(15861),m=o(62208),j=o(10699),W=o(46679);function R(b,P,i){return I.apply(this,arguments)}function I(){return I=(0,u.Z)(function*(b,P,i){if((0,m.Wi)(b)||0===P.candidates.length)return U;const h=b.graphics3DGraphicsByObjectID??b.graphics3DGraphics,f=[],_=[],{renderer:c}=b,d=(0,m.pC)(c)&&"arcadeRequired"in c&&c.arcadeRequired?(0,W.LC)():null,E=function(){var r=(0,u.Z)(function*(s,{graphic:a,graphics3DSymbol:p}){const O=yield d,T=yield b.getRenderingInfoAsync(a,c,O,{signal:i});return(0,m.Wi)(T)?[]:p.queryForSnapping(s,v,T,i)});return function(a,p){return r.apply(this,arguments)}}(),{candidates:g,spatialReference:v}=P;for(let r=0;r<g.length;++r){const s=g[r],{objectId:a}=s,p="number"==typeof a?h?.get(a):void 0;if((0,m.Wi)(p))continue;const{graphics3DSymbol:O}=p;O.symbologySnappingSupported&&(f.push(E(s,p)),_.push(r))}if(0===f.length)return U;const l=yield Promise.all(f);(0,j.k_)(i);const y=[],A=[];for(let r=0;r<l.length;++r){const s=l[r],a=_[r];for(const p of s)y.push(p),A.push(a)}return{candidates:y,sourceCandidateIndices:A}}),I.apply(this,arguments)}const U={candidates:[],sourceCandidateIndices:[]}},89765:(K,L,o)=>{o.d(L,{E:()=>W});var u=o(62208),m=o(46367),j=o(35082);function W(R){const I=R.view.spatialReference,U=R.layer.fullExtent,b=(0,u.pC)(U)&&U.spatialReference;if((0,u.Wi)(U)||!b)return Promise.resolve(null);if(b.equals(I))return Promise.resolve(U.clone());const P=(0,m.iV)(U,I);return(0,u.pC)(P)?Promise.resolve(P):R.view.state.isLocal?(0,j.projectGeometry)(U,I,R.layer.portalItem).then(i=>!R.destroyed&&i?i:null).catch(()=>null):Promise.resolve(null)}},45611:(K,L,o)=>{o.d(L,{Z:()=>c});var u=o(17626),m=o(14517),j=o(61885),W=o(80542),R=o(61996),I=o(63290),U=o(62208),b=o(60330),P=o(77712),f=(o(90912),o(85931),o(76898));let _=class extends((0,W.p)((0,R.IG)((0,b.v)(j.Z.EventedMixin(m.Z))))){constructor(d){super(d),this.layer=null,this.parent=null}initialize(){this.when().catch(d=>{if("layerview:create-error"!==d.name){const E=this.layer&&this.layer.id||"no id",g=this.layer&&this.layer.title||"no title";I.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${g}', id: '${E}')`,d)}})}get fullOpacity(){return(0,U.Pt)(this.get("layer.opacity"),1)*(0,U.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(d){this._overrideIfSome("visible",d)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const d=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(d.viewNotReady=!0),this.layer&&this.layer.loaded||(d.layerNotLoaded=!0),this.visible||(d.layerInvisible=!0),d}isUpdating(){return!1}};(0,u._)([(0,P.Cb)()],_.prototype,"fullOpacity",null),(0,u._)([(0,P.Cb)()],_.prototype,"layer",void 0),(0,u._)([(0,P.Cb)()],_.prototype,"parent",void 0),(0,u._)([(0,P.Cb)({readOnly:!0})],_.prototype,"suspended",null),(0,u._)([(0,P.Cb)({readOnly:!0})],_.prototype,"suspendInfo",null),(0,u._)([(0,P.Cb)({readOnly:!0})],_.prototype,"legendEnabled",null),(0,u._)([(0,P.Cb)({type:Boolean,readOnly:!0})],_.prototype,"updating",null),(0,u._)([(0,P.Cb)({readOnly:!0})],_.prototype,"updatingProgress",null),(0,u._)([(0,P.Cb)()],_.prototype,"visible",null),(0,u._)([(0,P.Cb)()],_.prototype,"view",void 0),_=(0,u._)([(0,f.j)("esri.views.layers.LayerView")],_);const c=_}}]);