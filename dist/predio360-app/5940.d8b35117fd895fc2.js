"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[5940],{45940:(j,E,t)=>{t.r(E),t.d(E,{default:()=>S});var h=t(15861),a=t(17626),M=t(63290),l=t(62208),D=t(10699),g=t(32917),p=t(77712),P=(t(90912),t(85931),t(76898)),_=t(2004),d=t(91757),c=t(37384),A=t(67802),K=t(45611),x=t(94421),f=t(73535);let o=class extends((0,f.Z)((0,x.Z)((0,c.y)(K.Z)))){constructor(){super(...arguments),this.bitmapContainer=new d.c}supportsSpatialReference(e){return this.layer.serviceSupportsSpatialReference(e)}update(e){this.strategy.update(e).catch(s=>{(0,D.D_)(s)||M.Z.getLogger(this.declaredClass).error(s)})}attach(){const{layer:e}=this,{imageMaxHeight:s,imageMaxWidth:i}=e;this.bitmapContainer=new d.c,this.container.addChild(this.bitmapContainer),this.strategy=new A.Z({container:this.bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:s,imageMaxWidth:i,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this.addAttachHandles((0,g.YP)(()=>this.exportImageVersion,()=>this.requestUpdate()))}detach(){this.strategy=(0,l.SC)(this.strategy),this.container.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(e){const{view:s,bitmapContainer:i}=this,{x:n,y:O}=e,{spatialReference:Z}=s;let r,y=0,u=0;if(i.children.some(z=>{const{width:R,height:I,resolution:T,x:m,y:C}=z,W=m+T*R,B=C-T*I;return n>=m&&n<=W&&O<=C&&O>=B&&(r=new _.Z({xmin:m,ymin:B,xmax:W,ymax:C,spatialReference:Z}),y=R,u=I,!0)}),!r)return null;const L=r.width/y,V=Math.round((n-r.xmin)/L),H=Math.round((r.ymax-O)/L);return{extent:r,width:y,height:u,x:V,y:H}}doRefresh(){var e=this;return(0,h.Z)(function*(){e.requestUpdate()})()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,s,i,n){return this.layer.fetchImageBitmap(e,s,i,{timeExtent:this.timeExtent,...n})}};(0,a._)([(0,p.Cb)()],o.prototype,"strategy",void 0),(0,a._)([(0,p.Cb)()],o.prototype,"updating",void 0),o=(0,a._)([(0,P.j)("esri.views.2d.layers.WMSLayerView2D")],o);const S=o},94421:(j,E,t)=>{t.d(E,{Z:()=>v});var h=t(17626),a=t(63290),M=t(10699),l=t(32917),D=t(77712),U=(t(90912),t(85931),t(76898));const v=P=>{let _=class extends P{initialize(){this.handles.add((0,l.on)(()=>this.layer,"refresh",d=>{this.doRefresh(d.dataChanged).catch(c=>{(0,M.D_)(c)||a.Z.getLogger(this.declaredClass).error(c)})}),"RefreshableLayerView")}};return(0,h._)([(0,D.Cb)()],_.prototype,"layer",void 0),_=(0,h._)([(0,U.j)("esri.layers.mixins.RefreshableLayerView")],_),_}}}]);