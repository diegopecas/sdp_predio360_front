"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[4578],{24578:(H,I,n)=>{n.r(I),n.d(I,{fromUrl:()=>Q});var e=n(15861),p=n(26584),t=n(21726),s=n(38305),O=n(39593),E=n(17196),Z=n(72469),V=n(30164),S=n(45205);const j={FeatureLayer:!0,SceneLayer:!0};function Q(l){return U.apply(this,arguments)}function U(){return U=(0,e.Z)(function*(l){const a=l.properties?.customParameters,r=yield function K(l,a){return D.apply(this,arguments)}(l.url,a),o={...l.properties,url:l.url};if(r.layers.length+r.tables.length===0)return null!=r.layerId&&(o.layerId=r.layerId),null!=r.sourceJSON&&(o.sourceJSON=r.sourceJSON),new r.Constructor(o);const y=new((yield n.e(5700).then(n.bind(n,55700))).default)({title:r.parsedUrl.title});return yield function R(l,a,r){return W.apply(this,arguments)}(y,r,o),y}),U.apply(this,arguments)}function B(l,a){return l?l.find(r=>r.id===a):null}function W(){return(W=(0,e.Z)(function*(l,a,r){function o(u,c,P,g){const L={...r,layerId:c,sublayerTitleMode:"service-name"};return null!=u&&(L.url=u),null!=P&&(L.sourceJSON=P),g(L)}const y=a.sublayerConstructorProvider;for(const{id:u,serverUrl:c}of a.layers){const P=B(a.sublayerInfos,u),g=(P&&y?.(P))??a.Constructor,L=o(c,u,P,m=>new g(m));l.add(L)}if(a.tables.length){const u=yield v("FeatureLayer");a.tables.forEach(({id:c,serverUrl:P})=>{const g=o(P,c,B(a.tableInfos,c),L=>new u(L));l.tables.add(g)})}})).apply(this,arguments)}function D(){return D=(0,e.Z)(function*(l,a){let r=(0,s.Qc)(l);if(null==r&&(r=yield function A(l,a){return F.apply(this,arguments)}(l,a)),null==r)throw new p.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:l});const{serverType:o,sublayer:y}=r;let u;const c={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"},P="FeatureServer"===o,g="SceneServer"===o,L={parsedUrl:r,Constructor:null,layerId:P||g?y??void 0:void 0,layers:[],tables:[]};switch(o){case"MapServer":u=null!=y?"FeatureLayer":(yield function J(l,a){return G.apply(this,arguments)}(l,a))?"TileLayer":"MapImageLayer";break;case"ImageServer":{const m=yield(0,S.T)(l,{customParameters:a}),{tileInfo:M,cacheType:x}=m;u=M?"LERC"!==M?.format?.toUpperCase()||x&&"elevation"!==x.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer";break}case"SceneServer":{const m=yield(0,S.T)(r.url.path,{customParameters:a});if(u="SceneLayer",m){const M=m?.layers;if("Voxel"===m?.layerType)u="VoxelLayer";else if(M?.length){const x=M[0]?.layerType;null!=x&&null!=Z.fb[x]&&(u=Z.fb[x])}}break}case"3DTilesServer":throw new p.Z("arcgis-layers:unsupported","fromUrl() not supported for 3DTiles layers");case"FeatureServer":if(u="FeatureLayer",null!=y){const m=yield(0,S.T)(l,{customParameters:a});L.sourceJSON=m,"Oriented Imagery Layer"===m.type&&(u="OrientedImageryLayer")}break;default:u=c[o]}if(j[u]&&null==y){const m=yield function i(l,a,r){return d.apply(this,arguments)}(l,o,a);if(P&&(L.sublayerInfos=m.layerInfos,L.tableInfos=m.tableInfos),m.layers.length+m.tables.length!==1)L.layers=m.layers,L.tables=m.tables,P&&m.layerInfos?.length&&(L.sublayerConstructorProvider=yield function z(l){return N.apply(this,arguments)}(m.layerInfos));else if(P||g){const M=m.layerInfos?.[0]??m.tableInfos?.[0];L.layerId=m.layers[0]?.id??m.tables[0]?.id,L.sourceJSON=M,P&&"Oriented Imagery Layer"===M?.type&&(u="OrientedImageryLayer")}}return L.Constructor=yield v(u),L}),D.apply(this,arguments)}function F(){return(F=(0,e.Z)(function*(l,a){const r=yield(0,S.T)(l,{customParameters:a});let o=null,y=null;const u=r.type;if("Feature Layer"===u||"Table"===u?(o="FeatureServer",y=r.id??null):"indexedVector"===u?o="VectorTileServer":r.hasOwnProperty("mapName")?o="MapServer":r.hasOwnProperty("bandCount")&&r.hasOwnProperty("pixelSizeX")?o="ImageServer":r.hasOwnProperty("maxRecordCount")&&r.hasOwnProperty("allowGeometryUpdates")?o="FeatureServer":r.hasOwnProperty("streamUrls")?o="StreamServer":C(r)?(o="SceneServer",y=r.id):r.hasOwnProperty("layers")&&C(r.layers?.[0])&&(o="SceneServer"),!o)return null;const c=null!=y?(0,s.DR)(l):null;return{title:null!=c&&r.name||(0,t.vt)(l),serverType:o,sublayer:y,url:{path:null!=c?c.serviceUrl:(0,t.mN)(l).path}}})).apply(this,arguments)}function C(l){return null!=l&&l.hasOwnProperty("store")&&l.hasOwnProperty("id")&&"number"==typeof l.id}function d(){return d=(0,e.Z)(function*(l,a,r){let o,y,u=!1;switch(a){case"FeatureServer":{const g=yield(0,E.V)(l,{customParameters:r});u=!!g.layersJSON,o=g.layersJSON||g.serviceJSON;break}case"SceneServer":{const g=yield function h(l,a){return f.apply(this,arguments)}(l,r);o=g.serviceInfo,y=g.tableServerUrl;break}default:o=yield(0,S.T)(l,{customParameters:r})}const c=o?.layers,P=o?.tables;return{layers:c?.map(g=>({id:g.id})).reverse()||[],tables:P?.map(g=>({serverUrl:y,id:g.id})).reverse()||[],layerInfos:u?c:[],tableInfos:u?P:[]}}),d.apply(this,arguments)}function f(){return(f=(0,e.Z)(function*(l,a){const r=yield(0,S.T)(l,{customParameters:a});if(!r.layers?.[0])return{serviceInfo:r};try{const{serverUrl:y}=yield(0,O.w)(l),u=yield(0,S.T)(y,{customParameters:a}).catch(()=>null);return u&&(r.tables=u.tables),{serviceInfo:r,tableServerUrl:y}}catch{return{serviceInfo:r}}})).apply(this,arguments)}function v(l){return T.apply(this,arguments)}function T(){return(T=(0,e.Z)(function*(l){return(0,V.T[l])()})).apply(this,arguments)}function G(){return(G=(0,e.Z)(function*(l,a){return(yield(0,S.T)(l,{customParameters:a})).tileInfo})).apply(this,arguments)}function N(){return(N=(0,e.Z)(function*(l){const a=[],r=[];if(l.forEach(u=>{const{type:c}=u;"Oriented Imagery Layer"===c?(a.push(c),r.push(v("OrientedImageryLayer"))):(a.push(c),r.push(v("FeatureLayer")))}),!r.length)return;const o=yield Promise.all(r),y=new Map;return a.forEach((u,c)=>{y.set(u,o[c])}),u=>y.get(u.type)})).apply(this,arguments)}},39593:(H,I,n)=>{n.d(I,{w:()=>S});var e=n(15861),p=n(24263),t=n(84792),s=n(26584),O=n(10699),E=n(38305),Z=n(31099),V=n(55463);function S(i,d){return j.apply(this,arguments)}function j(){return j=(0,e.Z)(function*(i,d){const h=(0,E.Qc)(i);if(!h)throw new s.Z("invalid-url","Invalid scene service url");const f={...d,sceneServerUrl:h.url.path,layerId:h.sublayer??void 0};if(f.sceneLayerItem??=(yield function Q(i){return U.apply(this,arguments)}(f)),null==f.sceneLayerItem)return D(f.sceneServerUrl.replace("/SceneServer","/FeatureServer"),f);const v=yield function F(i){return C.apply(this,arguments)}(f);if(!v?.url)throw new s.Z("related-service-not-found","Could not find feature service through portal item relationship");f.featureServiceItem=v;const T=yield D(v.url,f);return T.portalItem=v,T}),j.apply(this,arguments)}function U(){return U=(0,e.Z)(function*(i){const d=(yield B(i)).serviceItemId;if(!d)return null;const h=new V.default({id:d,apiKey:i.apiKey}),f=yield function W(i){return K.apply(this,arguments)}(i);null!=f&&(h.portal=new Z.Z({url:f}));try{return h.load({signal:i.signal})}catch(v){return(0,O.r9)(v),null}}),U.apply(this,arguments)}function B(i){return R.apply(this,arguments)}function R(){return(R=(0,e.Z)(function*(i){if(i.rootDocument)return i.rootDocument;const d={query:{f:"json",...i.customParameters,token:i.apiKey},responseType:"json",signal:i.signal};try{const h=yield(0,t.Z)(i.sceneServerUrl,d);i.rootDocument=h.data}catch{i.rootDocument={}}return i.rootDocument})).apply(this,arguments)}function K(){return(K=(0,e.Z)(function*(i){const d=p.id?.findServerInfo(i.sceneServerUrl);if(d?.owningSystemUrl)return d.owningSystemUrl;const h=i.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const f=(yield(0,t.Z)(h,{query:{f:"json"},responseType:"json",signal:i.signal})).data.owningSystemUrl;if(f)return f}catch(f){(0,O.r9)(f)}return null})).apply(this,arguments)}function D(i,d){return A.apply(this,arguments)}function A(){return(A=(0,e.Z)(function*(i,d){const h=(0,E.Qc)(i);if(!h)throw new s.Z("invalid-feature-service-url","Invalid feature service url");const f=h.url.path,v=d.layerId;if(null==v)return{serverUrl:f};const T=B(d),J=d.featureServiceItem?yield d.featureServiceItem.fetchData("json"):null,G=(J?.layers?.[0]||J?.tables?.[0])?.customParameters,z=y=>{const u={query:{f:"json",...G},responseType:"json",authMode:y,signal:d.signal};return(0,t.Z)(f,u)},N=z("anonymous").catch(()=>z("no-prompt")),[l,a]=yield Promise.all([N,T]),r=a?.layers,o=l.data&&l.data.layers;if(!Array.isArray(o))throw new Error("expected layers array");if(Array.isArray(r)){for(let y=0;y<Math.min(r.length,o.length);y++)if(r[y].id===v)return{serverUrl:f,layerId:o[y].id}}else if(null!=v&&v<o.length)return{serverUrl:f,layerId:o[v].id};throw new Error("could not find matching associated sublayer")})).apply(this,arguments)}function C(){return(C=(0,e.Z)(function*({sceneLayerItem:i,signal:d}){if(!i)return null;try{const h=(yield i.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:d})).find(v=>"Feature Service"===v.type)||null;if(!h)return null;const f=new V.default({portal:h.portal,id:h.id});return yield f.load(),f}catch(h){return(0,O.r9)(h),null}})).apply(this,arguments)}},30164:(H,I,n)=>{n.d(I,{T:()=>p});var e=n(15861);const p={BingMapsLayer:(t=(0,e.Z)(function*(){return(yield n.e(2248).then(n.bind(n,72248))).default}),function(){return t.apply(this,arguments)}),BuildingSceneLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(2964),n.e(2432),n.e(9410),n.e(8592),n.e(676)]).then(n.bind(n,6189))).default});return function(){return t.apply(this,arguments)}}(),CatalogLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(5262),n.e(6072),n.e(4802),n.e(5349),n.e(1601)]).then(n.bind(n,41601))).default});return function(){return t.apply(this,arguments)}}(),CSVLayer:function(){var t=(0,e.Z)(function*(){return(yield n.e(5625).then(n.bind(n,85625))).default});return function(){return t.apply(this,arguments)}}(),DimensionLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(7614)]).then(n.bind(n,17614))).default});return function(){return t.apply(this,arguments)}}(),ElevationLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(5810)]).then(n.bind(n,75810))).default});return function(){return t.apply(this,arguments)}}(),FeatureLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.resolve().then(n.bind(n,80415))).default});return function(){return t.apply(this,arguments)}}(),GeoJSONLayer:function(){var t=(0,e.Z)(function*(){return(yield n.e(2903).then(n.bind(n,72903))).default});return function(){return t.apply(this,arguments)}}(),GeoRSSLayer:function(){var t=(0,e.Z)(function*(){return(yield n.e(6306).then(n.bind(n,96306))).default});return function(){return t.apply(this,arguments)}}(),GroupLayer:function(){var t=(0,e.Z)(function*(){return(yield n.e(5700).then(n.bind(n,55700))).default});return function(){return t.apply(this,arguments)}}(),ImageryLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(5262),n.e(6926),n.e(2863),n.e(5224),n.e(5785)]).then(n.bind(n,65785))).default});return function(){return t.apply(this,arguments)}}(),ImageryTileLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8594),n.e(6926),n.e(2863),n.e(1423),n.e(5224),n.e(8592),n.e(5821)]).then(n.bind(n,85821))).default});return function(){return t.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(2432),n.e(7867)]).then(n.bind(n,67867))).default});return function(){return t.apply(this,arguments)}}(),KMLLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(8411)]).then(n.bind(n,38411))).default});return function(){return t.apply(this,arguments)}}(),LineOfSightLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(5628)]).then(n.bind(n,29457))).default});return function(){return t.apply(this,arguments)}}(),LinkChartLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(337),n.e(2507),n.e(774),n.e(6072),n.e(7758),n.e(7689),n.e(8592),n.e(8557)]).then(n.bind(n,98557))).default});return function(){return t.apply(this,arguments)}}(),MapImageLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(5262),n.e(4802),n.e(5485),n.e(8887)]).then(n.bind(n,48887))).default});return function(){return t.apply(this,arguments)}}(),MapNotesLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(9859)]).then(n.bind(n,19859))).default});return function(){return t.apply(this,arguments)}}(),MediaLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(6521)]).then(n.bind(n,29371))).default});return function(){return t.apply(this,arguments)}}(),OGCFeatureLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(9628),n.e(2955)]).then(n.bind(n,36554))).default});return function(){return t.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(5980)]).then(n.bind(n,71591))).default});return function(){return t.apply(this,arguments)}}(),OrientedImageryLayer:function(){var t=(0,e.Z)(function*(){return(yield n.e(6150).then(n.bind(n,66150))).default});return function(){return t.apply(this,arguments)}}(),PointCloudLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(2432),n.e(7155)]).then(n.bind(n,7155))).default});return function(){return t.apply(this,arguments)}}(),RouteLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(403),n.e(4940)]).then(n.bind(n,84940))).default});return function(){return t.apply(this,arguments)}}(),SceneLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(2964),n.e(5453),n.e(2432),n.e(8592),n.e(7986)]).then(n.bind(n,47986))).default});return function(){return t.apply(this,arguments)}}(),StreamLayer:function(){var t=(0,e.Z)(function*(){return(yield n.e(289).then(n.bind(n,70289))).default});return function(){return t.apply(this,arguments)}}(),SubtypeGroupLayer:function(){var t=(0,e.Z)(function*(){return(yield n.e(1976).then(n.bind(n,81976))).default});return function(){return t.apply(this,arguments)}}(),TileLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(5262),n.e(4802),n.e(5485),n.e(8592),n.e(9735)]).then(n.bind(n,59735))).default});return function(){return t.apply(this,arguments)}}(),IntegratedMesh3DTilesLayer:function(){var t=(0,e.Z)(function*(){return(yield n.e(7037).then(n.bind(n,47037))).default});return function(){return t.apply(this,arguments)}}(),UnknownLayer:function(){var t=(0,e.Z)(function*(){return(yield n.e(6339).then(n.bind(n,56339))).default});return function(){return t.apply(this,arguments)}}(),UnsupportedLayer:function(){var t=(0,e.Z)(function*(){return(yield n.e(6240).then(n.bind(n,16240))).default});return function(){return t.apply(this,arguments)}}(),VectorTileLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8364),n.e(8592),n.e(193)]).then(n.bind(n,10193))).default});return function(){return t.apply(this,arguments)}}(),VoxelLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(2432),n.e(6007)]).then(n.bind(n,26007))).default});return function(){return t.apply(this,arguments)}}(),WFSLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(9636),n.e(8762)]).then(n.bind(n,98762))).default});return function(){return t.apply(this,arguments)}}(),WMSLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(6894)]).then(n.bind(n,46894))).default});return function(){return t.apply(this,arguments)}}(),WMTSLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(9526)]).then(n.bind(n,69526))).default});return function(){return t.apply(this,arguments)}}(),WebTileLayer:function(){var t=(0,e.Z)(function*(){return(yield Promise.all([n.e(8592),n.e(2585)]).then(n.bind(n,28678))).default});return function(){return t.apply(this,arguments)}}()};var t},45205:(H,I,n)=>{n.d(I,{T:()=>t});var e=n(15861),p=n(84792);function t(O,E){return s.apply(this,arguments)}function s(){return(s=(0,e.Z)(function*(O,E){const{data:Z}=yield(0,p.Z)(O,{responseType:"json",query:{f:"json",...E?.customParameters,token:E?.apiKey}});return Z})).apply(this,arguments)}}}]);