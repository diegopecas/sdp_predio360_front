"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[5628],{128:(A,b,l)=>{l.d(b,{B:()=>y});var f=l(15861),g=l(22558),C=l(21726),R=l(35948),x=l(34117),E=l(31283),j=l(77712),d=l(61556),v=l(29840);function y(r){const o=r?.origins??[void 0];return(i,p)=>{const s=function W(r,o,i){if("resource"===r?.type)return function S(r,o,i){const p=(0,x.Oe)(o,i);return{type:String,read:(s,u,c)=>{const a=(0,v.r)(s,u,c);return p.type===String?a:"function"==typeof p.type?new p.type({url:a}):void 0},write:{writer(s,u,c,a){if(!a||!a.resources)return"string"==typeof s?void(u[c]=(0,v.t)(s,a)):void(u[c]=s.write({},a));const m=function Z(r){return null==r?null:"string"==typeof r?r:r.url}(s),h=(0,v.t)(m,{...a,verifyItemRelativeUrls:a&&a.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},v.M.NO),O=p.type!==String&&(!(0,g.l)(this)||a&&a.origin&&this.originIdOf(i)>(0,E.M9)(a.origin)),U={object:this,propertyName:i,value:s,targetUrl:h,dest:u,targetPropertyName:c,context:a,params:r};a&&a.portalItem&&h&&!(0,C.YP)(h)?O?function T(r){const{context:o,targetUrl:i,params:p,value:s,dest:u,targetPropertyName:c}=r;if(!o.portalItem)return;const a=o.portalItem.resourceFromPath(i),m=M(s,i,o),h=(0,d.B)(m),O=(0,C.Ml)(a.path),U=p?.compress??!1;h===O?(o.resources&&L({...r,resource:a,content:m,compress:U,updates:o.resources.toUpdate}),u[c]=i):D(r)}(U):function _({context:r,targetUrl:o,dest:i,targetPropertyName:p}){r.portalItem&&r.resources&&(r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(o),compress:!1}),i[p]=o)}(U):a&&a.portalItem&&(null==h||null!=(0,v.i)(h)||(0,C.jc)(h)||O)?D(U):u[c]=h}}}}(r,o,i);switch(r?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:p,write:s}=v.a;return{read:p,write:s}}}}(r,i,p);for(const u of o){const c=(0,j.CJ)(i,u,p);for(const a in s)c[a]=s[a]}}}function D(r){const{targetUrl:o,params:i,value:p,context:s,dest:u,targetPropertyName:c}=r;if(!s.portalItem)return;const a=(0,v.p)(o),m=a?.filename??(0,R.D)(),h=i?.prefix??a?.prefix,O=M(p,o,s),U=(0,C.v_)(h,m),N=`${U}.${(0,d.B)(O)}`,B=s.portalItem.resourceFromPath(N);(0,C.jc)(o)&&s.resources&&s.resources.pendingOperations.push(function P(r){return I.apply(this,arguments)}(o).then(w=>{B.path=`${U}.${(0,d.B)(w)}`,u[c]=B.itemRelativeUrl}).catch(()=>{}));const K=i?.compress??!1;s.resources&&L({...r,resource:B,content:O,compress:K,updates:s.resources.toAdd}),u[c]=B.itemRelativeUrl}function L({object:r,propertyName:o,updates:i,resource:p,content:s,compress:u}){i.push({resource:p,content:s,compress:u,finish:c=>{!function z(r,o,i){"string"==typeof r[o]?r[o]=i.url:r[o].url=i.url}(r,o,c)}})}function M(r,o,i){return"string"==typeof r?{url:o}:new Blob([JSON.stringify(r.toJSON(i))],{type:"application/json"})}function I(){return(I=(0,f.Z)(function*(r){const o=(yield Promise.resolve().then(l.bind(l,84792))).default,{data:i}=yield o(r,{responseType:"blob"});return i})).apply(this,arguments)}},22558:(A,b,l)=>{function f(g){return g&&"getAtOrigin"in g&&"originOf"in g}l.d(b,{l:()=>f})},29457:(A,b,l)=>{l.r(b),l.d(b,{default:()=>p});var f=l(15861),g=l(17626),C=l(85840),R=l(61642),x=l(57574),E=l(46160),j=l(89726),d=l(62208),v=l(32917),y=l(77712),D=(l(90912),l(85931),l(76898)),T=l(55915),_=l(5548),L=l(60507);const M=E.Z.ofType(x.Z);let P=class extends C.Z{constructor(s){super(s),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles((0,v.YP)(()=>this._computeExtent(),s=>{((0,d.Wi)(s)||(0,d.Wi)(s.pending))&&this._set("extent",(0,d.pC)(s)?s.extent:null)},v.tX))}get targets(){return this._get("targets")||new M}set targets(s){this._set("targets",(0,j.Z)(s,this.targets,M))}get spatialReference(){return(0,d.pC)(this.observer)&&(0,d.pC)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,d.yw)(this.observer,s=>s.position)]}waitComputeExtent(){var s=this;return(0,f.Z)(function*(){const u=s._computeExtent();return(0,d.pC)(u)?(0,d.Wg)(u.pending):Promise.resolve()})()}_computeExtent(){const s=this.spatialReference;if((0,d.Wi)(this.observer)||(0,d.Wi)(this.observer.position)||(0,d.Wi)(s))return null;const u=h=>"absolute-height"===(0,L.VW)(h.position,h.elevationInfo),c=this.observer.position,a=(0,_.al)(c.x,c.y,c.z,c.x,c.y,c.z);for(const h of this.targets)if((0,d.pC)(h.position)){const O=(0,T.dz)(h.position,s);if((0,d.pC)(O.pending))return{pending:O.pending,extent:null};if((0,d.pC)(O.geometry)){const{x:U,y:N,z:B}=O.geometry;(0,_.pp)(a,[U,N,B])}}const m=(0,_.HH)(a,s);return u(this.observer)&&this.targets.every(u)||(m.zmin=void 0,m.zmax=void 0),{pending:null,extent:m}}clear(){this.observer=null,this.targets.removeAll()}};(0,g._)([(0,y.Cb)({type:["line-of-sight"]})],P.prototype,"type",void 0),(0,g._)([(0,y.Cb)({type:R.Z,json:{read:!0,write:!0}})],P.prototype,"observer",void 0),(0,g._)([(0,y.Cb)({cast:j.R,type:M,nonNullable:!0,json:{read:!0,write:!0}})],P.prototype,"targets",null),(0,g._)([(0,y.Cb)({value:null,readOnly:!0})],P.prototype,"extent",void 0),(0,g._)([(0,y.Cb)({readOnly:!0})],P.prototype,"spatialReference",null),(0,g._)([(0,y.Cb)({readOnly:!0})],P.prototype,"requiredPropertiesForEditing",null),P=(0,g._)([(0,D.j)("esri.analysis.LineOfSightAnalysis")],P);const I=P;var Z=l(99959),z=l(44917),r=l(49286);const o=E.Z.ofType(x.Z);let i=class extends((0,r.q)((0,Z.R)(z.Z))){constructor(s){super(s),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new I,this.opacity=1}initialize(){this.addHandles((0,v.YP)(()=>this.analysis,(s,u)=>{(0,d.pC)(u)&&u.parent===this&&(u.parent=null),(0,d.pC)(s)&&(s.parent=this)},v.tX))}load(){var s=this;return(0,f.Z)(function*(){return(0,d.pC)(s.analysis)&&s.addResolvingPromise(s.analysis.waitComputeExtent()),s})()}get observer(){return(0,d.yw)(this.analysis,s=>s.observer)}set observer(s){(0,d.yw)(this.analysis,u=>u.observer=s)}get targets(){return(0,d.pC)(this.analysis)?this.analysis.targets:new E.Z}set targets(s){(0,j.Z)(s,this.analysis?.targets)}get fullExtent(){return(0,d.pC)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,d.pC)(this.analysis)?(0,d.Wg)(this.analysis.spatialReference):null}releaseAnalysis(s){this.analysis===s&&(this.analysis=new I)}};(0,g._)([(0,y.Cb)({json:{read:!1},readOnly:!0})],i.prototype,"type",void 0),(0,g._)([(0,y.Cb)({type:["LineOfSightLayer"]})],i.prototype,"operationalLayerType",void 0),(0,g._)([(0,y.Cb)({type:R.Z,json:{read:!0,write:{ignoreOrigin:!0}}})],i.prototype,"observer",null),(0,g._)([(0,y.Cb)({type:o,json:{read:!0,write:{ignoreOrigin:!0}}})],i.prototype,"targets",null),(0,g._)([(0,y.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],i.prototype,"analysis",void 0),(0,g._)([(0,y.Cb)({readOnly:!0})],i.prototype,"fullExtent",null),(0,g._)([(0,y.Cb)({readOnly:!0})],i.prototype,"spatialReference",null),(0,g._)([(0,y.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],i.prototype,"opacity",void 0),(0,g._)([(0,y.Cb)({type:["show","hide"]})],i.prototype,"listMode",void 0),i=(0,g._)([(0,D.j)("esri.layers.LineOfSightLayer")],i);const p=i},61556:(A,b,l)=>{l.d(b,{B:()=>g});var f=l(21726);function g(v){return x[function C(v){return v instanceof Blob?v.type:function R(v){const y=(0,f.Ml)(v);return d[y]||E}(v.url)}(v)]||j}const x={},E="text/plain",j=x[E],d={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const v in d)x[d[v]]=v},60507:(A,b,l)=>{l.d(b,{Jn:()=>j,RL:()=>v,VW:()=>E,W_:()=>P,jG:()=>I,tR:()=>Z,tq:()=>L,vQ:()=>D,zx:()=>T});var f=l(62208),g=l(29505);function C(r){return r?I:Z}function E(r,o){return function R(r,o){return(0,f.Wi)(o)||!o.mode?C(r).mode:o.mode}(!!(0,f.pC)(r)&&r.hasZ,o)}function j(r,o){return function x(r,o){return(0,f.pC)(o)?o:C(r)}(!!(0,f.pC)(r)&&!!r.hasZ,o)}function v(r){const o=function W(r){return r.layer&&"elevationInfo"in r.layer?r.layer.elevationInfo:null}(r),i=E(r.geometry,o);return{mode:i,offset:(0,f.pC)(o)&&"on-the-ground"!==i?(0,f.Pt)(o.offset,0)*(0,g.Z7)((0,f.Pt)(o.unit,"meters")):0}}function D(r,o,i,p=null){return _(r,o.x,o.y,o.hasZ?o.z:0,o.spatialReference,i,p)}function T(r,o,i,p,s=null){return _(r,o[0],o[1],o.length>2?o[2]:0,i,p,s)}function _(r,o,i,p,s,u,c=null){if((0,f.Wi)(u))return;const a=(0,f.pC)(c)?c.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:m}=L(o,i,p,s,r,u);return function M(r,o,i,p,s,u,c,a){const m=(0,f.pC)(c)&&(0,f.pC)(c.offset)?c.offset:0;switch(a){case"absolute-height":return r-m;case"relative-to-ground":return r-((0,f.Pt)(u.elevationProvider.getElevation(o,i,p,s,"ground"),0)+m);case"relative-to-scene":return r-((0,f.Pt)(u.elevationProvider.getElevation(o,i,p,s,"scene"),0)+m)}}(m,o,i,p,s,r,c,a)}function L(r,o,i,p,s,u){const c=(0,f.pC)(u.offset)?u.offset:0;switch(u.mode){case"absolute-height":return{absoluteZ:i+c,elevation:0};case"on-the-ground":{const a=(0,f.Pt)(s.elevationProvider.getElevation(r,o,0,p,"ground"),0);return{absoluteZ:a,elevation:a}}case"relative-to-ground":{const a=(0,f.Pt)(s.elevationProvider.getElevation(r,o,i,p,"ground"),0);return{absoluteZ:i+a+c,elevation:a}}case"relative-to-scene":{const a=(0,f.Pt)(s.elevationProvider.getElevation(r,o,i,p,"scene"),0);return{absoluteZ:i+a+c,elevation:a}}}}function P(r,o){if((0,f.Wi)(o))return!1;const{mode:i}=o;return(0,f.pC)(i)&&("scene"===r&&"relative-to-scene"===i||"ground"===r&&"absolute-height"!==i)}const I={mode:"absolute-height",offset:0},Z={mode:"on-the-ground",offset:null}}}]);