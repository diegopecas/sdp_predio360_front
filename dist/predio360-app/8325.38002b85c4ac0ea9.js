"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[8325,5611],{19702:(D,d,s)=>{s.d(d,{A:()=>p});var i=s(15861),r=s(17626),u=s(54024),y=s(10699),E=s(32917),h=s(77712),P=(s(8314),s(63290),s(4619),s(76898)),c=s(36947);const p=t=>{let l=class extends t{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),(0,c.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var e=this;return(0,i.Z)(function*(){const a=new AbortController,_=a.signal;e.addHandles((0,u.kB)(()=>a.abort())),yield(0,E.N1)(()=>e.view.defaultsFromMap?.heightModelInfoReady,_),(0,y.k_)(_);const o=(0,c.Wt)(e.layer,e.view.heightModelInfo,e.supportsHeightUnitConversion);if(o)throw o})()}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e?.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),a=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return a&&a.minScale&&a.maxScale&&a.minScale<a.maxScale&&(e.outsideScaleRange=!0),e}};return(0,r._)([(0,h.Cb)()],l.prototype,"view",void 0),(0,r._)([(0,h.Cb)()],l.prototype,"slicePlaneEnabled",void 0),l=(0,r._)([(0,P.j)("esri.views.3d.layers.LayerView3D")],l),l}},68325:(D,d,s)=>{s.r(d),s.d(d,{default:()=>l});var i=s(15861),r=s(17626),u=s(59213),y=s(26584),E=s(62208),h=s(10699),M=s(32917),n=s(77712),O=s(76898),P=s(19702),c=s(45611);const p="analysis-view-handles";let t=class extends((0,P.A)(c.Z)){constructor(e){super(e),this.type="line-of-sight-3d",this._analysisModule=null}initialize(){this.addHandles((0,M.YP)(()=>this.layer.analysis,e=>{this._destroyAnalysisView(),null!=e&&this._createAnalysisView(e)},M.tX),p)}destroy(){this.removeHandles(p),this._destroyAnalysisView()}whenAnalysisView(){var e=this;return(0,i.Z)(function*(){if(null!=e.analysisView)return e.analysisView;if(null!=e._createAnalysisViewTask)return e._createAnalysisViewTask.promise;throw new y.Z("layerview:no-analysisview-for-analysis","The analysis has not been set on the LineOfSightLayer of this layer view")})()}isUpdating(){return null!=this._createAnalysisViewTask||null!=this.analysisView&&this.analysisView.updating}_createAnalysisView(e){var a=this;const _=(0,u.vr)(function(){var o=(0,i.Z)(function*(v){return a.analysisView=yield a._createAnalysisViewPromise(e,v),a._createAnalysisViewTask===_&&(a._createAnalysisViewTask=null),a.analysisView});return function(v){return o.apply(this,arguments)}}());this._createAnalysisViewTask=_}_destroyAnalysisView(){this.analysisView=(0,E.SC)(this.analysisView),this._createAnalysisViewTask=(0,E.IM)(this._createAnalysisViewTask)}_createAnalysisViewPromise(e,a){var _=this;return(0,i.Z)(function*(){let o=_._analysisModule;if(null==o){const g=yield _._loadAnalysisModule();_._analysisModule=g,o=g}const v=new o.default({analysis:e,view:_.view,parent:_});if(yield v.when(),(0,h.Hc)(a))throw v.destroy(),new y.Z("layerview:no-analysisview-for-analysis","The analysis has not been added to the LineOfSightLayer of this layer view",{analysis:e});return v})()}_loadAnalysisModule(){return Promise.all([s.e(5881),s.e(3792),s.e(8592),s.e(5602)]).then(s.bind(s,67322))}};(0,r._)([(0,n.Cb)()],t.prototype,"type",void 0),(0,r._)([(0,n.Cb)()],t.prototype,"layer",void 0),(0,r._)([(0,n.Cb)()],t.prototype,"analysisView",void 0),(0,r._)([(0,n.Cb)()],t.prototype,"_createAnalysisViewTask",void 0),t=(0,r._)([(0,O.j)("esri.views.3d.layers.LineOfSightLayerView3D")],t);const l=t},45611:(D,d,s)=>{s.d(d,{Z:()=>l});var i=s(17626),r=s(83761),u=s(61885),y=s(61996),E=s(63290),h=s(62208),M=s(60330),n=s(77712),c=(s(8314),s(4619),s(76898)),p=s(11426);let t=class extends((0,y.IG)((0,M.v)(u.Z.EventedMixin(r.Z)))){constructor(e){super(e),this._updatingHandles=new p.R,this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){const a=this.layer&&this.layer.id||"no id",_=this.layer?.title||"no title";E.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${_}', id: '${a}')`,e)}})}destroy(){this._updatingHandles=(0,h.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{};return this.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,i._)([(0,n.Cb)()],t.prototype,"fullOpacity",null),(0,i._)([(0,n.Cb)()],t.prototype,"layer",void 0),(0,i._)([(0,n.Cb)()],t.prototype,"parent",void 0),(0,i._)([(0,n.Cb)({readOnly:!0})],t.prototype,"suspended",null),(0,i._)([(0,n.Cb)({readOnly:!0})],t.prototype,"suspendInfo",null),(0,i._)([(0,n.Cb)({readOnly:!0})],t.prototype,"legendEnabled",null),(0,i._)([(0,n.Cb)({type:Boolean,readOnly:!0})],t.prototype,"updating",null),(0,i._)([(0,n.Cb)({readOnly:!0})],t.prototype,"updatingProgress",null),(0,i._)([(0,n.Cb)()],t.prototype,"visible",null),(0,i._)([(0,n.Cb)()],t.prototype,"view",void 0),t=(0,i._)([(0,c.j)("esri.views.layers.LayerView")],t);const l=t}}]);