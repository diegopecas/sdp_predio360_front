"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[8592],{85840:(de,oe,n)=>{n.d(oe,{Z:()=>w});var D=n(17626),B=n(14517),V=n(79608),X=n(61996),$=n(86810),k=n(62208),z=n(77712),T=(n(90912),n(85931),n(76898));let v=0,F=class extends((0,$.eC)((0,V.J)((0,X.IG)(B.Z)))){constructor(Z){super(Z),this.id=`${Date.now().toString(16)}-analysis-${v++}`,this.title=null}get parent(){return this._get("parent")}set parent(Z){const M=this.parent;if((0,k.pC)(M))switch(M.type){case"line-of-sight":case"dimension":M.releaseAnalysis(this);break;case"2d":case"3d":M.analyses.includes(this)&&M.analyses.remove(this)}this._set("parent",Z)}get isEditable(){return this.requiredPropertiesForEditing.every(k.pC)}};(0,D._)([(0,z.Cb)({type:String,constructOnly:!0,clonable:!1})],F.prototype,"id",void 0),(0,D._)([(0,z.Cb)({type:String})],F.prototype,"title",void 0),(0,D._)([(0,z.Cb)({constructOnly:!0})],F.prototype,"type",void 0),(0,D._)([(0,z.Cb)({clonable:!1,value:null})],F.prototype,"parent",null),(0,D._)([(0,z.Cb)({readOnly:!0})],F.prototype,"isEditable",null),(0,D._)([(0,z.Cb)({readOnly:!0})],F.prototype,"requiredPropertiesForEditing",void 0),F=(0,D._)([(0,T.j)("esri.analysis.Analysis")],F);const w=F},69186:(de,oe,n)=>{n.d(oe,{Z:()=>Z});var D=n(17626),V=(n(29132),n(97662)),X=n(79608),$=n(23719),k=n(86810),z=n(77712),G=n(66656),T=(n(85931),n(76898)),v=n(90912),F=n(72642);let w=class extends((0,k.eC)(X.j)){constructor(M){super(M),this.type="length",this.startPoint=null,this.endPoint=null,this.measureType=V.n.Direct,this.offset=0,this.orientation=0}};(0,D._)([(0,z.Cb)({type:["length"],json:{write:{isRequired:!0}}})],w.prototype,"type",void 0),(0,D._)([(0,z.Cb)({type:F.Z,json:{write:!0}})],w.prototype,"startPoint",void 0),(0,D._)([(0,z.Cb)({type:F.Z,json:{write:!0}})],w.prototype,"endPoint",void 0),(0,D._)([(0,z.Cb)({type:V.V,nonNullable:!0,json:{write:{isRequired:!0}}})],w.prototype,"measureType",void 0),(0,D._)([(0,z.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}})],w.prototype,"offset",void 0),(0,D._)([(0,z.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,G.p)(M=>$.BV.normalize((0,v.q9)(M),0,!0))],w.prototype,"orientation",void 0),w=(0,D._)([(0,T.j)("esri.analysis.LengthDimension")],w);const Z=w},61642:(de,oe,n)=>{n.d(oe,{Z:()=>M});var D=n(17626),B=n(8425),V=n(14517),X=n(79608),$=n(86810),k=n(62208),z=n(77712),T=(n(90912),n(85931),n(76898)),v=n(128),F=n(72642),w=n(82706);let Z=class extends((0,$.eC)((0,X.J)(V.Z))){constructor(I){super(I),this.position=null,this.elevationInfo=null,this.feature=null}equals(I){return(0,k._W)(this.position,I.position)&&(0,k._W)(this.elevationInfo,I.elevationInfo)&&(0,B.kk)(this.feature,I.feature)}};(0,D._)([(0,z.Cb)({type:F.Z}),(0,v.B)()],Z.prototype,"position",void 0),(0,D._)([(0,z.Cb)({type:w.Z}),(0,v.B)()],Z.prototype,"elevationInfo",void 0),(0,D._)([(0,z.Cb)(B.rX)],Z.prototype,"feature",void 0),Z=(0,D._)([(0,T.j)("esri.analysis.LineOfSightAnalysisObserver")],Z);const M=Z},57574:(de,oe,n)=>{n.d(oe,{Z:()=>Z});var D=n(17626),B=n(8425),V=n(79608),X=n(86810),$=n(62208),k=n(77712),ee=(n(90912),n(85931),n(76898)),T=n(128),v=n(72642),F=n(82706);let w=class extends((0,X.eC)(V.j)){constructor(M){super(M),this.position=null,this.elevationInfo=null,this.feature=null}equals(M){return(0,$._W)(this.position,M.position)&&(0,$._W)(this.elevationInfo,M.elevationInfo)&&(0,B.kk)(this.feature,M.feature)}};(0,D._)([(0,k.Cb)({type:v.Z}),(0,T.B)()],w.prototype,"position",void 0),(0,D._)([(0,k.Cb)({type:F.Z}),(0,T.B)()],w.prototype,"elevationInfo",void 0),(0,D._)([(0,k.Cb)(B.rX)],w.prototype,"feature",void 0),w=(0,D._)([(0,ee.j)("esri.analysis.LineOfSightAnalysisTarget")],w);const Z=w},97662:(de,oe,n)=>{var D,V;n.d(oe,{V:()=>B,n:()=>D}),(V=D||(D={})).Horizontal="horizontal",V.Vertical="vertical",V.Direct="direct";const B=[D.Horizontal,D.Vertical,D.Direct]},8425:(de,oe,n)=>{n.d(oe,{kk:()=>B,pD:()=>V,rX:()=>X});var D=n(62208);function B(z,G){return V(z)===V(G)}function V(z){if((0,D.Wi)(z))return null;let ee=null;return ee=null!=z.objectId?z.objectId:null!=z.layer&&"objectIdField"in z.layer&&null!=z.layer.objectIdField&&null!=z.attributes?z.attributes[z.layer.objectIdField]:z.uid,null==ee?null:`o-${null!=z.layer?z.layer.id:""}-${ee}`}const X={json:{write:{writer:function $(z,G){(0,D.Wi)(z)||null==z.layer?.objectIdField||null==z.attributes||(G.feature={layerId:z.layer.id,objectId:z.attributes[z.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function k(z){if(null!=z.layerId&&null!=z.objectId)return{uid:null,layer:{id:z.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:z.objectId}}}}}}}},91365:(de,oe,n)=>{n.d(oe,{Qn:()=>G,iG:()=>z});var X,D=n(25919),B=n(21837);class V{}V.instance=new B.vF("Etc/UTC"),(X||(X={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const $={[X.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};class k extends Error{constructor(T,v){super((0,D.Hy)($[T],v)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,k)}}class z{constructor(T){this._date=T,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(T=0,v=1,F=1,w=0,Z=0,M=0,I=0,_){if(isNaN(T)||isNaN(v)||isNaN(F)||isNaN(w)||isNaN(Z)||isNaN(M)||isNaN(I))return null;let g=0;const P=B.ou.local(T,v).daysInMonth;F<1&&(g=F-1,F=1),F>P&&(g=F-P,F=P);let L=0;v>12?(L=v-12,v=12):v<1&&(L=v-1,v=1);let S=0;Z>59?(S=Z-59,Z=59):Z<0&&(S=Z,Z=0);let h=0;M>59?(h=M-59,M=59):M<0&&(h=M,M=0);let K=0;I>999?(K=I-999,I=999):I<0&&(K=I,I=0);let R=B.ou.fromObject({day:F,year:T,month:v,hour:w,minute:Z,second:M,millisecond:I},{zone:G(_)});return 0!==L&&(R=R.plus({months:L})),0!==g&&(R=R.plus({days:g})),0!==S&&(R=R.plus({minutes:S})),0!==h&&(R=R.plus({seconds:h})),0!==K&&(R=R.plus({milliseconds:K})),new z(R)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(T,v){const F=G(v);return T.isUnknownTimeZone||F===V.instance?z.fromParts(T.year,T.monthJS+1,T.day,T.hour,T.minute,T.second,T.millisecond,F):new z(T._date.setZone(v))}static dateJSToArcadeDate(T){return new z(B.ou.fromJSDate(T,{zone:"system"}))}static dateJSAndZoneToArcadeDate(T,v="system"){return new z(B.ou.fromJSDate(T,{zone:v}))}static unknownEpochToArcadeDate(T){return new z(B.ou.fromMillis(T,{zone:V.instance}))}static unknownDateJSToArcadeDate(T){return new z(B.ou.fromMillis(T.getTime(),{zone:V.instance}))}static epochToArcadeDate(T,v="system"){return new z(B.ou.fromMillis(T,{zone:v}))}static dateTimeToArcadeDate(T){return new z(T)}changeTimeZone(T){const v=G(T);return z.dateTimeToArcadeDate(this._date.setZone(v))}static dateTimeAndZoneToArcadeDate(T,v){const F=G(v);return T.zone===V.instance||F===V.instance?z.fromParts(T.year,T.month,T.day,T.hour,T.minute,T.second,T.millisecond,F):new z(T.setZone(F))}static nowToArcadeDate(T){return new z(B.ou.fromJSDate(new Date,{zone:T}))}static nowUTCToArcadeDate(){return new z(B.ou.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===z.systemTimeZoneCanonicalName}equals(T){return this.isSystem&&T.isSystem?this.toNumber()===T.toNumber():this.isUnknownTimeZone===T.isUnknownTimeZone&&this._date.equals(T._date)}get isUnknownTimeZone(){return this._date.zone===V.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let T=this._date.weekday;return T>6&&(T=0),T}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const T=this.zone;return"fixed"===T.type?0===T.fixed?"utc":T.formatOffset(0,"short"):T.name}stringify(){return JSON.stringify(this.toJSDate())}plus(T){return new z(this._date.plus(T))}diff(T,v="milliseconds"){return this._date.diff(T._date,v)[v]}toISOString(T){return this._date.toISO(T?{suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}:{includeOffset:!this.isUnknownTimeZone})}toFormat(T,v){return this._date.toFormat(T,v)}toJSDate(){return this._date.toJSDate()}toSQLString(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new z(this._date.toUTC())}toLocal(){return new z(this._date.toLocal())}toString(){return this.toISOString(!0)}}function G(ee){if(ee instanceof B.ld)return ee;if("system"===ee.toLowerCase())return"system";if("utc"===ee.toLowerCase())return"utc";if("unknown"===ee.toLowerCase())return V.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(ee)){const v=B.Qf.parseSpecifier("UTC"+(ee.startsWith("+")||ee.startsWith("-")?"":"+")+ee);if(v)return v}const T=B.vF.create(ee);if(!T.isValid)throw new k(X.TimeZoneNotRecognised);return T}},29050:(de,oe,n)=>{n.d(oe,{nu:()=>ee}),n(91365);var B=n(60466),$=(n(41039),n(21837),n(60194));class ee{constructor(){this.dateTimeReferenceMetaData=null,this._fieldTimeZoneIndex={},this._fieldIndex=null,this._ianaPreferred=null,this._ianaTimeInfo=null,this._ianaEditFields=null,this._ianaLayerDateFields=null}static create(v,F){const w=new ee;return w.dateTimeReferenceMetaData=F,w._fieldIndex=v instanceof B.Z?v:new B.Z(v),w}static createFromLayer(v){if(!v)return null;if(!v.fieldsIndex)return!v.declaredClass&&v.fields?ee.create(v.fields,v):null;const F=new ee;return F._fieldIndex=v.fieldsIndex,F.dateTimeReferenceMetaData={timeInfo:v?.timeInfo?.toJSON()??null,editFieldsInfo:v?.editFieldsInfo?.toJSON()??null,dateFieldsTimeReference:v?.dateFieldsTimeReference?.toJSON()??null,preferredTimeReference:v?.preferredTimeReference?.toJSON()??null,datesInUnknownTimezone:!0===v?.datesInUnknownTimezone},F}fieldTimeZone(v){const F=this._fieldIndex?.get(v);if(!F||"date"!==F.type&&"esriFieldTypeDate"!==F.type)return null;const w=this._fieldTimeZoneIndex[F.name];if(void 0!==w)return w;const Z=[{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.creationDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.editDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.startTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.endTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone}];for(const I of Z)if(I.field===F.name){const _=this.convertToIANA(I.timeReference,I.isunknown);return this._fieldTimeZoneIndex[F.name]=_,_}const M=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,this.dateTimeReferenceMetaData?.datesInUnknownTimezone);return this._fieldTimeZoneIndex[F.name]=M,M}convertToIANA(v,F){return F?"unknown":function G(T){return T?.timeZoneIANA?T?.timeZoneIANA:T?.timeZone?(0,$.G)(T,""):""}(v)}get layerPreferredTimeZone(){if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";const v=this.dateTimeReferenceMetaData?.preferredTimeReference;return this._ianaPreferred=this.convertToIANA(v,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaPreferred}get layerTimeInfoTimeZone(){if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";const v=this.dateTimeReferenceMetaData?.timeInfo?.timeReference;return this._ianaTimeInfo=this.convertToIANA(v,!1),this._ianaTimeInfo}get layerEditFieldsTimeZone(){if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";const v=this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference;return this._ianaEditFields=this.convertToIANA(v,this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaEditFields}get layerDateFieldsTimeZone(){if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;this._ianaLayerDateFields="";const v=this.dateTimeReferenceMetaData?.dateFieldsTimeReference;return this._ianaLayerDateFields=this.convertToIANA(v,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaLayerDateFields}}},57577:(de,oe,n)=>{function D(B){throw new Error('Could not dynamically require "'+B+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}n.d(oe,{c:()=>D})},7006:(de,oe,n)=>{n.d(oe,{A:()=>Y,B:()=>J,C:()=>se,D:()=>H,E:()=>W,F:()=>U,G:()=>re,H:()=>Q,I:()=>q,J:()=>te,K:()=>ne,L:()=>ce,M:()=>_e,N:()=>ue,a:()=>$,b:()=>k,c:()=>X,d:()=>z,e:()=>V,f:()=>G,g:()=>he,h:()=>ee,i:()=>T,j:()=>w,k:()=>I,l:()=>g,m:()=>P,n:()=>L,o:()=>Z,p:()=>S,q:()=>K,r:()=>M,s:()=>_,t:()=>v,u:()=>h,v:()=>R,w:()=>F,x:()=>A,y:()=>C,z:()=>N});var D=n(4918),B=n(15994);function V(ie){return D.G.extendedSpatialReferenceInfo(ie)}function X(ie,le,ae){return D.G.clip(B.N,ie,le,ae)}function $(ie,le,ae){return D.G.cut(B.N,ie,le,ae)}function k(ie,le,ae){return D.G.contains(B.N,ie,le,ae)}function z(ie,le,ae){return D.G.crosses(B.N,ie,le,ae)}function G(ie,le,ae,pe){return D.G.distance(B.N,ie,le,ae,pe)}function ee(ie,le,ae){return D.G.equals(B.N,ie,le,ae)}function T(ie,le,ae){return D.G.intersects(B.N,ie,le,ae)}function v(ie,le,ae){return D.G.touches(B.N,ie,le,ae)}function F(ie,le,ae){return D.G.within(B.N,ie,le,ae)}function w(ie,le,ae){return D.G.disjoint(B.N,ie,le,ae)}function Z(ie,le,ae){return D.G.overlaps(B.N,ie,le,ae)}function M(ie,le,ae,pe){return D.G.relate(B.N,ie,le,ae,pe)}function I(ie,le){return D.G.isSimple(B.N,ie,le)}function _(ie,le){return D.G.simplify(B.N,ie,le)}function g(ie,le,ae=!1){return D.G.convexHull(B.N,ie,le,ae)}function P(ie,le,ae){return D.G.difference(B.N,ie,le,ae)}function L(ie,le,ae){return D.G.symmetricDifference(B.N,ie,le,ae)}function S(ie,le,ae){return D.G.intersect(B.N,ie,le,ae)}function h(ie,le,ae=null){return D.G.union(B.N,ie,le,ae)}function K(ie,le,ae,pe,ge,ye,Ce){return D.G.offset(B.N,ie,le,ae,pe,ge,ye,Ce)}function R(ie,le,ae,pe,ge=!1){return D.G.buffer(B.N,ie,le,ae,pe,ge)}function A(ie,le,ae,pe,ge,ye,Ce){return D.G.geodesicBuffer(B.N,ie,le,ae,pe,ge,ye,Ce)}function C(ie,le,ae,pe=!0){return D.G.nearestCoordinate(B.N,ie,le,ae,pe)}function N(ie,le,ae){return D.G.nearestVertex(B.N,ie,le,ae)}function Y(ie,le,ae,pe,ge){return D.G.nearestVertices(B.N,ie,le,ae,pe,ge)}function J(ie,le,ae,pe){if(null==le||null==pe)throw new Error("Illegal Argument Exception");const ge=D.G.rotate(le,ae,pe);return ge.spatialReference=ie,ge}function se(ie,le,ae){if(null==le||null==ae)throw new Error("Illegal Argument Exception");const pe=D.G.flipHorizontal(le,ae);return pe.spatialReference=ie,pe}function H(ie,le,ae){if(null==le||null==ae)throw new Error("Illegal Argument Exception");const pe=D.G.flipVertical(le,ae);return pe.spatialReference=ie,pe}function W(ie,le,ae,pe,ge){return D.G.generalize(B.N,ie,le,ae,pe,ge)}function U(ie,le,ae,pe){return D.G.densify(B.N,ie,le,ae,pe)}function re(ie,le,ae,pe,ge=0){return D.G.geodesicDensify(B.N,ie,le,ae,pe,ge)}function Q(ie,le,ae){return D.G.planarArea(B.N,ie,le,ae)}function q(ie,le,ae){return D.G.planarLength(B.N,ie,le,ae)}function te(ie,le,ae,pe){return D.G.geodesicArea(B.N,ie,le,ae,pe)}function ne(ie,le,ae,pe){return D.G.geodesicLength(B.N,ie,le,ae,pe)}function ce(ie,le,ae){return null==le||null==ae?[]:D.G.intersectLinesToPoints(B.N,ie,le,ae)}function _e(ie,le){D.G.changeDefaultSpatialReferenceTolerance(ie,le)}function ue(ie){D.G.clearDefaultSpatialReferenceTolerance(ie)}const he=Object.freeze(Object.defineProperty({__proto__:null,buffer:R,changeDefaultSpatialReferenceTolerance:_e,clearDefaultSpatialReferenceTolerance:ue,clip:X,contains:k,convexHull:g,crosses:z,cut:$,densify:U,difference:P,disjoint:w,distance:G,equals:ee,extendedSpatialReferenceInfo:V,flipHorizontal:se,flipVertical:H,generalize:W,geodesicArea:te,geodesicBuffer:A,geodesicDensify:re,geodesicLength:ne,intersect:S,intersectLinesToPoints:ce,intersects:T,isSimple:I,nearestCoordinate:C,nearestVertex:N,nearestVertices:Y,offset:K,overlaps:Z,planarArea:Q,planarLength:q,relate:M,rotate:J,simplify:_,symmetricDifference:L,touches:v,union:h,within:F},Symbol.toStringTag,{value:"Module"}))},75327:(de,oe,n)=>{n.d(oe,{Qc:()=>v,WU:()=>$,lt:()=>T});var D=n(77275),B=n(56683);const V={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function X(I=(0,B.Kd)()){let _=(I=I.toLowerCase())in V;if(!_){const S=I.split("-");S.length>1&&S[0]in V&&(I=S[0],_=!0),_||(I="en")}const[g,P,L="#,##0.###"]=V[I];return{decimal:g,group:P,pattern:L}}function $(I,_){const g=X((_={..._}).locale);_.customs=g;const P=_.pattern||g.pattern;return isNaN(I)||Math.abs(I)===1/0?null:function z(I,_,g){const P=(g=g||{}).customs.group,L=g.customs.decimal,S=_.split(";"),h=S[0];if((_=S[I<0?1:0]||"-"+h).includes("%"))I*=100;else if(_.includes("\u2030"))I*=1e3;else{if(_.includes("\xa4"))throw new Error("currency notation not supported");if(_.includes("E"))throw new Error("exponential notation not supported")}const K=k,R=h.match(K);if(!R)throw new Error("unable to find a number expression in pattern: "+_);return!1===g.fractional&&(g.places=0),_.replace(K,function G(I,_,g){!0===(g=g||{}).places&&(g.places=0),g.places===1/0&&(g.places=6);const P=_.split("."),L="string"==typeof g.places&&g.places.indexOf(",");let S=g.places;L?S=g.places.substring(L+1):S>=0||(S=(P[1]||[]).length),g.round<0||(I=Number(I.toFixed(Number(S))));const h=String(Math.abs(I)).split("."),K=h[1]||"";if(P[1]||g.places){L&&(g.places=g.places.substring(0,L));const se=void 0!==g.places?g.places:P[1]&&P[1].lastIndexOf("0")+1;se>K.length&&(h[1]=K.padEnd(Number(se),"0")),S<K.length&&(h[1]=K.substr(0,Number(S)))}else h[1]&&h.pop();const R=P[0].replace(",","");let A=R.indexOf("0");-1!==A&&(A=R.length-A,A>h[0].length&&(h[0]=h[0].padStart(A,"0")),R.includes("#")||(h[0]=h[0].substr(h[0].length-A)));let C,N,Y=P[0].lastIndexOf(",");if(-1!==Y){C=P[0].length-Y-1;const se=P[0].substr(0,Y);Y=se.lastIndexOf(","),-1!==Y&&(N=se.length-Y-1)}const J=[];for(let se=h[0];se;){const H=se.length-C;J.push(H>0?se.substr(H):se),se=H>0?se.slice(0,H):"",N&&(C=N,N=void 0)}return h[0]=J.reverse().join(g.group||","),h.join(g.decimal||".")}(I,R[0],{decimal:L,group:P,places:g.places,round:g.round}))}(I,P,_)}const k=/[#0,]*[#0](?:\.0*#*)?/;function T(I){const _=X((I=I||{}).locale),g=I.pattern||_.pattern,P=_.group,L=_.decimal;let S=1;if(g.includes("%"))S/=100;else if(g.includes("\u2030"))S/=1e3;else if(g.includes("\xa4"))throw new Error("currency notation not supported");const h=g.split(";");return 1===h.length&&h.push("-"+h[0]),{regexp:Z(h,R=>(R="(?:"+(0,D.Qs)(R,".")+")").replace(k,A=>{const C={signed:!1,separator:I.strict?P:[P,""],fractional:I.fractional,decimal:L,exponent:!1},N=A.split(".");let Y=I.places;1===N.length&&1!==S&&(N[1]="###"),1===N.length||0===Y?C.fractional=!1:(void 0===Y&&(Y=I.pattern?N[1].lastIndexOf("0")+1:1/0),Y&&null==I.fractional&&(C.fractional=!0),!I.places&&Y<N[1].length&&(Y+=","+N[1].length),C.places=Y);const J=N[0].split(",");return J.length>1&&(C.groupSize=J.pop().length,J.length>1&&(C.groupSize2=J.pop().length)),"("+function F(I){"places"in(I=I||{})||(I.places=1/0),"string"!=typeof I.decimal&&(I.decimal="."),"fractional"in I&&!/^0/.test(String(I.places))||(I.fractional=[!0,!1]),"exponent"in I||(I.exponent=[!0,!1]),"eSigned"in I||(I.eSigned=[!0,!1]);const _=w(I),g=Z(I.fractional,L=>{let S="";return L&&0!==I.places&&(S="\\"+I.decimal,I.places===1/0?S="(?:"+S+"\\d+)?":S+="\\d{"+I.places+"}"),S},!0);let P=_+g;return g&&(P="(?:(?:"+P+")|(?:"+g+"))"),P+Z(I.exponent,L=>L?"([eE]"+w({signed:I.eSigned})+")":"")}(C)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:P,decimal:L,factor:S}}function v(I,_){const g=T(_),P=new RegExp("^"+g.regexp+"$").exec(I);if(!P)return NaN;let L=P[1];if(!P[1]){if(!P[2])return NaN;L=P[2],g.factor*=-1}return L=L.replace(new RegExp("["+g.group+"\\s\\xa0]","g"),"").replace(g.decimal,"."),Number(L)*g.factor}function w(I){return"signed"in(I=I||{})||(I.signed=[!0,!1]),"separator"in I?"groupSize"in I||(I.groupSize=3):I.separator="",Z(I.signed,_=>_?"[-+]":"",!0)+Z(I.separator,_=>{if(!_)return"(?:\\d+)";" "===(_=(0,D.Qs)(_))?_="\\s":"\xa0"===_&&(_="\\s\\xa0");const g=I.groupSize,P=I.groupSize2;if(P){const L="(?:0|[1-9]\\d{0,"+(P-1)+"}(?:["+_+"]\\d{"+P+"})*["+_+"]\\d{"+g+"})";return g-P>0?"(?:"+L+"|(?:0|[1-9]\\d{0,"+(g-1)+"}))":L}return"(?:0|[1-9]\\d{0,"+(g-1)+"}(?:["+_+"]\\d{"+g+"})*)"},!0)}const Z=(I,_,g)=>{if(!(I instanceof Array))return _(I);const P=[];for(let L=0;L<I.length;L++)P.push(_(I[L]));return M(P.join("|"),Boolean(g))},M=(I,_)=>"("+(_?"?:":"")+I+")"},32825:(de,oe,n)=>{n.r(oe),n.d(oe,{buffer:()=>V.v,changeDefaultSpatialReferenceTolerance:()=>V.M,clearDefaultSpatialReferenceTolerance:()=>V.N,clip:()=>V.c,contains:()=>V.b,convexHull:()=>V.l,crosses:()=>V.d,cut:()=>V.a,densify:()=>V.F,difference:()=>V.m,disjoint:()=>V.j,distance:()=>V.f,equals:()=>V.h,extendedSpatialReferenceInfo:()=>V.e,flipHorizontal:()=>V.C,flipVertical:()=>V.D,generalize:()=>V.E,geodesicArea:()=>V.J,geodesicBuffer:()=>V.x,geodesicDensify:()=>V.G,geodesicLength:()=>V.K,intersect:()=>V.p,intersectLinesToPoints:()=>V.L,intersects:()=>V.i,isSimple:()=>V.k,nearestCoordinate:()=>V.y,nearestVertex:()=>V.z,nearestVertices:()=>V.A,offset:()=>V.q,overlaps:()=>V.o,planarArea:()=>V.H,planarLength:()=>V.I,relate:()=>V.r,rotate:()=>V.B,simplify:()=>V.s,symmetricDifference:()=>V.n,touches:()=>V.t,union:()=>V.u,within:()=>V.w}),n(4918),n(15994);var V=n(7006)},58774:(de,oe,n)=>{n.d(oe,{b:()=>v,j:()=>z});var D=n(15861),B=n(54346),V=n(8314);const X=128e3;let $=null,k=null;function z(){return G.apply(this,arguments)}function G(){return G=(0,D.Z)(function*(){return $||($=function ee(){return T.apply(this,arguments)}()),$}),G.apply(this,arguments)}function T(){return(T=(0,D.Z)(function*(){k=yield((0,V.Z)("esri-csp-restrictions")?yield n.e(71).then(n.bind(n,10071)).then(w=>w.l):yield n.e(9507).then(n.bind(n,99507)).then(w=>w.l)).load({locateFile:w=>(0,B.V)(`esri/core/libs/libtess/${w}`)})})).apply(this,arguments)}function v(F,w){const Z=Math.max(F.length,X);return k.triangulate(F,w,Z)}},99746:(de,oe,n)=>{n.d(oe,{Z:()=>R});var S,D=n(17626),B=n(86810),V=n(62208),X=n(77712),z=(n(90912),n(85931),n(76898)),G=n(28347),ee=n(43703),T=n(48977),v=n(78451),F=n(84161),w=n(28093),Z=n(72642),M=n(55915),I=n(81863),_=n(89586),g=n(60479),P=n(79800),L=n(9554);let h=S=class extends B.wq{constructor(A){super(A),this.origin=(0,w.c)(),this.translation=(0,w.c)(),this.rotation=(0,_.Ue)(),this.scale=(0,w.f)(1,1,1),this.geographic=!0}get localMatrix(){const A=(0,ee.c)();return(0,T.s)(K,(0,_.ZZ)(this.rotation),(0,_.WH)(this.rotation)),(0,G.g)(A,K,this.translation,this.scale),A}get localMatrixInverse(){return(0,G.a)((0,ee.c)(),this.localMatrix)}applyLocal(A,C){return(0,F.m)(C,A,this.localMatrix)}applyLocalInverse(A,C){return(0,F.m)(C,A,this.localMatrixInverse)}project(A,C){const N=new Float64Array(A.length),Y=g.fP.fromTypedArray(N),J=g.fP.fromTypedArray(A);if(this.geographic){const W=(0,I.rS)(C),U=(0,ee.c)();return(0,M.Bm)(C,this.origin,U,W),(0,G.m)(U,U,this.localMatrix),(0,P.t)(Y,J,U),(0,M.CM)(N,W,0,N,C,0,N.length/3),N}const{localMatrix:se,origin:H}=this;(0,G.h)(se,ee.I)?(0,L.c)(Y,J):(0,P.t)(Y,J,se);for(let W=0;W<N.length;W+=3)N[W+0]+=H[0],N[W+1]+=H[1],N[W+2]+=H[2];return N}getOriginPoint(A){const[C,N,Y]=this.origin;return new Z.Z({x:C,y:N,z:Y,spatialReference:A})}equals(A){return(0,V.pC)(A)&&this.geographic===A.geographic&&(0,F.k)(this.origin,A.origin)&&(0,G.j)(this.localMatrix,A.localMatrix)}clone(){const A={origin:(0,w.a)(this.origin),translation:(0,w.a)(this.translation),rotation:(0,_.Ue)(this.rotation),scale:(0,w.a)(this.scale),geographic:this.geographic};return new S(A)}};(0,D._)([(0,X.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"origin",void 0),(0,D._)([(0,X.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"translation",void 0),(0,D._)([(0,X.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"rotation",void 0),(0,D._)([(0,X.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"scale",void 0),(0,D._)([(0,X.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],h.prototype,"geographic",void 0),(0,D._)([(0,X.Cb)()],h.prototype,"localMatrix",null),(0,D._)([(0,X.Cb)()],h.prototype,"localMatrixInverse",null),h=S=(0,D._)([(0,z.j)("esri.geometry.support.MeshTransform")],h);const K=(0,v.a)(),R=h},92545:(de,oe,n)=>{function D(B,V){return B.isGeographic||B.isWebMercator&&(V?.geographic??!0)}n.d(oe,{h:()=>D})},60853:(de,oe,n)=>{n.d(oe,{FF:()=>_,I5:()=>M,Yq:()=>g,iv:()=>Z,w1:()=>I});var D=n(62208),B=n(16730),V=n(550),X=n(28347),$=n(43703),k=n(30217),z=n(55915),G=n(81863),ee=n(99746),T=n(60479),v=n(79800),F=n(92545),w=n(65231);function Z(Q,q,te){return(0,F.h)(q.spatialReference,te)?function L(Q,q,te){const ne=q.spatialReference,ce=C(q,te,H),_e=new Float64Array(Q.position.length),ue=function S(Q,q,te,ne){(0,v.t)(T.fP.fromTypedArray(ne),T.fP.fromTypedArray(Q),q);const ce=new Float64Array(Q.length);return(0,w.To)(ne,ce,te)}(Q.position,ce,ne,_e),he=(0,k.b)(U,ce);return{position:ue,normal:h(ue,_e,Q.normal,he,ne),tangent:K(ue,_e,Q.tangent,he,ne)}}(Q,q,te):function P(Q,q,te){const ne=new Float64Array(Q.position.length),ce=Q.position,_e=q.x,ue=q.y,he=q.z||0,{horizontal:ie,vertical:le}=se(te?te.unit:null,q.spatialReference);for(let ae=0;ae<ce.length;ae+=3)ne[ae+0]=ce[ae+0]*ie+_e,ne[ae+1]=ce[ae+1]*ie+ue,ne[ae+2]=ce[ae+2]*le+he;return{position:ne,normal:Q.normal,tangent:Q.tangent}}(Q,q,te)}function M(Q,q,te){const{position:ne,normal:ce,tangent:_e}=Q;if((0,D.Wi)(q))return{position:ne,normal:ce,tangent:_e};const ue=q.localMatrix;return Z({position:(0,w.zZ)(ne,new Float64Array(ne.length),ue),normal:(0,D.pC)(ce)?(0,w.w9)(ce,new Float32Array(ce.length),ue):null,tangent:(0,D.pC)(_e)?(0,w.VS)(_e,new Float32Array(_e.length),ue):null},q.getOriginPoint(te),{geographic:q.geographic})}function I(Q,q,te){if(te?.useTransform){const{position:ne,normal:ce,tangent:_e}=Q;return{vertexAttributes:{position:ne,normal:ce,tangent:_e},transform:new ee.Z({origin:[q.x,q.y,q.z??0],geographic:(0,F.h)(q.spatialReference,te)})}}return{vertexAttributes:Z(Q,q,te),transform:null}}function _(Q,q,te){return(0,F.h)(q.spatialReference,te)?function A(Q,q,te){const ne=q.spatialReference;C(q,te,H);const ce=(0,X.a)(W,H),_e=new Float64Array(Q.position.length),ue=function N(Q,q,te,ne){const ce=(0,w.XO)(Q,q,ne),_e=T.fP.fromTypedArray(ce),ue=new Float64Array(ce.length),he=T.fP.fromTypedArray(ue);return(0,v.t)(he,_e,te),ue}(Q.position,ne,ce,_e),he=(0,k.b)(U,ce);return{position:ue,normal:Y(Q.normal,Q.position,_e,ne,he),tangent:J(Q.tangent,Q.position,_e,ne,he)}}(Q,q,te):R(Q,q,te)}function g(Q,q,te,ne){if((0,D.Wi)(q))return _(Q,te,ne);const ce=M(Q,q,te.spatialReference);return te.equals(q.getOriginPoint(te.spatialReference))?R(ce,te,ne):_(ce,te,ne)}function h(Q,q,te,ne,ce){if((0,D.Wi)(te))return null;const _e=new Float32Array(te.length);return(0,v.a)(T.ct.fromTypedArray(_e),T.ct.fromTypedArray(te),ne),(0,w.Yk)(_e,Q,q,ce,_e),_e}function K(Q,q,te,ne,ce){if((0,D.Wi)(te))return null;const _e=new Float32Array(te.length);(0,v.a)(T.ct.fromTypedArray(_e,4*Float32Array.BYTES_PER_ELEMENT),T.ct.fromTypedArray(te,4*Float32Array.BYTES_PER_ELEMENT),ne);for(let ue=3;ue<_e.length;ue+=4)_e[ue]=te[ue];return(0,w.M2)(_e,Q,q,ce,_e),_e}function R(Q,q,te){const ne=new Float64Array(Q.position.length),ce=Q.position,_e=q.x,ue=q.y,he=q.z||0,{horizontal:ie,vertical:le}=se(te?te.unit:null,q.spatialReference);for(let ae=0;ae<ce.length;ae+=3)ne[ae+0]=(ce[ae+0]-_e)/ie,ne[ae+1]=(ce[ae+1]-ue)/ie,ne[ae+2]=(ce[ae+2]-he)/le;return{position:ne,normal:Q.normal,tangent:Q.tangent}}function C(Q,q,te){(0,z.Bm)(Q.spatialReference,[Q.x,Q.y,Q.z||0],te,(0,G.rS)(Q.spatialReference));const{horizontal:ne,vertical:ce}=se(q?q.unit:null,Q.spatialReference);return(0,X.k)(te,te,[ne,ne,ce]),te}function Y(Q,q,te,ne,ce){if((0,D.Wi)(Q))return null;const _e=(0,w.Iz)(Q,q,te,ne,new Float32Array(Q.length)),ue=T.ct.fromTypedArray(_e);return(0,v.a)(ue,ue,ce),_e}function J(Q,q,te,ne,ce){if((0,D.Wi)(Q))return null;const _e=(0,w.wi)(Q,q,te,ne,new Float32Array(Q.length)),ue=T.ct.fromTypedArray(_e,4*Float32Array.BYTES_PER_ELEMENT);return(0,v.a)(ue,ue,ce),_e}function se(Q,q){if((0,D.Wi)(Q))return re;const te=q.isGeographic?1:(0,B.c9)(q),ne=q.isGeographic?1:(0,B._R)(q),ce=(0,B.En)(1,Q,"meters");return{horizontal:ce*te,vertical:ce*ne}}const H=(0,$.c)(),W=(0,$.c)(),U=(0,V.c)(),re={horizontal:1,vertical:1}},65629:(de,oe,n)=>{n.d(oe,{SR:()=>ee,Ui:()=>G});var D=n(62208),B=n(65401),V=n(32442),X=n(25748),$=n(91179),k=n(74618),z=n(37053);function G(S){return T(S,!0)}function ee(S){return T(S,!1)}function T(S,h){if((0,D.Wi)(S))return null;const K=S.spatialReference,R=(0,z.C5)(K),A="toJSON"in S?S.toJSON():S;if(!R)return A;const C=(0,z.sS)(K)?102100:4326,N=k.UZ[C].maxX,Y=k.UZ[C].minX;if((0,$.wp)(A))return F(A,N,Y);if((0,$.aW)(A))return A.points=A.points.map(J=>F(J,N,Y)),A;if((0,$.YX)(A))return function v(S,h){if(!h)return S;const K=function w(S,h){const K=[],{ymin:R,ymax:A,xmin:C,xmax:N}=S,Y=S.xmax-S.xmin,[J,se]=h.valid,{x:H,frameId:W}=Z(S.xmin,h),{x:U,frameId:re}=Z(S.xmax,h),Q=H===U&&Y>0;if(Y>2*se){const q={xmin:C<N?H:U,ymin:R,xmax:se,ymax:A},te={xmin:J,ymin:R,xmax:C<N?U:H,ymax:A},ne={xmin:0,ymin:R,xmax:se,ymax:A},ce={xmin:J,ymin:R,xmax:0,ymax:A},_e=[],ue=[];M(q,ne)&&_e.push(W),M(q,ce)&&ue.push(W),M(te,ne)&&_e.push(re),M(te,ce)&&ue.push(re);for(let he=W+1;he<re;he++)_e.push(he),ue.push(he);K.push(new g(q,[W]),new g(te,[re]),new g(ne,_e),new g(ce,ue))}else H>U||Q?K.push(new g({xmin:H,ymin:R,xmax:se,ymax:A},[W]),new g({xmin:J,ymin:R,xmax:U,ymax:A},[re])):K.push(new g({xmin:H,ymin:R,xmax:U,ymax:A},[W]));return K}(S,h).map(R=>R.extent);return K.length<2?K[0]||S:K.length>2?(S.xmin=h.valid[0],S.xmax=h.valid[1],S):{rings:K.map(R=>[[R.xmin,R.ymin],[R.xmin,R.ymax],[R.xmax,R.ymax],[R.xmax,R.ymin],[R.xmin,R.ymin]])}}(A,R);if((0,$.oU)(A)||(0,$.l9)(A)){const J=(0,V.$P)(P,A),se={xmin:J[0],ymin:J[1],xmax:J[2],ymax:J[3]},H=(0,k.XZ)(se.xmin,Y)*(2*N),W=0===H?A:(0,k.Sy)(A,H);return se.xmin+=H,se.xmax+=H,se.xmax>N?_(W,N,h):se.xmin<Y?_(W,Y,h):W}return A}function F(S,h,K){if(Array.isArray(S)){const R=S[0];if(R>h){const A=(0,k.XZ)(R,h);S[0]=R+A*(-2*h)}else if(R<K){const A=(0,k.XZ)(R,K);S[0]=R+A*(-2*K)}}else{const R=S.x;if(R>h){const A=(0,k.XZ)(R,h);S.x+=A*(-2*h)}else if(R<K){const A=(0,k.XZ)(R,K);S.x+=A*(-2*K)}}return S}function Z(S,h){const[K,R]=h.valid,A=2*R;let C,N=0;return S>R?(C=Math.ceil(Math.abs(S-R)/A),S-=C*A,N=C):S<K&&(C=Math.ceil(Math.abs(S-K)/A),S+=C*A,N=-C),{x:S,frameId:N}}function M(S,h){const{xmin:K,ymin:R,xmax:A,ymax:C}=h;return I(S,K,R)&&I(S,K,C)&&I(S,A,C)&&I(S,A,R)}function I(S,h,K){return h>=S.xmin&&h<=S.xmax&&K>=S.ymin&&K<=S.ymax}function _(S,h,K=!0){const R=!(0,$.l9)(S);if(R&&(0,X.Zy)(S),K)return(new L).cut(S,h);const A=R?S.rings:S.paths,C=R?4:2,N=A.length,Y=-2*h;for(let J=0;J<N;J++){const se=A[J];if(se&&se.length>=C){const H=[];for(const W of se)H.push([W[0]+Y,W[1]]);A.push(H)}}return R?S.rings=A:S.paths=A,S}class g{constructor(h,K){this.extent=h,this.frameIds=K}}const P=(0,B.Ue)();class L{constructor(){this._linesIn=[],this._linesOut=[]}cut(h,K){let R;if(this._xCut=K,h.rings)this._closed=!0,R=h.rings,this._minPts=4;else{if(!h.paths)return null;this._closed=!1,R=h.paths,this._minPts=2}for(const C of R){if(!C||C.length<this._minPts)continue;let N=!0;for(const Y of C)N?(this.moveTo(Y),N=!1):this.lineTo(Y);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),R=[];for(const C of this._linesIn)C&&C.length>=this._minPts&&R.push(C);const A=-2*this._xCut;for(const C of this._linesOut)if(C&&C.length>=this._minPts){for(const N of C)N[0]+=A;R.push(C)}return this._closed?h.rings=R:h.paths=R,h}moveTo(h){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(h[0]),this._moveTo(h[0],h[1],this._prevSide),this._prevPt=h,this._firstPt=h}lineTo(h){const K=this._side(h[0]);if(K*this._prevSide==-1){const R=this._intersect(this._prevPt,h);this._lineTo(this._xCut,R,0),this._prevSide=0,this._lineTo(h[0],h[1],K)}else this._lineTo(h[0],h[1],K);this._prevSide=K,this._prevPt=h}close(){const h=this._firstPt,K=this._prevPt;h[0]===K[0]&&h[1]===K[1]||this.lineTo(h),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(h,K,R){this._closed?(this._lineIn.push([R<=0?h:this._xCut,K]),this._lineOut.push([R>=0?h:this._xCut,K])):(R<=0&&this._lineIn.push([h,K]),R>=0&&this._lineOut.push([h,K]))}_lineTo(h,K,R){this._closed?(this._addPolyVertex(this._lineIn,R<=0?h:this._xCut,K),this._addPolyVertex(this._lineOut,R>=0?h:this._xCut,K)):R<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([h,K])):R>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([h,K])):this._prevSide<0?(this._lineIn.push([h,K]),this._lineOut.push([h,K])):this._prevSide>0&&(this._lineOut.push([h,K]),this._lineIn.push([h,K]))}_addPolyVertex(h,K,R){const A=h.length;A>1&&h[A-1][0]===K&&h[A-2][0]===K?h[A-1][1]=R:h.push([K,R])}_checkClosingPt(h){const K=h.length;K>3&&h[0][0]===this._xCut&&h[K-2][0]===this._xCut&&h[1][0]===this._xCut&&(h[0][1]=h[K-2][1],h.pop())}_side(h){return h<this._xCut?-1:h>this._xCut?1:0}_intersect(h,K){return h[1]+(this._xCut-h[0])/(K[0]-h[0])*(K[1]-h[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}},28678:(de,oe,n)=>{n.r(oe),n.d(oe,{default:()=>se});var Y,D=n(15861),B=n(17626),X=(n(29132),n(84792)),$=n(26584),k=n(99959),z=n(77275),G=n(21726),ee=n(77712),F=(n(90912),n(85931),n(68653)),w=n(76898),Z=n(99433),M=n(44917),I=n(552),_=n(49286),g=n(6647),P=n(30346),L=n(99555),S=n(12585),h=n(72258),K=n(2584),R=n(91309),A=n(2004),C=n(65234),N=n(72642);let J=Y=class extends((0,I.h)((0,P.Q)((0,L.M)((0,_.q)((0,g.I)((0,k.R)(M.Z))))))){constructor(...H){super(...H),this.copyright="",this.fullExtent=new A.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,C.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=C.Z.WebMercator,this.subDomains=null,this.tileInfo=new K.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new N.Z({x:-20037508.342787,y:20037508.342787,spatialReference:C.Z.WebMercator}),spatialReference:C.Z.WebMercator,lods:[new h.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new h.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new h.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new h.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new h.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new h.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new h.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new h.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new h.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new h.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new h.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new h.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new h.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new h.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new h.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new h.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new h.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new h.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new h.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new h.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new h.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new h.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new h.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new h.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(H,W){return"string"==typeof H?{urlTemplate:H,...W}:H}load(H){const W=this.loadFromPortal({supportedTypes:["WMTS"]},H).then(()=>{let U="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const re=new G.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&re.authority?.includes("{subDomain}")&&(U="is missing 'subDomains' property")}else U="spatialReference must match tileInfo.spatialReference";else U="is missing the required 'urlTemplate' property value";if(U)throw new $.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${U}`)});return this.addResolvingPromise(W),Promise.resolve(this)}get levelValues(){const H=[];if(!this.tileInfo)return null;for(const W of this.tileInfo.lods)H[W.level]=W.levelValue||W.level;return H}readSpatialReference(H,W){return H||W.fullExtent&&W.fullExtent.spatialReference&&C.Z.fromJSON(W.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const H=[],{urlTemplate:W,subDomains:U}=this,re=new G.R9(W),Q=re.scheme?re.scheme+"://":"//",q=Q+re.authority+"/",te=re.authority;if(te?.includes("{subDomain}")){if(U&&U.length>0&&te.split(".").length>1)for(const ne of U)H.push(Q+te.replace(/\{subDomain\}/gi,ne)+"/")}else H.push(q);return H.map(ne=>("/"!==ne.charAt(ne.length-1)&&(ne+="/"),ne))}get urlPath(){if(!this.urlTemplate)return null;const H=this.urlTemplate,W=new G.R9(H);return H.substring(((W.scheme?W.scheme+"://":"//")+W.authority+"/").length)}readUrlTemplate(H,W){return H||W.templateUrl}writeUrlTemplate(H,W){H&&(0,G.oC)(H)&&(H="https:"+H),H&&(H=H.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),H=(0,G.Fv)(H)),W.templateUrl=H}fetchTile(H,W,U,re={}){const{signal:Q}=re,q=this.getTileUrl(H,W,U),te={responseType:"image",signal:Q,query:{...this.refreshParameters}};return(0,X.default)(q,te).then(ne=>ne.data)}fetchImageBitmapTile(H,W,U,re={}){var Q=this;return(0,D.Z)(function*(){const{signal:q}=re;if(Q.fetchTile!==Y.prototype.fetchTile){const _e=yield Q.fetchTile(H,W,U,re);try{return createImageBitmap(_e)}catch(ue){throw new $.Z("request:server",`Unable to load tile ${H}/${W}/${U}`,{error:ue,level:H,row:W,col:U})}}const te=Q.getTileUrl(H,W,U),ne={responseType:"blob",signal:q,query:{...Q.refreshParameters}},{data:ce}=yield(0,X.default)(te,ne);return(0,S.g)(ce,te)})()}getTileUrl(H,W,U){const{levelValues:re,tileServers:Q,urlPath:q}=this;if(!re||!Q||!q)return"";const te=re[H];return Q[W%Q.length]+(0,z.gx)(q,{level:te,z:te,col:U,x:U,row:W,y:W})}};(0,B._)([(0,ee.Cb)({type:String,value:"",json:{write:!0}})],J.prototype,"copyright",void 0),(0,B._)([(0,ee.Cb)({type:A.Z,json:{write:!0},nonNullable:!0})],J.prototype,"fullExtent",void 0),(0,B._)([(0,ee.Cb)({readOnly:!0,json:{read:!1,write:!1}})],J.prototype,"legendEnabled",void 0),(0,B._)([(0,ee.Cb)({type:["show","hide"]})],J.prototype,"listMode",void 0),(0,B._)([(0,ee.Cb)({json:{read:!0,write:!0}})],J.prototype,"blendMode",void 0),(0,B._)([(0,ee.Cb)()],J.prototype,"levelValues",null),(0,B._)([(0,ee.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],J.prototype,"isReference",void 0),(0,B._)([(0,ee.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],J.prototype,"operationalLayerType",void 0),(0,B._)([(0,ee.Cb)({readOnly:!0,json:{read:!1,write:!1}})],J.prototype,"popupEnabled",void 0),(0,B._)([(0,ee.Cb)({type:C.Z})],J.prototype,"spatialReference",void 0),(0,B._)([(0,F.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],J.prototype,"readSpatialReference",null),(0,B._)([(0,ee.Cb)({type:[String],json:{write:!0}})],J.prototype,"subDomains",void 0),(0,B._)([(0,ee.Cb)({type:K.Z,json:{write:!0}})],J.prototype,"tileInfo",void 0),(0,B._)([(0,ee.Cb)({readOnly:!0})],J.prototype,"tileServers",null),(0,B._)([(0,ee.Cb)({json:{read:!1}})],J.prototype,"type",void 0),(0,B._)([(0,ee.Cb)()],J.prototype,"urlPath",null),(0,B._)([(0,ee.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],J.prototype,"urlTemplate",void 0),(0,B._)([(0,F.r)("urlTemplate",["urlTemplate","templateUrl"])],J.prototype,"readUrlTemplate",null),(0,B._)([(0,Z.c)("urlTemplate",{templateUrl:{type:String}})],J.prototype,"writeUrlTemplate",null),(0,B._)([(0,ee.Cb)({type:R.B,json:{write:!0}})],J.prototype,"wmtsInfo",void 0),J=Y=(0,B._)([(0,w.j)("esri.layers.WebTileLayer")],J);const se=J},20925:(de,oe,n)=>{n.d(oe,{Z:()=>I});var v,D=n(17626),B=n(46160),V=n(47877),X=n(14889),$=n(77712),G=(n(90912),n(85931),n(76898)),ee=n(49410),T=n(11136);const F={type:B.Z,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:w}}},read:!1}};function w(_,g,P){if(_&&Array.isArray(_))return new B.Z(_.map(L=>{const S=function M(_){return"group"===_.layerType?Z:ee.Z}(L);if(S){const h=new S;return h.read(L,P),h}return P&&P.messages&&L&&P.messages.push(new X.Z("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(L.type||"unknown")+"' are not supported",{definition:L,context:P})),null}))}let Z=v=class extends T.Z{constructor(_){super(_),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,V.w)(this,_=>v.forEachSublayer(this.sublayers,g=>{"building-group"!==g.type&&_(g)}))}};var _;(0,D._)([(0,$.Cb)({type:["hide","show","hide-children"],json:{write:!0}})],Z.prototype,"listMode",void 0),(0,D._)([(0,$.Cb)(F)],Z.prototype,"sublayers",void 0),Z=v=(0,D._)([(0,G.j)("esri.layers.buildingSublayers.BuildingGroupSublayer")],Z),(_=Z||(Z={})).sublayersProperty=F,_.readSublayers=w,_.forEachSublayer=function g(P,L){P.forEach(S=>{L(S),"building-group"===S.type&&g(S.sublayers,L)})};const I=Z},47519:(de,oe,n)=>{var D,B;n.d(oe,{i:()=>D}),(B=D||(D={}))[B.PROJECT_VERTICES=1]="PROJECT_VERTICES"},1476:(de,oe,n)=>{n.d(oe,{S:()=>B,X:()=>D});const D=1;function B(V,X){let $=0;for(const k of X){const z=k.attributes?.[V];"number"==typeof z&&isFinite(z)&&($=Math.max($,z))}return $}},35775:(de,oe,n)=>{n.d(oe,{O0:()=>v,av:()=>z,b:()=>_,d1:()=>ee,og:()=>Z});var D=n(15861),B=n(62208),V=n(37053),X=n(36630);class ${constructor(){this.code=null,this.description=null}}class k{constructor(L){this.error=new $,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=L}}function z(P){return new k(P)}class G{constructor(L){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=L}}function ee(P){return new G(P)}const T=new Set;function v(P,L,S,h=!1,K){T.clear();for(const R in S){const A=P.get(R);if(!A)continue;const C=S[R],N=F(A,C);if(N!==C&&K&&K.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:A,originalValue:C,sanitizedValue:N}}),T.add(A.name),A&&(h||A.editable)){const Y=(0,X.Qc)(A,N);if(Y)return z((0,X.vP)(Y,A,N));L[A.name]=N}}for(const R of P?.requiredFields??[])if(!T.has(R.name))return z(`missing required field "${R.name}"`);return null}function F(P,L){let S=L;return"string"==typeof L&&(0,X.H7)(P)?S=parseFloat(L):null!=L&&(0,X.qN)(P)&&"string"!=typeof L&&(S=String(L)),(0,X.Pz)(S)}let w;function Z(P,L){if(!P||!(0,V.JY)(L))return P;if("rings"in P||"paths"in P){if((0,B.Wi)(w))throw new TypeError("geometry engine not loaded");return w.simplify(L,P)}return P}function I(){return(I=(0,D.Z)(function*(){return(0,B.Wi)(w)&&(w=yield Promise.all([n.e(4918),n.e(8592)]).then(n.bind(n,32825))),w})).apply(this,arguments)}function _(P,L){return g.apply(this,arguments)}function g(){return g=(0,D.Z)(function*(P,L){!(0,V.JY)(P)||"esriGeometryPolygon"!==L&&"esriGeometryPolyline"!==L||(yield function M(){return I.apply(this,arguments)}())}),g.apply(this,arguments)}},5143:(de,oe,n)=>{n.d(oe,{Z:()=>v});var D=n(17626),V=(n(29132),n(77712)),k=(n(90912),n(85931),n(68653)),z=n(76898),G=n(51026),ee=n(28930),T=n(65234);const v=F=>{let w=class extends F{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(Z,M){return null!=M.minLOD&&null!=M.maxLOD?Z:0}readMaxScale(Z,M){return null!=M.minLOD&&null!=M.maxLOD?Z:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(Z,M){return M.capabilities&&M.capabilities.includes("Tilemap")?new ee.y({layer:this}):null}};return(0,D._)([(0,V.Cb)({json:{read:{source:"copyrightText"}}})],w.prototype,"copyright",void 0),(0,D._)([(0,V.Cb)()],w.prototype,"minScale",void 0),(0,D._)([(0,k.r)("service","minScale")],w.prototype,"readMinScale",null),(0,D._)([(0,V.Cb)()],w.prototype,"maxScale",void 0),(0,D._)([(0,k.r)("service","maxScale")],w.prototype,"readMaxScale",null),(0,D._)([(0,V.Cb)({type:T.Z})],w.prototype,"spatialReference",void 0),(0,D._)([(0,V.Cb)({readOnly:!0})],w.prototype,"supportsBlankTile",null),(0,D._)([(0,V.Cb)(G.h)],w.prototype,"tileInfo",void 0),(0,D._)([(0,V.Cb)()],w.prototype,"tilemapCache",void 0),(0,D._)([(0,k.r)("service","tilemapCache",["capabilities"])],w.prototype,"readTilemapCache",null),(0,D._)([(0,V.Cb)()],w.prototype,"version",void 0),w=(0,D._)([(0,z.j)("esri.layers.mixins.ArcGISCachedService")],w),w}},22825:(de,oe,n)=>{n.d(oe,{A:()=>B});const D=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function B(V){return null!=V&&D.some(([X,$])=>V>=X&&V<=$)}},51920:(de,oe,n)=>{n.d(oe,{j:()=>ee});var D=n(17626),B=n(14517),V=n(80542),X=n(77712),z=(n(90912),n(85931),n(76898));const G={visible:"visibleSublayers"};let ee=class extends((0,V.p)(B.Z)){constructor(T){super(T),this.scale=0}set layer(T){this._get("layer")!==T&&(this._set("layer",T),this.handles.remove("layer"),T&&this.handles.add([T.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),T.on("wms-sublayer-update",v=>this.notifyChange(G[v.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:T})=>T).map(({name:T})=>T).join()}get version(){this.commitProperty("layers");const T=this.layer;return T&&T.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:T,scale:v}=this,F=T?.sublayers,w=[],Z=M=>{const{minScale:I,maxScale:_,sublayers:g,visible:P}=M;P&&(0===v||(0===I||v<=I)&&(0===_||v>=_))&&(g?g.forEach(Z):w.push(M))};return F?.forEach(Z),w}toJSON(){const{layer:T,layers:v}=this,{imageFormat:F,imageTransparency:w,version:Z}=T;return{format:F,request:"GetMap",service:"WMS",styles:"",transparent:w?"TRUE":"FALSE",version:Z,layers:v}}};(0,D._)([(0,X.Cb)()],ee.prototype,"layer",null),(0,D._)([(0,X.Cb)({readOnly:!0})],ee.prototype,"layers",null),(0,D._)([(0,X.Cb)({type:Number})],ee.prototype,"scale",void 0),(0,D._)([(0,X.Cb)({readOnly:!0})],ee.prototype,"version",null),(0,D._)([(0,X.Cb)({readOnly:!0})],ee.prototype,"visibleSublayers",null),ee=(0,D._)([(0,z.j)("esri.layers.support.ExportWMSImageParameters")],ee)},74711:(de,oe,n)=>{n.d(oe,{W:()=>ee});var D=n(15861),B=n(24263),V=n(84792),X=n(62208),$=n(10699),k=n(80415),z=n(84687),G=n(55463);class ee{constructor(v,F,w,Z){this._parsedUrl=v,this._portalItem=F,this._apiKey=w,this.signal=Z,this._rootDocument=null;const M=this._parsedUrl?.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);M&&(this._urlParts={root:M[1],layerId:parseInt(M[2],10)})}fetch(){var v=this;return(0,D.Z)(function*(){if(!v._urlParts)return null;const F=v._portalItem??(yield v._portalItemFromServiceItemId());if((0,X.Wi)(F))return v._loadFromUrl();const w=yield v._findAndLoadRelatedPortalItem(F);return(0,X.Wi)(w)?null:v._loadFeatureLayerFromPortalItem(w)})()}fetchPortalItem(){var v=this;return(0,D.Z)(function*(){if(!v._urlParts)return null;const F=v._portalItem??(yield v._portalItemFromServiceItemId());return(0,X.Wi)(F)?null:v._findAndLoadRelatedPortalItem(F)})()}_fetchRootDocument(){var v=this;return(0,D.Z)(function*(){if((0,X.pC)(v._rootDocument))return v._rootDocument;if((0,X.Wi)(v._urlParts))return v._rootDocument={},{};const F={query:{f:"json",token:v._apiKey},responseType:"json",signal:v.signal},w=`${v._urlParts.root}/SceneServer`;try{const Z=yield(0,V.default)(w,F);v._rootDocument=Z.data}catch{v._rootDocument={}}return v._rootDocument})()}_fetchServiceOwningPortalUrl(){var v=this;return(0,D.Z)(function*(){const F=v._parsedUrl?.path,w=F?B.id?.findServerInfo(F):null;if(w?.owningSystemUrl)return w.owningSystemUrl;const Z=F?F.replace(/(.*\/rest)\/.*/i,"$1")+"/info":null;try{const M=(yield(0,V.default)(Z,{query:{f:"json"},responseType:"json",signal:v.signal})).data.owningSystemUrl;if(M)return M}catch(M){(0,$.r9)(M)}return null})()}_findAndLoadRelatedPortalItem(v){var F=this;return(0,D.Z)(function*(){try{return(yield v.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:F.signal})).find(w=>"Feature Service"===w.type)||null}catch(w){return(0,$.r9)(w),null}})()}_loadFeatureLayerFromPortalItem(v){var F=this;return(0,D.Z)(function*(){yield v.load({signal:F.signal});const w=yield F._findMatchingAssociatedSublayerUrl(v.url??"");return new k.default({url:w,portalItem:v}).load({signal:F.signal})})()}_loadFromUrl(){var v=this;return(0,D.Z)(function*(){const F=yield v._findMatchingAssociatedSublayerUrl(`${v._urlParts?.root}/FeatureServer`);return new k.default({url:F}).load({signal:v.signal})})()}_findMatchingAssociatedSublayerUrl(v){var F=this;return(0,D.Z)(function*(){const w=v.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),Z={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:F.signal},M=F._urlParts?.layerId,I=F._fetchRootDocument(),_=(0,V.default)(w,Z),[g,P]=yield Promise.all([_,I]),L=P&&P.layers,S=g.data&&g.data.layers;if(!Array.isArray(S))throw new Error("expected layers array");if(Array.isArray(L)){for(let h=0;h<Math.min(L.length,S.length);h++)if(L[h].id===M)return`${w}/${S[h].id}`}else if(null!=M&&M<S.length)return`${w}/${S[M].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var v=this;return(0,D.Z)(function*(){const F=(yield v._fetchRootDocument()).serviceItemId;if(!F)return null;const w=new G.default({id:F,apiKey:v._apiKey}),Z=yield v._fetchServiceOwningPortalUrl();(0,X.pC)(Z)&&(w.portal=new z.Z({url:Z}));try{return w.load({signal:v.signal})}catch(M){return(0,$.r9)(M),null}})()}}},17732:(de,oe,n)=>{n.d(oe,{L:()=>F});var D=n(17626),B=n(14517),V=n(62208),X=n(77712),z=(n(90912),n(85931),n(76898)),G=n(37118),ee=n(55915),T=n(65401),v=n(65629);let F=class extends B.Z{constructor(w){super(w)}get bounds(){const w=this.coords;return(0,V.Wi)(w)||(0,V.Wi)(w.extent)?null:(0,T.oJ)(w.extent)}get coords(){const w=(0,V.Wg)(this.element.georeference)?.coords;return(0,ee.dz)(w,this.spatialReference).geometry}get normalizedCoords(){return G.Z.fromJSON((0,v.Ui)(this.coords))}get normalizedBounds(){const w=(0,V.pC)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,V.pC)(w)?(0,T.oJ)(w):null}};(0,D._)([(0,X.Cb)()],F.prototype,"spatialReference",void 0),(0,D._)([(0,X.Cb)()],F.prototype,"element",void 0),(0,D._)([(0,X.Cb)()],F.prototype,"bounds",null),(0,D._)([(0,X.Cb)()],F.prototype,"coords",null),(0,D._)([(0,X.Cb)()],F.prototype,"normalizedCoords",null),(0,D._)([(0,X.Cb)()],F.prototype,"normalizedBounds",null),F=(0,D._)([(0,z.j)("esri.layers.support.MediaElementView")],F)},28930:(de,oe,n)=>{n.d(oe,{y:()=>A});var R,D=n(15861),B=n(17626),V=n(84792),X=n(14517),$=n(27306),k=n(26584),z=n(80542),G=n(63290),ee=n(93961),T=n(77029),v=n(10699),F=n(32917),w=n(50618),Z=n(21726),M=n(77712),I=n(66656),_=n(85931),g=n(76898),P=n(68511),L=n(58817);class S{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(N,Y){if("unknown"!==this._allAvailability)return this._allAvailability;const J=(N-this.location.top)*this.location.width+(Y-this.location.left),H=J>>3,W=this._tileAvailabilityBitSet;return H<0||H>W.length?"unknown":W[H]&1<<J%8?"available":"unavailable"}_updateFromData(N){let se=!0,H=!0;const W=Math.ceil(this.location.width*this.location.height/8),U=new Uint8Array(W);let re=0;for(let Q=0;Q<N.length;Q++){const q=Q%8;N[Q]?(H=!1,U[re]|=1<<q):se=!1,7===q&&++re}H?this._allAvailability="unavailable":se?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=U,this.byteSize+=U.length)}static fromDefinition(N,Y){const J=N.service.request||V.default,{row:se,col:H,width:W,height:U}=N,re={query:{f:"json"}};return Y=Y?{...re,...Y}:re,J(function K(C){let N;if("vector-tile"===C.service.type)N=`${C.service.url}/tilemap/${C.level}/${C.row}/${C.col}/${C.width}/${C.height}`;else{const J=C.service.tileServers;N=`${J&&J.length?J[C.row%J.length]:C.service.url}/tilemap/${C.level}/${C.row}/${C.col}/${C.width}/${C.height}`}const Y=C.service.query;return Y&&(N=`${N}?${Y}`),N}(N),Y).then(Q=>Q.data).catch(Q=>{if(Q&&Q.details&&422===Q.details.httpStatus)return{location:{top:se,left:H,width:W,height:U},valid:!0,data:(0,_.a9)(W*U,0)};throw Q}).then(Q=>{if(Q.location&&(Q.location.top!==se||Q.location.left!==H||Q.location.width!==W||Q.location.height!==U))throw new k.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:Q,definition:{top:se,left:H,width:W,height:U}});return S.fromJSON(Q)})}static fromJSON(N){S._validateJSON(N);const Y=new S;return Y.location=Object.freeze((0,L.d9)(N.location)),Y._updateFromData(N.data),Object.freeze(Y)}static _validateJSON(N){if(!N||!N.location)throw new k.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===N.valid)throw new k.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!N.data)throw new k.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(N.data))throw new k.Z("tilemap:data-mismatch","Data must be an array of numbers");if(N.data.length!==N.location.width*N.location.height)throw new k.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function h(C){return`${C.level}/${C.row}/${C.col}/${C.width}/${C.height}`}let A=R=class extends((0,z.p)(X.Z)){constructor(C){super(C),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*$.Y8.MEGABYTES,this.request=V.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new ee.Z(this.cacheByteSize),this.addHandles([(0,F.YP)(()=>{const{layer:C}=this;return[C?.parsedUrl,C?.tileServers,C?.apiKey,C?.customParameters]},()=>this._initializeTilemapDefinition()),(0,F.YP)(()=>this.layer?.tileInfo?.lods,C=>this._initializeAvailableLevels(C),F.tX)]),this._initializeTilemapDefinition()}castLevels(C){return C<=2?(G.Z.getLogger(this.declaredClass).error("Minimum levels for Tilemap is 3, but got ",C),3):C}get size(){return 1<<this.levels}fetchTilemap(C,N,Y,J){if(!this._availableLevels[C])return Promise.reject(new k.Z("tilemap-cache:level-unavailable",`Level ${C} is unavailable in the service`));const se=this._tmpTilemapDefinition,H=this._tilemapFromCache(C,N,Y,se);if(H)return Promise.resolve(H);const W=J&&J.signal;return J={...J,signal:null},new Promise((U,re)=>{(0,v.fu)(W,()=>re((0,v.zE)()));const Q=h(se);let q=this._pendingTilemapRequests[Q];if(!q){q=S.fromDefinition(se,J).then(ne=>(this._tilemapCache.put(Q,ne,ne.byteSize),ne));const te=()=>delete this._pendingTilemapRequests[Q];this._pendingTilemapRequests[Q]=q,q.then(te,te)}q.then(U,re)})}getAvailability(C,N,Y){if(!this._availableLevels[C])return"unavailable";const J=this._tilemapFromCache(C,N,Y,this._tmpTilemapDefinition);return J?J.getAvailability(N,Y):"unknown"}fetchAvailability(C,N,Y,J){return this._availableLevels[C]?this.fetchTilemap(C,N,Y,J).catch(se=>se).then(se=>{if(se instanceof S){const H=se.getAvailability(N,Y);if("unavailable"===H)throw new k.Z("tile-map:tile-unavailable","Tile is not available",{level:C,row:N,col:Y});return H}if((0,v.D_)(se))throw se;return"unknown"}):Promise.reject(new k.Z("tilemap-cache:level-unavailable",`Level ${C} is unavailable in the service`))}fetchAvailabilityUpsample(C,N,Y,J,se){J.level=C,J.row=N,J.col=Y;const H=this.layer.tileInfo;H.updateTileInfo(J);const W=this.fetchAvailability(C,N,Y,se).catch(U=>{if((0,v.D_)(U))throw U;if(H.upsampleTile(J))return this.fetchAvailabilityUpsample(J.level,J.row,J.col,J);throw U});return this._fetchAvailabilityUpsamplePrefetch(J.id,C,N,Y,se,W),W}_fetchAvailabilityUpsamplePrefetch(C,N,Y,J,se,H){var W=this;return(0,D.Z)(function*(){if(!W._prefetchingEnabled||null==C)return;const U=`prefetch-${C}`;if(W.handles.has(U))return;const re=new AbortController;H.then(()=>re.abort(),()=>re.abort());let Q=!1;if(W.handles.add({remove(){Q||(Q=!0,re.abort())}},U),yield(0,w.MU)(10,re.signal).catch(()=>{}),Q||(Q=!0,W.handles.remove(U)),(0,v.Hc)(re))return;const te=new P.f(C,N,Y,J),ne={...se,signal:re.signal},ce=W.layer.tileInfo;for(let _e=0;R._prefetches.length<R._maxPrefetch&&ce.upsampleTile(te);++_e){const ue=W.fetchAvailability(te.level,te.row,te.col,ne);R._prefetches.push(ue);const he=()=>{R._prefetches.removeUnordered(ue)};ue.then(he,he)}})()}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:C,apiKey:N,customParameters:Y}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:C.path,query:(0,Z.B7)({...C.query,...Y,token:N??C.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(C,N,Y,J){J.level=C,J.row=N-N%this.size,J.col=Y-Y%this.size;const se=h(J);return this._tilemapCache.get(se)}_initializeAvailableLevels(C){this._availableLevels={},C&&C.forEach(N=>this._availableLevels[N.level]=!0)}get test(){const C=this;return{get prefetchingEnabled(){return C._prefetchingEnabled},set prefetchingEnabled(N){C._prefetchingEnabled=N},hasTilemap:(N,Y,J)=>!!C._tilemapFromCache(N,Y,J,C._tmpTilemapDefinition)}}};A._maxPrefetch=4,A._prefetches=new T.Z({initialSize:R._maxPrefetch}),(0,B._)([(0,M.Cb)({constructOnly:!0,type:Number})],A.prototype,"levels",void 0),(0,B._)([(0,I.p)("levels")],A.prototype,"castLevels",null),(0,B._)([(0,M.Cb)({readOnly:!0,type:Number})],A.prototype,"size",null),(0,B._)([(0,M.Cb)({constructOnly:!0,type:Number})],A.prototype,"cacheByteSize",void 0),(0,B._)([(0,M.Cb)({constructOnly:!0})],A.prototype,"layer",void 0),(0,B._)([(0,M.Cb)({constructOnly:!0})],A.prototype,"request",void 0),A=R=(0,B._)([(0,g.j)("esri.layers.support.TilemapCache")],A)},91309:(de,oe,n)=>{n.d(oe,{B:()=>G});var z,D=n(17626),B=n(86810),V=n(58817),X=n(77712),k=(n(90912),n(76898));let G=z=class extends B.wq{constructor(ee){super(ee)}clone(){return new z({customLayerParameters:(0,V.d9)(this.customLayerParameters),customParameters:(0,V.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,D._)([(0,X.Cb)({json:{type:Object,write:!0}})],G.prototype,"customLayerParameters",void 0),(0,D._)([(0,X.Cb)({json:{type:Object,write:!0}})],G.prototype,"customParameters",void 0),(0,D._)([(0,X.Cb)({type:String,json:{write:!0}})],G.prototype,"layerIdentifier",void 0),(0,D._)([(0,X.Cb)({type:String,json:{write:!0}})],G.prototype,"tileMatrixSet",void 0),(0,D._)([(0,X.Cb)({type:String,json:{write:!0}})],G.prototype,"url",void 0),G=z=(0,D._)([(0,k.j)("esri.layer.support.WMTSLayerInfo")],G)},51026:(de,oe,n)=>{n.d(oe,{d:()=>V,h:()=>B});var D=n(2584);const B={type:D.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:V}}}}};function V(X,$,k,z){if(!X)return null;const{minScale:G,maxScale:ee,minLOD:T,maxLOD:v}=$;if(null!=T&&null!=v)return D.Z.fromJSON(z&&z.ignoreMinMaxLOD?X:{...X,lods:X.lods.filter(({level:F})=>null!=F&&F>=T&&F<=v)});if(0!==G&&0!==ee){const F=M=>Math.round(1e4*M)/1e4,w=G?F(G):1/0,Z=ee?F(ee):-1/0;return D.Z.fromJSON({...X,lods:X.lods.filter(M=>{const I=F(M.scale);return I<=w&&I>=Z})})}return D.Z.fromJSON(X)}},72581:(de,oe,n)=>{n.d(oe,{IJ:()=>v,m5:()=>M,vB:()=>_,w7:()=>w});var D=n(15861),B=n(84792),V=n(62208),X=n(21726),$=n(91179),k=n(93555),z=n(76391),G=n(61515);const ee="Layer does not support extent calculation.";function T(P,L){const S=P.geometry,h=P.toJSON(),K=h;if((0,V.pC)(S)&&(K.geometry=JSON.stringify(S),K.geometryType=(0,$.Ji)(S),K.inSR=S.spatialReference.wkid||JSON.stringify(S.spatialReference)),h.topFilter?.groupByFields&&(K.topFilter.groupByFields=h.topFilter.groupByFields.join(",")),h.topFilter?.orderByFields&&(K.topFilter.orderByFields=h.topFilter.orderByFields.join(",")),h.topFilter&&(K.topFilter=JSON.stringify(K.topFilter)),h.objectIds&&(K.objectIds=h.objectIds.join(",")),h.orderByFields&&(K.orderByFields=h.orderByFields.join(",")),h.outFields&&!(L?.returnCountOnly||L?.returnExtentOnly||L?.returnIdsOnly)?K.outFields=h.outFields.includes("*")?"*":h.outFields.join(","):delete K.outFields,h.outSR?K.outSR=h.outSR.wkid||JSON.stringify(h.outSR):S&&h.returnGeometry&&(K.outSR=K.inSR),h.returnGeometry&&delete h.returnGeometry,h.timeExtent){const R=h.timeExtent,{start:A,end:C}=R;null==A&&null==C||(K.time=A===C?A:`${A??"null"},${C??"null"}`),delete h.timeExtent}return K}function v(P,L,S,h){return F.apply(this,arguments)}function F(){return(F=(0,D.Z)(function*(P,L,S,h){const K=yield g(P,L,"json",h);return(0,G.p)(L,S,K.data),K})).apply(this,arguments)}function w(P,L,S){return Z.apply(this,arguments)}function Z(){return(Z=(0,D.Z)(function*(P,L,S){return(0,V.pC)(L.timeExtent)&&L.timeExtent.isEmpty?{data:{objectIds:[]}}:g(P,L,"json",S,{returnIdsOnly:!0})})).apply(this,arguments)}function M(P,L,S){return I.apply(this,arguments)}function I(){return(I=(0,D.Z)(function*(P,L,S){return(0,V.pC)(L.timeExtent)&&L.timeExtent.isEmpty?{data:{count:0,extent:null}}:g(P,L,"json",S,{returnExtentOnly:!0,returnCountOnly:!0}).then(h=>{const K=h.data;if(K.hasOwnProperty("extent"))return h;if(K.features)throw new Error(ee);if(K.hasOwnProperty("count"))throw new Error(ee);return h})})).apply(this,arguments)}function _(P,L,S){return(0,V.pC)(L.timeExtent)&&L.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):g(P,L,"json",S,{returnIdsOnly:!0,returnCountOnly:!0})}function g(P,L,S,h={},K={}){const R="string"==typeof P?(0,X.mN)(P):P,A=L.geometry?[L.geometry]:[];return h.responseType="pbf"===S?"array-buffer":"json",(0,k.aX)(A,null,h).then(C=>{const N=C&&C[0];(0,V.pC)(N)&&((L=L.clone()).geometry=N);const Y=(0,z.A)({...R.query,f:S,...K,...T(L,K)});return(0,B.default)((0,X.v_)(R.path,"queryTopFeatures"),{...h,query:{...Y,...h.query}})})}},43289:(de,oe,n)=>{n.d(oe,{s5:()=>k}),Math;const B=256/360;function k(T){return function X(T,v){return(T%=v)>=0?T:T+v}(T*B,256)}Math},46519:(de,oe,n)=>{n.d(oe,{z:()=>w});var D=n(7547),B=n(39351);function V(Z,M){return Z.x===M.x&&Z.y===M.y}function $(Z,M){return Z.x=M.y,Z.y=-M.x,Z}function k(Z,M){return Z.x=-M.y,Z.y=M.x,Z}function z(Z,M){return Z.x=M.x,Z.y=M.y,Z}function G(Z,M){return Z.x=-M.x,Z.y=-M.y,Z}function ee(Z){return Math.sqrt(Z.x*Z.x+Z.y*Z.y)}function T(Z,M){return Z.x*M.y-Z.y*M.x}function v(Z,M){return Z.x*M.x+Z.y*M.y}function F(Z,M,I,_){return Z.x=M.x*I+M.y*_,Z.y=M.x*_-M.y*I,Z}class w{constructor(M,I,_){this._writeVertex=M,this._writeTriangle=I,this._canUseThinTessellation=_,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(M,I){(function X(Z){if(!Z)return;const M=Z.length;if(M<=1)return;let I=0;for(let _=1;_<M;_++)V(Z[_],Z[I])||++I===_||(Z[I]=Z[_]);Z.length=I+1})(M),this._canUseThinTessellation&&I.halfWidth<B.tQ&&!I.offset?this._tessellateThin(M,I):this._tessellate(M,I)}_tessellateThin(M,I){if(M.length<2)return;const _=I.wrapDistance||65535;let g=I.initialDistance||0,P=!1,L=M[0].x,S=M[0].y;const h=M.length;for(let K=1;K<h;++K){P&&(P=!1,g=0);let R=M[K].x,A=M[K].y,C=R-L,N=A-S,Y=Math.sqrt(C*C+N*N);if(C/=Y,N/=Y,g+Y>_){P=!0;const U=(_-g)/Y;Y=_-g,R=(1-U)*L+U*R,A=(1-U)*S+U*A,--K}const J=this._writeVertex(L,S,0,0,C,N,N,-C,0,-1,g),se=this._writeVertex(L,S,0,0,C,N,-N,C,0,1,g);g+=Y;const H=this._writeVertex(R,A,0,0,C,N,N,-C,0,-1,g),W=this._writeVertex(R,A,0,0,C,N,-N,C,0,1,g);this._writeTriangle(J,se,H),this._writeTriangle(se,H,W),L=R,S=A}}_tessellate(M,I){const g=M[M.length-1],P=V(M[0],g);if(M.length<(P?3:2))return;const S=I.pixelCoordRatio,h=null!=I.capType?I.capType:D.RL.BUTT,K=null!=I.joinType?I.joinType:D.AH.MITER,R=null!=I.miterLimit?Math.min(I.miterLimit,4):2,A=null!=I.roundLimit?Math.min(I.roundLimit,1.05):1.05,C=null!=I.halfWidth?I.halfWidth:2,N=!!I.textured;let Y,J,se,H=null;const W=this._prevNormal,U=this._nextNormal;let re=-1,Q=-1;const q=this._joinNormal;let te,ne;const ce=this._textureNormalLeft,_e=this._textureNormalRight,ue=this._textureNormal;let he=-1,ie=-1;const le=I.wrapDistance||65535;let ae=I.initialDistance||0;const pe=this._writeVertex,ge=this._writeTriangle,ye=(Me,Fe,Se,De,Ie,Ae)=>{const Re=pe(J,se,te,ne,Se,De,Me,Fe,Ie,Ae,ae);return he>=0&&ie>=0&&Re>=0&&ge(he,ie,Re),he=ie,ie=Re,Re};P&&(Y=M[M.length-2],U.x=g.x-Y.x,U.y=g.y-Y.y,Q=ee(U),U.x/=Q,U.y/=Q);let Ce=!1;for(let Me=0;Me<M.length;++Me){if(Ce&&(Ce=!1,ae=0),Y&&(W.x=-U.x,W.y=-U.y,re=Q,ae+re>le&&(Ce=!0)),Ce){const fe=(le-ae)/re;re=le-ae,Y={x:(1-fe)*Y.x+fe*M[Me].x,y:(1-fe)*Y.y+fe*M[Me].y},--Me}else Y=M[Me];J=Y.x,se=Y.y;const Fe=Me<=0&&!Ce,Se=Me===M.length-1;if(Fe||(ae+=re),H=Se?P?M[1]:null:M[Me+1],H?(U.x=H.x-J,U.y=H.y-se,Q=ee(U),U.x/=Q,U.y/=Q):(U.x=void 0,U.y=void 0),!P){if(Fe){k(q,U),te=q.x,ne=q.y,h===D.RL.SQUARE&&(ye(-U.y-U.x,U.x-U.y,U.x,U.y,0,-1),ye(U.y-U.x,-U.x-U.y,U.x,U.y,0,1)),h===D.RL.ROUND&&(ye(-U.y-U.x,U.x-U.y,U.x,U.y,-1,-1),ye(U.y-U.x,-U.x-U.y,U.x,U.y,-1,1)),h!==D.RL.ROUND&&h!==D.RL.BUTT||(ye(-U.y,U.x,U.x,U.y,0,-1),ye(U.y,-U.x,U.x,U.y,0,1));continue}if(Se){$(q,W),te=q.x,ne=q.y,h!==D.RL.ROUND&&h!==D.RL.BUTT||(ye(W.y,-W.x,-W.x,-W.y,0,-1),ye(-W.y,W.x,-W.x,-W.y,0,1)),h===D.RL.SQUARE&&(ye(W.y-W.x,-W.x-W.y,-W.x,-W.y,0,-1),ye(-W.y-W.x,W.x-W.y,-W.x,-W.y,0,1)),h===D.RL.ROUND&&(ye(W.y-W.x,-W.x-W.y,-W.x,-W.y,1,-1),ye(-W.y-W.x,W.x-W.y,-W.x,-W.y,1,1));continue}}let De,Ie,Ae=-T(W,U);if(Math.abs(Ae)<.01)v(W,U)>0?(q.x=W.x,q.y=W.y,Ae=1,De=Number.MAX_VALUE,Ie=!0):(k(q,U),Ae=1,De=1,Ie=!1);else{q.x=(W.x+U.x)/Ae,q.y=(W.y+U.y)/Ae,De=ee(q);const fe=(De-1)*C*S;Ie=De>4||fe>re&&fe>Q}te=q.x,ne=q.y;let Re=K;switch(K){case D.AH.BEVEL:De<1.05&&(Re=D.AH.MITER);break;case D.AH.ROUND:De<A&&(Re=D.AH.MITER);break;case D.AH.MITER:De>R&&(Re=D.AH.BEVEL)}switch(Re){case D.AH.MITER:if(ye(q.x,q.y,-W.x,-W.y,0,-1),ye(-q.x,-q.y,-W.x,-W.y,0,1),Se)break;if(N){const fe=Ce?0:ae;he=this._writeVertex(J,se,te,ne,U.x,U.y,q.x,q.y,0,-1,fe),ie=this._writeVertex(J,se,te,ne,U.x,U.y,-q.x,-q.y,0,1,fe)}break;case D.AH.BEVEL:{const fe=Ae<0;let Ee,ve,Ue,Pe;if(fe){const me=he;he=ie,ie=me,Ee=ce,ve=_e}else Ee=_e,ve=ce;if(Ie)Ue=fe?k(this._innerPrev,W):$(this._innerPrev,W),Pe=fe?$(this._innerNext,U):k(this._innerNext,U);else{const me=fe?G(this._inner,q):z(this._inner,q);Ue=me,Pe=me}const Te=fe?$(this._bevelStart,W):k(this._bevelStart,W);ye(Ue.x,Ue.y,-W.x,-W.y,Ee.x,Ee.y);const Ne=ye(Te.x,Te.y,-W.x,-W.y,ve.x,ve.y);if(Se)break;const xe=fe?k(this._bevelEnd,U):$(this._bevelEnd,U);if(Ie){const me=this._writeVertex(J,se,te,ne,-W.x,-W.y,0,0,0,0,ae);he=this._writeVertex(J,se,te,ne,U.x,U.y,Pe.x,Pe.y,Ee.x,Ee.y,ae),ie=this._writeVertex(J,se,te,ne,U.x,U.y,xe.x,xe.y,ve.x,ve.y,ae),this._writeTriangle(Ne,me,ie)}else{if(N){const me=this._bevelMiddle;me.x=(Te.x+xe.x)/2,me.y=(Te.y+xe.y)/2,F(ue,me,-W.x,-W.y),ye(me.x,me.y,-W.x,-W.y,ue.x,ue.y),F(ue,me,U.x,U.y),he=this._writeVertex(J,se,te,ne,U.x,U.y,me.x,me.y,ue.x,ue.y,ae),ie=this._writeVertex(J,se,te,ne,U.x,U.y,Pe.x,Pe.y,Ee.x,Ee.y,ae)}else{const me=he;he=ie,ie=me}ye(xe.x,xe.y,U.x,U.y,ve.x,ve.y)}if(fe){const me=he;he=ie,ie=me}break}case D.AH.ROUND:{const fe=Ae<0;let Ee,ve;if(fe){const Oe=he;he=ie,ie=Oe,Ee=ce,ve=_e}else Ee=_e,ve=ce;const Ue=fe?G(this._inner,q):z(this._inner,q);let Pe,Te;Ie?(Pe=fe?k(this._innerPrev,W):$(this._innerPrev,W),Te=fe?$(this._innerNext,U):k(this._innerNext,U)):(Pe=Ue,Te=Ue);const Ne=fe?$(this._roundStart,W):k(this._roundStart,W),xe=fe?k(this._roundEnd,U):$(this._roundEnd,U),me=ye(Pe.x,Pe.y,-W.x,-W.y,Ee.x,Ee.y),ze=ye(Ne.x,Ne.y,-W.x,-W.y,ve.x,ve.y);if(Se)break;const je=this._writeVertex(J,se,te,ne,-W.x,-W.y,0,0,0,0,ae);Ie||this._writeTriangle(he,ie,je);const Le=G(this._outer,Ue),be=this._writeVertex(J,se,te,ne,U.x,U.y,xe.x,xe.y,ve.x,ve.y,ae);let Be,We;const Ze=De>2;if(Ze){let Oe;De!==Number.MAX_VALUE?(Le.x/=De,Le.y/=De,Oe=v(W,Le),Oe=(De*(Oe*Oe-1)+1)/Oe):Oe=-1,Be=fe?$(this._startBreak,W):k(this._startBreak,W),Be.x+=W.x*Oe,Be.y+=W.y*Oe,We=fe?k(this._endBreak,U):$(this._endBreak,U),We.x+=U.x*Oe,We.y+=U.y*Oe}F(ue,Le,-W.x,-W.y);const Ge=this._writeVertex(J,se,te,ne,-W.x,-W.y,Le.x,Le.y,ue.x,ue.y,ae);F(ue,Le,U.x,U.y);const He=N?this._writeVertex(J,se,te,ne,U.x,U.y,Le.x,Le.y,ue.x,ue.y,ae):Ge,Je=je,Ve=N?this._writeVertex(J,se,te,ne,U.x,U.y,0,0,0,0,ae):je;let we=-1,Ke=-1;if(Ze&&(F(ue,Be,-W.x,-W.y),we=this._writeVertex(J,se,te,ne,-W.x,-W.y,Be.x,Be.y,ue.x,ue.y,ae),F(ue,We,U.x,U.y),Ke=this._writeVertex(J,se,te,ne,U.x,U.y,We.x,We.y,ue.x,ue.y,ae)),N?Ze?(this._writeTriangle(Je,ze,we),this._writeTriangle(Je,we,Ge),this._writeTriangle(Ve,He,Ke),this._writeTriangle(Ve,Ke,be)):(this._writeTriangle(Je,ze,Ge),this._writeTriangle(Ve,He,be)):Ze?(this._writeTriangle(je,ze,we),this._writeTriangle(je,we,Ke),this._writeTriangle(je,Ke,be)):(this._writeTriangle(je,ze,Ge),this._writeTriangle(je,He,be)),Ie?(he=this._writeVertex(J,se,te,ne,U.x,U.y,Te.x,Te.y,Ee.x,Ee.y,ae),ie=be):(he=N?this._writeVertex(J,se,te,ne,U.x,U.y,Te.x,Te.y,Ee.x,Ee.y,ae):me,this._writeTriangle(he,Ve,be),ie=be),fe){const Oe=he;he=ie,ie=Oe}break}}}}}},39406:(de,oe,n)=>{var D,B,V,X,$,k,z,G;n.d(oe,{LW:()=>D,X:()=>X,jx:()=>B,mD:()=>z,mf:()=>$}),(G=D||(D={}))[G.FILL=0]="FILL",G[G.LINE=1]="LINE",G[G.MARKER=2]="MARKER",G[G.TEXT=3]="TEXT",G[G.LABEL=4]="LABEL",function(G){G[G.NONE=0]="NONE",G[G.MAP=1]="MAP",G[G.LABEL=2]="LABEL",G[G.LABEL_ALPHA=4]="LABEL_ALPHA",G[G.HITTEST=8]="HITTEST",G[G.HIGHLIGHT=16]="HIGHLIGHT",G[G.CLIP=32]="CLIP",G[G.DEBUG=64]="DEBUG",G[G.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(B||(B={})),function(G){G[G.SIZE=0]="SIZE",G[G.COLOR=1]="COLOR",G[G.OPACITY=2]="OPACITY",G[G.ROTATION=3]="ROTATION"}(V||(V={})),function(G){G[G.NONE=0]="NONE",G[G.OPACITY=1]="OPACITY",G[G.COLOR=2]="COLOR",G[G.ROTATION=4]="ROTATION",G[G.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",G[G.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",G[G.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",G[G.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(X||(X={})),function(G){G[G.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",G[G.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",G[G.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",G[G.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}($||($={})),function(G){G[G.SPRITE=0]="SPRITE",G[G.GLYPH=1]="GLYPH"}(k||(k={})),function(G){G[G.DEFAULT=0]="DEFAULT",G[G.SIMPLE=1]="SIMPLE",G[G.DOT_DENSITY=2]="DOT_DENSITY",G[G.OUTLINE_FILL=3]="OUTLINE_FILL",G[G.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",G[G.HEATMAP=5]="HEATMAP",G[G.PIE_CHART=6]="PIE_CHART"}(z||(z={}))},13112:(de,oe,n)=>{n.d(oe,{Z:()=>G});var D=n(17626),B=n(80542),V=n(77712),k=(n(90912),n(85931),n(76898));let z=class extends B.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const ee=this.get("tileStore.tileScheme.spatialReference");return ee&&ee.toJSON()||null}};(0,D._)([(0,V.Cb)({readOnly:!0})],z.prototype,"supportsTileUpdates",null),(0,D._)([(0,V.Cb)({constructOnly:!0})],z.prototype,"remoteClient",void 0),(0,D._)([(0,V.Cb)({constructOnly:!0})],z.prototype,"service",void 0),(0,D._)([(0,V.Cb)()],z.prototype,"spatialReference",null),(0,D._)([(0,V.Cb)({constructOnly:!0})],z.prototype,"tileInfo",void 0),(0,D._)([(0,V.Cb)({constructOnly:!0})],z.prototype,"tileStore",void 0),z=(0,D._)([(0,k.j)("esri.views.2d.layers.features.processors.BaseProcessor")],z);const G=z},55376:(de,oe,n)=>{function D(B,V,X,$){const k=B.clone(),z=1<<k.level,G=k.col+V,ee=k.row+X;return $&&G<0?(k.col=G+z,k.world-=1):G>=z?(k.col=G-z,k.world+=1):k.col=G,k.row=ee,k}n.d(oe,{M:()=>D})},84378:(de,oe,n)=>{n.d(oe,{Z:()=>B});var D=n(27899);class B{constructor(){this.spans=[]}acquire(X){this.lodInfo=X}release(){this.lodInfo=null,this.spans.length=0}forEach(X,$){const{spans:k,lodInfo:z}=this,{level:G}=z;if(0!==k.length)for(const{row:ee,colFrom:T,colTo:v}of k)for(let F=T;F<=v;F++)X.call($,G,ee,z.normalizeCol(F),z.getWorldForColumn(F))}}B.pool=new D.Z(B)},9598:(de,oe,n)=>{n.d(oe,{Z:()=>M});var D=n(37053),B=n(62208),V=n(58098);function X(I,_){return[I,_]}function $(I,_,g){return I[0]=_,I[1]=g,I}const z=new V.Z("0/0/0/0");class G{static create(_,g,P=null){const L=(0,D.C5)(_.spatialReference),S=g.origin||X(_.origin.x,_.origin.y),h=X(_.size[0]*g.resolution,_.size[1]*g.resolution),K=X(-1/0,-1/0),R=X(1/0,1/0),A=X(1/0,1/0);(0,B.pC)(P)&&($(K,Math.max(0,Math.floor((P.xmin-S[0])/h[0])),Math.max(0,Math.floor((S[1]-P.ymax)/h[1]))),$(R,Math.max(0,Math.floor((P.xmax-S[0])/h[0])),Math.max(0,Math.floor((S[1]-P.ymin)/h[1]))),$(A,R[0]-K[0]+1,R[1]-K[1]+1));const{cols:C,rows:N}=g;let Y,J,se,H;return!P&&C&&N&&($(K,C[0],N[0]),$(R,C[1],N[1]),$(A,C[1]-C[0]+1,N[1]-N[0]+1)),_.isWrappable?(Y=X(Math.ceil(Math.round((L.valid[1]-L.valid[0])/g.resolution)/_.size[0]),A[1]),J=X(Math.floor((L.origin[0]-S[0])/h[0]),K[1]),se=X(Y[0]+J[0]-1,R[1]),H=!0):(J=K,se=R,Y=A,H=!1),new G(g.level,g.resolution,g.scale,S,K,R,A,h,J,se,Y,H)}constructor(_,g,P,L,S,h,K,R,A,C,N,Y){this.level=_,this.resolution=g,this.scale=P,this.origin=L,this.first=S,this.last=h,this.size=K,this.norm=R,this.worldStart=A,this.worldEnd=C,this.worldSize=N,this.wrap=Y}normalizeCol(_){if(!this.wrap)return _;const g=this.worldSize[0];return _<0?g-1-Math.abs((_+1)%g):_%g}denormalizeCol(_,g){return this.wrap?this.worldSize[0]*g+_:_}getWorldForColumn(_){return this.wrap?Math.floor(_/this.worldSize[0]):0}getFirstColumnForWorld(_){return _*this.worldSize[0]+this.first[0]}getLastColumnForWorld(_){return _*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(_){return(_-this.origin[0])/this.norm[0]}getXForColumn(_){return this.origin[0]+_*this.norm[0]}getRowForY(_){return(this.origin[1]-_)/this.norm[1]}getYForRow(_){return this.origin[1]-_*this.norm[1]}getTileBounds(_,g,P=!1){z.set(g);const L=P?z.col:this.denormalizeCol(z.col,z.world),S=z.row;return function k(I,_,g,P,L){I[0]=_,I[1]=g,I[2]=P,I[3]=L}(_,this.getXForColumn(L),this.getYForRow(S+1),this.getXForColumn(L+1),this.getYForRow(S)),_}getTileCoords(_,g,P=!1){z.set(g);const L=P?z.col:this.denormalizeCol(z.col,z.world);return Array.isArray(_)?$(_,this.getXForColumn(L),this.getYForRow(z.row)):(_.x=this.getXForColumn(L),_.y=this.getYForRow(z.row)),_}}var ee=n(84378);class T{constructor(_,g,P){this.row=_,this.colFrom=g,this.colTo=P}}const v=new V.Z("0/0/0/0");class F{static create(_,g){_[1]>g[1]&&([_,g]=[g,_]);const[P,L]=_,[S,h]=g,K=S-P,R=h-L,A=0!==R?K/R:0,C=(Math.ceil(L)-L)*A,N=(Math.floor(L)-L)*A;return new F(P,Math.floor(L),Math.ceil(h),A,K<0?C:N,K<0?N:C,K<0?S:P,K<0?P:S)}constructor(_,g,P,L,S,h,K,R){this.x=_,this.ymin=g,this.ymax=P,this.invM=L,this.leftAdjust=S,this.rightAdjust=h,this.leftBound=K,this.rightBound=R}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const w=[[0,0],[0,0],[0,0],[0,0]];class M{constructor(_,g=null){this.tileInfo=_,this.fullExtent=g,this.scales=[],this._infoByScale={},this._infoByLevel={};const P=_.lods.slice();P.sort((S,h)=>h.scale-S.scale);const L=this._lodInfos=P.map(S=>G.create(_,S,g));P.forEach((S,h)=>{this._infoByLevel[S.level]=L[h],this._infoByScale[S.scale]=L[h],this.scales[h]=S.scale},this),this._wrap=_.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(_){return this._infoByLevel["number"==typeof _?_:_.level]}getTileBounds(_,g,P=!1){v.set(g);const L=this._infoByLevel[v.level];return L?L.getTileBounds(_,v,P):_}getTileCoords(_,g,P=!1){v.set(g);const L=this._infoByLevel[v.level];return L?L.getTileCoords(_,v,P):_}getTileCoverage(_,g=192,P="closest"){const L="closest"===P?this.getClosestInfoForScale(_.scale):this.getSmallestInfoForScale(_.scale),S=ee.Z.pool.acquire(L),h=this._wrap;let K,R,A,C=1/0,N=-1/0;const Y=S.spans;w[0][0]=w[0][1]=w[1][1]=w[3][0]=-g,w[1][0]=w[2][0]=_.size[0]+g,w[2][1]=w[3][1]=_.size[1]+g;for(const W of w)_.toMap(W,W),W[0]=L.getColumnForX(W[0]),W[1]=L.getRowForY(W[1]);const J=[];let se=3;for(let W=0;W<4;W++){if(w[W][1]===w[se][1]){se=W;continue}const U=F.create(w[W],w[se]);C=Math.min(U.ymin,C),N=Math.max(U.ymax,N),void 0===J[U.ymin]&&(J[U.ymin]=[]),J[U.ymin].push(U),se=W}if(null==C||null==N||N-C>100)return null;let H=[];for(K=C;K<N;){null!=J[K]&&(H=H.concat(J[K])),R=1/0,A=-1/0;for(let W=H.length-1;W>=0;W--){const U=H[W];R=Math.min(R,U.getLeftCol()),A=Math.max(A,U.getRightCol())}if(R=Math.floor(R),A=Math.floor(A),K>=L.first[1]&&K<=L.last[1])if(h)if(L.size[0]<L.worldSize[0]){const W=Math.floor(A/L.worldSize[0]);for(let U=Math.floor(R/L.worldSize[0]);U<=W;U++)Y.push(new T(K,Math.max(L.getFirstColumnForWorld(U),R),Math.min(L.getLastColumnForWorld(U),A)))}else Y.push(new T(K,R,A));else R>L.last[0]||A<L.first[0]||(R=Math.max(R,L.first[0]),A=Math.min(A,L.last[0]),Y.push(new T(K,R,A)));K+=1;for(let W=H.length-1;W>=0;W--){const U=H[W];U.ymax>=K?U.incrRow():H.splice(W,1)}}return S}getTileParentId(_){v.set(_);const P=this._lodInfos.indexOf(this._infoByLevel[v.level])-1;return P<0?null:(this._getTileIdAtLOD(v,this._lodInfos[P],v),v.id)}getTileResolution(_){const g=this._infoByLevel["object"==typeof _?_.level:_];return g?g.resolution:-1}getTileScale(_){const g=this._infoByLevel[_.level];return g?g.scale:-1}intersects(_,g){v.set(g);const P=this._infoByLevel[v.level],L=_.lodInfo;if(L.resolution>P.resolution){this._getTileIdAtLOD(v,L,v);const h=L.denormalizeCol(v.col,v.world);for(const K of _.spans)if(K.row===v.row&&K.colFrom<=h&&K.colTo>=h)return!0}if(L.resolution<P.resolution){const[h,K,R,A]=_.spans.reduce((H,W)=>(H[0]=Math.min(H[0],W.row),H[1]=Math.max(H[1],W.row),H[2]=Math.min(H[2],W.colFrom),H[3]=Math.max(H[3],W.colTo),H),[1/0,-1/0,1/0,-1/0]),C=P.denormalizeCol(v.col,v.world),N=L.getColumnForX(P.getXForColumn(C)),Y=L.getRowForY(P.getYForRow(v.row)),J=L.getColumnForX(P.getXForColumn(C+1))-1,se=L.getRowForY(P.getYForRow(v.row+1))-1;return!(N>A||J<R||Y>K||se<h)}const S=L.denormalizeCol(v.col,v.world);return _.spans.some(h=>h.row===v.row&&h.colFrom<=S&&h.colTo>=S)}normalizeBounds(_,g,P){if(_[0]=g[0],_[1]=g[1],_[2]=g[2],_[3]=g[3],this._wrap){const L=(0,D.C5)(this.tileInfo.spatialReference),S=-P*(L.valid[1]-L.valid[0]);_[0]+=S,_[2]+=S}return _}getSmallestInfoForScale(_){const g=this.scales;if(this._infoByScale[_])return this._infoByScale[_];if(_>g[0])return this._infoByScale[g[0]];for(let P=1;P<g.length-1;P++)if(_>g[P]+1e-6)return this._infoByScale[g[P-1]];return this._infoByScale[g[g.length-1]]}getClosestInfoForScale(_){const g=this.scales;return this._infoByScale[_]||(_=g.reduce((P,L)=>Math.abs(L-_)<Math.abs(P-_)?L:P,g[0])),this._infoByScale[_]}scaleToLevel(_){const g=this.scales;if(this._infoByScale[_])return this._infoByScale[_].level;for(let P=g.length-1;P>=0;P--)if(_<g[P])return P===g.length-1?this._infoByScale[g[g.length-1]].level:this._infoByScale[g[P]].level+(g[P]-_)/(g[P]-g[P+1]);return this._infoByScale[g[0]].level}scaleToZoom(_){return this.tileInfo.scaleToZoom(_)}_getTileIdAtLOD(_,g,P){const L=this._infoByLevel[P.level];return _.set(P),g.resolution<L.resolution?null:(g.resolution===L.resolution||(_.level=g.level,_.col=Math.floor(P.col*L.resolution/g.resolution+.01),_.row=Math.floor(P.row*L.resolution/g.resolution+.01)),_)}}},25601:(de,oe,n)=>{n.d(oe,{O:()=>$,s:()=>k});const D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAnFBMVEUAAAD/gAD/gAD/cAD/gAD/eAD/gAD/eQD/gAD/egD/gAD/ewD/gAD/fAD/gAD/fAD/gAD/fAD/fQD/fQD/fQD/fQD/fQD/fgD/jR7/mjn/mjf/p1H/plH/smf/sWb/vHr/u3n/xYz/xIv/zZz/zJv/zJr/1Kv/1Kr/06r/06n/27n/27f/4cX/4cT/59D/7dr/8uX/9u7/+/f////u2EN0AAAAM3RSTlMACBAQICAoKDAwODhAQEhIUFBYYGhweICIkJCXmJ+gp6ivsLe4uL+/wMDHx8/P19/n7/cWvjXwAAACeUlEQVR42tWX3XqiMBCGY2pbtbrUnzhhdak/lHWliJD7v7fdJ+KG5AMhh30P8zCTmS+TycDaeBoHi5Wgf4jVYvbKmRfPgSAHMX9mPRnM1tSIGHM/c2QddLp4c8wxCvYIvqROBPfbHlm/sRYC6smMNTKn3sxZAyvyYNW1v38MM/IkcPQnZHPMLtciz9P9hhqwzoLD+cnfpTIUaYinyZlBkE2YKZcMXCyN/YhsPkuFlMfWJLiwo89VMxfpJDForMCwuG+Zx7ttGO2S/w4LJ42ZURDty5M0a4dqsZAQAihQfXqWdlhnpcmdEPAI0tv2EbnsbsKmdgi6/1GN7T1XJLx5sF0P9SWABMC+co5JBE4Ge/1NTM3EGIJgjFONXCdAbeQYwhN7pRrRV20LJNIhWOczdu+xPFzIBiQ62iIsyIOTvlZUY+HXySLQaMUEeSC1CPYxENIlwk+q8e0clFAIfiKG+qpaIvod4wfU8sqvkDLda+xCCqgDaAk7uyeNqD+feFlfGCcg3Hzsk+xS7Nz1Aq4CcauhhMc0uxaqIgcFsF0J+1WQyoCN7Y9ezeCVH5LhSxmyRvsihKbK1m7LafpSpkpj6yJgtsiVBh6AX5UyCVmMbrNpcwj5/h6DPN79JjAiQAhXVeN6SZI0q5bQnn4wBiHEqpUybp1ZJzWxStVCHhKhAhVLp/Emh6trHpGLaB6yZHk7wu3Z+ChOxhwUNEmYYjpUvqJDksSHraQmJm2DdqQK6sGUObybYtpSN+8Phm3pN2xjDH33R6b0CKxAZNLvl8foD3BBnSw5e8RI+G2P8GD9wHw6YN3wkfA0R4Zz8CGCIfOCv8zM738walXuLw6nXBvPr8wvAAAAAElFTkSuQmCC",B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAACtVBMVEUAAAD/AAD/gAD/VQD/gAD/gAD/bQD/gAD/cQD/gAD/dAD/gAD/gAD/eAD/gAD/eQD/gAD/egD/gAD/ewD/fAD/gAD/gAD/fAD/gAD/fQD/fQD/gAD/fQD/egD/fQD/gAD/egD/fQD/gAD/ewD/gAD/ewD/gAD/ewD/fQD/fQD/gAD/ewD/fQD/gAD/fAD/gAD/fAD/fgD/gAD/fAD/fgD/fAD/fgD/gAD/fAD/fgD/fAD/fgD/fQD/fQD/fgD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fgD/fQD/fQD/fgD/gAL/fgD/gAb/gAT/gwr/hAz/hxH/hQ//iBX/iBP/ixn/iRf/jBr/jR7/jyP/jyL/kif/kCX/kyr/lS7/lCz/ljH/li//mTX/nDr/mjn/nTz/oEL/okf/o0r/pU3/pU7/qFL/plH/qFX/q1j/q1r/rl7/sGL/rmH/s2v/tW//tW7/t3L/uHL/unb/unf/vHv/vX3/v4D/vX7/v4D/wYT/v4L/wYX/x4//x5H/yZX/y5n/zZv/y5n/zJv/zZ3/zp//0aL/z6H/1Kr/1av/06r/1q//17H/2bT/2LP/2rb/27n/3bz/3r7/37//4MH/38D/4ML/4sX/4sb/4sf/48n/5cv/48r/5cz/5s7/6dT/6tb/69j/69n/7Nn/7dv/7dz/7t7/7t3/7+H/7+D/7+H/8eL/8uX/8uX/8ub/8+j/8+f/9On/9er/9Or/9ez/9e3/9ez/9u7/9e3/9+//9+7/+PD/+PH/+fT/+fL/+vb/+vX/+vb/+/f/+vb//Pn/+/j//Pr//Pn//fv//Pr//fv//v3//fz//////v7//v3///8ZYzD6AAAA5nRSTlMAAQIDBAYHCAkKCwwQERITGBkaGyUmKCkqKy0uLzAxMjIzNDQ2Njg4OTs+Pj9AQEJCQ0RERUZHUlJTVFVWWFlfYGFiY2RlZmdoaWprbG1ucHFyc3R1dnd4eXp8f4CAgYGCg4SEhYWGhoeIiYmKiouMjI2Nj5CQkZOUlZaXmJiZmpudnp6io6OkpaanqKmqqqusrK2xs7W2t7e4ubq7u7/AwMLExcXGyMrLzM3NztDR0tPU1NXW29zd3t/g4eLi5OTl5ufo6erq6+zs7e7u7+/w8PHy9PT29vf4+Pn5+vr7+/z9/f7+/pNrFTEAAAO8SURBVHjaldf5W1RVGAfwl4kGxa2yIDPbF82EJhkVUEOiUiDMcJa482XCijStNLLVpoWCbLHFaZUoMSkq2wgtW8mobFcryiiWkffv6J557jh3zj33zvD56f3h3vM873nP+z7nkJ3cPE9JxdX+OgSWX15aMG0CjcnUoiuRSls2byplyH1eDZSqZrkz+d0ThC1/QQ45c521Eo58p5GTSZcirbIpZGtGEBkI5pNaVhEyo3mzSCF7ITJW7CKLYxbDTsPG5qe33QezxdkkySqGndYY615CilI5Cy9sRVjYgVRzKcXJGmzdwsKHkEwnkylB2AsNse5zSIITKWkJnPzCut8gW5IsxRlw9CnrRuohO5MM43xw9D4Lt0JWm2jOOXD2Ogv3w6LQaGA/nL3AwuOwCLpJmIU0nmDheVidQ0IV0niAhQ5YVcfnH2zcCMNtLLwHheOJaB5s7OxuQlx4hHV7oeAhokrYaOeBjkYIv7LuJyhUEU3QYONFZj4YrQfwGeuGQrDSxtM0KK2N7h5koa8V+ICFdVA4SX2Kbt5xmA2j7SHsZGETFOZQqarwhzjhUAuAl1nYDIUFdAVkoe0s/LiLmT9eD91TLDwHhXJaDtmbrPvyEWzg4dfCEB5kYTsUrqIgJK8w8/C2MHDDgWYgromFXVDwkQbDRsRFhpkHWyHcBMO1oyzSgcI1VGdEd8V6o6uA8D7m2BZIDrJuPxTqKGBEnczc33nHFmZ+A7IvWDegTmEF4lb1s3Dk+wH+oxGyj1hYC6saqkDcVk74u6cJsk4W7oXVZVSCuK84aXTP5pBcGeFRWM2nQmMPOw+zyQ9t62DyLAtRWM2mPBgao1+zyVD3wyEkPMTCq7DKo/Gmdo50DbDJd22JbbudhXdgoeUSVcNkTfRbNvnv3U0QGmKs2w2LpUR0MVI1d4+wSW/0egC/i7APFkXKobq+7Wc2+avrHvSK4B/1UKUaWNQ/1nOEk2Kf7GdhNSTLSDgfKhvaDrDsbkhmkuAOQKnhmb2cqkVuBDfFeWDnzo4/2WQrUl2QuB7XwtZ1T+7ho9qRYmUOGc6Gk8hb/xoLvI0Up1KCqxyOVkf3sdADs0soaVIQaUS6Bpm/gUlgMplMR1pron39SNLyKcVcpBduCQMJXpLMx5gsdJEkexHGYJGLLFzFyFhJNilkeTVkxkM28oPIQOAUsjW5DGmVTSQnM3xwVHt6FjnLudAPW4GLMnq7zqyEUvW5x1KGTvAulSqiVRYeR2OSmz+7uKLGpwX8K8oXFJw4zu67/wFaspwc84wT2QAAAABJRU5ErkJggg==";var V=n(81695);const X={mipmap:!0,preMultiplyAlpha:!0,width:64,height:64};function $(z){return z.fromData(D,()=>new V.x(D,X))}function k(z){return z.fromData(B,()=>new V.x(B,X))}},8859:(de,oe,n)=>{n.d(oe,{J4:()=>Y,_N:()=>I,gv:()=>J});var N,U,D=n(62208),B=n(23841),X=(n(84161),n(28093)),k=(n(55915),n(90014)),z=n(70562),ee=(n(34054),n(26242)),v=(n(60507),n(26046)),F=n(62483),w=n(67857),Z=n(40841);function I(U,re){return function g(U,re){const Q=(0,X.c)(),q=(0,X.c)();let te=!1;return ne=>{const ce=re(ne);if("start"===ne.action){const he=(0,B.md)(ne.screenStart,(0,B.c$)(ee.qW.get())),ie=(0,v.u4)(U.state.camera,he,W);(0,D.pC)(ie)&&(te=(0,k.BR)(ce,ie,Q))}if(!te)return null;const _e=(0,B.md)(ne.screenEnd,(0,B.c$)(ee.qW.get())),ue=(0,v.u4)(U.state.camera,_e,W);return(0,D.Wi)(ue)?null:(0,k.BR)(ce,ue,q)?{...ne,renderStart:Q,renderEnd:q,plane:ce,ray:ue}:null}}(U,()=>re)}function Y(U){let re=null;return Q=>{switch(Q.action){case"start":re=U.disableDisplay();break;case"end":case"cancel":(0,D.pC)(re)&&(re.remove(),re=null)}return Q}}function J(U,re=null){const Q=(0,F.Z8)(U.state.viewingMode);Q.options.selectionMode=!0,Q.options.store=w.eC.MIN,Q.options.hud=!1;const q=(0,B.s1)(),te={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},ne=(0,X.c)(),ce=(0,D.Pt)(re,U.spatialReference),_e=he=>{U.map.ground&&U.map.ground.opacity<1?te.exclude.add(Z.cy):te.exclude.delete(Z.cy),U.sceneIntersectionHelper.intersectIntersectorScreen((0,B.md)(he,q),Q,te);const ie=Q.results.min;let le;if(ie.getIntersectionPoint(ne))le=ie.intersector===w.q7.TERRAIN?N.GROUND:N.OTHER;else{if(!Q.results.ground.getIntersectionPoint(ne))return null;le=N.GROUND}return{location:U.renderCoordsHelper.fromRenderCoords(ne,ce),surfaceType:le}};let ue;return he=>{if("start"===he.action){const le=_e(he.screenStart);ue=(0,D.pC)(le)?le.location:null}if((0,D.Wi)(ue))return null;const ie=_e(he.screenEnd);return(0,D.pC)(ie)&&(0,D.pC)(ie.location)?{...he,mapStart:ue,mapEnd:ie.location,surfaceType:ie.surfaceType}:null}}n(30260),(U=N||(N={}))[U.GROUND=0]="GROUND",U[U.OTHER=1]="OTHER",(0,X.c)(),(0,X.c)();const W=(0,z.Ue)()},82755:(de,oe,n)=>{n.d(oe,{i:()=>I});var D=n(17626),B=n(14517),V=n(61996),X=n(62208),$=n(77712),G=(n(90912),n(85931),n(76898)),ee=n(62600),T=n(54840),v=n(23147);class F{constructor(g){this._resourceFactory=g,this._resources=null,this._visible=!0,this._attached=!1,this._renderGroup=ee.eZ.Outline}destroy(){this._destroyResources()}get resources(){return(0,X.pC)(this._resources)?this._resources.external:null}get visible(){return this._visible}set visible(g){g!==this._visible&&(this._visible=g,this._syncGeometriesToRenderer())}get attached(){return this._attached}set attached(g){g!==this._attached&&(this._attached=g,this._createOrDestroyResources())}get renderGroup(){return this._renderGroup}set renderGroup(g){this._renderGroup=g;const P=(0,X.WG)(this._resources)?.layerView;P&&(P.renderGroup=g)}recreate(){this.attached&&this._createResources()}recreateGeometry(){this._resourceFactory.recreateGeometry?(0,X.Wi)(this._resources)||(this._ensureRenderGeometriesRemoved(),this._resourceFactory.recreateGeometry(this._resources.external),this._syncGeometriesToRenderer()):this.recreate()}_createOrDestroyResources(){this._attached?(0,X.Wi)(this._resources)&&this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const g=this._resourceFactory.createResources(),P=new w({view:this._resourceFactory.view,renderGroup:this._renderGroup}),L=this._resourceFactory.view.basemapTerrain?.overlayManager;this._resources={layerView:new w({view:this._resourceFactory.view,renderGroup:this._renderGroup}),external:g,geometriesAdded:!1},L&&(this._resources.drapeSourceRenderer=L.registerGeometryDrapeSource(P)),this._syncGeometriesToRenderer()}_destroyResources(){if((0,X.Wi)(this._resources))return;this._ensureRenderGeometriesRemoved();const g=this._resourceFactory.view.basemapTerrain?.overlayManager;g&&g.unregisterDrapeSource(this._resources.layerView),this._resourceFactory.destroyResources(this._resources.external),this._resources=null}_syncGeometriesToRenderer(){this._visible?this._ensureRenderGeometriesAdded():this._ensureRenderGeometriesRemoved()}_ensureRenderGeometriesRemoved(){(0,X.Wi)(this._resources)||(0,X.Wi)(this._resources.drapeSourceRenderer)||this._resources.geometriesAdded&&(this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries,T.T.UPDATE),this._resources.geometriesAdded=!1)}_ensureRenderGeometriesAdded(){(0,X.Wi)(this._resources)||(0,X.Wi)(this._resources.drapeSourceRenderer)||this._resources.geometriesAdded||(this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries,T.T.UPDATE),this._resources.geometriesAdded=!0)}}let w=class extends((0,V.IG)(B.Z)){constructor(_){super(_),this.drapeSourceType=ee.Lw.Features,this.updatePolicy=v.j.SYNC,this.renderGroup=ee.eZ.Outline}};(0,D._)([(0,$.Cb)({constructOnly:!0})],w.prototype,"view",void 0),(0,D._)([(0,$.Cb)({readOnly:!0})],w.prototype,"drapeSourceType",void 0),(0,D._)([(0,$.Cb)()],w.prototype,"renderGroup",void 0),w=(0,D._)([(0,G.j)("DrapedVisualElementLayerView")],w);var Z=n(68604),M=n(94375);class I extends Z.l{constructor({view:g,isDraped:P}){super(g),this._isDraped=!1,this.object3dResources=new M.O(this.createObject3DResourceFactory(g)),this.drapedResources=new F(this.createDrapedResourceFactory(g)),this.isDraped=P??!1}get isDraped(){return this._isDraped}set isDraped(g){g!==this._isDraped&&(this._isDraped=g,this.object3dResources.attached=this.attached&&!g,this.drapedResources.attached=this.attached&&g)}get renderGroup(){return this.drapedResources.renderGroup}set renderGroup(g){this.drapedResources.renderGroup=g}createResources(){this.object3dResources.attached=!this._isDraped,this.drapedResources.attached=this._isDraped}destroyResources(){this.object3dResources.attached=!1,this.drapedResources.attached=!1}recreate(){this.object3dResources.recreate(),this.drapedResources.recreate()}recreateGeometry(){this.object3dResources.recreateGeometry(),this.drapedResources.recreateGeometry()}destroy(){this.object3dResources.destroy(),this.drapedResources.destroy(),super.destroy()}updateVisibility(g){this.object3dResources.visible=g,this.drapedResources.visible=g}}},77603:(de,oe,n)=>{n.d(oe,{R:()=>S});var D=n(62208),B=n(32917),V=n(28347),X=n(43703),$=n(84161),k=n(28093),z=n(993),G=n(4794),ee=n(26242),T=n(38114),v=n(82755),F=n(64835),w=n(94255),Z=n(41120),M=n(57521),I=n(40723),_=n(64232),g=n(16396),P=n(92972),L=n(92222);class S extends v.i{constructor(A){super(A),this._maxSize=0,this._position=(0,k.c)(),this._up=(0,k.c)(),this._right=(0,k.c)(),this._renderOccluded=I.yD.OccludeAndTransparent,this._color=(0,G.f)(1,0,0,1),this._outlineColor=(0,G.f)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=I.yD.Opaque,this.applyProps(A)}createObject3DResourceFactory(A){return{view:A,createResources:C=>this._createObject3DResources(C),destroyResources:C=>this._destroyObject3DResources(C),cameraChanged:()=>this._updateTransformObject3D()}}createDrapedResourceFactory(A){return{view:A,createResources:()=>this._createDrapedResources(),destroyResources:C=>this._destroyDrapedResources(C)}}get renderOccluded(){return this._renderOccluded}set renderOccluded(A){A!==this._renderOccluded&&(this._renderOccluded=A,this._updateQuadMaterial())}get color(){return this._color}set color(A){(0,z.c)(this._color,A),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(A){(0,z.c)(this._outlineColor,A),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(A){const C=0===this._outlineSize!=(0===A);this._outlineSize=A,C?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(A){A!==this._size&&(this._size=A,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(A){this._outlineRenderOccluded=A,this._updateOutlineMaterial()}set geometry({previous:A,center:C,next:N}){this._maxSize=Math.min((0,$.i)(C,A),(0,$.i)(C,N))/3,(0,$.n)(this._up,(0,$.b)(this._up,A,C)),(0,$.n)(this._right,(0,$.b)(this._right,N,C)),(0,$.c)(this._position,C),this.recreateGeometry()}_createObject3DResources(A){const C=new P.E(this._quadMaterialParameters),N=0===this._outlineSize?void 0:new L.U(this._outlineMaterialParameters);return this._createObject3DGeometries(A,C,N),{quadMaterial:C,outlineMaterial:N,forEach:Y=>{Y(C),N&&Y(N)}}}_destroyObject3DResources(A){A.quadMaterial.dispose(),A.outlineMaterial?.dispose()}_createObject3DGeometries(A,C,N){if((0,$.k)(this._up,k.Z)&&(0,$.k)(this._right,k.Z))return;const Y=this._createGeometries(C,N);for(const J of Y)A.addGeometry(J);this._updateTransformObject3D(A)}_createDrapedResources(){const A=new P.E(this._quadMaterialParameters),C=0===this._outlineSize?void 0:new L.U(this._outlineMaterialParameters),N=this._createGeometries(A,C).map(Y=>new _.z(Y,{boundingInfo:Y.boundingInfo}));return this._setTransformDraped(N),{quadMaterial:A,outlineMaterial:C,geometries:N,pixelRatioHandle:(0,B.YP)(()=>this.view.state.contentPixelRatio,()=>{this.drapedResources.recreateGeometry()})}}_destroyDrapedResources(A){A.pixelRatioHandle.remove(),A.geometries=[],A.outlineMaterial?.dispose(),A.quadMaterial.dispose()}_createGeometries(A,C){const{up:N,right:Y,corner:J}=this._getVertices(),se=this._quadGeometryData(N,Y,J,A);return C?[se,(0,M.rh)(C,[N,J,Y])]:[se]}_getVertices(){let A=this._up,C=this._right;const N=(0,$.a)(ee.WM.get(),A,C);return this.isDraped&&(A=(0,$.c)(ee.WM.get(),A),C=(0,$.c)(ee.WM.get(),C),A[2]=0,C[2]=0,N[2]=0),{up:A,right:C,corner:N}}_updateTransform(){this.isDraped?this.drapedResources.recreateGeometry():this._updateTransformObject3D()}_updateTransformObject3D(A=(0,D.WG)(this.object3dResources.object)){if(!A)return;const N=this._size*this.view.state.camera.computeScreenPixelSizeAt(this._position),Y=Math.min(this._maxSize,N);(0,V.f)(h,this._position),(0,V.k)(h,h,[Y,Y,Y]),A.transformation=h}_setTransformDraped(A){if(0===A.length)return;const{view:{basemapTerrain:{overlayManager:C},state:{contentPixelRatio:N}}}=this,{_position:Y,_size:J}=this,se=(0,$.c)(ee.WM.get(),Y);se[2]=F.Rn;const H=K;H.spatialReference=(0,D.Wg)(C.renderer.spatialReference),H.x=se[0],H.y=se[1];const W=J*(C.overlayPixelSizeInMapUnits(H)*N),U=Math.min(this._maxSize,W);(0,V.f)(h,se),(0,V.k)(h,h,[U,U,1]);for(const re of A)re.updateTransformation(Q=>{(0,V.c)(Q,h)})}_quadGeometryData(A,C,N,Y){return new Z.Z(Y,[[g.T.POSITION,new w.a([0,0,0,...C,...A,...N],3,!0)]],[[g.T.POSITION,[0,1,2,1,2,3]]])}get _quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){(0,D.WG)(this.object3dResources.resources)?.quadMaterial.setParameters(this._quadMaterialParameters),(0,D.WG)(this.drapedResources.resources)?.quadMaterial.setParameters(this._quadMaterialParameters)}get _outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){(0,D.WG)(this.object3dResources.resources)?.outlineMaterial?.setParameters(this._outlineMaterialParameters),(0,D.WG)(this.drapedResources.resources)?.outlineMaterial?.setParameters(this._outlineMaterialParameters)}}const h=(0,X.c)(),K=(0,T.Tx)(0,0,void 0,null)},50916:(de,oe,n)=>{n.d(oe,{r:()=>v});var D=n(17626),B=n(26584),V=n(62208),X=n(32917),$=n(77712),G=(n(90912),n(85931),n(76898)),ee=n(41632),T=n(61779);const v=F=>{let w=class extends F{get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get dataLevelRange(){const Z=this.tileInfo.lods;return this.levelRangeFromScaleRange(Z[0].scale,Z[Z.length-1].scale)}get displayLevelRange(){const Z=this.tileInfo.lods,_=this.levelRangeFromScaleRange(this.layer.minScale||Z[0].scale,this.layer.maxScale||Z[Z.length-1].scale);return this.layer.maxScale&&_.maxLevel++,_}getTileUrl(Z,M,I){return this.layer.getTileUrl(Z,M,I)}_addTilingSchemeMatchPromise(){if((0,V.Wi)(this.fullExtent))return this.addResolvingPromise(Promise.reject(new B.Z("tilingscheme:extent-not-defined","This layer doesn't define a fullExtent.")));const Z=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if((0,V.pC)(Z))return this.addResolvingPromise(Promise.reject(Z));const M=(0,X.N1)(()=>this.view?.basemapTerrain?.tilingSchemeLocked).then(()=>{const _=this._getTileInfoCompatibilityError(this.tileInfo,this.view.basemapTerrain.tilingScheme);if(_)throw _});this.addResolvingPromise(M)}_getTileInfoSupportError(Z,M){const I=(0,T.er)(Z,M,this.view.spatialReference,this.view.state.viewingMode);if(I){const _={layer:this.layer,error:I};let g;switch(I.name){case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":case"tilingscheme:local-unsupported-spatial-reference":g=new B.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",_);break;default:g=new B.Z("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",_)}return g}return null}_getTileInfoCompatibilityError(Z,M){return(0,V.Wi)(Z)||!M.compatibleWith(Z)?new B.Z("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface"):null}levelRangeFromScaleRange(Z,M){const I={minLevel:0,maxLevel:1/0},_=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!_)return I;const g=_.levels[0],P=L=>{const S=Math.log(g.scale/L)/Math.LN2;return.5-Math.abs(.5-S%1)<1e-9?Math.round(S):Math.ceil(S)};return null!=Z&&Z>0&&(I.minLevel=Math.max(0,P(Z))),null!=M&&M>0&&(I.maxLevel=Math.max(0,P(M))),I}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return(0,D._)([(0,$.Cb)({readOnly:!0})],w.prototype,"imageFormatIsOpaque",null),(0,D._)([(0,$.Cb)({readOnly:!0})],w.prototype,"updating",void 0),(0,D._)([(0,$.Cb)(ee.q)],w.prototype,"updatingProgress",void 0),(0,D._)([(0,$.Cb)(ee.V)],w.prototype,"updatingProgressValue",void 0),(0,D._)([(0,$.Cb)()],w.prototype,"fullExtent",null),(0,D._)([(0,$.Cb)({readOnly:!0})],w.prototype,"isOpaque",null),(0,D._)([(0,$.Cb)({readOnly:!0})],w.prototype,"dataLevelRange",null),(0,D._)([(0,$.Cb)({readOnly:!0})],w.prototype,"displayLevelRange",null),(0,D._)([(0,$.Cb)()],w.prototype,"layer",void 0),(0,D._)([(0,$.Cb)()],w.prototype,"tileInfo",void 0),w=(0,D._)([(0,G.j)("esri.views.3d.layers.TiledLayerView3D")],w),w}},32400:(de,oe,n)=>{n.d(oe,{D:()=>J});var D=n(15861),B=n(17626),V=n(88879),X=n(46160),$=n(80542),k=n(54024),z=n(62208),G=n(10699),ee=n(32917),T=n(77712),w=(n(90912),n(85931),n(76898)),Z=n(84682),M=n(44917),I=n(84786),_=n(39256),g=n(96854),P=n(62600),L=n(80960),S=n(1191),h=n(94991),K=n(83518),R=n(14752),A=n(67873),C=n(67225),N=n(42743),Y=n(23147);let J=class extends $.r{constructor(H){super(H),this.type="graphics-3d",this.graphicsCore=null,this.drapeSourceType=P.Lw.Features,this.scaleVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this._suspendResumeExtent=null}initialize(){const{layer:H}=this,W="effectiveScaleRange"in H?H:null,U=this.scaleVisibilityEnabled&&(0,z.pC)(W),re=new S.w({owner:this,layer:this.owner.layer,preferredUpdatePolicy:Y.j.SYNC,graphicSymbolSupported:!0,componentFactories:{elevationAlignment:(Q,q)=>new h.Z({graphicsCoreOwner:this,graphicsCore:Q,queryGraphicUIDsInExtent:q,elevationProvider:this.view.elevationProvider}),scaleVisibility:U?(Q,q)=>new A.Z({graphicsCoreOwner:this,layer:W,queryGraphicUIDsInExtent:q,graphicsCore:Q,basemapTerrain:this.owner.view.basemapTerrain}):null,objectStates:Q=>new R.d(Q)}});if(this._set("graphicsCore",re),this.frustumVisibilityEnabled&&this._set("frustumVisibility",new K.Z({graphicsCoreOwner:this})),"fullOpacity"in this.owner){const Q=this.owner;this.updatingHandles.add(()=>Q.fullOpacity,()=>this.graphicsCore.opacityChange())}if("elevationInfo"in H){const Q=H;this.updatingHandles.add(()=>Q.elevationInfo,(q,te)=>{(0,Z.Hg)(q,te)&&this.updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())})}this._set("initializePromise",this._initializeAsync()),this.updatingHandles.addPromise(this.initializePromise)}_initializeAsync(){var H=this;return(0,D.Z)(function*(){try{yield H.graphicsCore.initializePromise}catch(W){if((0,G.D_)(W))return;throw W}H.destroyed||(H.handles.add((0,ee.YP)(()=>H.view.clippingArea,()=>H._updateClippingExtent(),ee.Z_)),H._updateClippingExtent(),H._setupSuspendResumeExtent(),H.graphicsCore.startCreateGraphics())})()}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("frustumVisibility",(0,z.SC)(this.frustumVisibility)),this._set("graphicsCore",(0,z.SC)(this.graphicsCore))}get layer(){return this.owner.layer}get view(){return this.owner.view}get scaleVisibility(){return this.graphicsCore?.scaleVisibility}get elevationAlignment(){return this.graphicsCore?.elevationAlignment}get objectStates(){return this.graphicsCore?.objectStates}get scaleVisibilitySuspended(){return!(!(0,z.pC)(this.scaleVisibility)||!this.scaleVisibility.suspended)}get frustumVisibilitySuspended(){return(0,z.pC)(this.frustumVisibility)&&this.frustumVisibility.suspended}get suspended(){return this.owner.suspended??!1}get updating(){return!!(this.graphicsCore?.updating||(0,z.pC)(this.scaleVisibility)&&this.scaleVisibility.updating||(0,z.pC)(this.frustumVisibility)&&this.frustumVisibility.updating||this.updatingHandles.updating)}get graphics3DGraphics(){return this.graphicsCore?.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphicsCore?.graphics3DGraphicsByObjectID}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){return this.owner.fullOpacity??1}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}notifyGraphicGeometryChanged(H){this.graphicsCore.notifyGraphicGeometryChanged(H)}notifyGraphicVisibilityChanged(H){this.graphicsCore.notifyGraphicVisibilityChanged(H)}getRenderingInfo(H,W,U){const re=(0,_.Kb)(H,{renderer:W,arcade:U});if((0,z.pC)(re)&&re.color){const Q=re.color;Q[0]=Q[0]/255,Q[1]=Q[1]/255,Q[2]=Q[2]/255}return re}getRenderingInfoAsync(H,W,U,re){return(0,_.xn)(H,{renderer:W,arcade:U,...re})}getHit(H){if(this.owner.loadedGraphics){const W=this.owner.loadedGraphics.find(U=>U.uid===H);if(W){const re=(0,I.mW)(W,this.layer instanceof M.Z?this.layer:null);return{type:"graphic",graphic:re,layer:re.layer}}}return null}whenGraphicBounds(H,W){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(H,W):Promise.reject()}computeAttachmentOrigin(H,W){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(H,W):null}getSymbolLayerSize(H,W){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(H,W):null}maskOccludee(H){const{set:W,handle:U}=this.objectStates.acquireSet(N.V_.MaskOccludee,null);return this.objectStates.setUid(W,H.uid),U}highlight(H){if(H instanceof g.Z)return se;if("number"==typeof H)return this.highlight([H]);if(H instanceof V.Z)return this.highlight([H]);if(H instanceof X.Z&&(H=H.toArray()),Array.isArray(H)&&H.length>0){if(H[0]instanceof V.Z){const W=H.map(Q=>Q.uid),{set:U,handle:re}=this.objectStates.acquireSet(N.V_.Highlight,null);return this.objectStates.setUids(U,W),re}if("number"==typeof H[0]){const W=H,{set:U,handle:re}=this.objectStates.acquireSet(N.V_.Highlight,null);return this.objectStates.setObjectIds(U,W),re}}return se}_setupSuspendResumeExtent(){const{scaleVisibility:H,frustumVisibility:W}=this;if((0,z.Wi)(H)&&(0,z.Wi)(W))return;const U=({computedExtent:re,extentPadding:Q})=>{this._suspendResumeExtent=(0,C.Go)(re,this._suspendResumeExtent,L.Z,Q),(0,z.pC)(H)&&H.setExtent(this._suspendResumeExtent),(0,z.pC)(W)&&W.setExtent(this._suspendResumeExtent)};this.handles.add((0,ee.YP)(()=>({computedExtent:this.graphicsCore?.computedExtent,extentPadding:this.graphicsCore?.extentPadding}),re=>U(re),ee.tX))}_updateClippingExtent(){this.graphicsCore.setClippingExtent(this.view.clippingArea,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}};(0,B._)([(0,T.Cb)()],J.prototype,"type",void 0),(0,B._)([(0,T.Cb)({constructOnly:!0})],J.prototype,"owner",void 0),(0,B._)([(0,T.Cb)()],J.prototype,"layer",null),(0,B._)([(0,T.Cb)()],J.prototype,"view",null),(0,B._)([(0,T.Cb)({constructOnly:!0})],J.prototype,"graphicsCore",void 0),(0,B._)([(0,T.Cb)()],J.prototype,"scaleVisibility",null),(0,B._)([(0,T.Cb)({constructOnly:!0})],J.prototype,"frustumVisibility",void 0),(0,B._)([(0,T.Cb)()],J.prototype,"elevationAlignment",null),(0,B._)([(0,T.Cb)()],J.prototype,"objectStates",null),(0,B._)([(0,T.Cb)()],J.prototype,"scaleVisibilitySuspended",null),(0,B._)([(0,T.Cb)({readOnly:!0})],J.prototype,"frustumVisibilitySuspended",null),(0,B._)([(0,T.Cb)()],J.prototype,"suspended",null),(0,B._)([(0,T.Cb)({readOnly:!0})],J.prototype,"updating",null),(0,B._)([(0,T.Cb)()],J.prototype,"loadedGraphics",null),(0,B._)([(0,T.Cb)()],J.prototype,"fullOpacity",null),(0,B._)([(0,T.Cb)()],J.prototype,"slicePlaneEnabled",null),(0,B._)([(0,T.Cb)()],J.prototype,"drapeSourceType",void 0),(0,B._)([(0,T.Cb)()],J.prototype,"updatePolicy",null),(0,B._)([(0,T.Cb)({constructOnly:!0})],J.prototype,"scaleVisibilityEnabled",void 0),(0,B._)([(0,T.Cb)({constructOnly:!0})],J.prototype,"frustumVisibilityEnabled",void 0),(0,B._)([(0,T.Cb)()],J.prototype,"initializePromise",void 0),J=(0,B._)([(0,w.j)("esri.views.3d.layers.graphics.GraphicsProcessor")],J);const se=(0,k.kB)()},3493:(de,oe,n)=>{n.d(oe,{Z6:()=>G,ZS:()=>z,sw:()=>k});var D=n(58817),B=n(62208),V=n(97445);const X={setAttribute(){},rollback(){},commit(){}};var $,M;function k(M,I){const _=I.attributes[M.objectIdField],g=M.sessions.get(_);if(g)return g;const P=(0,D.d9)(I.attributes),L=new Set;if(null==_)return X;const S=M.i3sOverrides.createInteractiveEditSession(_),h=new Map;let R=$.EDITING;const A={setAttribute(C,N){if(R!==$.EDITING)return;const Y=M.fieldsIndex.get(C);if((0,B.Wi)(Y))return;const J=M.attributeStorageInfo.findIndex(W=>W.name===Y.name);if(J<0)return;S.set(J,N);const se=M.attributeStorageInfo[J];let H=!1;L.add(C),M.forEachNode((W,U)=>{const re=((C,N)=>{const Y=h.get(C);if(null==Y){const J=N.indexOf(_);return h.set(C,J),J}return Y})(W,U);if(-1===re)return;const Q=M.getAttributeData(W.index);if(Q){const q=Q[se.name];q&&(q[re]=N,M.setAttributeData(W.index,Q,I),H=!0)}}),H&&M.clearMemCache()},rollback(){if(R===$.EDITING){for(const C of L)this.setAttribute(C,P[C]);S.rollback(),R=$.ROLLED_BACK,M.sessions.delete(_)}},commit(){R===$.EDITING&&(S.commit(),R=$.COMMITTED,M.sessions.delete(_))}};return M.sessions.set(_,A),A}function z(M,I){const _=[...I.addedFeatures,...I.updatedFeatures,...I.deletedFeatures];for(const g of _)g.objectId&&M.i3sOverrides.updateGeometry(g.objectId)}function G(M,I){const _=function ee(M,I){const _=I.edits.updateFeatures;if(!_||0===_.length)return new Z;const g=function F(M){const I=new Set;if(!M.updatedFeatures)return I;for(const _ of M.updatedFeatures)null!=_.objectId&&null==_.error&&I.add(_.objectId);return I}(I),P=new Z,L=new Map;for(let R=0;R<M.attributeStorageInfo.length;R++)L.set(M.attributeStorageInfo[R].name,R);const S=M.fieldsIndex,h=M.objectIdField,K=_.filter(R=>{const A=(0,V.g)(S,R.attributes,h);return g.has(A)});return M.forEachNode((R,A)=>{const C=new Set(A);for(const N of K){const Y=(0,V.g)(S,N.attributes,h);if(!C.has(Y))continue;const J=A.indexOf(Y);for(const se in N.attributes){const H=M.fieldsIndex.normalizeFieldName(se);T(P,R.index,H).push({featureIndex:J,featureId:Y,value:N.attributes[se]})}}}),P}(M,I);if(0===_.size)return;const g=new Map;for(let L=0;L<M.attributeStorageInfo.length;L++)g.set(M.attributeStorageInfo[L].name,L);let P=!1;_.forEach((L,S)=>{const h=M.getAttributeData(S);let K=!1;L.forEach((R,A)=>{const C=(0,B.pC)(h)?h[A]:null,N=g.get(A);for(const{featureIndex:Y,value:J,featureId:se}of R)C&&(C[Y]=J,K=!0,P=!0),M.i3sOverrides.updateAttributeValue(se,N,J)}),K&&M.setAttributeData(S,h,null)}),P&&M.clearMemCache()}function T(M,I,_){const g=function v(M,I){const _=M.get(I);if(_)return _;const g=new w;return M.set(I,g),g}(M,I),P=null!=_&&g.get(_);if(P)return P;const L=new Array;return g.set(_,L),L}(M=$||($={}))[M.EDITING=0]="EDITING",M[M.ROLLED_BACK=1]="ROLLED_BACK",M[M.COMMITTED=2]="COMMITTED";const w=Map,Z=Map},40465:(de,oe,n)=>{n.d(oe,{i:()=>F});var D=n(15861),B=n(17626),V=n(26584),X=n(62208),ee=(n(63290),n(90912),n(85931),n(8314),n(76898)),T=n(36630),v=n(10023);const F=w=>{let Z=class extends w{_validateFetchPopupFeatures(M){const{layer:I}=this,{popupEnabled:_}=I;if(!_)throw new V.Z("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:I});if(!(0,v.V)(I,M))throw new V.Z("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:I})}prepareFetchPopupFeatures(M){return(0,D.Z)(function*(){})()}fetchPopupFeatures(M,I){var _=this;return(0,D.Z)(function*(){_._validateFetchPopupFeatures(I);const g=(0,X.pC)(I)?I.clientGraphics:null;if(!g||0===g.length)return[];const P="scene"===_.layer.type&&(0,X.pC)(_.layer.associatedLayer)?_.layer.associatedLayer:_.layer;let L=[];"fieldsIndex"in _.layer&&(L=(0,T.Lk)(_.layer.fieldsIndex,yield(0,v.e)(P,(0,v.V)(_.layer,I)))),yield _.prepareFetchPopupFeatures(L);const S=new Set,h=[],K=[];for(const R of g)(0,T.Gm)(L,R,S)?K.push(R):h.push(R);return 0===K.length?h:_.whenGraphicAttributes(K,[...S]).catch(()=>K).then(R=>h.concat(R))})()}};return Z=(0,B._)([(0,ee.j)("esri.views.3d.layers.support.PopupSceneLayerView")],Z),Z}},57610:(de,oe,n)=>{n.d(oe,{K:()=>P});var D=n(15861),B=n(17626),V=n(14517),X=n(63290),$=n(36082),k=n(77712),z=n(76898),G=n(819);const ee=h=>{let K=class extends h{constructor(){super(...arguments),this._numUpdating=0,this._asyncUpdateState=new Map}get updating(){return this._numUpdating>0}autoUpdateAsync(R,A){return function v(h,K){const A=()=>{if(!N||Y)return K();N.clear(),Y=!0;const J=(0,$.LJ)(N,K);return Y=!1,J};let N=new G.M(()=>{N&&!Y&&h(A)}),Y=!1;return h(A),{remove:()=>{N&&(N.destroy(),N=null)}}}(C=>this._updateAsync(R,C),A)}_updateAsync(R,A){var C=this;return(0,D.Z)(function*(){if(!C._startAsyncUpdate(R)){try{const N=yield A();C._set(R,N)}catch{X.Z.getLogger(C.declaredClass).warn(`Async update of "${String(R)}" failed. Async update functions should not throw exceptions.`)}C._endAsyncUpdate(R)&&C._updateAsync(R,A)}})()}_startAsyncUpdate(R){const A=this._asyncUpdateState.get(R)??T.None;return A&T.Updating?(this._asyncUpdateState.set(R,A|T.Invalidated),!0):(++this._numUpdating,this._asyncUpdateState.set(R,A|T.Updating),!1)}_endAsyncUpdate(R){--this._numUpdating;const A=(this._asyncUpdateState.get(R)??T.None)&~T.Updating;return A&T.Invalidated?(this._asyncUpdateState.set(R,A&~T.Invalidated),!0):(this._asyncUpdateState.set(R,A),!1)}};return(0,B._)([(0,k.Cb)({readOnly:!0})],K.prototype,"updating",null),(0,B._)([(0,k.Cb)()],K.prototype,"_numUpdating",void 0),K=(0,B._)([(0,z.j)("esri.core.AsyncUpdate")],K),K};var T,h;(h=T||(T={}))[h.None=0]="None",h[h.Updating=1]="Updating",h[h.Invalidated=2]="Invalidated";let F=class extends(ee(V.Z)){};F=(0,B._)([(0,z.j)("esri.core.AsyncUpdate")],F);var w=n(80542),Z=n(62208),_=(n(90912),n(85931),n(36630));const g="esri.views.3d.layers.support.SceneLayerViewRequiredFields";let P=class extends(ee(w.r)){get layer(){return this.layerView.layer}get requiredFields(){const{layerView:{layer:{fieldsIndex:h},definitionExpressionFields:K},rendererFields:R,labelingFields:A,viewFilterFields:C}=this;return(0,_.Q0)(h,[...(0,Z.Pt)(K,[]),...(0,Z.Pt)(R,[]),...(0,Z.Pt)(A,[]),...(0,Z.Pt)(C,[])])}constructor(h){super(h)}initialize(){var h=this;this.handles.add([this.autoUpdateAsync("rendererFields",(0,D.Z)(function*(){const{fieldsIndex:K,renderer:R}=h.layer;return R?L(A=>R.collectRequiredFields(A,K)):null})),this.autoUpdateAsync("labelingFields",(0,D.Z)(function*(){const{layer:K}=h;return K.labelsVisible?L(R=>(0,_.Mu)(R,K)):null})),this.autoUpdateAsync("viewFilterFields",()=>{const{layer:K,filter:R}=this.layerView;return L(A=>(0,_.Ll)(A,K,R))})])}};function L(h){return S.apply(this,arguments)}function S(){return S=(0,D.Z)(function*(h){const K=new Set;try{return yield h(K),Array.from(K).sort()}catch(R){return X.Z.getLogger(g).error(R),null}}),S.apply(this,arguments)}(0,B._)([(0,k.Cb)()],P.prototype,"layerView",void 0),(0,B._)([(0,k.Cb)()],P.prototype,"layer",null),(0,B._)([(0,k.Cb)()],P.prototype,"requiredFields",null),(0,B._)([(0,k.Cb)()],P.prototype,"rendererFields",void 0),(0,B._)([(0,k.Cb)()],P.prototype,"labelingFields",void 0),(0,B._)([(0,k.Cb)()],P.prototype,"viewFilterFields",void 0),P=(0,B._)([(0,z.j)(g)],P)},67966:(de,oe,n)=>{n.d(oe,{v:()=>B});var D=n(36630);function B(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:V,layer:{fieldsIndex:X},requiredFields:$}=this;return(0,D.Q0)(X,V.outFields?[...(0,D.Lk)(X,V.outFields),...$]:$)}}}}},70211:(de,oe,n)=>{n.d(oe,{x:()=>X});var D=n(33351),B=n(97979),V=n(19038);class X extends B.a{constructor(k){super({...k,constraint:new D.Hk(k.targetPoint)})}get hints(){return[new V.n(this.targetPoint,this.isDraped,this.domain)]}}},9218:(de,oe,n)=>{n.d(oe,{X:()=>G,g:()=>ee});var D=n(62208),B=n(28093),V=n(59550),X=n(61430),$=n(75897),k=n(70211);function z({x:T,y:v,z:F}){return(0,V.uc)((0,B.f)(T,v,F??0))}function G(T,v){switch(T.type){case"edge":return T.draped?new X.k({edgeStart:z(T.start),edgeEnd:z(T.end),targetPoint:z(T.target),objectId:T.objectId,getGroundElevation:v}):new $.L({edgeStart:z(T.start),edgeEnd:z(T.end),targetPoint:z(T.target),objectId:T.objectId,isDraped:!1});case"vertex":return new k.x({targetPoint:z(T.target),objectId:T.objectId,isDraped:!1})}}function ee(T){return(0,D.pC)(T)&&"3d"===T.type?(v,F,w)=>T.elevationProvider.getElevation(v,F,w??0,T.spatialReference,"ground"):()=>null}},17936:(de,oe,n)=>{n.d(oe,{p:()=>ee});var D=n(15861),V=(n(8314),n(93961)),X=n(88159),$=n(62208),k=n(10699),z=n(16730),G=n(29505);function ee(I=!1,_){if(I){const{elevationInfo:g,alignPointsInFeatures:P,spatialReference:L}=_;return new F(g,P,L)}return new T}class T{alignCandidates(_,g){return(0,D.Z)(function*(){return _})()}notifyElevationSourceChange(){}}class F{constructor(_,g,P){this._elevationInfo=_,this._alignPointsInFeatures=g,this.spatialReference=P,this._alignmentsCache=new V.Z(1024),this._cacheVersion=0,this._metersPerVerticalUnit=(0,z._R)(P)}alignCandidates(_,g){var P=this;return(0,D.Z)(function*(){const L=P._elevationInfo;return(0,$.pC)(L)&&"absolute-height"===L.mode&&!L.featureExpressionInfo?(P._alignAbsoluteElevationCandidates(_,L),_):P._alignComputedElevationCandidates(_,g)})()}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}_alignAbsoluteElevationCandidates(_,g){const{offset:P,unit:L}=g;if((0,$.Wi)(P))return;const S=P*((0,G.Z7)(L??"meters")/this._metersPerVerticalUnit);for(const h of _)switch(h.type){case"edge":h.start.z+=S,h.end.z+=S;continue;case"vertex":h.target.z+=S;continue}}_alignComputedElevationCandidates(_,g){var P=this;return(0,D.Z)(function*(){const L=new Map;for(const Y of _)(0,X.s1)(L,Y.objectId,M).push(Y);const[S,h,K]=P._prepareQuery(L),R=yield P._alignPointsInFeatures(S,g);if((0,k.k_)(g),K!==P._cacheVersion)return P._alignComputedElevationCandidates(_,g);P._applyCacheAndResponse(S,R,h);const{drapedObjectIds:A,failedObjectIds:C}=R,N=[];for(const Y of _){const{objectId:J}=Y;A.has(J)&&"edge"===Y.type&&(Y.draped=!0),C.has(J)||N.push(Y)}return N})()}_prepareQuery(_){const g=[],P=[];for(const[L,S]of _){const h=[];for(const K of S)this._addToQueriesOrCachedResult(L,K.target,h,P),"edge"===K.type&&(this._addToQueriesOrCachedResult(L,K.start,h,P),this._addToQueriesOrCachedResult(L,K.end,h,P));0!==h.length&&g.push({objectId:L,points:h})}return[g,P,this._cacheVersion]}_addToQueriesOrCachedResult(_,g,P,L){const S=Z(_,g),h=this._alignmentsCache.get(S);(0,$.pC)(h)?L.push(new w(g,h)):P.push(g)}_applyCacheAndResponse(_,{elevations:g,drapedObjectIds:P,failedObjectIds:L},S){for(const R of S)R.apply();let h=0;const K=this._alignmentsCache;for(const{objectId:R,points:A}of _){if(L.has(R)){h+=A.length;continue}const C=!P.has(R);for(const N of A){const Y=Z(R,N),J=g[h++];N.z=J,C&&K.put(Y,J,1)}}}}class w{constructor(_,g){this.point=_,this.z=g}apply(){this.point.z=this.z}}function Z(I,{x:_,y:g,z:P}){return`${I}-${_}-${g}-${P??0}}`}function M(){return[]}},1520:(de,oe,n)=>{n.d(oe,{c:()=>$}),n(8314);class B{filter(F,w){return w}notifyElevationSourceChange(){}}class V{filter(F,w){const{point:Z,distance:M}=F,{z:I}=Z;if(null==I||0===w.length)return w;const _=function ee(v){return"number"==typeof v?{x:v,y:v,z:v}:v}(M),g=this._updateCandidatesTo3D(w,Z,_).filter(X);return g.sort(T),g}_updateCandidatesTo3D(F,w,Z){for(const M of F)switch(M.type){case"edge":k(M,w,Z);continue;case"vertex":G(M,w,Z);continue}return F}}function X(v){return v.distance<=1}function $(v=!1){return v?new V:new B}function k(v,F,{x:w,y:Z,z:M}){const{start:I,end:_,target:g}=v;v.draped||function z(v,F,w,Z){const M=Z.x-w.x,I=Z.y-w.y,_=Z.z-w.z,L=Math.min(1,Math.max(0,((F.x-w.x)*M+(F.y-w.y)*I+_*(F.z-w.z))/(M*M+I*I+_*_))),h=w.y+I*L,K=w.z+_*L;v.x=w.x+M*L,v.y=h,v.z=K}(g,F,I,_);const P=(F.x-g.x)/w,L=(F.y-g.y)/Z,S=(F.z-g.z)/M;v.distance=Math.sqrt(P*P+L*L+S*S)}function G(v,F,{x:w,y:Z,z:M}){const{target:I}=v,_=(F.x-I.x)/w,g=(F.y-I.y)/Z,P=(F.z-I.z)/M,L=Math.sqrt(_*_+g*g+P*P);v.distance=L}function T(v,F){return v.distance-F.distance}},83010:(de,oe,n)=>{n.d(oe,{k:()=>z});var D=n(15861),V=(n(8314),n(58817)),X=n(93961),$=n(10699),k=n(77275);function z(F=!1,w){return F?new T(w):new G}class G{fetch(){return(0,D.Z)(function*(){return[]})()}notifySymbologyChange(){}}class T{constructor(w){this._getSymbologyCandidates=w,this._candidatesCache=new X.Z(1024),this._cacheVersion=0}fetch(w,Z){var M=this;return(0,D.Z)(function*(){if(0===w.length)return[];const I=[],_=[],g=M._candidatesCache;for(const R of w){const A=v(R),C=g.get(A);if(C)for(const N of C)_.push((0,V.d9)(N));else I.push(R),g.put(A,[],1)}if(0===I.length)return _;const P=M._cacheVersion,{candidates:L,sourceCandidateIndices:S}=yield M._getSymbologyCandidates(I,Z);if((0,$.k_)(Z),P!==M._cacheVersion)return M.fetch(w,Z);const h=[],{length:K}=L;for(let R=0;R<K;++R){const A=L[R],C=v(I[S[R]]),N=g.get(C);N.push(A),g.put(C,N,N.length),h.push((0,V.d9)(A))}return _.concat(h)})()}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function v(F){switch(F.type){case"vertex":{const{objectId:w,target:Z}=F;return(0,k.hP)(`${w}-vertex-${Z.x}-${Z.y}-${Z.z??0}`).toString()}case"edge":{const{objectId:w,start:Z,end:M}=F;return(0,k.hP)(`${w}-edge-${Z.x}-${Z.y}-${Z.z??0}-to-${M.x}-${M.y}-${M.z??0}`).toString()}default:return""}}},78465:(de,oe,n)=>{n.d(oe,{Z:()=>I});var D=n(15861),B=n(17626),V=n(63290),X=n(62208),$=n(76825),k=n(32917),z=n(77712),T=(n(90912),n(85931),n(76898)),v=n(55915),F=n(45611);const w="esri.views.layers.SceneLayerView",Z=V.Z.getLogger(w);let M=class extends F.Z{constructor(){super(...arguments),this.layer=null,this.filter=null,this._geometryEngine=null,this._projectionEngineLoaded=!1}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(_){throw new Error("Not implemented")}get maximumNumberOfFeaturesExceeded(){return!1}get layerFilter(){return(0,$.lK)(this._layerFilter)}get _layerFilter(){const _=this.layer.filter;if((0,X.Wi)(_)||_.geometries.length<1)return null;const g=this._geometryEngine;if((0,X.Wi)(g)||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return $.cn;const P=_.geometries.getItemAt(0).spatialReference,L=_.geometries.toArray().map(R=>{try{R=g.simplify(R)}catch{return Z.warnOncePerTick("Failed to simplify scene filter mask polygon. Polygon will be ignored."),null}if(null==R)return null;if(R.spatialReference.equals(P))return R;try{return(0,v.iV)(R,P)}catch{return Z.warnOncePerTick("Failed to project scene filter mask polygon. Polygon will be ignored."),null}}).filter(X.pC).sort((R,A)=>R.extent.xmin-A.extent.xmin),S=new Set,h=new Array,K=new Array;for(let R of L){const A=R.extent.xmin;if(h.length=0,S.forEach(C=>{if(A>=C.extent.xmax)return K.push(C),void S.delete(C);R.extent.ymin<=C.extent.ymax&&R.extent.ymax>=C.extent.ymin&&g.intersects(R,C)&&h.push(C)}),h.length>0){h.push(R);try{R=g.union(h)}catch{Z.warnOncePerTick("Failed to unify filter mask polygons. Polygon will be ignored.");continue}h.pop(),h.forEach(C=>S.delete(C))}S.add(R)}return S.forEach(R=>K.push(R)),K.length>0?{spatialRelationship:_.spatialRelationship,geometries:K}:null}get _filterNeedsProjectionEngine(){const _=this.layer.filter;if((0,X.Wi)(_)||_.geometries.length<=1)return!1;const g=_.geometries.getItemAt(0).spatialReference;return _.geometries.some(({spatialReference:P})=>!P.equals(g)&&!(0,v.Up)(P,g))}get layerFilterUpdating(){return(0,$.j)(this._layerFilter)}initialize(){var _=this;(0,k.N1)(()=>!this._geometryEngine&&(0,X.pC)(this.layer.filter)&&this.layer.filter.geometries.length).then((0,D.Z)(function*(){return _._geometryEngine=yield Promise.all([n.e(4918),n.e(4766)]).then(n.bind(n,44766))})),this._projectionEngineLoaded=(0,v.kR)(),(0,k.N1)(()=>!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine).then((0,D.Z)(function*(){yield(0,v.zD)(),_._projectionEngineLoaded=!0}))}highlight(_){throw new Error("Not implemented")}queryFeatures(_,g){throw new Error("Not implemented")}queryObjectIds(_,g){throw new Error("Not implemented")}queryFeatureCount(_,g){throw new Error("Not implemented")}createQuery(){throw new Error("Not implemented")}queryExtent(_,g){throw new Error("Not implemented")}};(0,B._)([(0,z.Cb)()],M.prototype,"layer",void 0),(0,B._)([(0,z.Cb)()],M.prototype,"availableFields",null),(0,B._)([(0,z.Cb)()],M.prototype,"maximumNumberOfFeatures",null),(0,B._)([(0,z.Cb)({readOnly:!0})],M.prototype,"maximumNumberOfFeaturesExceeded",null),(0,B._)([(0,z.Cb)()],M.prototype,"filter",void 0),(0,B._)([(0,z.Cb)({readOnly:!0})],M.prototype,"layerFilter",null),(0,B._)([(0,z.Cb)({readOnly:!0})],M.prototype,"_layerFilter",null),(0,B._)([(0,z.Cb)()],M.prototype,"_geometryEngine",void 0),(0,B._)([(0,z.Cb)()],M.prototype,"_projectionEngineLoaded",void 0),(0,B._)([(0,z.Cb)()],M.prototype,"_filterNeedsProjectionEngine",null),(0,B._)([(0,z.Cb)()],M.prototype,"layerFilterUpdating",null),M=(0,B._)([(0,T.j)(w)],M);const I=M},73187:(de,oe,n)=>{n.d(oe,{q:()=>I});var D=n(17626),B=n(91558),V=n(88879),X=n(14517),$=n(21286),k=n(62208),z=n(77712),T=(n(90912),n(85931),n(76898)),v=n(69852),F=n(88493),w=n(35540),Z=n(21716);const M=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let I=class extends X.Z{constructor(_){super(_),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=M.map(_=>new F.Z({color:[_[0],_[1],_[2],.6],outline:{color:"black",width:1}})),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(_){this._enabled!==_&&(this._enabled=_,this.update())}update(){if(!this._enabled)return void this.clear();const g=this.getTiles(),P=new Array,L=new Set(this._labels.keys());g.forEach((h,K)=>{const R=h.lij.toString();L.delete(R);const A=h.lij[0],C=h.geometry;if(this.enablePolygons&&!this._polygons.has(R)){const N=new V.Z({geometry:C,symbol:this._symbols[A%this._symbols.length]});this._polygons.set(R,N),P.push(N)}if(this.enableLabels){const N=(h=>{if((0,k.pC)(h.label))return h.label;let K=h.lij.toString();return(0,k.pC)(h.loadPriority)&&(K+=` (${h.loadPriority})`),K})(h),Y=K/(g.length-1),J=(0,$.t7)(0,200,Y),se=(0,$.t7)(20,6,Y)/.75,H=(0,k.pC)(h.loadPriority)&&h.loadPriority>=g.length,W=new B.Z([J,H?0:J,H?0:J]),U="3d"===this.view.type?()=>new v.Z({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new Z.Z({text:N,halo:{color:"white",size:1/.75},material:{color:W},size:se})]}):()=>new w.Z({text:N,haloColor:"white",haloSize:1/.75,color:W,size:se}),re=this._labels.get(R);if(re){const Q=U();((0,k.Wi)(re.symbol)||JSON.stringify(Q)!==JSON.stringify(re.symbol))&&(re.symbol=Q)}else{const Q=new V.Z({geometry:C.extent.center,symbol:U()});this._labels.set(R,Q),P.push(Q)}}});const S=new Array;L.forEach(h=>{const K=this._polygons.get(h);null!=K&&(S.push(K),this._polygons.delete(h));const R=this._labels.get(h);null!=R&&(S.push(R),this._labels.delete(h))}),this.view.graphics.removeMany(S),this.view.graphics.addMany(P)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};(0,D._)([(0,z.Cb)({constructOnly:!0})],I.prototype,"view",void 0),(0,D._)([(0,z.Cb)({readOnly:!0})],I.prototype,"updating",void 0),(0,D._)([(0,z.Cb)()],I.prototype,"enabled",null),I=(0,D._)([(0,T.j)("esri.views.support.TileTreeDebugger")],I)},60863:(de,oe,n)=>{n.d(oe,{d:()=>ee});var D=n(15861),B=n(76210),V=n(23663),X=n(66554),$=n(85589);const G=(0,B.GH)(class extends B.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}effectiveLocaleChange(){(0,X.u)(this,this.effectiveLocale)}connectedCallback(){(0,V.c)(this),(0,X.c)(this)}componentWillLoad(){var T=this;return(0,D.Z)(function*(){yield(0,X.s)(T)})()}disconnectedCallback(){(0,V.d)(this),(0,X.d)(this)}render(){const{el:T,loading:v,messages:F}=this,w=T.innerHTML.trim().length>0,Z=v?(0,B.h)("calcite-loader",{label:F.loading}):null,M=w?(0,B.h)("div",{class:"content"},(0,B.h)("slot",null)):null;return(0,B.h)("div",{class:"scrim"},Z,M)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return"@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:absolute;inset:0px;z-index:700;display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}"}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32]}]);function ee(){typeof customElements>"u"||["calcite-scrim","calcite-loader"].forEach(v=>{switch(v){case"calcite-scrim":customElements.get(v)||customElements.define(v,G);break;case"calcite-loader":customElements.get(v)||(0,$.d)()}})}ee()},89251:(de,oe,n)=>{n.d(oe,{C:()=>B,I:()=>$,M:()=>X,S:()=>V,a:()=>T,g:()=>G,u:()=>ee});var D=n(76210);const B={container:"container",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerHidden:"nested-container--hidden",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",actionsEnd:"actions-end",selectionContainer:"selection-container",openContainer:"open-container"},V={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},X=5,$={selectedMultiple:"check-circle-f",selectedSingle:"circle-f",unselected:"blank",closedLTR:"caret-right",closedRTL:"caret-left",open:"caret-down",blank:"blank"},k="calcite-list-item-group",z="calcite-list-item";function G(v){const F=v.target.assignedElements({flatten:!0});return[...F.filter(M=>M?.matches(k)).map(M=>Array.from(M.querySelectorAll(z))).reduce((M,I)=>[...M,...I],[]),...F.filter(M=>M?.matches(z))]}function ee(v){v.forEach(F=>{F.setPosition=v.indexOf(F)+1,F.setSize=v.length})}function T(v,F=!1){return D.Z5.isBrowser?document.evaluate(F?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",v,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}}}]);