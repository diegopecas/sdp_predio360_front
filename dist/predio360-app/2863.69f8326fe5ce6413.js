"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[2863],{89890:(St,wt,Z)=>{Z.d(wt,{J:()=>yt});var ct,z,it,H=Z(1719),bt={exports:{}};ct=bt,void 0!==(it=function(){function r(dt){this.message="JPEG error: "+dt}return(r.prototype=new Error).name="JpegError",r.constructor=r,r}(),z=function(){if(!self||!self.Uint8ClampedArray)return null;var r=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),dt=4017,et=799,ot=3406,Q=2276,B=1567,J=3784,W=5793,nt=2896;function tt(){this.decodeTransform=null,this.colorTransform=-1}function g(l,a){for(var c,e,t=0,s=[],n=16;n>0&&!l[n-1];)n--;s.push({children:[],index:0});var m,C=s[0];for(c=0;c<n;c++){for(e=0;e<l[c];e++){for((C=s.pop()).children[C.index]=a[t];C.index>0;)C=s.pop();for(C.index++,s.push(C);s.length<=c;)s.push(m={children:[],index:0}),C.children[C.index]=m.children,C=m;t++}c+1<n&&(s.push(m={children:[],index:0}),C.children[C.index]=m.children,C=m)}return s[0].children}function p(l,a,c){return 64*((l.blocksPerLine+1)*a+c)}function b(l,a,c,e,t,s,n,m,C){var G=c.mcusPerLine,P=a,F=0,K=0;function E(){if(K>0)return K--,F>>K&1;if(255===(F=l[a++])){var k=l[a++];if(k)throw new it("unexpected marker "+(F<<8|k).toString(16))}return K=7,F>>>7}function L(k){for(var V=k;;){if("number"==typeof(V=V[E()]))return V;if("object"!=typeof V)throw new it("invalid huffman sequence")}}function M(k){for(var V=0;k>0;)V=V<<1|E(),k--;return V}function j(k){if(1===k)return 1===E()?1:-1;var V=M(k);return V>=1<<k-1?V:V+(-1<<k)+1}var I,S=0,X=0;function i(k,V,$,rt,ut){V(k,p(k,($/G|0)*k.v+rt,$%G*k.h+ut))}var h,v,d,x,R,N,D=e.length;N=c.progressive?0===s?0===m?function o(k,V){var $=L(k.huffmanTableDC),rt=0===$?0:j($)<<C;k.blockData[V]=k.pred+=rt}:function _(k,V){k.blockData[V]|=E()<<C}:0===m?function A(k,V){if(S>0)S--;else for(var $=s,rt=n;$<=rt;){var ut=L(k.huffmanTableAC),mt=15&ut,ft=ut>>4;if(0!==mt){var Ct=r[$+=ft];k.blockData[V+Ct]=j(mt)*(1<<C),$++}else{if(ft<15){S=M(ft)+(1<<ft)-1;break}$+=16}}}:function f(k,V){for(var $,rt,ut=s,mt=n,ft=0;ut<=mt;){var Ct=r[ut];switch(X){case 0:if(ft=(rt=L(k.huffmanTableAC))>>4,0==($=15&rt))ft<15?(S=M(ft)+(1<<ft),X=4):(ft=16,X=1);else{if(1!==$)throw new it("invalid ACn encoding");I=j($),X=ft?2:3}continue;case 1:case 2:k.blockData[V+Ct]?k.blockData[V+Ct]+=E()<<C:0==--ft&&(X=2===X?3:0);break;case 3:k.blockData[V+Ct]?k.blockData[V+Ct]+=E()<<C:(k.blockData[V+Ct]=I<<C,X=0);break;case 4:k.blockData[V+Ct]&&(k.blockData[V+Ct]+=E()<<C)}ut++}4===X&&0==--S&&(X=0)}:function U(k,V){var $=L(k.huffmanTableDC),rt=0===$?0:j($);k.blockData[V]=k.pred+=rt;for(var ut=1;ut<64;){var mt=L(k.huffmanTableAC),ft=15&mt,Ct=mt>>4;if(0!==ft){var vt=r[ut+=Ct];k.blockData[V+vt]=j(ft),ut++}else{if(Ct<15)break;ut+=16}}};var q,at,gt,st,k,$,Y=0;for(at=1===D?e[0].blocksPerLine*e[0].blocksPerColumn:G*c.mcusPerColumn;Y<at;){var lt=t?Math.min(at-Y,t):at;for(v=0;v<D;v++)e[v].pred=0;if(S=0,1===D)for(h=e[0],R=0;R<lt;R++)N(k=h,p(k,($=Y)/k.blocksPerLine|0,$%k.blocksPerLine)),Y++;else for(R=0;R<lt;R++){for(v=0;v<D;v++)for(gt=(h=e[v]).h,st=h.v,d=0;d<st;d++)for(x=0;x<gt;x++)i(h,N,Y,d,x);Y++}K=0,(q=y(l,a))&&q.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+q.invalid),a=q.offset);var pt=q&&q.marker;if(!pt||pt<=65280)throw new it("marker was not found");if(!(pt>=65488&&pt<=65495))break;a+=2}return(q=y(l,a))&&q.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+q.invalid),a=q.offset),a-P}function w(l,a,c){var e,t,s,n,m,C,G,O,P,F,K,E,L,M,j,U,o,_=l.quantizationTable,S=l.blockData;if(!_)throw new it("missing required Quantization Table.");for(var A=0;A<64;A+=8)P=S[a+A],P*=_[A],(F=S[a+A+1])|(K=S[a+A+2])|(E=S[a+A+3])|(L=S[a+A+4])|(M=S[a+A+5])|(j=S[a+A+6])|(U=S[a+A+7])?(t=(e=(e=W*P+128>>8)+(t=W*(L*=_[A+4])+128>>8)+1>>1)-t,o=(s=K*=_[A+2])*J+(n=j*=_[A+6])*B+128>>8,s=s*B-n*J+128>>8,G=(m=(m=nt*((F*=_[A+1])-(U*=_[A+7]))+128>>8)+(G=(M*=_[A+5])<<4)+1>>1)-G,C=(O=(O=nt*(F+U)+128>>8)+(C=(E*=_[A+3])<<4)+1>>1)-C,n=(e=e+(n=o)+1>>1)-n,s=(t=t+s+1>>1)-s,o=m*Q+O*ot+2048>>12,m=m*ot-O*Q+2048>>12,O=o,o=C*et+G*dt+2048>>12,C=C*dt-G*et+2048>>12,G=o,c[A]=e+O,c[A+7]=e-O,c[A+1]=t+G,c[A+6]=t-G,c[A+2]=s+C,c[A+5]=s-C,c[A+3]=n+m,c[A+4]=n-m):(c[A]=o=W*P+512>>10,c[A+1]=o,c[A+2]=o,c[A+3]=o,c[A+4]=o,c[A+5]=o,c[A+6]=o,c[A+7]=o);for(var I=0;I<8;++I)P=c[I],(F=c[I+8])|(K=c[I+16])|(E=c[I+24])|(L=c[I+32])|(M=c[I+40])|(j=c[I+48])|(U=c[I+56])?(t=(e=4112+((e=W*P+2048>>12)+(t=W*L+2048>>12)+1>>1))-t,o=(s=K)*J+(n=j)*B+2048>>12,s=s*B-n*J+2048>>12,n=o,G=(m=(m=nt*(F-U)+2048>>12)+(G=M)+1>>1)-G,C=(O=(O=nt*(F+U)+2048>>12)+(C=E)+1>>1)-C,o=m*Q+O*ot+2048>>12,m=m*ot-O*Q+2048>>12,O=o,o=C*et+G*dt+2048>>12,C=C*dt-G*et+2048>>12,P=(P=(e=e+n+1>>1)+O)<16?0:P>=4080?255:P>>4,F=(F=(t=t+s+1>>1)+(G=o))<16?0:F>=4080?255:F>>4,K=(K=(s=t-s)+C)<16?0:K>=4080?255:K>>4,E=(E=(n=e-n)+m)<16?0:E>=4080?255:E>>4,L=(L=n-m)<16?0:L>=4080?255:L>>4,M=(M=s-C)<16?0:M>=4080?255:M>>4,j=(j=t-G)<16?0:j>=4080?255:j>>4,U=(U=e-O)<16?0:U>=4080?255:U>>4,S[a+I]=P,S[a+I+8]=F,S[a+I+16]=K,S[a+I+24]=E,S[a+I+32]=L,S[a+I+40]=M,S[a+I+48]=j,S[a+I+56]=U):(o=(o=W*P+8192>>14)<-2040?0:o>=2024?255:o+2056>>4,S[a+I]=o,S[a+I+8]=o,S[a+I+16]=o,S[a+I+24]=o,S[a+I+32]=o,S[a+I+40]=o,S[a+I+48]=o,S[a+I+56]=o)}function T(l,a){for(var c=a.blocksPerLine,e=a.blocksPerColumn,t=new Int16Array(64),s=0;s<e;s++)for(var n=0;n<c;n++)w(a,p(a,s,n),t);return a.blockData}function y(l,a,c){function e(C){return l[C]<<8|l[C+1]}var t=l.length-1,s=c<a?c:a;if(a>=t)return null;var n=e(a);if(n>=65472&&n<=65534)return{invalid:null,marker:n,offset:a};for(var m=e(s);!(m>=65472&&m<=65534);){if(++s>=t)return null;m=e(s)}return{invalid:n.toString(16),marker:m,offset:s}}return tt.prototype={parse:function(l){function a(){var k=l[n]<<8|l[n+1];return n+=2,k}function c(){var k=a(),V=n+k-2,$=y(l,V,n);$&&$.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+$.invalid),V=$.offset);var rt=l.subarray(n,V);return n+=rt.length,rt}function e(k){for(var V=Math.ceil(k.samplesPerLine/8/k.maxH),$=Math.ceil(k.scanLines/8/k.maxV),rt=0;rt<k.components.length;rt++){R=k.components[rt];var ut=Math.ceil(Math.ceil(k.samplesPerLine/8)*R.h/k.maxH),mt=Math.ceil(Math.ceil(k.scanLines/8)*R.v/k.maxV);R.blockData=new Int16Array($*R.v*64*(V*R.h+1)),R.blocksPerLine=ut,R.blocksPerColumn=mt}k.mcusPerLine=V,k.mcusPerColumn=$}var t,s,n=0,m=null,C=null,G=[],O=[],P=[],F=a();if(65496!==F)throw new it("SOI not found");for(F=a();65497!==F;){var K,E,L;switch(F){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var M=c();65504===F&&74===M[0]&&70===M[1]&&73===M[2]&&70===M[3]&&0===M[4]&&(m={version:{major:M[5],minor:M[6]},densityUnits:M[7],xDensity:M[8]<<8|M[9],yDensity:M[10]<<8|M[11],thumbWidth:M[12],thumbHeight:M[13],thumbData:M.subarray(14,14+3*M[12]*M[13])}),65518===F&&65===M[0]&&100===M[1]&&111===M[2]&&98===M[3]&&101===M[4]&&(C={version:M[5]<<8|M[6],flags0:M[7]<<8|M[8],flags1:M[9]<<8|M[10],transformCode:M[11]});break;case 65499:for(var j=a()+n-2;n<j;){var U=l[n++],o=new Uint16Array(64);if(U>>4){if(U>>4!=1)throw new it("DQT - invalid table spec");for(E=0;E<64;E++)o[r[E]]=a()}else for(E=0;E<64;E++)o[r[E]]=l[n++];G[15&U]=o}break;case 65472:case 65473:case 65474:if(t)throw new it("Only single frame JPEGs supported");a(),(t={}).extended=65473===F,t.progressive=65474===F,t.precision=l[n++],t.scanLines=a(),t.samplesPerLine=a(),t.components=[],t.componentIds={};var _,S=l[n++],A=0,I=0;for(K=0;K<S;K++){_=l[n];var X=l[n+1]>>4,f=15&l[n+1];A<X&&(A=X),I<f&&(I=f),L=t.components.push({h:X,v:f,quantizationId:l[n+2],quantizationTable:null}),t.componentIds[_]=L-1,n+=3}t.maxH=A,t.maxV=I,e(t);break;case 65476:var u=a();for(K=2;K<u;){var h=l[n++],v=new Uint8Array(16),d=0;for(E=0;E<16;E++,n++)d+=v[E]=l[n];var x=new Uint8Array(d);for(E=0;E<d;E++,n++)x[E]=l[n];K+=17+d,(h>>4?O:P)[15&h]=g(v,x)}break;case 65501:a(),s=a();break;case 65498:a();var R,N=l[n++],D=[];for(K=0;K<N;K++){var q=t.componentIds[l[n++]],at=l[n++];(R=t.components[q]).huffmanTableDC=P[at>>4],R.huffmanTableAC=O[15&at],D.push(R)}var gt=l[n++],st=l[n++],Y=l[n++],lt=b(l,n,t,D,s,gt,st,Y>>4,15&Y);n+=lt;break;case 65535:255!==l[n]&&n--;break;default:if(255===l[n-3]&&l[n-2]>=192&&l[n-2]<=254){n-=3;break}throw new it("unknown marker "+F.toString(16))}F=a()}for(this.width=t.samplesPerLine,this.height=t.scanLines,this.jfif=m,this.eof=n,this.adobe=C,this.components=[],K=0;K<t.components.length;K++){var pt=G[(R=t.components[K]).quantizationId];pt&&(R.quantizationTable=pt),this.components.push({output:T(0,R),scaleX:R.h/t.maxH,scaleY:R.v/t.maxV,blocksPerLine:R.blocksPerLine,blocksPerColumn:R.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(l,a){var c,e,t,s,n,m,C,G,O,P,F,K=this.width/l,E=this.height/a,L=0,M=this.components.length,j=l*a*M,U=new Uint8ClampedArray(j),o=new Uint32Array(l),_=4294967288;for(C=0;C<M;C++){for(e=(c=this.components[C]).scaleX*K,t=c.scaleY*E,L=C,F=c.output,s=c.blocksPerLine+1<<3,n=0;n<l;n++)o[n]=((G=0|n*e)&_)<<3|7&G;for(m=0;m<a;m++)for(P=s*((G=0|m*t)&_)|(7&G)<<3,n=0;n<l;n++)U[L]=F[P+o[n]],L+=M}var S=this.decodeTransform;if(S)for(C=0;C<j;)for(G=0,O=0;G<M;G++,C++,O+=2)U[C]=(U[C]*S[O]>>8)+S[O+1];return U},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(l){for(var a,c,e,t=0,s=l.length;t<s;t+=3)c=l[t+1],l[t]=(a=l[t])-179.456+1.402*(e=l[t+2]),l[t+1]=a+135.459-.344*c-.714*e,l[t+2]=a-226.816+1.772*c;return l},_convertYcckToRgb:function(l){for(var a,c,e,t,s=0,n=0,m=l.length;n<m;n+=4)l[s++]=(c=l[n+1])*(-660635669420364e-19*c+.000437130475926232*(e=l[n+2])-54080610064599e-18*(a=l[n])+.00048449797120281*(t=l[n+3])-.154362151871126)-122.67195406894+e*(-.000957964378445773*e+.000817076911346625*a-.00477271405408747*t+1.53380253221734)+a*(.000961250184130688*a-.00266257332283933*t+.48357088451265)+t*(-.000336197177618394*t+.484791561490776),l[s++]=107.268039397724+c*(219927104525741e-19*c-.000640992018297945*e+.000659397001245577*a+.000426105652938837*t-.176491792462875)+e*(-.000778269941513683*e+.00130872261408275*a+.000770482631801132*t-.151051492775562)+a*(.00126935368114843*a-.00265090189010898*t+.25802910206845)+t*(-.000318913117588328*t-.213742400323665),l[s++]=c*(-.000570115196973677*c-263409051004589e-19*e+.0020741088115012*a-.00288260236853442*t+.814272968359295)-20.810012546947+e*(-153496057440975e-19*e-.000132689043961446*a+.000560833691242812*t-.195152027534049)+a*(.00174418132927582*a-.00255243321439347*t+.116935020465145)+t*(-.000343531996510555*t+.24165260232407);return l},_convertYcckToCmyk:function(l){for(var a,c,e,t=0,s=l.length;t<s;t+=4)c=l[t+1],l[t]=434.456-(a=l[t])-1.402*(e=l[t+2]),l[t+1]=119.541-a+.344*c+.714*e,l[t+2]=481.816-a-1.772*c;return l},_convertCmykToRgb:function(l){for(var a,c,e,t,s=0,n=1/255,m=0,C=l.length;m<C;m+=4)l[s++]=255+(a=l[m]*n)*(-4.387332384609988*a+54.48615194189176*(c=l[m+1]*n)+18.82290502165302*(e=l[m+2]*n)+212.25662451639585*(t=l[m+3]*n)-285.2331026137004)+c*(1.7149763477362134*c-5.6096736904047315*e-17.873870861415444*t-5.497006427196366)+e*(-2.5217340131683033*e-21.248923337353073*t+17.5119270841813)-t*(21.86122147463605*t+189.48180835922747),l[s++]=255+a*(8.841041422036149*a+60.118027045597366*c+6.871425592049007*e+31.159100130055922*t-79.2970844816548)+c*(-15.310361306967817*c+17.575251261109482*e+131.35250912493976*t-190.9453302588951)+e*(4.444339102852739*e+9.8632861493405*t-24.86741582555878)-t*(20.737325471181034*t+187.80453709719578),l[s++]=255+a*(.8842522430003296*a+8.078677503112928*c+30.89978309703729*e-.23883238689178934*t-14.183576799673286)+c*(10.49593273432072*c+63.02378494754052*e+50.606957656360734*t-112.23884253719248)+e*(.03296041114873217*e+115.60384449646641*t-193.58209356861505)-t*(22.33816807309886*t+180.12613974708367);return l},getData:function(l,a,c){if(this.numComponents>4)throw new it("Unsupported color mode");var e=this._getLinearizedBlockData(l,a);if(1===this.numComponents&&c){for(var t=e.length,s=new Uint8ClampedArray(3*t),n=0,m=0;m<t;m++){var C=e[m];s[n++]=C,s[n++]=C,s[n++]=C}return s}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(e);if(4===this.numComponents){if(this._isColorConversionNeeded())return c?this._convertYcckToRgb(e):this._convertYcckToCmyk(e);if(c)return this._convertCmykToRgb(e)}return e}},tt}())&&(ct.exports=z);const yt=(0,H.g)(bt.exports)},34022:(St,wt,Z)=>{Z.d(wt,{Z:()=>yt});var ct,ht,z,H=Z(1719),bt={exports:{}};ht=bt,ct=function(){function it(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return it.prototype={ensureBuffer:function(r){var dt=this.buffer,et=dt?dt.byteLength:0;if(r<et)return dt;for(var ot=512;ot<r;)ot<<=1;for(var Q=new Uint8Array(ot),B=0;B<et;++B)Q[B]=dt[B];return this.buffer=Q},getByte:function(){for(var r=this.pos;this.bufferLength<=r;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(r){var dt=this.pos;if(r){this.ensureBuffer(dt+r);for(var et=dt+r;!this.eof&&this.bufferLength<et;)this.readBlock();var ot=this.bufferLength;et>ot&&(et=ot)}else{for(;!this.eof;)this.readBlock();et=this.bufferLength}return this.pos=et,this.buffer.subarray(dt,et)},lookChar:function(){for(var r=this.pos;this.bufferLength<=r;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var r=this.pos;this.bufferLength<=r;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(r,dt,et){for(var ot=r+dt;this.bufferLength<=ot&&!this.eof;)this.readBlock();return new Stream(this.buffer,r,dt,et)},skip:function(r){r||(r=1),this.pos+=r},reset:function(){this.pos=0}},it}(),void 0!==(z=function(){if(!self||!self.Uint32Array)return null;var it=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),dt=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),et=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],ot=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function Q(J){throw new Error(J)}function B(J){var W=0,nt=J[W++],tt=J[W++];-1!=nt&&-1!=tt||Q("Invalid header in flate stream"),8!=(15&nt)&&Q("Unknown compression method in flate stream"),((nt<<8)+tt)%31!=0&&Q("Bad FCHECK in flate stream"),32&tt&&Q("FDICT bit set in flate stream"),this.bytes=J,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,ct.call(this)}return(B.prototype=Object.create(ct.prototype)).getBits=function(J){for(var W,nt=this.codeSize,tt=this.codeBuf,g=this.bytes,p=this.bytesPos;nt<J;)void 0===(W=g[p++])&&Q("Bad encoding in flate stream"),tt|=W<<nt,nt+=8;return W=tt&(1<<J)-1,this.codeBuf=tt>>J,this.codeSize=nt-=J,this.bytesPos=p,W},B.prototype.getCode=function(J){for(var W=J[0],nt=J[1],tt=this.codeSize,g=this.codeBuf,p=this.bytes,b=this.bytesPos;tt<nt;){var w;void 0===(w=p[b++])&&Q("Bad encoding in flate stream"),g|=w<<tt,tt+=8}var T=W[g&(1<<nt)-1],y=T>>16,l=65535&T;return(0==tt||tt<y||0==y)&&Q("Bad encoding in flate stream"),this.codeBuf=g>>y,this.codeSize=tt-y,this.bytesPos=b,l},B.prototype.generateHuffmanTable=function(J){for(var W=J.length,nt=0,tt=0;tt<W;++tt)J[tt]>nt&&(nt=J[tt]);for(var g=1<<nt,p=new Uint32Array(g),b=1,w=0,T=2;b<=nt;++b,w<<=1,T<<=1)for(var y=0;y<W;++y)if(J[y]==b){var l=0,a=w;for(tt=0;tt<b;++tt)l=l<<1|1&a,a>>=1;for(tt=l;tt<g;tt+=T)p[tt]=b<<16|y;++w}return[p,nt]},B.prototype.readBlock=function(){function J(o,_,S,A,I){for(var X=o.getBits(S)+A;X-- >0;)_[T++]=I}var W=this.getBits(3);if(1&W&&(this.eof=!0),0!=(W>>=1)){var nt,tt;if(1==W)nt=et,tt=ot;else if(2==W){for(var g=this.getBits(5)+257,p=this.getBits(5)+1,b=this.getBits(4)+4,w=Array(it.length),T=0;T<b;)w[it[T++]]=this.getBits(3);for(var y=this.generateHuffmanTable(w),l=0,a=(T=0,g+p),c=new Array(a);T<a;){var e=this.getCode(y);16==e?J(this,c,2,3,l):17==e?J(this,c,3,3,l=0):18==e?J(this,c,7,11,l=0):c[T++]=l=e}nt=this.generateHuffmanTable(c.slice(0,g)),tt=this.generateHuffmanTable(c.slice(g,a))}else Q("Unknown block type in flate stream");for(var t=(M=this.buffer)?M.length:0,s=this.bufferLength;;){var n=this.getCode(nt);if(n<256)s+1>=t&&(t=(M=this.ensureBuffer(s+1)).length),M[s++]=n;else{if(256==n)return void(this.bufferLength=s);var m=(n=r[n-=257])>>16;m>0&&(m=this.getBits(m)),l=(65535&n)+m,n=this.getCode(tt),(m=(n=dt[n])>>16)>0&&(m=this.getBits(m));var C=(65535&n)+m;s+l>=t&&(t=(M=this.ensureBuffer(s+l)).length);for(var G=0;G<l;++G,++s)M[s]=M[s-C]}}}else{var O,P=this.bytes,F=this.bytesPos;void 0===(O=P[F++])&&Q("Bad block header in flate stream");var K=O;void 0===(O=P[F++])&&Q("Bad block header in flate stream"),K|=O<<8,void 0===(O=P[F++])&&Q("Bad block header in flate stream");var E=O;void 0===(O=P[F++])&&Q("Bad block header in flate stream"),(E|=O<<8)!=(65535&~K)&&Q("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var L=this.bufferLength,M=this.ensureBuffer(L+K),j=L+K;this.bufferLength=j;for(var U=L;U<j;++U){if(void 0===(O=P[F++])){this.eof=!0;break}M[U]=O}this.bytesPos=F}},B}())&&(ht.exports=z);const yt=(0,H.g)(bt.exports)},84727:(St,wt,Z)=>{Z.d(wt,{Z:()=>l});var ot,H=Z(17626),ct=Z(86810),ht=Z(58817),z=Z(77712),it=(Z(8314),Z(63290),Z(76898)),r=Z(2004),dt=Z(65234);function Q(a){return a=Number(a),isNaN(a)?void 0:a}Z(4619);let B=ot=class extends ct.wq{constructor(){super(...arguments),this.name=null,this.minWavelength=void 0,this.maxWavelength=void 0,this.radianceBias=void 0,this.radianceGain=void 0,this.reflectanceBias=void 0,this.reflectanceGain=void 0,this.solarIrradiance=void 0}clone(){return new ot({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};(0,H._)([(0,z.Cb)({json:{name:"BandName",write:!0}})],B.prototype,"name",void 0),(0,H._)([(0,z.Cb)({json:{name:"WavelengthMin",read:{reader:Q},write:!0}})],B.prototype,"minWavelength",void 0),(0,H._)([(0,z.Cb)({json:{name:"WavelengthMax",read:{reader:Q},write:!0}})],B.prototype,"maxWavelength",void 0),(0,H._)([(0,z.Cb)({json:{name:"RadianceBias",read:{reader:Q},write:!0}})],B.prototype,"radianceBias",void 0),(0,H._)([(0,z.Cb)({json:{name:"RadianceGain",read:{reader:Q},write:!0}})],B.prototype,"radianceGain",void 0),(0,H._)([(0,z.Cb)({json:{name:"ReflectanceBias",read:{reader:Q},write:!0}})],B.prototype,"reflectanceBias",void 0),(0,H._)([(0,z.Cb)({json:{name:"ReflectanceGain",read:{reader:Q},write:!0}})],B.prototype,"reflectanceGain",void 0),(0,H._)([(0,z.Cb)({json:{name:"SolarIrradiance",read:{reader:Q},write:!0}})],B.prototype,"solarIrradiance",void 0),B=ot=(0,H._)([(0,it.j)("esri.layers.support.RasterBandInfo")],B);const J=B;var tt,W=Z(68653),nt=Z(99433);function g(a){return a=Number(a),isNaN(a)?void 0:a}let p=tt=class extends ct.wq{constructor(){super(...arguments),this.acquisitionDate=void 0,this.cloudCover=void 0,this.productName=void 0,this.sensorName=null,this.sensorAzimuth=void 0,this.sensorElevation=void 0,this.sunAzimuth=void 0,this.sunElevation=void 0}readAcquisitionDate(a){return new Date(a)}writeAcquisitionDate(a,c){c.AcquisitionDate=a.getTime()}clone(){return new tt({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};(0,H._)([(0,z.Cb)({json:{name:"AcquisitionDate",write:!0}})],p.prototype,"acquisitionDate",void 0),(0,H._)([(0,W.r)("acquisitionDate")],p.prototype,"readAcquisitionDate",null),(0,H._)([(0,nt.c)("acquisitionDate")],p.prototype,"writeAcquisitionDate",null),(0,H._)([(0,z.Cb)({json:{name:"CloudCover",read:{reader:g},write:!0}})],p.prototype,"cloudCover",void 0),(0,H._)([(0,z.Cb)({json:{name:"ProductName",write:!0}})],p.prototype,"productName",void 0),(0,H._)([(0,z.Cb)({json:{name:"SensorName",write:!0}})],p.prototype,"sensorName",void 0),(0,H._)([(0,z.Cb)({json:{name:"SensorAzimuth",read:{reader:g},write:!0}})],p.prototype,"sensorAzimuth",void 0),(0,H._)([(0,z.Cb)({json:{name:"SensorElevation",read:{reader:g},write:!0}})],p.prototype,"sensorElevation",void 0),(0,H._)([(0,z.Cb)({json:{name:"SunAzimuth",read:{reader:g},write:!0}})],p.prototype,"sunAzimuth",void 0),(0,H._)([(0,z.Cb)({json:{name:"SunElevation",read:{reader:g},write:!0}})],p.prototype,"sunElevation",void 0),p=tt=(0,H._)([(0,it.j)("esri.layers.support.RasterSensorInfo")],p);const b=p;var T,w=Z(27497);let y=T=class extends ct.wq{constructor(a){super(a),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get bandInfos(){const a=this.keyProperties.BandProperties,{bandCount:c}=this;if(!a?.length||a.length<c){const t=[];for(let s=1;s<=c;s++)t.push(new J({name:"band_"+s}));return t}const e=a.map(t=>J.fromJSON(t));for(let t=0;t<e.length;t++)e[t].name=e[t].name||"band_"+(t+1);return e}get dataType(){const a=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===a?"standard-time":a}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(a){a&&this._set("nativeExtent",a)}get nativePixelSize(){if(null==this.transform||!this.transform.affectsPixelSize)return this.pixelSize;const a=this.nativeExtent;return{x:a.width/this.width,y:a.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}get sensorInfo(){if(this.keyProperties?.SensorName)return b.fromJSON(this.keyProperties)}clone(){return new T({attributeTable:(0,ht.d9)(this.attributeTable),bandCount:this.bandCount,colormap:(0,ht.d9)(this.colormap),extent:(0,ht.d9)(this.extent),nativePixelSize:(0,ht.d9)(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:(0,ht.d9)(this.histograms),keyProperties:(0,ht.d9)(this.keyProperties),multidimensionalInfo:(0,ht.d9)(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:(0,ht.d9)(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:(0,ht.d9)(this.spatialReference),statistics:(0,ht.d9)(this.statistics),storageInfo:(0,ht.d9)(this.storageInfo),transform:(0,ht.d9)(this.transform)})}};(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"attributeTable",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"bandCount",void 0),(0,H._)([(0,z.Cb)({readOnly:!0})],y.prototype,"bandInfos",null),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"colormap",void 0),(0,H._)([(0,z.Cb)({type:String,readOnly:!0})],y.prototype,"dataType",null),(0,H._)([(0,z.Cb)({type:r.Z,json:{write:!0}})],y.prototype,"extent",void 0),(0,H._)([(0,z.Cb)({type:r.Z,json:{write:!0}})],y.prototype,"nativeExtent",null),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"nativePixelSize",null),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"format",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"height",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"width",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"hasMultidimensionalTranspose",null),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"histograms",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"keyProperties",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"multidimensionalInfo",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"noDataValue",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"pixelSize",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"pixelType",void 0),(0,H._)([(0,z.Cb)()],y.prototype,"isPseudoSpatialReference",void 0),(0,H._)([(0,z.Cb)({readOnly:!0})],y.prototype,"sensorInfo",null),(0,H._)([(0,z.Cb)({type:dt.Z,json:{write:!0}})],y.prototype,"spatialReference",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"statistics",void 0),(0,H._)([(0,z.Cb)({type:w.Z,json:{write:!0}})],y.prototype,"storageInfo",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],y.prototype,"transform",void 0),y=T=(0,H._)([(0,it.j)("esri.layers.support.RasterInfo")],y);const l=y},27497:(St,wt,Z)=>{Z.d(wt,{Z:()=>ot});var dt,H=Z(17626),ct=Z(86810),ht=Z(58817),z=Z(77712),it=(Z(8314),Z(63290),Z(76898)),r=Z(72642);let et=dt=class extends ct.wq{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new dt({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:(0,ht.d9)(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:(0,ht.d9)(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:(0,ht.d9)(this.tileInfo),transposeInfo:(0,ht.d9)(this.transposeInfo),blockBoundary:(0,ht.d9)(this.blockBoundary)})}};(0,H._)([(0,z.Cb)({type:Number,json:{write:!0}})],et.prototype,"blockWidth",void 0),(0,H._)([(0,z.Cb)({type:Number,json:{write:!0}})],et.prototype,"blockHeight",void 0),(0,H._)([(0,z.Cb)({type:String,json:{write:!0}})],et.prototype,"compression",void 0),(0,H._)([(0,z.Cb)({type:r.Z,json:{write:!0}})],et.prototype,"origin",void 0),(0,H._)([(0,z.Cb)({type:Number,json:{write:!0}})],et.prototype,"firstPyramidLevel",void 0),(0,H._)([(0,z.Cb)({type:Number,json:{write:!0}})],et.prototype,"maximumPyramidLevel",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],et.prototype,"pyramidResolutions",void 0),(0,H._)([(0,z.Cb)({type:Number,json:{write:!0}})],et.prototype,"pyramidScalingFactor",void 0),(0,H._)([(0,z.Cb)({type:Number,json:{write:!0}})],et.prototype,"pyramidBlockWidth",void 0),(0,H._)([(0,z.Cb)({type:Number,json:{write:!0}})],et.prototype,"pyramidBlockHeight",void 0),(0,H._)([(0,z.Cb)({type:Boolean,json:{write:!0}})],et.prototype,"isVirtualTileInfo",void 0),(0,H._)([(0,z.Cb)({json:{write:!0}})],et.prototype,"tileInfo",void 0),(0,H._)([(0,z.Cb)()],et.prototype,"transposeInfo",void 0),(0,H._)([(0,z.Cb)()],et.prototype,"blockBoundary",void 0),et=dt=(0,H._)([(0,it.j)("esri.layers.support.RasterStorageInfo")],et);const ot=et},15365:(St,wt,Z)=>{function H(ct,ht){let z=0,bt="",yt=0,it=0;const r=ct.length;for(;z<r;)it=ct[z++],yt=it>>4,yt<8?yt=1:15===yt?(yt=4,it=(7&it)<<18|(63&ct[z++])<<12|(63&ct[z++])<<6|63&ct[z++]):14===yt?(yt=3,it=(15&it)<<12|(63&ct[z++])<<6|63&ct[z++]):(yt=2,it=(31&it)<<6|63&ct[z++]),(0!==it||ht)&&(bt+=String.fromCharCode(it));return bt}Z.d(wt,{f:()=>H})},68786:(St,wt,Z)=>{Z.d(wt,{Jx:()=>et,zD:()=>z});var H=Z(54346);const ct=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let ht=null;function z(){return ht||(ht=Z.e(2045).then(Z.bind(Z,72045)).then(Q=>Q.l).then(({default:Q})=>Q({locateFile:B=>(0,H.V)(`esri/layers/support/rasterFormats/${B}`)})).then(Q=>{!function r(Q){const{_malloc:B,_free:J,_lerc_getBlobInfo:W,_lerc_getDataRanges:nt,_lerc_decode_4D:tt,asm:g}=Q;let p;const b=Object.values(g).find(T=>T&&"buffer"in T&&T.buffer===Q.HEAPU8.buffer),w=T=>{const y=T.map(e=>function yt(Q){return 16+(Q>>3<<3)}(e)),l=y.reduce((e,t)=>e+t),a=B(l);p=new Uint8Array(b.buffer);let c=y[0];y[0]=a;for(let e=1;e<y.length;e++){const t=y[e];y[e]=y[e-1]+c,c=t}return y};bt.getBlobInfo=T=>{const a=new Uint8Array(48),c=new Uint8Array(24),[e,t,s]=w([T.length,a.length,c.length]);p.set(T,e),p.set(a,t),p.set(c,s);let n=W(e,T.length,t,s,12,3);if(n)throw J(e),new Error(`lerc-getBlobInfo: error code is ${n}`);p=new Uint8Array(b.buffer),it(p,t,a),it(p,s,c);const m=new Uint32Array(a.buffer),C=new Float64Array(c.buffer),[G,O,,P,F,K,E,L,M,j,U]=m,o={version:G,depthCount:j,width:P,height:F,validPixelCount:E,bandCount:K,blobSize:L,maskCount:M,dataType:O,minValue:C[0],maxValue:C[1],maxZerror:C[2],statistics:[],bandCountWithNoData:U};if(U&&j>1)return J(e),o;if(1===j&&1===K)return J(e),o.statistics.push({minValue:C[0],maxValue:C[1]}),o;const _=j*K*8,S=new Uint8Array(_),A=new Uint8Array(_);let I=e,X=0,f=0,i=!1;if(p.byteLength<e+2*_?(J(e),i=!0,[I,X,f]=w([T.length,_,_]),p.set(T,I)):[X,f]=w([_,_]),p.set(S,X),p.set(A,f),n=nt(I,T.length,j,K,X,f),n)throw J(I),i||J(X),new Error(`lerc-getDataRanges: error code is ${n}`);p=new Uint8Array(b.buffer),it(p,X,S),it(p,f,A);const u=new Float64Array(S.buffer),h=new Float64Array(A.buffer),v=o.statistics;for(let d=0;d<K;d++)if(j>1){const x=u.slice(d*j,(d+1)*j),R=h.slice(d*j,(d+1)*j),N=Math.min.apply(null,x),D=Math.max.apply(null,R);v.push({minValue:N,maxValue:D,depthStats:{minValues:x,maxValues:R}})}else v.push({minValue:u[d],maxValue:h[d]});return J(I),i||J(X),o},bt.decode=(T,y)=>{const{maskCount:l,depthCount:a,bandCount:c,width:e,height:t,dataType:s,bandCountWithNoData:n}=y,m=ct[s],C=e*t,G=new Uint8Array(C*c),P=new Uint8Array(C*a*c*m.size),F=new Uint8Array(c),K=new Uint8Array(8*c),[E,L,M,j,U]=w([T.length,G.length,P.length,F.length,K.length]);p.set(T,E),p.set(G,L),p.set(P,M),p.set(F,j),p.set(K,U);const o=tt(E,T.length,l,L,a,e,t,c,s,M,j,U);if(o)throw J(E),new Error(`lerc-decode: error code is ${o}`);p=new Uint8Array(b.buffer),it(p,M,P),it(p,L,G);let _=null;if(n){it(p,j,F),it(p,U,K),_=[];const S=new Float64Array(K.buffer);for(let A=0;A<F.length;A++)_.push(F[A]?S[A]:null)}return J(E),{data:P,maskData:G,noDataValues:_}}}(Q)}),ht)}const bt={getBlobInfo:null,decode:null};function it(Q,B,J){J.set(Q.slice(B,B+J.length))}function dt(Q,B,J,W,nt){if(J<2)return Q;const tt=new W(B*J);if(nt)for(let g=0,p=0;g<B;g++)for(let b=0,w=g;b<J;b++,w+=B)tt[w]=Q[p++];else for(let g=0,p=0;g<B;g++)for(let b=0,w=g;b<J;b++,w+=B)tt[p++]=Q[w];return tt}function et(Q,B={}){const J=B.inputOffset??0,W=Q instanceof Uint8Array?Q.subarray(J):new Uint8Array(Q,J),nt=bt.getBlobInfo(W),{data:tt,maskData:g,noDataValues:p}=bt.decode(W,nt),{width:b,height:w,bandCount:T,depthCount:y,dataType:l,maskCount:a,statistics:c}=nt,e=ct[l],t=new e.ctor(tt.buffer),s=[],n=[],m=b*w,C=m*y;for(let E=0;E<T;E++){const L=t.subarray(E*C,(E+1)*C);if(B.returnInterleaved)s.push(L);else{const M=dt(L,m,y,e.ctor,!0);s.push(M)}n.push(g.subarray(E*C,(E+1)*C))}const G=0===a?null:1===a?n[0]:new Uint8Array(m);if(a>1){G.set(n[0]);for(let E=1;E<n.length;E++){const L=n[E];for(let M=0;M<m;M++)G[M]=G[M]&L[M]}}const{noDataValue:O}=B;if(a>0&&null!=O&&e.range[0]<=O&&e.range[1]>=O)for(let E=0;E<T;E++){const L=s[E],M=n[E]||G;for(let j=0;j<m;j++)0===M[j]&&(L[j]=O)}const F=a===T&&T>1?n:null,{pixelType:K}=e;return{width:b,height:w,bandCount:T,pixelType:K,depthCount:y,statistics:c,pixels:s,mask:G,bandMasks:F,noDataValues:p}}},94194:(St,wt,Z)=>{function ct(){const yt=[];for(let it=0;it<=257;it++)yt[it]=[it];return yt}function ht(yt,it){for(let r=0;r<it.length;r++)yt.push(it[r])}Z.d(wt,{J:()=>bt});const z=new Set;function bt(yt,it,r,dt=!0){const et=function H(yt,it,r,dt=!0){if(it%4!=0||r%4!=0){const et=new ArrayBuffer(4*Math.ceil(r/4)),ot=new Uint8Array(et),Q=new Uint8Array(yt,it,r);if(dt)for(let B=0;B<ot.length;B+=4)ot[B]=Q[B+3],ot[B+1]=Q[B+2],ot[B+2]=Q[B+1],ot[B+3]=Q[B];else ot.set(Q);return new Uint32Array(ot.buffer)}if(dt){const et=new Uint8Array(yt,it,r),ot=new Uint8Array(et.length);for(let Q=0;Q<ot.length;Q+=4)ot[Q]=et[Q+3],ot[Q+1]=et[Q+2],ot[Q+2]=et[Q+1],ot[Q+3]=et[Q];return new Uint32Array(ot.buffer)}return new Uint32Array(yt,it,r/4)}(yt,it,r,dt);let ot=9,Q=ct(),B=32,J=Q.length,W=[],nt=1,tt=et[0],g=0;const p=et.length,b=8*(4*p-r),w=[];for(;null!=tt;){if(B>=ot)B-=ot,g=tt>>>32-ot,tt<<=ot;else{g=tt>>>32-B,tt=et[nt++];const y=ot-B;B=32-y,g=(g<<y)+(tt>>>B),tt<<=y}if(257===g)break;if(256===g){ot=9,Q=ct(),J=Q.length,W=[];continue}const T=Q[g];if(null==T){if(g>Q.length)throw new Error("data integrity issue: code does not exist on code page");W.push(W[0]),Q[J++]=W.slice(),ht(w,W)}else ht(w,T),W.push(T[0]),W.length>1&&(Q[J++]=W.slice()),W=T.slice();if(z.has(J)&&ot++,0===B&&(tt=et[nt++],B=32),nt>p||nt===p&&B<=b)break}return new Uint8Array(w)}z.add(511),z.add(1023),z.add(2047),z.add(4095),z.add(8191)},8614:(St,wt,Z)=>{Z.d(wt,{J:()=>M,y:()=>L});var H=Z(15861),ct=Z(26584),ht=Z(62208),z=Z(25688),bt=Z(10699),yt=Z(34022);class it{constructor(o){this._canvas=null,this._ctx=null,o&&(this._canvas=o.canvas,this._ctx=o.ctx||o.canvas&&o.canvas.getContext("2d"))}decode(o,_,S){if(!o||o.byteLength<10)throw new ct.Z("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:A=0,height:I=0,format:X}=_;const{applyJpegMask:f}=_;if(f&&(!A||!I))throw new ct.Z("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((i,u)=>{let h=null;"jpg"===X&&f&&(h=it._getMask(o,{width:A,height:I}));const v=new Blob([new Uint8Array(o)],{type:"image/"+X=="jpg"?"jpeg":X}),d=URL.createObjectURL(v),x=new Image;let R;x.src=d,x.onload=()=>{if(URL.revokeObjectURL(d),(0,bt.Hc)(S))return void u((0,bt.zE)());A=x.width,I=x.height,this._canvas&&this._ctx?(this._canvas.width===A&&this._canvas.height===I||(this._canvas.width=A,this._canvas.height=I),this._ctx.clearRect(0,0,A,I)):(this._canvas=document.createElement("canvas"),this._canvas.width=A,this._canvas.height=I,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(x,0,0);const N=this._ctx.getImageData(0,0,A,I);let D;if(R=N.data,_.renderOnCanvas){if(h)for(D=0;D<h.length;D++)R[4*D+3]=h[D]?255:0;return this._ctx.putImageData(N,0,0),void i(null)}const q=A*I,at=new Uint8Array(q),gt=new Uint8Array(q),st=new Uint8Array(q);if(h)for(D=0;D<q;D++)at[D]=R[4*D],gt[D]=R[4*D+1],st[D]=R[4*D+2];else for(h=new Uint8Array(q),D=0;D<q;D++)at[D]=R[4*D],gt[D]=R[4*D+1],st[D]=R[4*D+2],h[D]=R[4*D+3];i({width:A,height:I,pixels:[at,gt,st],mask:h,pixelType:"u8"})},x.onerror=()=>{URL.revokeObjectURL(d),u("cannot load image")}})}static _getMask(o,_){let S=null;try{const A=new Uint8Array(o),I=Math.ceil(A.length/2);let X=0;const f=A.length-2;for(X=I;X<f&&(255!==A[X]||217!==A[X+1]);X++);if(X+=2,X<A.length-1){const i=new yt.Z(A.subarray(X)).getBytes();S=new Uint8Array(_.width*_.height);let u=0;for(let h=0;h<i.length;h++)for(let v=7;v>=0;v--)S[u++]=i[h]>>v&1}}catch{}return S}}var r=Z(89890);class dt{static decode(o,_=!1){const S=new Uint8Array(o),A=new r.J;A.parse(S);const{width:I,height:X,numComponents:f,eof:i}=A,u=A.getData(I,X,!0),h=I*X;let v,d=null,x=0,R=0,N=0;if(!_&&i<S.length-1)try{const D=new yt.Z(S.subarray(i)).getBytes();d=new Uint8Array(h);let q=0;for(x=0;x<D.length;x++)for(N=7;N>=0;N--)d[q++]=D[x]>>N&1}catch{}if(1===f&&u.length===I*X){const D=new Uint8Array(u.buffer);v=[D,D,D]}else{for(v=[],x=0;x<3;x++)v.push(new Uint8Array(h));for(N=0,R=0;R<h;R++)for(x=0;x<3;x++)v[x][R]=u[N++]}return{width:I,height:X,pixels:v,mask:d}}}var et=Z(68786),ot=Z(94194),Q=Z(67313);const B=(U,o)=>Math.floor(U.byteLength/(o.width*o.height*J(o.pixelType))),J=U=>{let o=1;switch(U){case Uint8Array:case Int8Array:o=1;break;case Uint16Array:case Int16Array:o=2;break;case Uint32Array:case Int32Array:case Float32Array:o=4;break;case Float64Array:o=8}return o};class nt{static decode(o,_){const S=_.pixelType,A=[],I=_.width*_.height,X=B(o,_),{bandIds:f,format:i}=_,u=f?.length||B(o,_),h=o.byteLength-o.byteLength%(I*J(S)),v=new S(o,0,I*X);let d,x,R,N,D=null;if("bip"===i)for(d=0;d<u;d++){for(R=new S(I),N=f?f[d]:d,x=0;x<I;x++)R[x]=v[x*X+N];A.push(R)}else if("bsq"===i)for(d=0;d<u;d++)N=f?f[d]:d,A.push(v.subarray(N*I,(N+1)*I));return h<o.byteLength-1&&(D=((U,o)=>{if(8*U.byteLength<o)return null;const _=new Uint8Array(U,0,Math.ceil(o/8)),S=new Uint8Array(o);let A=0,I=0,X=0,f=0;for(X=0;X<_.length-1;X++)for(I=_[X],f=7;f>=0;f--)S[A++]=I>>f&1;for(f=7;A<o-1;)I=_[_.length-1],S[A++]=I>>f&1,f--;return S})(o.slice(h),I)),{pixels:A,mask:D}}}var tt=Z(93122),g=Z(44853),p=function(U){var A,I,X;function f(i){var u,v,d,x,R,N,D,q,at,gt,st,Y;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},x=null;;){switch(u=this.readUInt32(),D=function(){var lt,pt;for(pt=[],lt=0;lt<4;++lt)pt.push(String.fromCharCode(this.data[this.pos++]));return pt}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":x&&this.animation.frames.push(x),this.pos+=4,x={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),v=this.readUInt16()||100,x.delay=1e3*d/v,x.disposeOp=this.data[this.pos++],x.blendOp=this.data[this.pos++],x.data=[];break;case"IDAT":case"fdAT":for("fdAT"===D&&(this.pos+=4,u-=4),i=x?.data||this.imgData,gt=0;0<=u?gt<u:gt>u;0<=u?++gt:--gt)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(u),(q=255-this.transparency.indexed.length)>0)for(st=0;0<=q?st<q:st>q;0<=q?++st:--st)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":R=(at=this.read(u)).indexOf(0),N=String.fromCharCode.apply(String,at.slice(0,R)),this.text[N]=String.fromCharCode.apply(String,at.slice(R+1));break;case"IEND":return x&&this.animation.frames.push(x),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(Y=this.colorType)||6===Y,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return f.load=function(i,u,h){var v;return"function"==typeof u&&(h=u),(v=new XMLHttpRequest).open("GET",i,!0),v.responseType="arraybuffer",v.onload=function(){var d;return d=new f(new Uint8Array(v.response||v.mozResponseArrayBuffer)),"function"==typeof u?.getContext&&d.render(u),"function"==typeof h?h(d):void 0},v.send(null)},f.prototype.read=function(i){var u,h;for(h=[],u=0;0<=i?u<i:u>i;0<=i?++u:--u)h.push(this.data[this.pos++]);return h},f.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},f.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},f.prototype.decodePixels=function(i){var u,h,v,d,x,R,N,D,at,gt,st,Y,lt,pt,k,V,$,rt,ut,mt,ft,Ct;if(null==i&&(i=this.imgData),0===i.length)return new Uint8Array(0);for(i=(i=new yt.Z(i)).getBytes(),k=(st=this.pixelBitlength/8)*this.width,Y=new Uint8Array(k*this.height),R=i.length,pt=0,lt=0,h=0;lt<R;){switch(i[lt++]){case 0:for(d=rt=0;rt<k;d=rt+=1)Y[h++]=i[lt++];break;case 1:for(d=ut=0;ut<k;d=ut+=1)u=i[lt++],x=d<st?0:Y[h-st],Y[h++]=(u+x)%256;break;case 2:for(d=mt=0;mt<k;d=mt+=1)u=i[lt++],v=(d-d%st)/st,Y[h++]=((V=pt&&Y[(pt-1)*k+v*st+d%st])+u)%256;break;case 3:for(d=ft=0;ft<k;d=ft+=1)u=i[lt++],v=(d-d%st)/st,x=d<st?0:Y[h-st],V=pt&&Y[(pt-1)*k+v*st+d%st],Y[h++]=(u+Math.floor((x+V)/2))%256;break;case 4:for(d=Ct=0;Ct<k;d=Ct+=1)u=i[lt++],v=(d-d%st)/st,0===pt?V=$=0:(V=Y[(pt-1)*k+v*st+d%st],$=v&&Y[(pt-1)*k+(v-1)*st+d%st]),N=(x=d<st?0:Y[h-st])+V-$,D=Math.abs(N-x),at=Math.abs(N-V),gt=Math.abs(N-$),Y[h++]=(u+(D<=at&&D<=gt?x:at<=gt?V:$))%256;break;default:throw new Error("Invalid filter algorithm: "+i[lt-1])}pt++}return Y},f.prototype.decodePalette=function(){var i,u,h,v,d,x,R,N,D;for(h=this.palette,x=this.transparency.indexed||[],d=new Uint8Array((x.length||0)+h.length),v=0,i=0,u=R=0,N=h.length;R<N;u=R+=3)d[v++]=h[u],d[v++]=h[u+1],d[v++]=h[u+2],d[v++]=null!=(D=x[i++])?D:255;return d},f.prototype.copyToImageData=function(i,u){var h,v,d,x,R,N,D,q,at,gt,st;if(v=this.colors,at=null,h=this.hasAlphaChannel,this.palette.length&&(at=null!=(st=this._decodedPalette)?st:this._decodedPalette=this.decodePalette(),v=4,h=!0),q=(d=i.data||i).length,R=at||u,x=N=0,1===v)for(;x<q;)D=at?4*u[x/4]:N,gt=R[D++],d[x++]=gt,d[x++]=gt,d[x++]=gt,d[x++]=h?R[D++]:this.transparency.grayscale&&this.transparency.grayscale===gt?0:255,N=D;else for(;x<q;)D=at?4*u[x/4]:N,d[x++]=R[D++],d[x++]=R[D++],d[x++]=R[D++],d[x++]=h?R[D++]:this.transparency.rgb&&this.transparency.rgb[1]===R[D-3]&&this.transparency.rgb[3]===R[D-2]&&this.transparency.rgb[5]===R[D-1]?0:255,N=D},f.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i},I=U.document&&U.document.createElement("canvas"),X=I&&I.getContext("2d"),A=function(i){var u;return X.width=i.width,X.height=i.height,X.clearRect(0,0,i.width,i.height),X.putImageData(i,0,0),(u=new Image).src=I.toDataURL(),u},f.prototype.decodeFrames=function(i){var u,h,v,d,x,R,N,D;if(this.animation){for(D=[],h=x=0,R=(N=this.animation.frames).length;x<R;h=++x)v=i.createImageData((u=N[h]).width,u.height),d=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(v,d),u.imageData=v,D.push(u.image=A(v));return D}},f.prototype.renderFrame=function(i,u){var h,v,d;return h=(v=this.animation.frames)[u],d=v[u-1],0===u&&i.clearRect(0,0,this.width,this.height),1===d?.disposeOp?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):2===d?.disposeOp&&i.putImageData(d.imageData,d.xOffset,d.yOffset),0===h.blendOp&&i.clearRect(h.xOffset,h.yOffset,h.width,h.height),i.drawImage(h.image,h.xOffset,h.yOffset)},f.prototype.animate=function(i){var u,h,v,d,x,R,N=this;return h=0,d=(R=this.animation).numFrames,v=R.frames,x=R.numPlays,(u=function(){var D,q;if(D=h++%d,q=v[D],N.renderFrame(i,D),d>1&&h/d<x)return N.animation._timeout=setTimeout(u,q.delay)})()},f.prototype.stopAnimation=function(){var i;return clearTimeout(null!=(i=this.animation)?i._timeout:void 0)},f.prototype.render=function(i){var u,h;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,u=i.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(h=u.createImageData(this.width,this.height),this.copyToImageData(h,this.decodePixels()),u.putImageData(h,0,0))},f}(self);const b=new Set(["jpg","png","bmp","gif"]);function w(U,o){return T.apply(this,arguments)}function T(){return(T=(0,H.Z)(function*(U,o){if(!g.f)throw new ct.Z("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield(0,et.zD)();const{offset:_}=o,{width:S,height:A,pixelType:I,statistics:X,depthCount:f,noDataValues:i,bandMasks:u,pixels:h,mask:v}=(0,et.Jx)(U,{inputOffset:_,returnInterleaved:o.returnInterleaved}),d=new z.Z({width:S,height:A,pixelType:I.toLowerCase(),pixels:h,mask:v,statistics:X,bandMasks:u,depthCount:f,noDataValues:i});return X?.length||d.updateStatistics(),d})).apply(this,arguments)}function y(U,o){return l.apply(this,arguments)}function l(){return(l=(0,H.Z)(function*(U,o){const _=yield(0,tt.Jx)(U,{...o,noDataValue:null});(0,ht.O3)(_);const S=new z.Z({width:_.width,height:_.height,pixels:_.pixels,pixelType:_.pixelType.toLowerCase(),mask:_.mask,bandMasks:_.bandMasks,statistics:null});return S.updateStatistics(),S})).apply(this,arguments)}function c(){return(c=(0,H.Z)(function*(U,o){const _=yield(0,tt.Uw)(U,o.customOptions),S=new z.Z({width:_.width,height:_.height,pixels:_.pixels,pixelType:_.pixelType.toLowerCase(),mask:_.mask,statistics:null});return S.updateStatistics(),S})).apply(this,arguments)}function e(U,o){const _=o.pixelType||"u8",S=z.Z.getPixelArrayConstructor(_),A="u8"===_?U:new S(U.buffer),I=[],X=o.planes||1;if(1===X)I.push(A);else for(let i=0;i<X;i++){const u=(o.width||1)*(o.height||U.length),h=new S(u);for(let v=0;v<u;v++)h[v]=A[v*X+i];I.push(h)}const f=new z.Z({width:o.width||1,height:o.height||U.length,pixels:I,pixelType:_,statistics:null});return f.updateStatistics(),f}function t(U,o){return e(new yt.Z(new Uint8Array(U)).getBytes(),o)}function s(U,o){return e((0,ot.J)(U,o.offset,o.eof,!o.isInputBigEndian),o)}function m(U,o){const _=dt.decode(U,o.hasNoZlibMask??void 0),S=new z.Z({width:_.width,height:_.height,pixels:_.pixels,pixelType:"U8",mask:_.mask,statistics:null});return S.updateStatistics(),S}function C(U,o){const _=new Uint8Array(U),S=new p(_),{width:A,height:I}=o,X=A*I,f=S.decode();let i,u=0,h=0;const v=new Uint8Array(X);for(u=0;u<X;u++)v[u]=f[4*u+3];const d=new z.Z({width:A,height:I,pixels:[],pixelType:"U8",mask:v,statistics:[]});for(u=0;u<3;u++){for(i=new Uint8Array(X),h=0;h<X;h++)i[h]=f[4*h+u];d.addData({pixels:i})}return d.updateStatistics(),d}function O(){return(O=(0,H.Z)(function*(U,o,_,S){const A=new it,I={applyJpegMask:!1,format:o,..._},X=yield A.decode(U,I,S),f=new z.Z(X);return f.updateStatistics(),f})).apply(this,arguments)}function P(U){if(null==U)throw new ct.Z("rasterCodec:decode","parameter encodeddata is required.");const o=new Uint8Array(U,0,10);let _="";return 255===o[0]&&216===o[1]?_="jpg":137===o[0]&&80===o[1]&&78===o[2]&&71===o[3]?_="png":67===o[0]&&110===o[1]&&116===o[2]&&90===o[3]&&73===o[4]&&109===o[5]&&97===o[6]&&103===o[7]&&101===o[8]&&32===o[9]?_="lerc":76===o[0]&&101===o[1]&&114===o[2]&&99===o[3]&&50===o[4]&&32===o[5]?_="lerc2":73===o[0]&&73===o[1]&&42===o[2]&&0===o[3]||77===o[0]&&77===o[1]&&0===o[2]&&42===o[3]||73===o[0]&&73===o[1]&&43===o[2]&&0===o[3]||77===o[0]&&77===o[1]&&0===o[2]&&43===o[3]?_="tiff":71===o[0]&&73===o[1]&&70===o[2]?_="gif":66===o[0]&&77===o[1]?_="bmp":String.fromCharCode.apply(null,o).toLowerCase().includes("error")&&(_="error"),_}function L(U){let o=P(U);return"lerc2"===o?o="lerc":"error"===o&&(o=""),o}function M(U){return j.apply(this,arguments)}function j(){return j=(0,H.Z)(function*(U,o={},_){if(null==U)throw new ct.Z("rasterCodec:decode","missing encodeddata parameter.");let S=o.format?.toLowerCase();if(!("bsq"!==S&&"bip"!==S||null!=o.width&&null!=o.height))throw new ct.Z("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===S&&o.customOptions)return function a(U,o){return c.apply(this,arguments)}(U,o);if((!S||"bsq"!==S&&"bip"!==S&&"deflate"!==S&&"lzw"!==S)&&(S=P(U)),o.useCanvas&&b.has(S))return function G(U,o,_,S){return O.apply(this,arguments)}(U,S,o,_);const A=function F(U){let o=null;switch(U){case"lerc":case"lerc2":o=w;break;case"jpg":o=m;break;case"png":o=C;break;case"bsq":case"bip":o=(_,S)=>function n(U,o,_){const{pixelTypeCtor:S}=function K(U){let o=null,_=null;switch(U?U.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":_=255,o=Uint8Array;break;case"u16":_=_||65535,o=Uint16Array;break;case"u32":_=_||2**32-1,o=Uint32Array;break;case"s8":_=_||-128,o=Int8Array;break;case"s16":_=_||-32768,o=Int16Array;break;case"s32":_=_||0-2**31,o=Int32Array;break;default:o=Float32Array}return{pixelTypeCtor:o,noDataValue:_}}(o.pixelType),A=(0,nt.decode)(U,{width:o.width,height:o.height,pixelType:S,format:_}),I=new z.Z({width:o.width,height:o.height,pixels:A.pixels,pixelType:o.pixelType,mask:A.mask,statistics:null});return I.updateStatistics(),I}(_,S,U);break;case"tiff":o=y;break;case"deflate":o=t;break;case"lzw":o=s;break;case"error":o=()=>{throw new ct.Z("rasterCodec:decode","input data contains error")};break;default:o=()=>{throw new ct.Z("rasterCodec:decode","unsupported raster format")}}return o}(S);let I;o.isPoint&&(null!=(o={...o}).width&&o.width++,null!=o.height&&o.height++);const{offsets:X}=o;if(X&&X.length>1){const f=X.map((h,v)=>A(U.slice(h,X[v+1]),o)),i=yield Promise.all(f);I=i[0],I.pixels=i.map(h=>h.pixels[0]);const u=i.map(h=>h.mask);i.some(h=>null!=h)&&(u.forEach((h,v)=>{null==h&&(u[v]=new Uint8Array(I.width*I.height).fill(255))}),I.bandMasks=u,I.mask=z.Z.combineBandMasks(u)),I.updateStatistics()}else I=yield A(U,{...o,offset:X?.[0]??o.offset});return"jpg"!==S&&null!=o.noDataValue&&1===I.depthCount&&(0,Q.Ao)(I,o.noDataValue,{customFloatTolerance:o.tolerance}),o.isPoint&&function E(U,o=1){if(!U)return;const{pixels:_,width:S,height:A,mask:I}=U;if(!_||0===_.length)return;const X=_.length,f=S-1,i=A-1,u=[];let h,v,d,x,R,N,D=null;const q=z.Z.getPixelArrayConstructor(U.pixelType);if(0===o){for(h=0;h<X;h++){for(R=_[h],N=new q(f*i),v=0;v<i;v++)for(x=v*S,d=0;d<f;d++)N[v*f+d]=R[x+d];u.push(N)}if(null!=I)for(D=new Uint8Array(f*i),v=0;v<i;v++)for(x=v*S,d=0;d<f;d++)D[v*f+d]=I[x+d]}else{for(h=0;h<X;h++){for(R=_[h],N=new q(f*i),v=0;v<i;v++)for(x=v*S,d=0;d<f;d++)N[v*f+d]=(R[x+d]+R[x+d+1]+R[x+S+d]+R[x+S+d+1])/4;u.push(N)}if(I)for(D=new Uint8Array(f*i),v=0;v<i;v++)for(x=v*S,d=0;d<f;d++)D[v*f+d]=Math.min.apply(null,[I[x+d],I[x+d+1],I[x+S+d],I[x+S+d+1]])}U.width=f,U.height=i,U.mask=D,U.pixels=u}(I),I}),j.apply(this,arguments)}},93122:(St,wt,Z)=>{Z.d(wt,{Dq:()=>C,FI:()=>G,I7:()=>F,If:()=>O,Jx:()=>I,Uw:()=>S,cK:()=>j,ee:()=>P,vr:()=>U});var H=Z(15861),ct=Z(15365),ht=Z(89890),z=Z(68786),bt=Z(94194),yt=Z(67313),it=Z(635),r=Z(44853),dt=Z(34022);const et=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],ot=4294967296,Q=new Set([1,5,6,7,8,34712,34887]);function B(f,i){let u="unknown";return 3===f?u=64===i?"f64":"f32":1===f?1===i?u="u1":2===i?u="u2":4===i?u="u4":i<=8?u="u8":i<=16?u="u16":i<=32&&(u="u32"):2===f&&(i<=8?u="s8":i<=16?u="s16":i<=32&&(u="s32")),u}function J(f){let i=null;switch(f?f.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":i=Uint8Array;break;case"u16":i=Uint16Array;break;case"u32":i=Uint32Array;break;case"s8":i=Int8Array;break;case"s16":i=Int16Array;break;case"s32":i=Int32Array;break;case"f64":i=Float64Array;break;default:i=Float32Array}return i}function W(f,i){return{x:i[0]*f.x+i[1]*f.y+i[2],y:i[3]*f.x+i[4]*f.y+i[5]}}function nt(f,i){return f.get(i)?.values}function tt(f,i){return f.get(i)?.values}function g(f,i){return f.get(i)?.values?.[0]}function p(f,i){return f.get(i)?.values?.[0]}function b(f,i,u,h=0,v=it.Z.tiffTags,d=4){const x=8===d,R=x?E(new DataView(f,u,8),0,i):new DataView(f,u,2).getUint16(0,i),N=4+2*d,D=x?8:2,q=D+R*N;if(u+q>f.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:q};const at=u+q+4<=f.byteLength?M(new DataView(f,u+q,8===d?8:4),0,i,8===d):null,gt=u+D,st=new Map;let Y,lt,pt,k,V,$=0,rt=0;for(let ut=0;ut<R;ut++){lt=new DataView(f,gt+N*ut,N),pt=lt.getUint16(0,i),V=lt.getUint16(2,i),k=it.Z.getTagName(pt,v);const mt=[];2===d?($=lt.getUint16(4,i),rt=lt.getUint16(6,i)):4===d?($=lt.getUint32(4,i),rt=lt.getUint32(8,i)):8===d&&($=M(lt,4,i,!0),rt=M(lt,12,i,!0),mt.push(lt.getUint32(12,i)),mt.push(lt.getUint32(16,i))),Y={id:pt,type:V,valueCount:$,valueOffset:rt,valueOffsets:mt,values:null},C(f,i,Y,h,!1,d),st.set(k,Y)}return{success:!0,ifd:st,nextIFD:at,requiredBufferSize:q}}const w=(f,i)=>(0,z.Jx)(f,{inputOffset:i}).pixels[0];function T(f,i){if(1!==i&&2!==i&&4!==i)return f;const u=new Uint8Array(f),h=8/i,v=new Uint8Array(f.byteLength*h);let d=0;const x=2**i-1;for(let R=0;R<u.length;R++){const N=u[R];for(let D=0;D<h;D++)v[d++]=N<<i*D>>>8-i&x}return v.buffer}function y(f,i,u){const h=new ht.J;h.parse(f),h.colorTransform=6===u?-1:0;const v=h.getData(h.width,h.height,1!==i&&4!==i);return new Uint8Array(v.buffer)}function l(f){const i=new dt.Z(f).getBytes(),u=new ArrayBuffer(i.length),h=new Uint8Array(u);return h.set(i),h}function a(f,i,u,h,v){return c.apply(this,arguments)}function c(){return(c=(0,H.Z)(function*(f,i,u,h,v){const d=r.f===i,x=p(u,"BITSPERSAMPLE"),R=p(u,"SAMPLESPERPIXEL")??1,N=p(u,"PHOTOMETRICINTERPRETATION"),D=p(u,"SAMPLEFORMAT")??1,q=B(D,x),at=p(u,"COMPRESSION")??1,gt=J(q);let st,Y,lt;if(34887===at)return yield(0,z.zD)(),w(f,h);if(1===at)st=f.slice(h,h+v),Y=new Uint8Array(st);else if(8===at||32946===at)Y=new Uint8Array(f,h,v),Y=l(Y),st=Y.buffer;else if(6===at)Y=new Uint8Array(f,h,v),Y=y(Y,R,N),st=Y.buffer;else if(7===at){const $=u.get("JPEGTABLES").values,rt=$.length-2;Y=new Uint8Array(rt+v-2);for(let mt=0;mt<rt;mt++)Y[mt]=$[mt];const ut=new Uint8Array(f,h+2,v-2);for(let mt=0;mt<ut.length;mt++)Y[rt+mt]=ut[mt];Y=y(Y,R,N),st=Y.buffer}else{if(5!==at)throw new Error("tiff-decode: unsupport compression "+at);Y=(0,bt.J)(f,h,v,i),st=Y.buffer}if(st=T(st,x),"u8"===q||"s8"===q||d)lt=new gt(st);else{st=new ArrayBuffer(Y.length);const $=new Uint8Array(st);switch(q){case"u16":case"s16":for(let rt=0;rt<Y.length;rt+=2)$[rt]=Y[rt+1],$[rt+1]=Y[rt];break;case"u32":case"s32":case"f32":for(let rt=0;rt<Y.length;rt+=4)$[rt]=Y[rt+3],$[rt+1]=Y[rt+2],$[rt+2]=Y[rt+1],$[rt+3]=Y[rt]}lt=new gt(st)}const pt=p(u,"PREDICTOR")??1,k=p(u,"TILEWIDTH"),V=p(u,"TILELENGTH");if(pt>1&&(5===at||8===at||32946===at)&&k&&V){const $=O(u),rt=new gt(lt.length);rt.set(lt),lt=function _(f,i,u,h,v){const d=h?4:1,x=u*d*v;h&&(f=new Uint8Array(f.buffer));for(let D=0;D<i;D++){const q=D*x;for(let at=v;at<x;at++)f[q+at]+=f[q+at-v]}if(!h)return f;const R=new Uint8Array(f.length),N=u*v;for(let D=0;D<i;D++){const q=D*x;for(let at=0;at<N;at++)for(let gt=0;gt<d;gt++)R[q+at*d+gt]=f[q+at+(d-gt-1)*N]}return new Float32Array(R.buffer)}(rt,V,k,3===D&&3===pt,$?1:R)}return lt})).apply(this,arguments)}function t(){return(t=(0,H.Z)(function*(f,i,u){const h=tt(u,"TILEOFFSETS");if(void 0===h)return null;const v=tt(u,"TILEBYTECOUNTS"),{width:d,height:x,pixelType:R,tileWidth:N,tileHeight:D}=G([u]),q=O(u,i),at=p(u,"SAMPLESPERPIXEL")||i.planes,gt=d*x,st=p(u,"BITSPERSAMPLE"),Y=34887===(p(u,"COMPRESSION")??1),lt=J(R),pt=[];for(let Ot=0;Ot<at;Ot++)pt.push(new lt(gt));let k,V,$,rt,ut,mt,ft,Ct,vt,Et,It,At,xt;const kt=Math.ceil(d/N),Pt=new Uint8Array(gt).fill(255);let Mt=!1;if(st%8==0)if(Y&&q&&at>1){const Ot=Math.round(h.length/at);for(k=0;k<Ot;k++){mt=Math.floor(k/kt)*D,ft=k%kt*N,Ct=mt*d+ft;for(let Rt=0;Rt<at;Rt++){const _t=k*at+Rt;for(0===v[_t]?($=null,Mt=!0):$=yield a(f,i.littleEndian,u,h[_t],v[_t]),Et=0,vt=Ct,At=Math.min(N,d-ft),It=Math.min(D,x-mt),xt=pt[Rt],rt=0;rt<It;rt++)for(vt=Ct+rt*d,Et=rt*N,ut=0;ut<At;ut++,vt++,Et++)$?xt[vt]=$[Et]:Pt[vt]=0}}}else for(k=0;k<h.length;k++)for(mt=Math.floor(k/kt)*D,ft=k%kt*N,Ct=mt*d+ft,0===v[k]?($=null,Mt=!0):$=yield a(f,i.littleEndian,u,h[k],v[k]),Et=0,vt=Ct,At=Math.min(N,d-ft),It=Math.min(D,x-mt),V=0;V<at;V++)if(xt=pt[V],q||Y)for(rt=0;rt<It;rt++)for(vt=Ct+rt*d,Et=N*D*V+rt*N,ut=0;ut<At;ut++,vt++,Et++)$?xt[vt]=$[Et]:Pt[vt]=0;else for(rt=0;rt<It;rt++)for(vt=Ct+rt*d,Et=rt*N*at+V,ut=0;ut<At;ut++,vt++,Et+=at)$?xt[vt]=$[Et]:Pt[vt]=0;return{width:d,height:x,pixelType:R,pixels:pt,mask:Mt?Pt:void 0}})).apply(this,arguments)}const s=(f,i,u)=>{const h=r.f===i.littleEndian,v=tt(u,"STRIPOFFSETS");if(void 0===v)return null;const{width:d,height:x,pixelType:R}=G([u]),N=p(u,"SAMPLESPERPIXEL")||i.planes,D=p(u,"PHOTOMETRICINTERPRETATION"),q=d*x,at=p(u,"BITSPERSAMPLE"),gt=J(R),st=new gt(q*N),Y=tt(u,"STRIPBYTECOUNTS"),lt=p(u,"ROWSPERSTRIP"),pt=p(u,"COMPRESSION")??1;let k,V,$,rt,ut,mt,ft,Ct,vt,Et=lt;if(at%8==0)for(k=0;k<v.length;k++){if(ut=k*(lt*d)*N,Et=(k+1)*lt>x?x-k*lt:lt,"u8"===R||"s8"===R||h)8===pt||32946===pt?(ft=new Uint8Array(f,v[k],Y[k]),ft=l(ft),mt=ft.buffer):6===pt?(ft=new Uint8Array(f,v[k],Y[k]),ft=y(ft,N,D),mt=ft.buffer):5===pt?(ft=(0,bt.J)(f,v[k],Y[k],i.littleEndian),mt=ft.buffer):(Y[k]!==Et*d*N*at/8&&console.log("strip byte counts is different than expected"),mt=f.slice(v[k],v[k]+Y[k])),mt=T(mt,at),rt=new gt(mt);else{switch(6===pt||8===pt||32946===pt?(ft=new Uint8Array(f,v[k],Y[k]),Ct=l(ft),mt=Ct.buffer):(Y[k]!==Et*d*N*at/8&&console.log("strip byte counts is different than expected"),mt=new ArrayBuffer(Y[k]),ft=new Uint8Array(f,v[k],Y[k]),Ct=new Uint8Array(mt)),R){case"u16":case"s16":for($=0;$<ft.length;$+=2)Ct[$]=ft[$+1],Ct[$+1]=ft[$];break;case"u32":case"s32":case"f32":for($=0;$<ft.length;$+=4)Ct[$]=ft[$+3],Ct[$+1]=ft[$+2],Ct[$+2]=ft[$+1],Ct[$+3]=ft[$]}mt=T(mt,at),rt=new gt(mt)}st.set(rt,ut)}const It=[];if(1===N)It.push(st);else for(k=0;k<N;k++){for(vt=new gt(q),V=0;V<q;V++)vt[V]=st[V*N+k];It.push(vt)}return{width:d,height:x,pixelType:R,pixels:It}},n=(f,i,u)=>{if(!(f&&f.length>0&&i&&u))return null;let h,v,d;const x=f[0].length,R=f.length,N=new Uint8Array(x);for(let D=0;D<R;D++)if(h=f[D],v=i[D],d=u[D],0===D)for(let q=0;q<x;q++)N[q]=h[q]<v||h[q]>d?0:1;else for(let q=0;q<x;q++)N[q]&&(N[q]=h[q]<v||h[q]>d?0:1);return N},m=f=>{if(!f)return null;const i=f.match(/<Item(.*?)Item>/gi);if(!i||0===i.length)return null;const u=new Map;let h,v,d,x,R;for(let k=0;k<i.length;k++)h=i[k],v=h.slice(6,h.indexOf(">")),x=h.indexOf("sample="),x>-1&&(R=h.slice(x+8,h.indexOf('"',x+8))),x=h.indexOf("name="),x>-1&&(v=h.slice(x+6,h.indexOf('"',x+6))),v&&(d=h.slice(h.indexOf(">")+1,h.indexOf("</Item>")).trim(),null!=R?u.has(v)?u.get(v)[R]=d:u.set(v,[d]):u.set(v,d)),R=null;const N=u.get("STATISTICS_MINIMUM"),D=u.get("STATISTICS_MAXIMUM"),q=u.get("STATISTICS_MEAN"),at=u.get("STATISTICS_STDDEV");let gt=null;if(N&&D){gt=[];for(let k=0;k<N.length;k++)gt.push({min:parseFloat(N[k]),max:parseFloat(D[k]),avg:q&&parseFloat(q[k]),stddev:at&&parseFloat(at[k])})}const st=u.get("BandName"),Y=u.get("WavelengthMin"),lt=u.get("WavelengthMax");let pt=null;if(st){pt=[];for(let k=0;k<st.length;k++)pt.push({BandName:st[k],WavelengthMin:Y&&parseFloat(Y[k]),WavelengthMax:lt&&parseFloat(lt[k])})}return{statistics:gt,bandProperties:pt,dataType:u.get("DataType"),rawMetadata:u}};function C(f,i,u,h=0,v=!1,d=4){if(u.values)return!0;const x=u.type,R=u.valueCount;let N=u.valueOffset,D=[];const q=et[x],at=8*q,gt=R*q,st=R*et[x]*8;let Y,lt;const pt=8===d?64:32,k=u.valueOffsets;if(st>pt&&gt>(v?f.byteLength:f?f.byteLength-N+h:0))return u.offlineOffsetSize=[N,gt],u.values=null,!1;if(st<=pt){if(!i)if(pt<=32)N>>>=32-st;else{const V=k?.length?k[0]:N>>>0,$=k?.length?k[1]:Math.round((N-V)/ot);st<=32?(N=V>>>32-st,k[0]=N):(N=V*2**(32-st)+($>>>32-st),k[0]=V,k[1]=$>>>32-st)}if(1===R&&at===pt)D=[N];else if(64===pt){const V=k?.length?k[0]:N>>>0,$=k?.length?k[1]:Math.round((N-V)/ot);let rt=V,ut=32;for(lt=1;lt<=R;lt++){const mt=32-at*lt%32;if(ut<at){const ft=rt<<mt>>>32-ut;rt=$,D.push(ft+($<<32-ut>>>32-ut)*2**(at-ut)),ut-=32-(at-ut)}else D.push(rt<<mt>>>32-at),ut-=at;0===ut&&(ut=32,rt=$)}}else for(lt=1;lt<=R;lt++)D.push(N<<32-at*lt>>>32-at)}else{N-=h,v&&(N=0);for(let V=N;V<N+gt;V+=q){switch(x){case 1:case 2:case 7:Y=new DataView(f,V,1).getUint8(0);break;case 3:Y=new DataView(f,V,2).getUint16(0,i);break;case 4:case 13:Y=new DataView(f,V,4).getUint32(0,i);break;case 5:Y=new DataView(f,V,4).getUint32(0,i)/new DataView(f,V+4,4).getUint32(0,i);break;case 6:Y=new DataView(f,V,1).getInt8(0);break;case 8:Y=new DataView(f,V,2).getInt16(0,i);break;case 9:Y=new DataView(f,V,4).getInt32(0,i);break;case 10:Y=new DataView(f,V,4).getInt32(0,i)/new DataView(f,V+4,4).getInt32(0,i);break;case 11:Y=new DataView(f,V,4).getFloat32(0,i);break;case 12:Y=new DataView(f,V,8).getFloat64(0,i);break;case 16:case 18:Y=E(new DataView(f,V,8),0,i);break;case 17:Y=L(new DataView(f,V,8),0,i);break;default:Y=null}D.push(Y)}}if(2===x){let V="";const $=D;for(D=[],lt=0;lt<$.length;lt++)0===$[lt]&&""!==V?(D.push(V),V=""):V+=String.fromCharCode($[lt]);""===V&&0!==D.length||D.push(V)}return u.values=D,!0}function G(f){const i=f[0],u=p(i,"TILEWIDTH"),h=p(i,"TILELENGTH"),v=p(i,"IMAGEWIDTH"),d=p(i,"IMAGELENGTH"),x=p(i,"BITSPERSAMPLE"),R=p(i,"SAMPLESPERPIXEL"),N=p(i,"SAMPLEFORMAT")??1,D=B(N,x),q=O(i),at=nt(i,"GDAL_NODATA");let gt=null;at?.length&&(gt=at.map(_t=>parseFloat(_t)),gt.some(_t=>isNaN(_t))&&(gt=null));const st=p(i,"COMPRESSION")??1;let Y;switch(st){case 1:Y="NONE";break;case 2:case 3:case 4:case 32771:Y="CCITT";break;case 5:Y="LZW";break;case 6:case 7:Y="JPEG";break;case 32773:Y="PACKBITS";break;case 8:case 32946:Y="DEFLATE";break;case 34712:Y="JPEG2000";break;case 34887:Y="LERC";break;default:Y=String(st)}let lt=!0,pt="";Q.has(st)||(lt=!1,pt+="unsupported tag compression "+st),N>3&&(lt=!1,pt+="unsupported tag sampleFormat "+N),1!==x&&2!==x&&4!==x&&x%8!=0&&(lt=!1,pt+="unsupported tag bitsPerSample "+x);const k=g(i,"GEOASCIIPARAMS");let V;if(k){const _t=k.split("|").find(Dt=>Dt.includes("ESRI PE String = ")),Tt=_t?_t.replace("ESRI PE String = ",""):"";V=Tt.startsWith("COMPD_CS")||Tt.startsWith("PROJCS")||Tt.startsWith("GEOGCS")?{wkid:null,wkt:Tt}:null}const $=tt(i,"GEOTIEPOINTS"),rt=tt(i,"GEOPIXELSCALE"),ut=tt(i,"GEOTRANSMATRIX"),mt=i.has("GEOKEYDIRECTORY")?i.get("GEOKEYDIRECTORY").data:null;let ft,Ct,vt=!1,Et=!1;if(mt){vt=2===p(mt,"GTRasterTypeGeoKey");const _t=p(mt,"GTModelTypeGeoKey");if(2===_t){const Tt=p(mt,"GeographicTypeGeoKey");Tt>=1024&&Tt<=32766&&(V={wkid:Tt}),V||32767!==Tt||(Et=!0,V={wkid:4326})}else if(1===_t){const Tt=p(mt,"ProjectedCSTypeGeoKey");Tt>=1024&&Tt<=32766&&(V={wkid:Tt})}}if(rt&&$&&$.length>=6?(ft=[rt[0],0,$[3]-$[0]*rt[0],0,-Math.abs(rt[1]),$[4]-$[1]*rt[1]],vt&&(ft[2]-=.5*ft[0]+.5*ft[1],ft[5]-=.5*ft[3]+.5*ft[4])):ut&&16===ut.length&&(ft=vt?[ut[0],ut[1],ut[3]-.5*ut[0],ut[4],ut[5],ut[7]-.5*ut[5]]:[ut[0],ut[1],ut[3],ut[4],ut[5],ut[7]]),ft){const _t=[{x:0,y:d},{x:0,y:0},{x:v,y:d},{x:v,y:0}];let Tt,Dt=Number.POSITIVE_INFINITY,Lt=Number.POSITIVE_INFINITY,Ut=Number.NEGATIVE_INFINITY,Bt=Number.NEGATIVE_INFINITY;for(let Gt=0;Gt<_t.length;Gt++)Tt=W(_t[Gt],ft),Dt=Tt.x>Dt?Dt:Tt.x,Ut=Tt.x<Ut?Ut:Tt.x,Lt=Tt.y>Lt?Lt:Tt.y,Bt=Tt.y<Bt?Bt:Tt.y;Ct={xmin:Dt,xmax:Ut,ymin:Lt,ymax:Bt,spatialReference:V}}else Ct={xmin:-.5,ymin:.5-d,xmax:v-.5,ymax:.5,spatialReference:V};Et&&(Ct.xmax-Ct.xmin>400||Math.max(Math.abs(Ct.xmin),Math.abs(Ct.xmax))>361)&&(V=null,Ct.spatialReference=null);const It=P(f);let At,xt,kt,Pt,Mt;if(It.length>0){kt=Math.round(Math.log(v/p(It[0],"IMAGEWIDTH"))/Math.LN2);const _t=It[It.length-1];Pt=Math.round(Math.log(v/p(_t,"IMAGEWIDTH"))/Math.LN2),At=p(_t,"TILEWIDTH"),xt=p(_t,"TILELENGTH")}At=null!=Pt&&Pt>0?At||u:null,xt=null!=Pt&&Pt>0?xt||h:null,u&&(Mt=[{maxCol:Math.ceil(v/u)-1,maxRow:Math.ceil(d/h)-1,minRow:0,minCol:0}],It.forEach(_t=>{Mt.push({maxCol:Math.ceil(p(_t,"IMAGEWIDTH")/p(_t,"TILEWIDTH"))-1,maxRow:Math.ceil(p(_t,"IMAGELENGTH")/p(_t,"TILELENGTH"))-1,minRow:0,minCol:0})}));const Ot=g(f[0],"GDAL_METADATA"),Rt=m(Ot);return pt+=" "+o({width:v,height:d,tileWidth:u,tileHeight:h,planes:R,ifds:f}),{width:v,height:d,tileWidth:u,tileHeight:h,planes:R,isBSQ:q,pixelType:D,compression:Y,noData:gt,hasMaskBand:F(f).length===It.length+1,isSupported:lt,message:pt,extent:Ct,isPseudoGeographic:Et,affine:rt?null:ft,firstPyramidLevel:kt,maximumPyramidLevel:Pt,pyramidBlockWidth:At,pyramidBlockHeight:xt,tileBoundary:Mt,metadata:Rt}}function O(f,i){const u=nt(f,"PLANARCONFIGURATION");return u?2===u[0]:!!i&&i.isBSQ}function P(f){return f.filter(i=>1===p(i,"NEWSUBFILETYPE"))}function F(f){return f.filter(i=>{const u=4==(4&(p(i,"NEWSUBFILETYPE")??0)),h=4===p(i,"PHOTOMETRICINTERPRETATION");return u&&h})}function E(f,i,u){const h=f.getUint32(i,u),v=f.getUint32(i+4,u);return u?v*ot+h:h*ot+v}function L(f,i,u){let h=u?f.getInt32(i,u):f.getUint32(i,u),v=u?f.getUint32(i+4,u):f.getInt32(i+4,u);const d=(u?h:v)>=0?1:-1;return u?h*=d:v*=d,d*(u?v*ot+h:h*ot+v)}function M(f,i,u,h){return h?E(f,i,u):f.getUint32(i,u)}function j(f){const i=new DataView(f,0,16),u=i.getUint16(0,!1);let h=null;if(18761===u)h=!0;else{if(19789!==u)throw new Error("unexpected endianess byte");h=!1}const v=i.getUint16(2,h);if(42!==v&&43!==v)throw new Error("unexpected tiff identifier");let d=4;const x=43===v;if(x){const R=i.getUint16(d,h);if(d+=2,8!==R)throw new Error("unsupported bigtiff version");if(0!==i.getUint16(d,h))throw new Error("unsupported bigtiff version");d+=2}return{littleEndian:h,isBigTiff:x,firstIFDPos:M(i,d,h,x)}}function U(f,i,u,h=0,v=it.Z.tiffTags,d=4){const x=b(f,i,u,h,v,d);let R;const N=x.ifd;if(N){if(it.Z.ifdTags.forEach((D,q)=>{N.has(q)&&(R=N.get(q),R.data=b(f,i,R.valueOffset-h,h,D).ifd)}),N.has("GEOKEYDIRECTORY")){R=N.get("GEOKEYDIRECTORY");const D=R.values;if(D&&D.length>4){const q=D[0]+"."+D[1]+"."+D[2];R.data=b(f,i,R.valueOffset+6-h,h,it.Z.geoKeys,2).ifd,R.data&&R.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[q]})}}if(N.has("XMP")){R=N.get("XMP");const D=R.values;"number"==typeof D[0]&&7===R.type&&(R.values=[(0,ct.f)(new Uint8Array(D))])}}return x}function o(f){const{width:i,height:u,tileHeight:h,tileWidth:v}=f,d=f.planes,x=v?v*h:i*u,R=p(f.ifds[0],"BITSPERSAMPLE");let N="";return x*d>2**30/(R>8?R/8:1)&&(N=v?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),N}function S(f,i){return A.apply(this,arguments)}function A(){return(A=(0,H.Z)(function*(f,i){const{headerInfo:u,ifd:h,offsets:v,sizes:d}=i,x=[];for(let vt=0;vt<v.length;vt++){const Et=yield a(f,u.littleEndian,h,v[vt],d[vt]||f.byteLength);x.push(Et)}const R=O(h,u),N=p(h,"BITSPERSAMPLE"),D=B(p(h,"SAMPLEFORMAT")??1,N),q=p(h,"SAMPLESPERPIXEL")||u.planes,at=J(D),gt=p(h,"TILEWIDTH"),st=p(h,"TILELENGTH"),Y=p(h,"COMPRESSION")??1,lt=gt*st;let pt;const k=[];let V=x[0];const $=34887===Y;for(let vt=0;vt<q;vt++){if(pt=new at(lt),x.length===q)V=x[vt],V.length===lt&&(pt=V);else if(V.length)if(R||$)pt=V.length===lt?V:V.slice(lt*vt,lt*(vt+1));else for(let Et=0;Et<lt;Et++)pt[Et]=V[Et*q+vt];k.push(pt)}const rt=u.noData?u.noData[0]:i.noDataValue,ut=u.metadata?u.metadata.statistics:null,mt=ut?ut.map(vt=>vt.min):null,ft=ut?ut.map(vt=>vt.max):null,Ct={pixelType:D,width:gt,height:st,pixels:k,noDataValue:rt};return null!=rt?(0,yt.Ao)(Ct,rt):mt&&ft&&i.applyMinMaxConstraint&&(Ct.mask=n(k,mt,ft)),Ct})).apply(this,arguments)}function I(f){return X.apply(this,arguments)}function X(){return X=(0,H.Z)(function*(f,i={}){const u=i.pyramidLevel||0,h=i.headerInfo||function K(f){const{littleEndian:i,isBigTiff:u,firstIFDPos:h}=j(f);let v=h;const d=[];do{const x=U(f,i,v,0,it.Z.tiffTags,u?8:4);if(!x.success)break;d.push(x.ifd),v=x.nextIFD}while(v>0);return{...G(d),littleEndian:i,isBigTiff:u,ifds:d,pyramidIFDs:P(d),maskIFDs:F(d)}}(f),{ifds:v,noData:d}=h;if(0===v.length)throw new Error("no valid image file directory");const x=o(h);if(x)throw x;let R=null;const N=-1===u?v[v.length-1]:v[u],D=d??i.noDataValue;return R=h.tileWidth?yield function e(f,i,u){return t.apply(this,arguments)}(f,h,N):s(f,h,N),R&&(null!=D&&(0,yt.Ao)(R,D),R)}),X.apply(this,arguments)}},635:(St,wt,Z)=>{Z.d(wt,{Z:()=>it});const H=(()=>{const r=[];return r[254]="NEWSUBFILETYPE",r[255]="SUBFILETYPE",r[256]="IMAGEWIDTH",r[257]="IMAGELENGTH",r[258]="BITSPERSAMPLE",r[259]="COMPRESSION",r[262]="PHOTOMETRICINTERPRETATION",r[263]="THRESHHOLDING",r[264]="CELLWIDTH",r[265]="CELLLENGTH",r[266]="FILLORDER",r[269]="DOCUMENTNAME",r[270]="IMAGEDESCRIPTION",r[271]="MAKE",r[272]="MODEL",r[273]="STRIPOFFSETS",r[274]="ORIENTATION",r[277]="SAMPLESPERPIXEL",r[278]="ROWSPERSTRIP",r[279]="STRIPBYTECOUNTS",r[280]="MINSAMPLEVALUE",r[281]="MAXSAMPLEVALUE",r[282]="XRESOLUTION",r[283]="YRESOLUTION",r[284]="PLANARCONFIGURATION",r[285]="PAGENAME",r[286]="XPOSITION",r[287]="YPOSITION",r[288]="FREEOFFSETS",r[289]="FREEBYTECOUNTS",r[290]="GRAYRESPONSEUNIT",r[291]="GRAYRESPONSECURVE",r[292]="T4OPTIONS",r[293]="T6OPTIONS",r[296]="RESOLUTIONUNIT",r[297]="PAGENUMBER",r[300]="COLORRESPONSEUNIT",r[301]="TRANSFERFUNCTION",r[305]="SOFTWARE",r[306]="DATETIME",r[315]="ARTIST",r[316]="HOSTCOMPUTER",r[317]="PREDICTOR",r[318]="WHITEPOINT",r[319]="PRIMARYCHROMATICITIES",r[320]="COLORMAP",r[321]="HALFTONEHINTS",r[322]="TILEWIDTH",r[323]="TILELENGTH",r[324]="TILEOFFSETS",r[325]="TILEBYTECOUNTS",r[326]="BADFAXLINES",r[327]="CLEANFAXDATA",r[328]="CONSECUTIVEBADFAXLINES",r[330]="SUBIFD",r[332]="INKSET",r[333]="INKNAMES",r[334]="NUMBEROFINKS",r[336]="DOTRANGE",r[337]="TARGETPRINTER",r[338]="EXTRASAMPLES",r[339]="SAMPLEFORMAT",r[340]="SMINSAMPLEVALUE",r[341]="SMAXSAMPLEVALUE",r[342]="TRANSFERRANGE",r[347]="JPEGTABLES",r[512]="JPEGPROC",r[513]="JPEGIFOFFSET",r[514]="JPEGIFBYTECOUNT",r[515]="JPEGRESTARTINTERVAL",r[517]="JPEGLOSSLESSPREDICTORS",r[518]="JPEGPOINTTRANSFORM",r[519]="JPEGQTABLES",r[520]="JPEGDCTABLES",r[521]="JPEGACTABLES",r[529]="YCBCRCOEFFICIENTS",r[530]="YCBCRSUBSAMPLING",r[531]="YCBCRPOSITIONING",r[532]="REFERENCEBLACKWHITE",r[700]="XMP",r[33550]="GEOPIXELSCALE",r[33922]="GEOTIEPOINTS",r[33432]="COPYRIGHT",r[42112]="GDAL_METADATA",r[42113]="GDAL_NODATA",r[50844]="RPCCOEFFICIENT",r[34264]="GEOTRANSMATRIX",r[34735]="GEOKEYDIRECTORY",r[34736]="GEODOUBLEPARAMS",r[34737]="GEOASCIIPARAMS",r[34665]="EXIFIFD",r[34853]="GPSIFD",r[40965]="INTEROPERABILITYIFD",r})(),ct=(()=>{const r=H.slice();return r[36864]="ExifVersion",r[40960]="FlashpixVersion",r[40961]="ColorSpace",r[42240]="Gamma",r[37121]="ComponentsConfiguration",r[37122]="CompressedBitsPerPixel",r[40962]="PixelXDimension",r[40963]="PixelYDimension",r[37500]="MakerNote",r[37510]="UserComment",r[40964]="RelatedSoundFile",r[36867]="DateTimeOriginal",r[36868]="DateTimeDigitized",r[36880]="OffsetTime",r[36881]="OffsetTimeOriginal",r[36882]="OffsetTimeDigitized",r[37520]="SubSecTime",r[37521]="SubSecTimeOriginal",r[37522]="SubSecTimeDigitized",r[37888]="Temperature",r[37889]="Humidity",r[37890]="Pressure",r[37891]="WaterDepth",r[37892]="Acceleration",r[37893]="CameraElevationAngle",r[42016]="ImageUniqueID",r[42032]="CameraOwnerName",r[42033]="BodySerialNumber",r[42034]="LensSpecification",r[42035]="LensMake",r[42036]="LensModel",r[42037]="LensSerialNumber",r[33434]="ExposureTime",r[33437]="FNumber",r[34850]="ExposureProgram",r[34852]="SpectralSensitivity",r[34855]="PhotographicSensitivity",r[34856]="OECF",r[34864]="SensitivityType",r[34865]="StandardOutputSensitivity",r[34866]="RecommendedExposureIndex",r[34867]="ISOSpeed",r[34868]="ISOSpeedLatitudeyyy",r[34869]="ISOSpeedLatitudezzz",r[37377]="ShutterSpeedValue",r[37378]="ApertureValue",r[37379]="BrightnessValue",r[37380]="ExposureBiasValue",r[37381]="MaxApertureValue",r[37382]="SubjectDistance",r[37383]="MeteringMode",r[37384]="LightSource",r[37385]="Flash",r[37386]="FocalLength",r[37396]="SubjectArea",r[41483]="FlashEnergy",r[41484]="SpatialFrequencyResponse",r[41486]="FocalPlaneXResolution",r[41487]="FocalPlaneYResolution",r[41488]="FocalPlaneResolutionUnit",r[41492]="SubjectLocation",r[41493]="ExposureIndex",r[41495]="SensingMethod",r[41728]="FileSource",r[41729]="SceneType",r[41730]="CFAPattern",r[41985]="CustomRendered",r[41986]="ExposureMode",r[41987]="WhiteBalance",r[41988]="DigitalZoomRatio",r[41989]="FocalLengthIn35mmFilm",r[41990]="SceneCaptureType",r[41991]="GainControl",r[41992]="Contrast",r[41993]="Saturation",r[41994]="Sharpness",r[41995]="DeviceSettingDescription",r[41996]="SubjectDistanceRange",r})(),z=(()=>{const r=[];return r[1024]="GTModelTypeGeoKey",r[1025]="GTRasterTypeGeoKey",r[1026]="GTCitationGeoKey",r[2048]="GeographicTypeGeoKey",r[2049]="GeogCitationGeoKey",r[2050]="GeogGeodeticDatumGeoKey",r[2051]="GeogPrimeMeridianGeoKey",r[2052]="GeogLinearUnitsGeoKey",r[2053]="GeogLinearUnitSizeGeoKey",r[2054]="GeogAngularUnitsGeoKey",r[2055]="GeogAngularUnitSizeGeoKey",r[2056]="GeogEllipsoidGeoKey",r[2057]="GeogSemiMajorAxisGeoKey",r[2058]="GeogSemiMinorAxisGeoKey",r[2059]="GeogInvFlatteningGeoKey",r[2061]="GeogPrimeMeridianLongGeoKey",r[2060]="GeogAzimuthUnitsGeoKey",r[3072]="ProjectedCSTypeGeoKey",r[3073]="PCSCitationGeoKey",r[3074]="ProjectionGeoKey",r[3075]="ProjCoordTransGeoKey",r[3076]="ProjLinearUnitsGeoKey",r[3077]="ProjLinearUnitSizeGeoKey",r[3078]="ProjStdParallel1GeoKey",r[3079]="ProjStdParallel2GeoKey",r[3080]="ProjNatOriginLongGeoKey",r[3081]="ProjNatOriginLatGeoKey",r[3082]="ProjFalseEastingGeoKey",r[3083]="ProjFalseNorthingGeoKey",r[3084]="ProjFalseOriginLongGeoKey",r[3085]="ProjFalseOriginLatGeoKey",r[3086]="ProjFalseOriginEastingGeoKey",r[3087]="ProjFalseOriginNorthingGeoKey",r[3088]="ProjCenterLongGeoKey",r[3090]="ProjCenterEastingGeoKey",r[3091]="ProjCenterNorthingGeoKey",r[3092]="ProjScaleAtNatOriginGeoKey",r[3093]="ProjScaleAtCenterGeoKey",r[3094]="ProjAzimuthAngleGeoKey",r[3095]="ProjStraightVertPoleLongGeoKey",r[4096]="VerticalCSTypeGeoKey",r[4097]="VerticalCitationGeoKey",r[4098]="VerticalDatumGeoKey",r[4099]="VerticalUnitsGeoKey",r})(),yt=new Map;yt.set("EXIFIFD",ct),yt.set("GPSIFD",["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"]);const it={tiffTags:H,ifdTags:yt,geoKeys:z,getTagName:(r,dt)=>{let et=(dt||H)[r];return void 0===et&&(et="unknown"+String(r)),et}}},44853:(St,wt,Z)=>{Z.d(wt,{f:()=>H});const H=(()=>{const ct=new ArrayBuffer(4),ht=new Uint8Array(ct);return new Uint32Array(ct)[0]=1,1===ht[0]})()},17057:(St,wt,Z)=>{Z.d(wt,{AV:()=>nt,Hv:()=>J,Oh:()=>W,ZF:()=>et,dy:()=>p,gI:()=>dt,hE:()=>r,js:()=>B,oc:()=>it,um:()=>g});var H=Z(62208),ct=Z(25688),ht=Z(67313),z=Z(65468);const bt=1,yt=[.299,.587,.114];function it(b,w=256){w=Math.min(w,256);const{size:T,counts:y}=b,l=new Uint8Array(T),a=y.reduce((n,m)=>n+m/w,0);let c=0,e=0,t=0,s=a;for(let n=0;n<T;n++)if(t+=y[n],!(n<T-1&&t+y[n+1]<s)){for(;c<w-1&&s<t;)c++,s+=a;for(let m=e;m<=n;m++)l[m]=c;e=n+1}for(let n=e;n<T;n++)l[n]=w-1;return l}function r(b){const{minCutOff:w,maxCutOff:T,gamma:y,pixelType:l,rounding:a}=b,c=b.outMin||0,e=b.outMax||255;if(!["u8","u16","s8","s16"].includes(l))return null;const t=w.length;let s,n,m=0;"s8"===l?m=-127:"s16"===l&&(m=-32767);let C=256;["u16","s16"].includes(l)&&(C=65536);const G=[],O=[],P=e-c;for(s=0;s<t;s++)O[s]=T[s]-w[s],G[s]=0===O[s]?0:P/O[s];let F;const K=[];let E,L,M;if(y&&y.length>=t){const j=g(t,y);for(s=0;s<t;s++){for(M=[],n=0;n<C;n++)if(0!==O[s])if(E=n+m,F=(E-w[s])/O[s],L=1,y[s]>1&&(L-=(1/P)**(F*j[s])),E<T[s]&&E>w[s]){const U=L*P*F**(1/y[s])+c;M[n]="floor"===a?Math.floor(U):"round"===a?Math.round(U):U}else M[n]=E>=T[s]?e:c;else M[n]=c;K[s]=M}}else for(s=0;s<t;s++){for(M=[],n=0;n<C;n++)if(E=n+m,E<=w[s])M[n]=c;else if(E>=T[s])M[n]=e;else{const j=(E-w[s])*G[s]+c;M[n]="floor"===a?Math.floor(j):"round"===a?Math.round(j):j}K[s]=M}if(null!=b.contrastOffset){const j=dt(b.contrastOffset,b.brightnessOffset);for(s=0;s<t;s++)for(M=K[s],n=0;n<C;n++)M[n]=j[M[n]]}return{lut:K,offset:m}}function dt(b,w){const T=Math.min(Math.max(b,-100),100),y=Math.min(Math.max(w??0,-100),100);let c=0,e=0;const t=new Uint8Array(256);for(c=0;c<256;c++)T>0&&T<100?e=(200*c-25500+510*y)/(2*(100-T))+128:T<=0&&T>-100?e=(200*c-25500+510*y)*(100+T)/2e4+128:100===T?(e=200*c-25500+256*(100-T)+510*y,e=e>0?255:0):-100===T&&(e=128),t[c]=e>255?255:e<0?0:e;return t}function et(b,w,T){const y=[];for(let l=0;l<w.length;l++){let a=0,c=0,e=0;"min"in w[l]?({min:a,max:c,avg:e}=w[l]):[a,c,e]=w[l];let t=e??0;"u8"!==b&&(t=255*(t-a)/(c-a)),T&&(t*=yt[l]),y.push(ot(t))}return y}function ot(b){if(b<=0||b>=255)return bt;let w=0;150!==b&&(w=b<=150?45*Math.cos(.01047*b):17*Math.sin(.021*b));const y=b+w,l=Math.log(b/255),a=Math.log(y/255);if(0===a)return bt;const c=l/a;return isNaN(c)?bt:Math.min(9.9,Math.max(.01,c))}function B(b){const{pixels:w,mask:T,pixelType:y,bandMasks:l}=b,a=w.map((c,e)=>function Q(b,w,T,y){let l=1/0,a=-1/0,c=0,e=0,t=0,s=0;const n=b.length,m=new Map,C=[];for(let o=0;o<n;o++){const _=b[o];if(!w||w[o]){C.push(_);const S=(m.get(_)??0)+1;m.set(_,S),S>s&&(s=S,t=_),l=_<l?_:l,a=_>a?_:a,c+=_,e++}}if(0===e)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};const G=c/e;let O=0;for(let o=0;o<n;o++)w&&!w[o]||(O+=(b[o]-G)**2);const P=w?w.filter(o=>o).length:n,F=P<=1?0:Math.sqrt(O/(P-1));C.sort((o,_)=>o-_);const K=e>>>1,E={min:l,max:a,avg:G,stddev:F,mode:t,median:e%2?C[Math.floor(K)]:(C[K-1]+C[K])/2};if(!y)return{statistics:E,histogram:null};if(["u8","s8","u4","u2","u1"].includes(T)){const o=a-l+1,_=new Uint32Array(o);for(let S=0;S<n;S++)w&&!w[S]||_[b[S]-l]++;return{statistics:E,histogram:{min:l-.5,max:a+.5,size:o,counts:_}}}const L=256,M=new Uint32Array(L),j=(a-l)/L;if(0===j)return{statistics:E,histogram:{min:l,max:a,size:1,counts:new Uint32Array(1).fill(e)}};const U=new Uint32Array(257);for(let o=0;o<n;o++)w&&!w[o]||U[Math.floor((b[o]-l)/j)]++;for(let o=0;o<255;o++)M[o]=U[o];return M[255]=U[255]+U[L],{statistics:E,histogram:{min:l,max:a,size:L,counts:M}}}(c,l?.[e]??T,y,!0));return{statistics:a.map(({statistics:c})=>c),histograms:a.map(({histogram:c})=>c)}}function J(b){if(!b?.pixels?.length)return null;const{pixels:w,mask:T,bandMasks:y,pixelType:l}=b,a=b.width*b.height,c=w.length,e=[],t=[],s=256;let n,m,C,G;for(let O=0;O<c;O++){C=new Uint32Array(s);const P=w[O],F=y?.[O]??T;if("u8"===l){if(n=255,m=0,F){for(let I=0;I<a;I++)if(F[I]){const X=P[I];n=X<n?X:n,m=X>m?X:m,C[X]++}}else for(let I=0;I<a;I++){const X=P[I];n=X<n?X:n,m=X>m?X:m,C[X]++}C=C.slice(n,m+1)}else{let I=!1;b.statistics||(b.updateStatistics(),I=!0);const X=b.statistics;n=X[O].minValue,m=X[O].maxValue;const f=(m-n)/s;if(0===f){!X||b.validPixelCount||I||b.updateStatistics();const i=(b.validPixelCount||b.width*b.height)/s;for(let u=0;u<s;u++)C[u]=Math.round(i*(u+1))-Math.round(i*u)}else{G=new Uint32Array(257);for(let i=0;i<a;i++)F&&!F[i]||G[Math.floor((P[i]-n)/f)]++;for(let i=0;i<255;i++)C[i]=G[i];C[255]=G[255]+G[s]}}const K="u8"===l?n-.5:n,E="u8"===l?m+.5:m;e.push({min:K,max:E,size:C.length,counts:C});let L=0,M=0,j=0;for(let I=0;I<C.length;I++)L+=C[I],M+=I*C[I];const U=M/L;for(let I=0;I<C.length;I++)j+=C[I]*(I-U)**2;const o=Math.sqrt(j/(L-1)),_=(E-K)/C.length;t.push({min:n,max:m,avg:(U+("u8"===l?0:.5))*_+n,stddev:o*_})}return{statistics:t,histograms:e}}function W(b){const w=[];for(let T=0;T<b.length;T++){const{min:y,max:l,size:a,counts:c}=b[T];let e=0,t=0;for(let O=0;O<a;O++)e+=c[O],t+=O*c[O];const s=t/e;let n=0;for(let O=0;O<a;O++)n+=c[O]*(O-s)**2;const m=(l-y)/a,C=(s+.5)*m+y,G=Math.sqrt(n/(e-1))*m;w.push({min:y,max:l,avg:C,stddev:G})}return w}function nt(b,w){const{pixelBlock:T,bandIds:y,returnHistogramLut:l,rasterInfo:a}=w;let c=null,e=null,t=b.stretchType;if("number"==typeof t&&(t=z.J[t]),b.dra)if("minMax"===t&&T?.statistics)c=T.statistics.map(A=>[A.minValue,A.maxValue,0,0]);else{const A=J(T);c=null!=A?A.statistics:null,e=null!=A?A.histograms:null}else c=b.statistics?.length?b.statistics:a.statistics,e="histograms"in b?b.histograms:void 0,e||(e=a.histograms);"percentClip"!==t&&"histogramEqualization"!==t||e?.length||(t="minMax");const s=c?.length||e?.length||a.bandCount,n=[],m=[];let C,G,O,P,F,K,E,L,M;c&&!Array.isArray(c[0])&&(c=c.map(A=>[A.min,A.max,A.avg,A.stddev]));const[j,U]=(0,ht.rL)(a.pixelType);if(!c?.length){for(c=[],L=0;L<s;L++)c.push([j,U,1,1]);"standardDeviation"===t&&(t="minMax")}switch(t){case"none":for(L=0;L<s;L++)n[L]=j,m[L]=U;break;case"minMax":for(L=0;L<s;L++){const A=c[L];n[L]=A[0],m[L]=A[1]}break;case"standardDeviation":{const{numberOfStandardDeviations:A=2}=b;for(L=0;L<s;L++){const I=c[L];n[L]=I[2]-A*I[3],m[L]=I[2]+A*I[3],n[L]<I[0]&&(n[L]=I[0]),m[L]>I[1]&&(m[L]=I[1])}}break;case"histogramEqualization":for((0,H.O3)(e),L=0;L<s;L++)n[L]=e[L].min,m[L]=e[L].max;break;case"percentClip":for((0,H.O3)(e),L=0;L<e.length;L++){for(C=e[L],F=new Uint32Array(C.size),P=[...C.counts],P.length>=20&&(P[0]=P[1]=P[2]=P[P.length-1]=P[P.length-2]=0),O=0,G=(C.max-C.min)/C.size,E=-.5===C.min&&1===G?.5:0,M=0;M<C.size;M++)O+=P[M],F[M]=O;for(K=(b.minPercent||0)*O/100,n[L]=C.min+E,M=0;M<C.size;M++)if(F[M]>K){n[L]=C.min+G*(M+E);break}for(K=(1-(b.maxPercent||0)/100)*O,m[L]=C.max+E,M=C.size-2;M>=0;M--)if(F[M]<K){m[L]=C.min+G*(M+2-E);break}if(m[L]<n[L]){const A=n[L];n[L]=m[L],m[L]=A}}break;default:for(L=0;L<s;L++){const A=c[L];n[L]=A[0],m[L]=A[1]}}let o,_,S;return"histogramEqualization"===t?((0,H.O3)(e),_=e[0].size||256,o=0,l&&(S=e.map(A=>it(A)))):(_=b.max||255,o=b.min||0),function tt(b,w){if(null==w||0===w.length)return b;const T=Math.max.apply(null,w),{minCutOff:y,maxCutOff:l,outMin:a,outMax:c,histogramLut:e}=b;return y.length===w.length||y.length<=T?b:{minCutOff:w.map(t=>y[t]),maxCutOff:w.map(t=>l[t]),histogramLut:e?w.map(t=>e[t]):null,outMin:a,outMax:c}}({minCutOff:n,maxCutOff:m,outMax:_,outMin:o,histogramLut:S},y)}function g(b,w){const T=new Float32Array(b);for(let y=0;y<b;y++)T[y]=w[y]>1?w[y]>2?6.5+(w[y]-2)**2.5:6.5+100*(2-w[y])**4:1;return T}function p(b,w){if(!b?.pixels?.length)return b;const{mask:T,bandMasks:y,width:l,height:a,pixels:c}=b,{minCutOff:e,maxCutOff:t,gamma:s}=w,n=w.outMin||0,m=w.outMax||255,C=l*a,G=w.outputPixelType||"u8",O=b.pixels.map(()=>ct.Z.createEmptyBand(G,C)),P=O.length,F=m-n,K=[],E=[];for(let o=0;o<P;o++)E[o]=t[o]-e[o],K[o]=0===E[o]?0:F/E[o];const L=G.startsWith("u")||G.startsWith("s"),j=!!w.isRenderer;if(s&&s.length>=P){const o=g(P,s);for(let _=0;_<P;_++){const S=y?.[_]??T;for(let A=0;A<C;A++)if(null==S||S[A]){if(0===E[_]){O[_][A]=n;continue}const I=c[_][A],X=(I-e[_])/E[_];let f=1;if(s[_]>1&&(f-=(1/F)**(X*o[_])),I<t[_]&&I>e[_]){const i=f*F*X**(1/s[_])+n;O[_][A]=j?Math.floor(i):L?Math.round(i):i}else O[_][A]=I>=t[_]?m:n}}}else for(let o=0;o<P;o++){const _=y?.[o]??T;for(let S=0;S<C;S++)if(null==_||_[S]){const A=c[o][S];if(A<t[o]&&A>e[o]){const I=(A-e[o])*K[o]+n;O[o][S]=j?Math.floor(I):L?Math.round(I):I}else O[o][S]=A>=t[o]?m:n}}const U=new ct.Z({width:l,height:a,mask:T,bandMasks:y,pixels:O,pixelType:G});return U.updateStatistics(),U}},67845:(St,wt,Z)=>{Z.d(wt,{M_:()=>ot,Ne:()=>Q,TK:()=>bt,Ub:()=>dt,_p:()=>z,vC:()=>r,yg:()=>et});var H=Z(25688),ct=Z(79751);const ht=1,z=1/111e3;function bt(B){let{altitude:J,azimuth:W}=B;const{hillshadeType:nt,pixelSizePower:tt=1,pixelSizeFactor:g=1,scalingType:p,isGCS:b,resolution:w}=B,T="multi-directional"===nt?2*B.zFactor:B.zFactor,{x:y,y:l}=w;let a=T/(8*y),c=T/(8*l);if(b&&T>.001&&(a/=z,c/=z),"adjusted"===p)if(b){const j=y*z,U=l*z;a=(T+j**tt*g)/(8*j),c=(T+U**tt*g)/(8*U)}else a=(T+y**tt*g)/(8*y),c=(T+l**tt*g)/(8*l);let e=(90-J)*Math.PI/180,t=Math.cos(e),s=(360-W+90)*Math.PI/180,n=Math.sin(e)*Math.cos(s),m=Math.sin(e)*Math.sin(s);const C=[315,270,225,360,180,0],G=[60,60,60,60,60,90],O=new Float32Array([3,5,3,2,1,4]),P=O.reduce((j,U)=>j+U),F=O.map(j=>j/P),K="multi-directional"===nt?C.length:1,E=new Float32Array(6),L=new Float32Array(6),M=new Float32Array(6);if("multi-directional"===nt)for(let j=0;j<K;j++)J=G[j],W=C[j],e=(90-J)*Math.PI/180,t=Math.cos(e),s=(360-W+90)*Math.PI/180,n=Math.sin(e)*Math.cos(s),m=Math.sin(e)*Math.sin(s),E[j]=t,L[j]=n,M[j]=m;else E.fill(t),L.fill(n),M.fill(m);return{resolution:w,factor:[a,c],sinZcosA:n,sinZsinA:m,cosZ:t,sinZcosAs:L,sinZsinAs:M,cosZs:E,weights:F,hillshadeType:["traditional","multi-directional"].indexOf(nt)}}function yt(B,J){const{width:W,height:nt}=B,tt=W*nt,g=new Uint8Array(tt),p=null!=B.mask;let b;if(p){b=new Uint8Array(B.mask);for(let P=0;P<b.length;P++)b[P]&&(g[P]=1,b[P]=1)}const w=B.pixels[0],T=new Float32Array(tt),y=new Float32Array(tt);let l,a=0;if(J){const{resolution:P}=J,F=P?(P.x+P.y)/2:1;a=200*J.zFactor/(F*F),l=new Float32Array(tt)}const c=J?.curvatureType;let e,t,s,n,m,C,G,O;for(let P=ht;P<nt-ht;P++){const F=P*W;for(let K=ht;K<W-ht;K++){const E=F+K;if(!b||0!==b[E]){if(b){if(b[E-W-1]+b[E-W]+b[E-W+1]+b[E-1]+b[E+1]+b[E+W-1]+b[E+W]+b[E+W+1]<7){g[E]=0;continue}e=b[E-W-1]?w[E-W-1]:w[E],t=b[E-W]?w[E-W]:w[E],s=b[E-W+1]?w[E-W+1]:w[E],n=b[E-1]?w[E-1]:w[E],m=b[E+1]?w[E+1]:w[E],C=b[E+W-1]?w[E+W-1]:w[E],G=b[E+W]?w[E+W]:w[E],O=b[E+W+1]?w[E+W+1]:w[E]}else e=w[E-W-1],t=w[E-W],s=w[E-W+1],n=w[E-1],m=w[E+1],C=w[E+W-1],G=w[E+W],O=w[E+W+1];if(T[E]=s+m+m+O-(e+n+n+C),y[E]=C+G+G+O-(e+t+t+s),null!=l){const L=w[E],M=.5*(n+m)-L,j=.5*(t+G)-L;if("standard"===c)l[E]=-a*(M+j);else{const U=(-e+s+C-O)/4,o=(-n+m)/2,_=(t-G)/2,S=o*o,A=_*_,I=S+A;I&&(l[E]="profile"===c?a*(M*S+j*A+U*o*_)/I:-a*(M*A+j*S-U*o*_)/I)}}}}}return{outMask:p?g:null,dzxs:T,dzys:y,curvatures:l}}function it(B,J,W){for(let nt=0;nt<W;nt++)B[nt*J]=B[nt*J+1],B[(nt+1)*J-1]=B[(nt+1)*J-2];for(let nt=1;nt<J-1;nt++)B[nt]=B[nt+J],B[nt+(W-1)*J]=B[nt+(W-2)*J]}function r(B,J){if(!(0,ct.nk)(B))return B;const{factor:W,sinZcosA:nt,sinZsinA:tt,cosZ:g,sinZcosAs:p,sinZsinAs:b,cosZs:w,weights:T}=bt(J),[y,l]=W,a="traditional"===J.hillshadeType,{width:c,height:e}=B,t=new Uint8Array(c*e),{dzxs:s,dzys:n,outMask:m}=yt(B);for(let C=ht;C<e-ht;C++){const G=C*c;for(let O=ht;O<c-ht;O++){const P=G+O;if(!m||m[P]){const F=s[P]*y,K=n[P]*l,E=Math.sqrt(1+F*F+K*K);let L=0;if(a){let M=255*(g+tt*K-nt*F)/E;M<0&&(M=0),L=M}else{const M=b.length;for(let j=0;j<M;j++){let U=255*(w[j]+b[j]*K-p[j]*F)/E;U<0&&(U=0),L+=U*T[j]}}t[P]=255&L}}}return it(t,c,e),new H.Z({width:c,height:e,pixels:[t],mask:m,pixelType:"u8",validPixelCount:B.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}function dt(B,J,W,nt){if(!(0,ct.nk)(B)||!(0,ct.nk)(J))return;const{min:tt,max:g}=nt,p=B.pixels[0],{pixels:b,mask:w}=J,T=b[0],y=255.00001/(g-tt),l=new Uint8ClampedArray(T.length),a=new Uint8ClampedArray(T.length),c=new Uint8ClampedArray(T.length),e=W.length-1;for(let t=0;t<T.length;t++){if(w&&0===w[t])continue;const s=Math.floor((T[t]-tt)*y),[n,m]=W[s<0?0:s>e?e:s],C=p[t],G=C*m,O=G*(1-Math.abs(n%2-1)),P=C-G;switch(Math.floor(n)){case 0:l[t]=G+P,a[t]=O+P,c[t]=P;break;case 1:l[t]=O+P,a[t]=G+P,c[t]=P;break;case 2:l[t]=P,a[t]=G+P,c[t]=O+P;break;case 3:l[t]=P,a[t]=O+P,c[t]=G+P;break;case 4:l[t]=O+P,a[t]=P,c[t]=G+P;break;case 5:case 6:l[t]=G+P,a[t]=P,c[t]=O+P}}B.pixels=[l,a,c],B.updateStatistics()}function et(B,J){if(!(0,ct.nk)(B))return B;const W=J.zFactor,nt=J.pixelSizePower??1,tt=J.pixelSizeFactor??1,g=J.slopeType,p=J.isGCS,{x:b,y:w}=J.resolution;let T=W/(8*b),y=W/(8*w);p&&Math.abs(W-1)<1e-4&&(T/=z,y/=z),"adjusted"===g&&(T=(W+b**nt*tt)/(8*b),y=(W+w**nt*tt)/(8*w));const{dzxs:l,dzys:a,outMask:c}=yt(B),{width:e,height:t}=B,s=new Float32Array(e*t);for(let m=ht;m<t-ht;m++){const C=m*e;for(let G=ht;G<e-ht;G++){const O=C+G;if(!c||c[O]){const P=l[O]*T,F=a[O]*y,K=Math.sqrt(P*P+F*F);s[C+G]="percent-rise"===g?100*K:57.2957795*Math.atan(K)}}}it(s,e,t);const n=new H.Z({width:e,height:t,pixels:[s],mask:c,pixelType:"f32",validPixelCount:B.validPixelCount});return n.updateStatistics(),n}function ot(B,J={}){if(!(0,ct.nk)(B))return B;const{resolution:W}=J,nt=W?1/W.x:1,tt=W?1/W.y:1,{dzxs:g,dzys:p,outMask:b}=yt(B),{width:w,height:T}=B,y=new Float32Array(w*T);for(let l=ht;l<T-ht;l++){const a=l*w;for(let c=ht;c<w-ht;c++){const e=a+c;if(!b||b[e]){const t=g[e]*nt,s=p[e]*tt;let n=-1;0===t&&0===s||(n=90-57.29578*Math.atan2(s,-t),n<0&&(n+=360),360===n?n=0:n>360&&(n%=360)),y[a+c]=n}}}return it(y,w,T),new H.Z({width:w,height:T,pixels:[y],mask:b,pixelType:"f32",validPixelCount:B.validPixelCount,statistics:[{minValue:-1,maxValue:360}]})}function Q(B,J){if(!(0,ct.nk)(B))return B;const{curvatures:W,outMask:nt}=yt(B,J),{width:tt,height:g}=B;it(W,tt,g);const p=new H.Z({width:tt,height:g,pixels:[W],mask:nt,pixelType:"f32",validPixelCount:B.validPixelCount});return p.updateStatistics(),p}},99033:(St,wt,Z)=>{Z.d(wt,{Z:()=>tt});var H=Z(17626),ct=Z(78260),ht=Z(86810),z=Z(63290),bt=Z(77712),r=(Z(8314),Z(4619),Z(76898)),dt=Z(84727),et=Z(79751),ot=Z(17057),Q=Z(67845),B=Z(70208),J=Z(89725);let W=class extends ht.wq{constructor(g){super(g)}bind(){const{rendererJSON:g}=this;if(!g)return{success:!1};let p;switch(this.lookup={rendererJSON:{}},g.type){case"uniqueValue":p=this._updateUVRenderer(g);break;case"rasterColormap":p=this._updateColormapRenderer(g);break;case"rasterStretch":p=this._updateStretchRenderer(g);break;case"classBreaks":p=this._updateClassBreaksRenderer(g);break;case"rasterShadedRelief":p=this._updateShadedReliefRenderer(g);break;case"vectorField":p=this._updateVectorFieldRenderer();break;case"flowRenderer":p=this._updateFlowRenderer()}return p}symbolize(g){let p=g?.pixelBlock;if(!nt(p))return p;if(g.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(p,g.simpleStretchParams);try{let b;switch(p.pixels.length>3&&(p=p.extractBands(g.bandIds??[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":b=this._symbolizeColormap(p);break;case"classBreaks":b=this._symbolizeClassBreaks(p);break;case"rasterStretch":b=this._symbolizeStretch(p,g.bandIds);break;case"rasterShadedRelief":{const w=g.extent;b=this._symbolizeShadedRelief(p,{isGCS:w.spatialReference.isGeographic,resolution:{x:(w.xmax-w.xmin)/p.width,y:(w.ymax-w.ymin)/p.height}});break}}return b}catch(b){return z.Z.getLogger(this).error("symbolize",b.message),p}}simpleStretch(g,p){if(!nt(g))return g;try{return g.pixels.length>3&&(g=g.extractBands([0,1,2])),(0,ot.dy)(g,{...p,isRenderer:!0})}catch(b){return z.Z.getLogger(this).error("symbolize",b.message),g}}generateWebGLParameters(g){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:l,offset:a}=this.lookup.colormapLut||{};return{colormap:l,colormapOffset:a,type:"lut"}}const{pixelBlock:p,isGCS:b,resolution:w,bandIds:T}=g,{rendererJSON:y}=this;return"rasterStretch"===y.type?this._generateStretchWebGLParams(p,y,T):"rasterShadedRelief"===y.type?this._generateShadedReliefWebGLParams(y,b,w??void 0):"vectorField"===y.type?this._generateVectorFieldWebGLParams(y):null}_isLUTChanged(g){return!this.lookup||!this.lookup.rendererJSON||("colorRamp"in this.rendererJSON&&g?JSON.stringify(this.rendererJSON.colorRamp)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}_symbolizeColormap(g){return this._isLUTChanged()&&!this.bind().success?g:(0,et.SJ)(g,this.lookup.colormapLut)}_symbolizeClassBreaks(g){const{canUseIndexedLUT:p}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?g:p?(0,et.SJ)(g,this.lookup.colormapLut):(0,et.zp)(g,this.lookup.remapLut??[])}_symbolizeStretch(g,p){const{rasterInfo:b}=this,{pixelType:w,bandCount:T}=b,y=this.rendererJSON,l=["u8","u16","s8","s16"].includes(w);let a,c;const{dra:e}=y,{gamma:t}=this.lookup;if("histogramEqualization"===y.stretchType){const s=e?null:this.lookup?.histogramLut,n=(0,ot.AV)(y,{rasterInfo:b,pixelBlock:g,bandIds:p,returnHistogramLut:!s}),m=(0,ot.dy)(g,{...n,gamma:t,isRenderer:!0});c=(0,et.XV)(m,{lut:e?n.histogramLut:s,offset:0})}else if(l){if(e){const s=(0,ot.AV)(y,{rasterInfo:b,pixelBlock:g,bandIds:p});a=(0,ot.hE)({pixelType:w,...s,gamma:t,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return g;a=this.lookup?this.lookup.stretchLut:null}else a=this.lookup?this.lookup.stretchLut:null;if(!a)return g;T>1&&null!=p&&p.length===g?.pixels.length&&a?.lut.length===T&&(a={lut:p.map(s=>a.lut[s]),offset:a.offset}),c=(0,et.XV)(g,a)}else{const s=(0,ot.AV)(y,{rasterInfo:b,pixelBlock:g,bandIds:p});c=(0,ot.dy)(g,{...s,gamma:t,isRenderer:!0})}if(y.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return g;c=(0,et.SJ)(c,this.lookup?.colormapLut)}return c}_symbolizeShadedRelief(g,p){const b=this.rendererJSON,w={...b,...p},T=(0,Q.vC)(g,w);if(!b.colorRamp)return T;let y;if(this._isLUTChanged(!0)){if(!this.bind().success)return T;y=this.lookup?this.lookup.hsvMap:null}else y=this.lookup?this.lookup.hsvMap:null;return y?((0,Q.Ub)(T,g,y,this.rasterInfo.statistics?.[0]??{min:0,max:8e3}),T):T}_isVectorFieldData(){const{bandCount:g,dataType:p}=this.rasterInfo;return 2===g&&("vector-magdir"===p||"vector-uv"===p)}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(g){const{bandCount:p,attributeTable:b,pixelType:w}=this.rasterInfo,T=g.field1;if(!T)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const y=g.defaultSymbol,l=1===p&&["u8","s8"].includes(w);if(!(0,J.MG)(this.rasterInfo,T)&&!l)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const a=[];if(null!=b){const e=b.fields.find(t=>"value"===t.name.toLowerCase());if(!e)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};b.features.forEach(t=>{const s=g.uniqueValueInfos?.find(m=>String(m.value)===String(t.attributes[T])),n=s?.symbol?.color;n?a.push([t.attributes[e.name]].concat(n)):y&&a.push([t.attributes[e.name]].concat(y.color))})}else{if("value"!==T.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};g.uniqueValueInfos?.forEach(e=>{const t=e?.symbol?.color;t?a.push([parseInt(""+e.value,10)].concat(t)):y&&a.push([parseInt(""+e.value,10)].concat(y?.color))})}if(0===a.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const c=(0,et.Pz)({colormap:a});return this.lookup={rendererJSON:g,colormapLut:c},this.canRenderInWebGL=this._isColormapSupportedByWebGL(c?.indexedColormap),{success:!0}}_updateColormapRenderer(g){if(!(0,J.mO)(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const p=g.colormapInfos.map(w=>[w.value].concat(w.color)).sort((w,T)=>w[0]-T[0]);if(!p||0===p.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const b=(0,et.Pz)({colormap:p});return this.lookup={rendererJSON:g,colormapLut:b},this.canRenderInWebGL=this._isColormapSupportedByWebGL(b?.indexedColormap),{success:!0}}_updateShadedReliefRenderer(g){if(!(0,J.jX)(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(g.colorRamp){const p=(0,B.Jw)(g.colorRamp,{interpolateAlpha:!0}),b=(0,et.Pz)({colormap:p}),w=[],T=b.indexedColormap;for(let y=0;y<T.length;y+=4){const l=(0,ct._Y)({r:T[y],g:T[y+1],b:T[y+2]});w.push([l.h/60,l.s/100,255*l.v/100])}this.lookup={rendererJSON:g,colormapLut:b,hsvMap:w}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(g){const{attributeTable:p,pixelType:b}=this.rasterInfo,w=null!=p?p.fields.find(l=>"value"===l.name.toLowerCase()):null,T=null!=p?p.fields.find(l=>l.name.toLowerCase()===g.field.toLowerCase()):null,y=null!=w&&null!==T;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(b)||y,tableValueField:w,tableBreakField:T}}_updateClassBreaksRenderer(g){const{attributeTable:p}=this.rasterInfo,{canUseIndexedLUT:b,tableValueField:w,tableBreakField:T}=this._analyzeClassBreaks(g),y=g.classBreakInfos;if(!y?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const l=y.sort((s,n)=>s.classMaxValue-n.classMaxValue),a=l[l.length-1];let c=g.minValue;if(!b){const s=[];for(let n=0;n<l.length;n++)s.push({value:l[n].classMinValue??c,mappedColor:l[n].symbol.color}),c=l[n].classMaxValue;return s.push({value:a.classMaxValue,mappedColor:a.symbol.color}),this.lookup={rendererJSON:g,remapLut:s},this.canRenderInWebGL=!1,{success:!0}}const e=[];if(null!=p&&null!=w&&null!==T&&w!==T){const s=w.name,n=T.name,m=l[l.length-1],{classMaxValue:C}=m;c=g.minValue;for(const G of p.features){const O=G.attributes[s],P=G.attributes[n],F=P===C?m:P<c?null:l.find(({classMaxValue:K})=>K>P);F&&e.push([O].concat(F.symbol.color))}}else{c=Math.floor(g.minValue);for(let s=0;s<l.length;s++){const n=l[s];for(let m=c;m<n.classMaxValue;m++)e.push([m].concat(n.symbol.color));c=Math.ceil(n.classMaxValue)}a.classMaxValue===c&&e.push([a.classMaxValue].concat(a.symbol.color))}const t=(0,et.Pz)({colormap:e,fillUnspecified:!1});return this.lookup={rendererJSON:g,colormapLut:t},this.canRenderInWebGL=this._isColormapSupportedByWebGL(t?.indexedColormap),{success:!0}}_isColormapSupportedByWebGL(g){return!!g?.length&&g.length<=16384}_isHistogramRequired(g){return"percentClip"===g||"histogramEqualization"===g}_isValidRasterStatistics(g){return null!=g&&g.length>0&&null!=g[0].min&&null!=g[0].max}_updateStretchRenderer(g){let{stretchType:p,dra:b}=g;if(!("none"===p||g.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||b))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const w=g.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(g.stretchType)||w?.length||b||(p="minMax");const{computeGamma:T,useGamma:y,colorRamp:l}=g;let{gamma:a}=g;y&&T&&!a?.length&&(a=(0,ot.ZF)(this.rasterInfo.pixelType,g.statistics?.length?g.statistics:this.rasterInfo.statistics));const c=this.rasterInfo.pixelType,e=!b&&["u8","u16","s8","s16"].includes(c);if("histogramEqualization"===p){const t=w.map(s=>(0,ot.oc)(s));this.lookup={rendererJSON:g,histogramLut:t}}else if(e){const t=(0,ot.AV)(g,{rasterInfo:this.rasterInfo}),s=(0,ot.hE)({pixelType:c,...t,gamma:y?a:null,rounding:"floor"});this.lookup={rendererJSON:g,stretchLut:s}}if(l&&!this._isStretchColorRampNoop(l)){const t=(0,B.Jw)(l,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:g}),this.lookup.colormapLut=(0,et.Pz)({colormap:t}),this.lookup.rendererJSON=g}return this.lookup.gamma=y&&a?.length?a:null,this.canRenderInWebGL=!0,{success:!0}}_isStretchColorRampNoop(g){return"algorithmic"===g.type&&["0,0,0,255","0,0,0"].includes(g.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(g.toColor.join(","))}_generateStretchWebGLParams(g,p,b){let w=null,T=null;const y=this.lookup?.colormapLut;p.colorRamp&&y&&(w=y.indexedColormap,T=y.offset),"histogramEqualization"===p.stretchType&&(p={...p,stretchType:"minMax"});const{gamma:l}=this.lookup,a=!!(p.useGamma&&l&&l.some(K=>1!==K)),{minCutOff:c,maxCutOff:e,outMin:t,outMax:s}=(0,ot.AV)(p,{rasterInfo:this.rasterInfo,pixelBlock:g,bandIds:b});let n=0;null!=g&&(n=g.getPlaneCount(),2===n&&((g=g.clone()).statistics=[g.statistics[0]],g.pixels=[g.pixels[0]]));const{bandCount:m}=this.rasterInfo,C=Math.min(3,b?.length||n||m,m),G=new Float32Array(C),O=w||a?1:255;let P;for(P=0;P<c.length;P++)G[P]=e[P]===c[P]?0:(s-t)/(e[P]-c[P])/O;const F=new Float32Array(C);if(a&&l)for(P=0;P<C;P++)F[P]=l[P]>1?l[P]>2?6.5+(l[P]-2)**2.5:6.5+100*(2-l[P])**4:1;return{bandCount:C,outMin:t/O,outMax:s/O,minCutOff:c,maxCutOff:e,factor:G,useGamma:a,gamma:a?l:[1,1,1],gammaCorrection:a?F:[1,1,1],colormap:w,colormapOffset:T,stretchType:p.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(g,p=!1,b={x:0,y:0}){let w=null,T=null;const y=this.lookup?.colormapLut;g.colorRamp&&y&&(w=y.indexedColormap,T=y.offset);const l={...g,isGCS:p,resolution:b},a=(0,Q.TK)(l),c=this.rasterInfo.statistics?.[0];return{...a,minValue:c?.min??0,maxValue:c?.max??8e3,hillshadeType:"traditional"===g.hillshadeType?0:1,type:"hillshade",colormap:w,colormapOffset:T}}_generateVectorFieldWebGLParams(g){const{style:p,inputUnit:b,outputUnit:w,visualVariables:T,symbolTileSize:y,flowRepresentation:l}=g;let a;const c=this.rasterInfo.statistics?.[0].min??0,e=this.rasterInfo.statistics?.[0].max??50,t=T?.find(P=>"sizeInfo"===P.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:e,maxSize:.8*y,minDataValue:c,minSize:.2*y},s=t.minDataValue??c,n=t.maxDataValue??e,m=null!=t.maxSize&&null!=t.minSize?[t.minSize/y,t.maxSize/y]:[.2,.8];"wind_speed"===p&&(m[0]=m[1]=(m[0]+m[1])/2);const C=null!=s&&null!=n?[s,n]:null;if("classified_arrow"===p)if(null!=s&&null!=n&&null!=t){a=[];const P=(t.maxDataValue-t.minDataValue)/5;for(let F=0;F<6;F++)a.push(t.minDataValue+P*F)}else a=[0,1e-6,3.5,7,10.5,14];const G="flow_to"===l==("ocean_current_kn"===p||"ocean_current_m"===p)?0:Math.PI,O=T?.find(P=>"rotationInfo"===P.type);return{breakValues:a,dataRange:C,inputUnit:b,outputUnit:w,symbolTileSize:y,symbolPercentRange:m,style:p||"single_arrow",rotation:G,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?"geographic":O?.rotationType||g.rotationType,type:"vectorField"}}};function nt(g){return(0,et.nk)(g)&&0!==g.validPixelCount}(0,H._)([(0,bt.Cb)({json:{write:!0}})],W.prototype,"rendererJSON",void 0),(0,H._)([(0,bt.Cb)({type:dt.Z,json:{write:!0}})],W.prototype,"rasterInfo",void 0),(0,H._)([(0,bt.Cb)({json:{write:!0}})],W.prototype,"lookup",void 0),(0,H._)([(0,bt.Cb)()],W.prototype,"canRenderInWebGL",void 0),W=(0,H._)([(0,r.j)("esri.renderers.support.RasterSymbolizer")],W);const tt=W},70208:(St,wt,Z)=>{Z.d(wt,{B4:()=>J,H0:()=>it,Jw:()=>T,Oi:()=>bt,Uh:()=>B,XL:()=>w,oI:()=>c,pM:()=>a,xK:()=>yt});var H=Z(91558),ct=Z(78260),ht=Z(2076),z=Z(86810);const bt=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],yt=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],it=new ht.X({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function r(e,t){if(!e||!t||e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]>t[s]+2||e[s]<t[s]-2)return!1;return!0}function dt(e){const t=e.clone();return t.fromColor=e.toColor,t.toColor=e.fromColor,t.algorithm=e.algorithm,t}function ot(e,t){if(!e)return;const s=t??yt;let n=null;return"algorithmic"===e.type?s.some(m=>{if(r(e.fromColor.toRgb(),m.fromColor)&&r(e.toColor.toRgb(),m.toColor))return n=m.id,!0}):"multipart"===e.type&&s.some(m=>{const C=e.colorRamps,G=m.colorRamps;if(C&&G&&C.length===G.length&&!G.some((O,P)=>{if(!r(C[P].fromColor.toRgb(),new H.Z(O.fromColor).toRgb())||!r(C[P].toColor.toRgb(),new H.Z(O.toColor).toRgb()))return!0})){if(n)return!0;n=m.id}}),n}function B(e,t=!1){const s="string"==typeof e?e:function Q(e,t,s=!1){if(!e)return;let n=!1,m=ot(e,t);return null!=m||s||(n=!0,m=ot(e=function et(e){if("multipart"===e.type){const t=e.clone();return t.colorRamps?.length&&(t.colorRamps=t.colorRamps.reverse().map(s=>dt(s))),t}return dt(e)}(e),t)),m?{id:m,inverted:n}:void 0}(e,void 0,t)?.id;return s?it.toJSON(s):null}function J(e,t="esriCIELabAlgorithm"){const s=yt.find(({id:n})=>n===e);return s?s.colorRamps?{type:"multipart",colorRamps:s.colorRamps.map(n=>({type:"algorithmic",algorithm:t,fromColor:[...n.fromColor],toColor:[...n.toColor]}))}:{type:"algorithmic",algorithm:t,fromColor:[...s.fromColor],toColor:[...s.toColor]}:null}function W(e){const t=(e=e||{}).numColors||256,s=e.distanceOffset||0,n=null!=e.isCustomInterval?e.isCustomInterval:null!==e.distanceInterval&&e.distanceInterval!==1/(t-1),m=e.distanceInterval||1/(t-1);return{...e,numColors:t,distanceOffset:s,interpolateAlpha:!!e.interpolateAlpha,distanceInterval:m,isCustomInterval:n,weights:e.weights}}function p(e,t){let{fromColor:s,toColor:n}=e;s=[...s],n=[...n],3===s.length&&(s=s.concat([255])),3===n.length&&(n=n.concat([255]));const m=e.algorithm||"esriCIELabAlgorithm",C=W(t),{numColors:G,distanceOffset:O,isCustomInterval:P,interpolateAlpha:F}=C;if(1===G&&0===O)return[s];if(2===G&&0===O&&!P)return[s,n];const K={r:s[0],g:s[1],b:s[2]},E={r:n[0],g:n[1],b:n[2]},L="esriCIELabAlgorithm"===m?function tt(e,t,s){const{numColors:n,distanceOffset:m,distanceInterval:C,isCustomInterval:G}=s;let{l:O,a:P,b:F}=e;const K=(t.l-O)*C,E=(t.a-P)*C,L=(t.b-F)*C,M=[];if(m){const j=m/C;O+=j*K,P+=j*E,F+=j*L}for(let j=0;j<n-1;j++)M.push({l:O,a:P,b:F}),O+=K,P+=E,F+=L;return M.push(G?{l:O,a:P,b:F}:t),M}((0,ct.Y3)(K),(0,ct.Y3)(E),C):"esriHSVAlgorithm"===m?function nt(e,t,s){const{numColors:n,distanceOffset:m,distanceInterval:C,isCustomInterval:G}=s,O=0===e.s,P=0===t.s;let F=e.h,K=t.h;O&&!P?F=K:P&&!O&&(t={...t,h:F},K=F);let E,L=Math.abs(K-F);const M=360;L<180?E=(K-F)*C:(L=M-L,E=F>K?L*C:-L*C);const j=(t.s-e.s)*C,U=(t.v-e.v)*C;let{s:o,v:_}=e,S=F;if(m){const I=m/C;S=(S+I*E+M)%M,o+=I*j,_+=I*U}const A=[];for(let I=0;I<n-1;I++)A.push({h:S,s:o,v:_}),S=(S+E+M)%M,o+=j,_+=U;return A.push(G?{h:S,s:o,v:_}:t),A}((0,ct._Y)(K),(0,ct._Y)(E),C):function g(e,t,s){const{numColors:n,distanceOffset:m,distanceInterval:C,isCustomInterval:G}=s,O=e.h,P=t.h,F=2*Math.PI;let K;if(O<=P){const S=P-O,A=P-O-F;K=Math.abs(A)<Math.abs(S)?A:S}else{const S=P+F-O,A=P-O;K=Math.abs(A)<Math.abs(S)?A:S}const E=K*C,L=(t.l-e.l)*C,M=(t.c-e.c)*C;let{l:j,c:U,h:o}=e;if(m){const S=m/C;j+=S*L,U+=S*M,o=(o+S*E+F)%F}const _=[];for(let S=0;S<n-1;S++)_.push({l:j,c:U,h:o}),j+=L,U+=M,o=(o+E+F)%F;return _.push(G?{l:j,c:U,h:o}:t),_}((0,ct.sJ)(K),(0,ct.sJ)(E),C),M=[],j=s[3]??255,U=((n[3]??255)-j)/(G-1);for(let o=0;o<G;o++){const{r:_,g:S,b:A}=(0,ct.xr)(L[o]),I=F?Math.round(j+U*o):255;M.push([_,S,A,I])}return M}function w(e,t){const s=(0,z.AK)(e)?e.toJSON():e;return"multipart"===s.type?function b(e,t){const{numColors:s,interpolateAlpha:n}=W(t);let m=t?.weights;const{colorRamps:C}=e;if(m){const E=m.reduce((L,M)=>L+M);m=m.map(L=>L/E)}else{m=[];for(let E=0;E<C.length;E++)m[E]=1/C.length}const G=[],O=1/(s-1);let P=0,F=!1;for(let E=0;E<C.length;E++){const L=G.length,M=F?0:L*O-P;P+=m[E];let j=E===C.length-1?s-1-L:(m[E]-M)/O;if(F=Math.ceil(j)===j,j=Math.ceil(j),0===j)continue;const U=p(C[E],{numColors:j,interpolateAlpha:n,distanceOffset:M/m[E],distanceInterval:O/m[E]});G.push(...U)}const K=[...C[C.length-1].toColor];return 3===K.length&&K.push(255),G.push(K),G}(s,t):p(s,t)}function T(e,t){const s=w(e,t),n=t?.interpolateAlpha;return s.forEach((m,C)=>{m.unshift(C),n||m.pop()}),s}function y(e){const t=(0,ct._Y)(e);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}function l(e){return{Algorithm:e.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:y(e.fromColor),ToColor:y(e.toColor)}}function a(e){const t=B(e);if(!t)return null;if("algorithmic"===e.type)return{...l(e),Name:t};if(e.colorRamps){const s=e.colorRamps.map(l);return{type:"MultiPartColorRamp",NumColorRamps:s.length,ArrayOfColorRamp:s,Name:t}}return null}function c(e){const t=e.reverse().map(s=>{const n=s.toString(16);return n.length<2?"0"+n:n});return 4294967295&Number.parseInt(t.join(""),16)}},89725:(St,wt,Z)=>{function ct(r,dt){const{attributeTable:et,bandCount:ot}=r;return!(null!=et||!function H(r){return["u8","s8"].includes(r.pixelType)&&null!=r.statistics?.[0]?.min&&null!=r.statistics[0]?.max&&1===r.bandCount}(r))||!(null==et||ot>1||dt&&null==et.fields.find(Q=>Q.name.toLowerCase()===dt.toLowerCase()))}function ht(r){const{bandCount:dt,dataType:et,pixelType:ot}=r;return"elevation"===et||"generic"===et&&1===dt&&("s16"===ot||"s32"===ot||"f32"===ot||"f64"===ot)}function z(r,dt=!1){const{bandCount:et,colormap:ot,pixelType:Q}=r;return 1===et&&(!!ot?.length||!dt&&"u8"===Q)}function bt(r,dt=!1){const{attributeTable:et,bandCount:ot}=r;return 1===ot&&(!dt||null!=et||null!=r.histograms)}function yt(r){const{dataType:dt}=r;return"vector-uv"===dt||"vector-magdir"===dt}function it(r){const{dataType:dt}=r;return"vector-uv"===dt||"vector-magdir"===dt}Z.d(wt,{LV:()=>yt,MG:()=>ct,aG:()=>it,fI:()=>bt,jX:()=>ht,mO:()=>z})},65468:(St,wt,Z)=>{Z.d(wt,{J:()=>ht,v:()=>ct});const ct=new(Z(2076).X)({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),ht={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}}}]);