"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[249,5611],{77044:(S,C,e)=>{function h(s,n){return s?n?4:3:n?3:2}function I(s,n,i,c){if(!n?.lengths.length)return null;s.lengths.length&&(s.lengths.length=0),s.coords.length&&(s.coords.length=0);const r=s.coords,_=[],o=i?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:a,coords:p}=n,O=h(i,c);let g=0;for(const u of a){const t=R(o,p,g,u,i,c);t&&_.push(t),g+=u*O}if(_.sort((u,t)=>{let E=u[2]-t[2];return 0===E&&i&&(E=u[4]-t[4]),E}),_.length){let u=6*_[0][2];r[0]=_[0][0]/u,r[1]=_[0][1]/u,i&&(u=6*_[0][4],r[2]=0!==u?_[0][3]/u:0),(r[0]<o[0]||r[0]>o[1]||r[1]<o[2]||r[1]>o[3]||i&&(r[2]<o[4]||r[2]>o[5]))&&(r.length=0)}if(!r.length){const u=n.lengths[0]?function D(s,n,i,c,r){const _=h(c,r);let o=n,a=n+_,p=0,O=0,g=0,u=0;for(let t=0,E=i-1;t<E;t++,o+=_,a+=_){const P=s[o],v=s[o+1],L=s[o+2],M=s[a],m=s[a+1],A=s[a+2],T=c?d(P,v,L,M,m,A):l(P,v,M,m);if(T)if(p+=T,c){const U=y(P,v,L,M,m,A);O+=T*U[0],g+=T*U[1],u+=T*U[2]}else{const U=f(P,v,M,m);O+=T*U[0],g+=T*U[1]}}return p>0?c?[O/p,g/p,u/p]:[O/p,g/p]:i>0?c?[s[n],s[n+1],s[n+2]]:[s[n],s[n+1]]:null}(p,0,a[0],i,c):null;if(!u)return null;r[0]=u[0],r[1]=u[1],i&&u.length>2&&(r[2]=u[2])}return s}function R(s,n,i,c,r,_){const o=h(r,_);let a=i,p=i+o,O=0,g=0,u=0,t=0,E=0;for(let v=0,L=c-1;v<L;v++,a+=o,p+=o){const M=n[a],m=n[a+1],A=n[a+2],T=n[p],U=n[p+1],B=n[p+2];let j=M*U-T*m;t+=j,O+=(M+T)*j,g+=(m+U)*j,r&&(j=M*B-T*A,u+=(A+B)*j,E+=j),M<s[0]&&(s[0]=M),M>s[1]&&(s[1]=M),m<s[2]&&(s[2]=m),m>s[3]&&(s[3]=m),r&&(A<s[4]&&(s[4]=A),A>s[5]&&(s[5]=A))}if(t>0&&(t*=-1),E>0&&(E*=-1),!t)return null;const P=[O,g,.5*t];return r&&(P[3]=u,P[4]=.5*E),P}function l(s,n,i,c){const r=i-s,_=c-n;return Math.sqrt(r*r+_*_)}function d(s,n,i,c,r,_){const o=c-s,a=r-n,p=_-i;return Math.sqrt(o*o+a*a+p*p)}function f(s,n,i,c){return[s+.5*(i-s),n+.5*(c-n)]}function y(s,n,i,c,r,_){return[s+.5*(c-s),n+.5*(r-n),i+.5*(_-i)]}e.d(C,{Y:()=>I})},92794:(S,C,e)=>{e.d(C,{n:()=>D});var h=e(77044),I=e(66385),R=e(88071);const D={getObjectId:l=>l.objectId,getAttributes:l=>l.attributes,getAttribute:(l,d)=>l.attributes[d],cloneWithGeometry:(l,d)=>new I.u_(d,l.attributes,null,l.objectId),getGeometry:l=>l.geometry,getCentroid:(l,d)=>(null==l.centroid&&(l.centroid=(0,h.Y)(new R.Z,l.geometry,d.hasZ,d.hasM)),l.centroid)}},62359:(S,C,e)=>{e.r(C),e.d(C,{default:()=>u});var h=e(15861),I=e(17626),R=e(26584),D=e(62208),l=e(32917),d=e(77712),n=(e(8314),e(63290),e(4619),e(76898)),i=e(19702),c=e(13191),r=e(32400),_=e(46348),o=e(46196),a=e(89765),p=e(23147),O=e(45611);let g=class extends((0,i.A)(O.Z)){constructor(){super(...arguments),this.type="graphics-3d",this.symbologySnappingSupported=!0,this._slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null,this.ignoresMemoryFactor=!0}initialize(){this._set("processor",new r.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.addHandles(this.layer.on("graphic-update",t=>this.processor.graphicsCore.graphicUpdateHandler(t))),this.addResolvingPromise((0,a.E)(this).then(t=>this.fullExtentInLocalViewSpatialReference=t)),this.layer.internal?this.notifyChange("updating"):this.addHandles((0,l.gx)(()=>this.view?.basemapTerrain?.ready,()=>()=>this.notifyChange("updating"),{once:!0}))}destroy(){this._updatingHandles.removeAll(),this._set("processor",(0,D.SC)(this.processor))}get loadedGraphics(){return this.layer.graphics}get legendEnabled(){return this.canResume()&&!this.processor?.frustumVisibilitySuspended}get slicePlaneEnabled(){return this._slicePlaneEnabled&&!this.layer.internal}set slicePlaneEnabled(t){this._slicePlaneEnabled=t}getSuspendInfo(){const t=super.getSuspendInfo();return t.outsideScaleRange=this.processor?.scaleVisibilitySuspended??!1,t.outsideOfView=this.processor?.frustumVisibilitySuspended??!1,t}getHit(t){return this.processor.getHit(t)}whenGraphicBounds(t,E){return this.processor.whenGraphicBounds(t,E)}computeAttachmentOrigin(t,E){return this.processor?.computeAttachmentOrigin(t,E)}getSymbolLayerSize(t,E){return this.processor.getSymbolLayerSize(t,E)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(t){return this.processor.maskOccludee(t)}highlight(t){return this.processor.highlight(t)}elevationAlignPointsInFeatures(t,E){var P=this;return(0,h.Z)(function*(){const{processor:v}=P;if(null==v?.graphics3DGraphics)throw new R.Z("graphicslayerview3d:missing-processor","A Graphics3D processor is needed to resolve graphics elevation.");const{graphics3DGraphics:L}=v;return(0,c.W)(P.view,P.layer,m=>"number"==typeof m?L.get(m):void 0,t,E)})()}queryForSymbologySnapping(t,E){var P=this;return(0,h.Z)(function*(){return(0,_.c)(P.processor,t,E)})()}get updatePolicy(){return this.processor?.graphicsCore.effectiveUpdatePolicy||p.j.SYNC}canResume(){return super.canResume()&&!this.processor?.scaleVisibilitySuspended}isUpdating(){return this.view&&this.layer&&!(!this.processor?.updating&&(this.layer.internal||this.view.basemapTerrain?.ready))}get performanceInfo(){return new o.W(this.usedMemory,this.loadedGraphics.length,-1,-1)}get usedMemory(){return this.processor?.graphicsCore?.usedMemory??0}get unloadedMemory(){return this.processor?.graphicsCore?.unprocessedMemoryEstimate}};(0,I._)([(0,d.Cb)()],g.prototype,"loadedGraphics",null),(0,I._)([(0,d.Cb)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,I._)([(0,d.Cb)()],g.prototype,"layer",void 0),(0,I._)([(0,d.Cb)({readOnly:!0})],g.prototype,"processor",void 0),(0,I._)([(0,d.Cb)()],g.prototype,"_slicePlaneEnabled",void 0),(0,I._)([(0,d.Cb)({type:Boolean})],g.prototype,"slicePlaneEnabled",null),g=(0,I._)([(0,n.j)("esri.views.3d.layers.GraphicsLayerView3D")],g);const u=g},19702:(S,C,e)=>{e.d(C,{A:()=>c});var h=e(15861),I=e(17626),R=e(54024),D=e(10699),l=e(32917),d=e(77712),n=(e(8314),e(63290),e(4619),e(76898)),i=e(36947);const c=r=>{let _=class extends r{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(o){super.postscript(o),(0,i.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var o=this;return(0,h.Z)(function*(){const a=new AbortController,p=a.signal;o.addHandles((0,R.kB)(()=>a.abort())),yield(0,l.N1)(()=>o.view.defaultsFromMap?.heightModelInfoReady,p),(0,D.k_)(p);const O=(0,i.Wt)(o.layer,o.view.heightModelInfo,o.supportsHeightUnitConversion);if(O)throw O})()}canResume(){const o=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!o?.minScale||!o.maxScale||o.minScale>=o.maxScale)}getSuspendInfo(){const o=super.getSuspendInfo(),a=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return a&&a.minScale&&a.maxScale&&a.minScale<a.maxScale&&(o.outsideScaleRange=!0),o}};return(0,I._)([(0,d.Cb)()],_.prototype,"view",void 0),(0,I._)([(0,d.Cb)()],_.prototype,"slicePlaneEnabled",void 0),_=(0,I._)([(0,n.j)("esri.views.3d.layers.LayerView3D")],_),_}},13191:(S,C,e)=>{e.d(C,{W:()=>c});var h=e(15861),R=(e(29132),e(10699)),D=e(29302),l=e(43668),d=e(41967),f=e(60507),y=e(81468),s=e(79112),n=e(74746),i=e(65234);function c(_,o,a,p,O){return r.apply(this,arguments)}function r(){return(r=(0,h.Z)(function*(_,o,a,p,O){const{elevationProvider:g,renderCoordsHelper:u}=_,{elevationInfo:t}=o,{pointsInFeatures:E,spatialReference:P}=p,v=i.Z.fromJSON(P),L=(0,n.WI)(t,!0),M=yield(0,n.kr)(L,v,O);(0,R.k_)(O);const m=[],A=new Set,T=new Set,U=new s.o,B=(0,d.T)(0,0,0,i.Z.WGS84),j=new y.Lm,N=(0,D.Ue)();B.spatialReference=v;const x=_.elevationProvider.spatialReference??_.spatialReference;for(const{objectId:b,points:G}of E){const W=a(b);if(null!=W){W.isDraped&&T.add(b),U.setFromElevationInfo((0,f.Jn)(W.graphic.geometry,t)),U.updateFeatureExpressionInfoContext(M,W.graphic,o);for(const{x:K,y:F,z:H}of G)B.x=K,B.y=F,B.z=H??0,yield(0,l.U)(B,N,x,0,{signal:O}),(0,y.qZ)(N,g,U,u,j),m.push(j.z)}else{for(const K of G)m.push(K.z??0);A.add(b)}}return{elevations:m,drapedObjectIds:T,failedObjectIds:A}})).apply(this,arguments)}},46348:(S,C,e)=>{e.d(C,{c:()=>D});var h=e(15861),I=e(10699),R=e(46679);function D(f,y,s){return l.apply(this,arguments)}function l(){return l=(0,h.Z)(function*(f,y,s){if(null==f||0===y.candidates.length)return d;const n=f.graphics3DGraphicsByObjectID??f.graphics3DGraphics,i=[],c=[],{renderer:r}=f,_=null!=r&&"arcadeRequired"in r&&r.arcadeRequired?(0,R.LC)():null,o=function(){var t=(0,h.Z)(function*(E,{graphic:P,graphics3DSymbol:v}){const L=yield _,M=yield f.getRenderingInfoAsync(P,r,L,{signal:s});return null==M?[]:v.queryForSnapping(E,p,M,s)});return function(P,v){return t.apply(this,arguments)}}(),{candidates:a,spatialReference:p}=y;for(let t=0;t<a.length;++t){const E=a[t],{objectId:P}=E,v="number"==typeof P?n?.get(P):void 0;if(null==v)continue;const{graphics3DSymbol:L}=v;L.symbologySnappingSupported&&(i.push(o(E,v)),c.push(t))}if(0===i.length)return d;const O=yield Promise.all(i);(0,I.k_)(s);const g=[],u=[];for(let t=0;t<O.length;++t){const E=O[t],P=c[t];for(const v of E)g.push(v),u.push(P)}return{candidates:g,sourceCandidateIndices:u}}),l.apply(this,arguments)}const d={candidates:[],sourceCandidateIndices:[]}},89765:(S,C,e)=>{e.d(C,{E:()=>R});var h=e(46367),I=e(35082);function R(D){const l=D.view.spatialReference,d=D.layer.fullExtent,f=null!=d&&d.spatialReference;if(null==d||!f)return Promise.resolve(null);if(f.equals(l))return Promise.resolve(d.clone());const y=(0,h.iV)(d,l);return null!=y?Promise.resolve(y):D.view.state.isLocal?(0,I.projectGeometry)(d,l,D.layer.portalItem).then(s=>!D.destroyed&&s?s:null).catch(()=>null):Promise.resolve(null)}},45611:(S,C,e)=>{e.d(C,{Z:()=>_});var h=e(17626),I=e(83761),R=e(61885),D=e(61996),l=e(63290),d=e(62208),f=e(60330),y=e(77712),i=(e(8314),e(4619),e(76898)),c=e(11426);let r=class extends((0,D.IG)((0,f.v)(R.Z.EventedMixin(I.Z)))){constructor(o){super(o),this._updatingHandles=new c.R,this.layer=null,this.parent=null}initialize(){this.when().catch(o=>{if("layerview:create-error"!==o.name){const a=this.layer&&this.layer.id||"no id",p=this.layer?.title||"no title";l.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${p}', id: '${a}')`,o)}})}destroy(){this._updatingHandles=(0,d.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(o){this._overrideIfSome("visible",o)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const o=this.parent?.suspended?this.parent.suspendInfo:{};return this.view?.ready||(o.viewNotReady=!0),this.layer&&this.layer.loaded||(o.layerNotLoaded=!0),this.visible||(o.layerInvisible=!0),o}isUpdating(){return!1}};(0,h._)([(0,y.Cb)()],r.prototype,"fullOpacity",null),(0,h._)([(0,y.Cb)()],r.prototype,"layer",void 0),(0,h._)([(0,y.Cb)()],r.prototype,"parent",void 0),(0,h._)([(0,y.Cb)({readOnly:!0})],r.prototype,"suspended",null),(0,h._)([(0,y.Cb)({readOnly:!0})],r.prototype,"suspendInfo",null),(0,h._)([(0,y.Cb)({readOnly:!0})],r.prototype,"legendEnabled",null),(0,h._)([(0,y.Cb)({type:Boolean,readOnly:!0})],r.prototype,"updating",null),(0,h._)([(0,y.Cb)({readOnly:!0})],r.prototype,"updatingProgress",null),(0,h._)([(0,y.Cb)()],r.prototype,"visible",null),(0,h._)([(0,y.Cb)()],r.prototype,"view",void 0),r=(0,h._)([(0,i.j)("esri.views.layers.LayerView")],r);const _=r}}]);