"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[4802],{4802:(L,M,r)=>{r.d(M,{Z:()=>h});var x=r(15861),g=r(17626),D=r(83761),F=r(26584),S=r(8314),p=r(10699),v=r(21726),O=r(77712),E=(r(63290),r(4619),r(76898)),T=r(35391),B=r(15283),Z=r(2618),U=r(90463),N=(r(29132),r(20477)),A=r(96854),f=r(2004);function c(){return(c=(0,x.Z)(function*(t,e,d){const m=(0,Z.en)(t),C=yield(0,N.Vr)(m,A.Z.from(e),{...d}),R=C.data.extent;return!R||isNaN(R.xmin)||isNaN(R.ymin)||isNaN(R.xmax)||isNaN(R.ymax)?{count:C.data.count,extent:null}:{count:C.data.count,extent:f.Z.fromJSON(R)}})).apply(this,arguments)}var n=r(24865),s=r(2865),l=r(20721),u=r(17253);let i=class extends D.Z{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,v.mN)(this.url)}execute(t,e){var d=this;return(0,x.Z)(function*(){const m=yield d.executeJSON(t,e);return d.featureSetFromJSON(t,m,e)})()}executeJSON(t,e){var d=this;return(0,x.Z)(function*(){const m=d._normalizeQuery(t),C=null!=t.outStatistics?.[0],R=(0,S.Z)("featurelayer-pbf-statistics"),I=!C||R;let j;if(d.pbfSupported&&I)try{j=yield(0,l.t)(d.url,m,e)}catch(V){if("query:parsing-pbf"!==V.name)throw V;d.pbfSupported=!1}return d.pbfSupported&&I||(j=yield(0,s.F)(d.url,m,e)),d._normalizeFields(j.fields),j})()}featureSetFromJSON(t,e,d){var m=this;return(0,x.Z)(function*(){if(!m._queryIs3DObjectFormat(t)||null==m.infoFor3D||!e.features)return u.Z.fromJSON(e);const{meshFeatureSetFromJSON:C}=yield(0,p.Hl)(Promise.all([r.e(5453),r.e(3740)]).then(r.bind(r,3740)),d);return C(t,m.infoFor3D,e)})()}executeForCount(t,e){return(0,U.P)(this.url,this._normalizeQuery(t),e)}executeForExtent(t,e){return function y(t,e,d){return c.apply(this,arguments)}(this.url,this._normalizeQuery(t),e)}executeForIds(t,e){return(0,n.G)(this.url,this._normalizeQuery(t),e)}executeRelationshipQuery(t,e){var d=this;return(0,x.Z)(function*(){const[{default:m},{executeRelationshipQuery:C}]=yield(0,p.Hl)(Promise.all([Promise.resolve().then(r.bind(r,67010)),r.e(8727).then(r.bind(r,78727))]),e);return t=m.from(t),(d.gdbVersion||d.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||d.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||d.dynamicDataSource),C(d.url,t,e)})()}executeRelationshipQueryForCount(t,e){var d=this;return(0,x.Z)(function*(){const[{default:m},{executeRelationshipQueryForCount:C}]=yield(0,p.Hl)(Promise.all([Promise.resolve().then(r.bind(r,67010)),r.e(8727).then(r.bind(r,78727))]),e);return t=m.from(t),(d.gdbVersion||d.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||d.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||d.dynamicDataSource),C(d.url,t,e)})()}executeAttachmentQuery(t,e){var d=this;return(0,x.Z)(function*(){const{executeAttachmentQuery:m,fetchAttachments:C,processAttachmentQueryResult:R}=yield(0,p.Hl)(r.e(5531).then(r.bind(r,85531)),e),I=(0,Z.en)(d.url);return R(I,yield d.queryAttachmentsSupported?m(I,t,e):C(I,t,e))})()}executeTopFeaturesQuery(t,e){var d=this;return(0,x.Z)(function*(){const{executeTopFeaturesQuery:m}=yield(0,p.Hl)(Promise.all([r.e(8592),r.e(8628)]).then(r.bind(r,28628)),e);return m(d.parsedUrl,t,d.sourceSpatialReference,e)})()}executeForTopIds(t,e){var d=this;return(0,x.Z)(function*(){const{executeForTopIds:m}=yield(0,p.Hl)(Promise.all([r.e(8592),r.e(9931)]).then(r.bind(r,39931)),e);return m(d.parsedUrl,t,e)})()}executeForTopExtents(t,e){var d=this;return(0,x.Z)(function*(){const{executeForTopExtents:m}=yield(0,p.Hl)(Promise.all([r.e(8592),r.e(4080)]).then(r.bind(r,14080)),e);return m(d.parsedUrl,t,e)})()}executeForTopCount(t,e){var d=this;return(0,x.Z)(function*(){const{executeForTopCount:m}=yield(0,p.Hl)(Promise.all([r.e(8592),r.e(1147)]).then(r.bind(r,91147)),e);return m(d.parsedUrl,t,e)})()}_normalizeQuery(t){let e=A.Z.from(t);e.sourceSpatialReference=e.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(e=e===t?e.clone():e,e.gdbVersion=t.gdbVersion||this.gdbVersion,e.dynamicDataSource=t.dynamicDataSource?B.n.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:d}=this;if(null!=d&&this._queryIs3DObjectFormat(t)){e=e===t?e.clone():e,e.formatOf3DObjects=null;const{supportedFormats:m,queryFormats:C}=d,R=(0,T.S0)("model/gltf-binary",m)??(0,T.Ow)("glb",m),I=(0,T.S0)("model/gltf+json",m)??(0,T.Ow)("gltf",m);for(const j of C){if(j===R){e.formatOf3DObjects=j;break}j!==I||e.formatOf3DObjects||(e.formatOf3DObjects=j)}if(!e.formatOf3DObjects)throw new F.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(null==e.outFields||!e.outFields.includes("*")){e=e===t?e.clone():e,null==e.outFields&&(e.outFields=[]);const{originX:j,originY:V,originZ:b,translationX:J,translationY:z,translationZ:Q,scaleX:W,scaleY:K,scaleZ:H,rotationX:$,rotationY:X,rotationZ:Y,rotationDeg:w}=d.transformFieldRoles;e.outFields.push(j,V,b,J,z,Q,W,K,H,$,X,Y,w)}}return e}_normalizeFields(t){if(null!=this.fieldsIndex&&null!=t)for(const e of t){const d=this.fieldsIndex.get(e.name);d&&Object.assign(e,d.toJSON())}}_queryIs3DObjectFormat(t){return null!=this.infoFor3D&&!0===t.returnGeometry&&"xyFootprint"!==t.multipatchOption&&!t.outStatistics}};(0,g._)([(0,O.Cb)({type:B.n})],i.prototype,"dynamicDataSource",void 0),(0,g._)([(0,O.Cb)()],i.prototype,"fieldsIndex",void 0),(0,g._)([(0,O.Cb)()],i.prototype,"gdbVersion",void 0),(0,g._)([(0,O.Cb)()],i.prototype,"infoFor3D",void 0),(0,g._)([(0,O.Cb)({readOnly:!0})],i.prototype,"parsedUrl",null),(0,g._)([(0,O.Cb)()],i.prototype,"pbfSupported",void 0),(0,g._)([(0,O.Cb)()],i.prototype,"queryAttachmentsSupported",void 0),(0,g._)([(0,O.Cb)()],i.prototype,"sourceSpatialReference",void 0),(0,g._)([(0,O.Cb)({type:String})],i.prototype,"url",void 0),i=(0,g._)([(0,E.j)("esri.tasks.QueryTask")],i);const h=i},35391:(L,M,r)=>{r.d(M,{$6:()=>A,$z:()=>D,F7:()=>g,Ow:()=>v,S0:()=>p,d1:()=>O,dm:()=>_});const x=[["binary","application/octet-stream","bin",""]];function g(f,y){return null!=B(y.name,f?.supportedFormats??[])}function D(f,y){if(!f)return!1;const c=_(y,f.supportedFormats??[]);return null!=c&&f.editFormats.includes(c)}function p(f,y){return Z(function T(f,y){const c=f.toLowerCase();return P(y).find(n=>U(n)===c)}(f,y))}function v(f,y){return Z(B(f,y))}function O(f,y){return U(function E(f,y){return P(y).find(c=>Z(c)===f)}(f,y))}function _(f,y){return v(f.name,y)??p(f.type,y)}function P(f){return[...x,...f]}function B(f,y){const c=f.toLowerCase();return P(y).find(n=>function G(f){return f?.[2].split(",").map(y=>y.toLowerCase())??[]}(n).some(s=>c.endsWith(s)))}function Z(f){return f?.[0]}function U(f){return f?.[1].toLowerCase()}function A(f){return f.tables?.find(y=>"assetMaps"===y.role)}},76391:(L,M,r)=>{function x(g){const D={};for(const F in g){if("declaredClass"===F)continue;const S=g[F];if(null!=S&&"function"!=typeof S)if(Array.isArray(S)){D[F]=[];for(let p=0;p<S.length;p++)D[F][p]=x(S[p])}else"object"==typeof S?S.toJSON&&(D[F]=JSON.stringify(S)):D[F]=S}return D}r.d(M,{A:()=>x})},90463:(L,M,r)=>{r.d(M,{P:()=>S});var x=r(15861),g=r(2618),D=r(20477),F=r(96854);function S(v,O,_){return p.apply(this,arguments)}function p(){return(p=(0,x.Z)(function*(v,O,_){const P=(0,g.en)(v);return(0,D.hH)(P,F.Z.from(O),{..._}).then(E=>E.data.count)})).apply(this,arguments)}},24865:(L,M,r)=>{r.d(M,{G:()=>S});var x=r(15861),g=r(2618),D=r(20477),F=r(96854);function S(v,O,_){return p.apply(this,arguments)}function p(){return(p=(0,x.Z)(function*(v,O,_){const P=(0,g.en)(v);return(0,D.Ev)(P,F.Z.from(O),{..._}).then(E=>E.data.objectIds)})).apply(this,arguments)}},2865:(L,M,r)=>{r.d(M,{F:()=>O,e:()=>p});var x=r(15861),g=r(2618),D=r(20477),F=r(17253),S=r(96854);function p(P,E,T){return v.apply(this,arguments)}function v(){return(v=(0,x.Z)(function*(P,E,T){const B=yield O(P,E,T);return F.Z.fromJSON(B)})).apply(this,arguments)}function O(P,E,T){return _.apply(this,arguments)}function _(){return(_=(0,x.Z)(function*(P,E,T){const B=(0,g.en)(P),Z={...T},U=S.Z.from(E),{data:G}=yield(0,D.JT)(B,U,U.sourceSpatialReference,Z);return G})).apply(this,arguments)}},20721:(L,M,r)=>{r.d(M,{t:()=>f});var x=r(15861),g=r(2618),D=r(62208),F=r(33696),S=r(82054);function p(c,n){return n}function v(c,n,s,l){switch(s){case 0:return E(c,n+l,0);case 1:return"lowerLeft"===c.originPosition?E(c,n+l,1):function T({translate:c,scale:n},s,l){return c[l]-s*n[l]}(c,n+l,1)}}function O(c,n,s,l){return 2===s?E(c,n,2):v(c,n,s,l)}function _(c,n,s,l){return 2===s?0===n?0:E(c,n,3):v(c,n,s,l)}function P(c,n,s,l){return 3===s?0===n?0:E(c,n,3):O(c,n,s,l)}function E({translate:c,scale:n},s,l){return c[l]+s*n[l]}class B{constructor(n){this._options=n,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=p,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(n){if(this._options.applyTransform&&(n.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!n.hasZ)return;const s=(0,F.k)(n.geometryType,this._options.sourceSpatialReference,n.spatialReference);if(null!=s)for(const l of n.features)s(l.geometry)}createSpatialReference(){return{}}addField(n,s){const l=n.fields;(0,D.O3)(l),l.push(s);const u=l.map(i=>i.name);this._attributesConstructor=function(){for(const i of u)this[i]=null}}addFeature(n,s){n.features.push(s)}prepareFeatures(n){switch(this._transform=n.transform,this._options.applyTransform&&n.transform&&(this._applyTransform=this._deriveApplyTransform(n)),this._mValueOffset=null,this._vertexDimension=2,n.hasZ&&this._vertexDimension++,n.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),n.geometryType){case"esriGeometryPoint":this.addCoordinate=(s,l,u)=>this.addCoordinatePoint(s,l,u),this.createGeometry=s=>this.createPointGeometry(s);break;case"esriGeometryPolygon":this.addCoordinate=(s,l,u)=>this._addCoordinatePolygon(s,l,u),this.createGeometry=s=>this._createPolygonGeometry(s);break;case"esriGeometryPolyline":this.addCoordinate=(s,l,u)=>this._addCoordinatePolyline(s,l,u),this.createGeometry=s=>this._createPolylineGeometry(s);break;case"esriGeometryMultipoint":this.addCoordinate=(s,l,u)=>this._addCoordinateMultipoint(s,l,u),this.createGeometry=s=>this._createMultipointGeometry(s)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(n,s,l){0===this._lengths.length&&(this._toAddInCurrentPath=s),this._lengths.push(s)}addQueryGeometry(n,s){const{queryGeometry:l,queryGeometryType:u}=s,i=(0,S.$g)(l.clone(),l,!1,!1,this._transform),h=(0,S.di)(i,u,!1,!1);n.queryGeometryType=u,n.queryGeometry={...h}}createPointGeometry(n){const s={x:0,y:0,spatialReference:n.spatialReference};return n.hasZ&&(s.z=0),n.hasM&&(s.m=0),s}addCoordinatePoint(n,s,l){switch(s=this._applyTransform(this._transform,s,l,0),l){case 0:n.x=s;break;case 1:n.y=s;break;case 2:"z"in n?n.z=s:n.m=s;break;case 3:n.m=s}}_transformPathLikeValue(n,s){let l=0;return s<=1&&(l=this._previousCoordinate[s],this._previousCoordinate[s]+=n),null===this._mValueOffset||0!==n||s%this._mValueOffset?this._applyTransform(this._transform,n,s,l):0}_addCoordinatePolyline(n,s,l){this._dehydratedAddPointsCoordinate(n.paths,s,l)}_addCoordinatePolygon(n,s,l){this._dehydratedAddPointsCoordinate(n.rings,s,l)}_addCoordinateMultipoint(n,s,l){0===l&&n.points.push([]);const u=this._transformPathLikeValue(s,l);n.points[n.points.length-1].push(u)}_createPolygonGeometry(n){return{rings:[[]],spatialReference:n.spatialReference,hasZ:!!n.hasZ,hasM:!!n.hasM}}_createPolylineGeometry(n){return{paths:[[]],spatialReference:n.spatialReference,hasZ:!!n.hasZ,hasM:!!n.hasM}}_createMultipointGeometry(n){return{points:[],spatialReference:n.spatialReference,hasZ:!!n.hasZ,hasM:!!n.hasM}}_dehydratedAddPointsCoordinate(n,s,l){0===l&&0==this._toAddInCurrentPath--&&(n.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const u=this._transformPathLikeValue(s,l),i=n[n.length-1];0===l&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),i.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=u}_deriveApplyTransform(n){const{hasZ:s,hasM:l}=n;return s&&l?P:s?O:l?_:v}}var Z=r(20477),G=(r(17253),r(96854));function f(c,n,s){return y.apply(this,arguments)}function y(){return(y=(0,x.Z)(function*(c,n,s){const l=(0,g.en)(c),u={...s},i=G.Z.from(n),h=!i.quantizationParameters,{data:t}=yield(0,Z.qp)(l,i,new B({sourceSpatialReference:i.sourceSpatialReference,applyTransform:h}),u);return t})).apply(this,arguments)}},20477:(L,M,r)=>{r.d(M,{Ev:()=>A,JT:()=>B,Vn:()=>n,Vr:()=>y,hH:()=>f,n7:()=>N,qp:()=>U});var x=r(15861),g=r(84792),D=r(21726),F=r(91179),S=r(93555),p=r(37053),v=r(76391),O=r(85262),_=r(61515);const P="Layer does not support extent calculation.";function T(u,i){const h=u.geometry,t=u.toJSON();delete t.compactGeometryEnabled,delete t.defaultSpatialReferenceEnabled;const e=t;let d,m,C;if(null!=h&&(m=h.spatialReference,C=(0,p.B9)(m),e.geometryType=(0,F.Ji)(h),e.geometry=function E(u,i){if(i&&"extent"===u.type)return`${u.xmin},${u.ymin},${u.xmax},${u.ymax}`;if(i&&"point"===u.type)return`${u.x},${u.y}`;const h=u.toJSON();return delete h.spatialReference,JSON.stringify(h)}(h,u.compactGeometryEnabled),e.inSR=C),t.groupByFieldsForStatistics&&(e.groupByFieldsForStatistics=t.groupByFieldsForStatistics.join(",")),t.objectIds&&(e.objectIds=t.objectIds.join(",")),t.orderByFields&&(e.orderByFields=t.orderByFields.join(",")),!t.outFields||!t.returnDistinctValues&&(i?.returnCountOnly||i?.returnExtentOnly||i?.returnIdsOnly)?delete e.outFields:e.outFields=t.outFields.includes("*")?"*":t.outFields.join(","),t.outSR?(e.outSR=(0,p.B9)(t.outSR),d=u.outSpatialReference):h&&(t.returnGeometry||t.returnCentroid)&&(e.outSR=e.inSR,d=m),t.returnGeometry&&delete t.returnGeometry,t.outStatistics&&(e.outStatistics=JSON.stringify(t.outStatistics)),t.fullText&&(e.fullText=JSON.stringify(t.fullText)),t.pixelSize&&(e.pixelSize=JSON.stringify(t.pixelSize)),t.quantizationParameters&&(u.defaultSpatialReferenceEnabled&&null!=m&&null!=u.quantizationParameters?.extent&&m.equals(u.quantizationParameters.extent.spatialReference)&&delete t.quantizationParameters.extent.spatialReference,e.quantizationParameters=JSON.stringify(t.quantizationParameters)),t.parameterValues&&(e.parameterValues=JSON.stringify(t.parameterValues)),t.rangeValues&&(e.rangeValues=JSON.stringify(t.rangeValues)),t.dynamicDataSource&&(e.layer=JSON.stringify({source:t.dynamicDataSource}),delete t.dynamicDataSource),t.timeExtent){const R=t.timeExtent,{start:I,end:j}=R;null==I&&null==j||(e.time=I===j?I:`${I??"null"},${j??"null"}`),delete t.timeExtent}return u.defaultSpatialReferenceEnabled&&null!=m&&null!=d&&m.equals(d)&&(e.defaultSR=e.inSR,delete e.inSR,delete e.outSR),e}function B(u,i,h,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,x.Z)(function*(u,i,h,t){const e=null!=i.timeExtent&&i.timeExtent.isEmpty?{data:{features:[]}}:yield n(u,i,"json",t);return(0,_.p)(i,h,e.data),e})).apply(this,arguments)}function U(u,i,h,t){return G.apply(this,arguments)}function G(){return(G=(0,x.Z)(function*(u,i,h,t){if(null!=i.timeExtent&&i.timeExtent.isEmpty)return{data:h.createFeatureResult()};const e=yield N(u,i,t),d=e;return d.data=(0,O.C)(e.data,h),d})).apply(this,arguments)}function N(u,i,h){return n(u,i,"pbf",h)}function A(u,i,h){return null!=i.timeExtent&&i.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):n(u,i,"json",h,{returnIdsOnly:!0})}function f(u,i,h){return null!=i.timeExtent&&i.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):n(u,i,"json",h,{returnIdsOnly:!0,returnCountOnly:!0})}function y(u,i,h){return c.apply(this,arguments)}function c(){return(c=(0,x.Z)(function*(u,i,h){if(null!=i.timeExtent&&i.timeExtent.isEmpty)return{data:{count:0,extent:null}};const t=yield n(u,i,"json",h,{returnExtentOnly:!0,returnCountOnly:!0}),e=t.data;if(e.hasOwnProperty("extent"))return t;if(e.features)throw new Error(P);if(e.hasOwnProperty("count"))throw new Error(P);return t})).apply(this,arguments)}function n(u,i,h){return s.apply(this,arguments)}function s(){return(s=(0,x.Z)(function*(u,i,h,t={},e={}){const d="string"==typeof u?(0,D.mN)(u):u,m=i.geometry?[i.geometry]:[],R=(yield(0,S.aX)(m,null,{signal:t.signal}))?.[0];null!=R&&((i=i.clone()).geometry=R);const I=(0,v.A)({...d.query,f:h,...e,...T(i,e)});return(0,g.Z)((0,D.v_)(d.path,function l(u,i){return null!=u.formatOf3DObjects&&!(i.returnCountOnly||i.returnExtentOnly||i.returnIdsOnly)}(i,e)?"query3d":"query"),{...t,responseType:"pbf"===h?"array-buffer":"json",query:{...I,...t.query}})})).apply(this,arguments)}}}]);