"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[7037],{47037:(G,A,s)=>{s.r(A),s.d(A,{default:()=>b});var L=s(15861),p=s(17626),R=s(84792),T=s(26584),U=s(63290),P=s(21286),j=s(99959),x=s(10699),f=s(77712),B=(s(8314),s(4619),s(76898)),t=s(79800),l=s(29302),I=s(92383),v=s(2004),h=s(65234),u=s(39774),W=s(44917),K=s(50085),S=s(65088),z=s(50107),Z=s(49286),N=s(6647),V=s(99555),C=s(13812),O=s(60507);let E=class extends((0,S.Y)((0,Z.q)((0,N.I)((0,V.M)((0,j.R)((0,z.N)((0,K.V)(W.Z)))))))){constructor(o){super(o),this.operationalLayerType="IntegratedMesh3DTilesLayer",this.spatialReference=new h.Z({wkid:4326,vcsWkid:115700}),this.fullExtent=new v.Z(-180,-90,180,90,this.spatialReference),this.url=null,this.type="integrated-mesh-3dtiles",this.path=null,this.minScale=0,this.maxScale=0}set elevationInfo(o){this._set("elevationInfo",o),this._validateElevationInfo()}_verifyArray(o,_){if(!Array.isArray(o)||o.length<_)return!1;for(const M of o)if("number"!=typeof M)return!1;return!0}_initFullExtent(o){const _=o.root?.boundingVolume;if(!_)return;if(_.box){const r=_?.box;if(r[3]>7972671&&r[7]>7972671&&r[11]>7945940)return}const M=o.root?.transform,c=(0,l.Ue)();if(_.region&&this._verifyArray(_.region,6)){const r=_.region,y=(0,P.BV)(r[0]),a=(0,P.BV)(r[1]),i=r[4],n=(0,P.BV)(r[2]),e=(0,P.BV)(r[3]);this.fullExtent=new v.Z({xmin:y,ymin:a,zmin:i,xmax:n,ymax:e,zmax:r[5],spatialReference:this.spatialReference})}else if(_.sphere&&this._verifyArray(_.sphere,4)){const r=_.sphere,y=(0,l.al)(r[0],r[1],r[2]),a=r[3]/Math.sqrt(3),i=(0,l.Ue)();(0,t.f)(i,y,(0,l.al)(-a,-a,-a));const n=(0,l.Ue)();if((0,t.g)(n,y,(0,l.al)(a,a,a)),M&&this._verifyArray(M,16)){const D=M;(0,t.e)(c,i,D),(0,t.c)(i,c),(0,t.e)(c,n,D),(0,t.c)(n,c)}(0,u.projectBuffer)(i,I.pn,0,i,h.Z.WGS84,0,1),(0,u.projectBuffer)(n,I.pn,0,n,h.Z.WGS84,0,1);const e=(0,l.Ue)(),m=(0,l.Ue)();(0,t.y)(e,i,n),(0,t.C)(m,i,n),this.fullExtent=new v.Z({xmin:e[0],ymin:e[1],zmin:e[2],xmax:m[0],ymax:m[1],zmax:m[2],spatialReference:this.spatialReference})}else if(_.box&&this._verifyArray(_.box,12)){const r=_.box,y=(0,l.al)(r[0],r[1],r[2]),a=(0,l.al)(r[3],r[4],r[5]),i=(0,l.al)(r[6],r[7],r[8]),n=(0,l.al)(r[9],r[10],r[11]),e=[];for(let d=0;d<8;++d)e.push((0,l.Ue)());if((0,t.g)(e[0],y,a),(0,t.g)(e[0],e[0],i),(0,t.g)(e[0],e[0],n),(0,t.z)(e[1],y,a),(0,t.g)(e[1],e[1],i),(0,t.g)(e[1],e[1],n),(0,t.g)(e[2],y,a),(0,t.z)(e[2],e[2],i),(0,t.g)(e[2],e[2],n),(0,t.z)(e[3],y,a),(0,t.z)(e[3],e[3],i),(0,t.g)(e[3],e[3],n),(0,t.g)(e[4],y,a),(0,t.g)(e[4],e[4],i),(0,t.z)(e[4],e[4],n),(0,t.z)(e[5],y,a),(0,t.g)(e[5],e[5],i),(0,t.z)(e[5],e[5],n),(0,t.g)(e[6],y,a),(0,t.z)(e[6],e[6],i),(0,t.z)(e[6],e[6],n),(0,t.z)(e[7],y,a),(0,t.z)(e[7],e[7],i),(0,t.z)(e[7],e[7],n),M&&this._verifyArray(M,16)){const d=M;for(let g=0;g<8;++g)(0,t.e)(e[g],e[g],d)}const m=(0,l.al)(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),D=(0,l.al)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let d=0;d<8;++d)(0,u.projectBuffer)(e[d],I.pn,0,e[d],h.Z.WGS84,0,1),(0,t.y)(D,D,e[d]),(0,t.C)(m,m,e[d]);this.fullExtent=new v.Z({xmin:D[0],ymin:D[1],zmin:D[2],xmax:m[0],ymax:m[1],zmax:m[2],spatialReference:this.spatialReference})}}load(o){var _=this;return(0,L.Z)(function*(){return _.addResolvingPromise(_._doLoad(o)),_})()}_doLoad(o){var _=this;return(0,L.Z)(function*(){const M=null!=o?o.signal:null;try{yield _.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:c=>{if(c.typeKeywords?.includes("IntegratedMesh"))return!0;throw new T.Z("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service containing IntegratedMesh"})}},o)}catch(c){(0,x.r9)(c)}_.url&&(yield(0,R.Z)(_.url,{query:{f:"json",..._.customParameters,token:_.apiKey},responseType:"json",signal:M}).then(r=>{_._initFullExtent(r.data)},r=>{(0,x.r9)(r)}))})()}fetchAttributionData(){var o=this;return(0,L.Z)(function*(){return o.load().then(()=>({}))})()}_validateElevationInfo(){const o=this.elevationInfo,_="Integrated mesh 3d tiles layers";(0,O.LR)(U.Z.getLogger(this),(0,O.Uy)(_,"absolute-height",o)),(0,O.LR)(U.Z.getLogger(this),(0,O.kf)(_,o))}};(0,p._)([(0,f.Cb)({type:["IntegratedMesh3DTilesLayer"]})],E.prototype,"operationalLayerType",void 0),(0,p._)([(0,f.Cb)({type:h.Z})],E.prototype,"spatialReference",void 0),(0,p._)([(0,f.Cb)({type:v.Z})],E.prototype,"fullExtent",void 0),(0,p._)([(0,f.Cb)(C.PV)],E.prototype,"elevationInfo",null),(0,p._)([(0,f.Cb)({type:["show","hide"]})],E.prototype,"listMode",void 0),(0,p._)([(0,f.Cb)(C.HQ)],E.prototype,"url",void 0),(0,p._)([(0,f.Cb)({readOnly:!0})],E.prototype,"type",void 0),(0,p._)([(0,f.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],E.prototype,"path",void 0),(0,p._)([(0,f.Cb)({type:Number,json:{origins:{"web-scene":{name:"layerDefinition.minScale",write:()=>{},read:()=>{}},"portal-item":{name:"layerDefinition.minScale",write:()=>{},read:()=>{}}}}})],E.prototype,"minScale",void 0),(0,p._)([(0,f.Cb)({type:Number,json:{origins:{"web-scene":{name:"layerDefinition.maxScale",write:()=>{},read:()=>{}},"portal-item":{name:"layerDefinition.maxScale",write:()=>{},read:()=>{}}}}})],E.prototype,"maxScale",void 0),E=(0,p._)([(0,B.j)("esri.layers.IntegratedMesh3DTilesLayer")],E);const b=E}}]);