"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[4079],{36592:(Q,U,h)=>{h.d(U,{Q:()=>b});var B=h(85931),A=h(62208),F=h(77029),O=h(14259);class b{constructor(t=9,s){this._compareMinX=T,this._compareMinY=m,this._toBBox=i=>i,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),s&&("function"==typeof s?this._toBBox=s:this._initFormat(s)),this.clear()}destroy(){this.clear(),W.prune(),K.prune(),C.prune(),Y.prune()}all(t){this._all(this._data,t)}search(t,s){let i=this._data;const l=this._toBBox;if(I(t,i))for(W.clear();i;){for(let e=0,n=i.children.length;e<n;e++){const r=i.children[e],a=i.leaf?l(r):r;I(t,a)&&(i.leaf?s(r):f(t,a)?this._all(r,s):W.push(r))}i=W.pop()}}collides(t){let s=this._data;const i=this._toBBox;if(!I(t,s))return!1;for(W.clear();s;){for(let l=0,e=s.children.length;l<e;l++){const n=s.children[l],r=s.leaf?i(n):n;if(I(t,r)){if(s.leaf||f(t,r))return!0;W.push(n)}}s=W.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,l=t.length;i<l;i++)this.insert(t[i]);return this}let s=this._build(t.slice(0,t.length),0,t.length-1,0);if(this._data.children.length)if(this._data.height===s.height)this._splitRoot(this._data,s);else{if(this._data.height<s.height){const i=this._data;this._data=s,s=i}this._insert(s,this._data.height-s.height-1,!0)}else this._data=s;return this}insert(t){return t&&this._insert(t,this._data.height-1),this}clear(){return this._data=new u([]),this}remove(t){if(!t)return this;let s,i=this._data,l=null,e=0,n=!1;const r=this._toBBox(t);for(C.clear(),Y.clear();i||C.length>0;){if(i||(i=(0,A.j0)(C.pop()),l=C.data[C.length-1],e=Y.pop()??0,n=!0),i.leaf&&(s=(0,B.cq)(i.children,t,i.children.length,i.indexHint),-1!==s))return i.children.splice(s,1),C.push(i),this._condense(C),this;n||i.leaf||!f(i,r)?l?(e++,i=l.children[e],n=!1):i=null:(C.push(i),Y.push(e),e=0,l=i,i=i.children[0])}return this}toJSON(){return this._data}fromJSON(t){return this._data=t,this}_all(t,s){let i=t;for(K.clear();i;){if(!0===i.leaf)for(const l of i.children)s(l);else K.pushArray(i.children);i=K.pop()??null}}_build(t,s,i,l){const e=i-s+1;let n=this._maxEntries;if(e<=n){const y=new u(t.slice(s,i+1));return E(y,this._toBBox),y}l||(l=Math.ceil(Math.log(e)/Math.log(n)),n=Math.ceil(e/n**(l-1)));const r=new d([]);r.height=l;const a=Math.ceil(e/n),p=a*Math.ceil(Math.sqrt(n));j(t,s,i,p,this._compareMinX);for(let y=s;y<=i;y+=p){const v=Math.min(y+p-1,i);j(t,y,v,a,this._compareMinY);for(let P=y;P<=v;P+=a){const S=Math.min(P+a-1,v);r.children.push(this._build(t,P,S,l-1))}}return E(r,this._toBBox),r}_chooseSubtree(t,s,i,l){for(;l.push(s),!0!==s.leaf&&l.length-1!==i;){let e,n=1/0,r=1/0;for(let a=0,p=s.children.length;a<p;a++){const y=s.children[a],v=g(y),P=Z(t,y)-v;P<r?(r=P,n=v<n?v:n,e=y):P===r&&v<n&&(n=v,e=y)}s=e||s.children[0]}return s}_insert(t,s,i){const e=i?t:(0,this._toBBox)(t);C.clear();const n=this._chooseSubtree(e,this._data,s,C);for(n.children.push(t),R(n,e);s>=0&&C.data[s].children.length>this._maxEntries;)this._split(C,s),s--;this._adjustParentBBoxes(e,C,s)}_split(t,s){const i=t.data[s],l=i.children.length,e=this._minEntries;this._chooseSplitAxis(i,e,l);const n=this._chooseSplitIndex(i,e,l);if(!n)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const r=i.children.splice(n,i.children.length-n),a=i.leaf?new u(r):new d(r);a.height=i.height,E(i,this._toBBox),E(a,this._toBBox),s?t.data[s-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,s){this._data=new d([t,s]),this._data.height=t.height+1,E(this._data,this._toBBox)}_chooseSplitIndex(t,s,i){let l,e,n;l=e=1/0;for(let r=s;r<=i-s;r++){const a=D(t,0,r,this._toBBox),p=D(t,r,i,this._toBBox),y=c(a,p),v=g(a)+g(p);y<l?(l=y,n=r,e=v<e?v:e):y===l&&v<e&&(e=v,n=r)}return n}_chooseSplitAxis(t,s,i){const l=t.leaf?this._compareMinX:T,e=t.leaf?this._compareMinY:m;this._allDistMargin(t,s,i,l)<this._allDistMargin(t,s,i,e)&&t.children.sort(l)}_allDistMargin(t,s,i,l){t.children.sort(l);const e=this._toBBox,n=D(t,0,s,e),r=D(t,i-s,i,e);let a=M(n)+M(r);for(let p=s;p<i-s;p++){const y=t.children[p];R(n,t.leaf?e(y):y),a+=M(n)}for(let p=i-s-1;p>=s;p--){const y=t.children[p];R(r,t.leaf?e(y):y),a+=M(r)}return a}_adjustParentBBoxes(t,s,i){for(let l=i;l>=0;l--)R(s.data[l],t)}_condense(t){for(let s=t.length-1;s>=0;s--){const i=t.data[s];if(0===i.children.length)if(s>0){const l=t.data[s-1],e=l.children;e.splice((0,B.cq)(e,i,e.length,l.indexHint),1)}else this.clear();else E(i,this._toBBox)}}_initFormat(t){const s=["return a"," - b",";"];this._compareMinX=new Function("a","b",s.join(t[0])),this._compareMinY=new Function("a","b",s.join(t[1])),this._toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function E(o,t){D(o,0,o.children.length,t,o)}function D(o,t,s,i,l){l||(l=new u([])),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0;for(let e,n=t;n<s;n++)e=o.children[n],R(l,o.leaf?i(e):e);return l}function R(o,t){o.minX=Math.min(o.minX,t.minX),o.minY=Math.min(o.minY,t.minY),o.maxX=Math.max(o.maxX,t.maxX),o.maxY=Math.max(o.maxY,t.maxY)}function T(o,t){return o.minX-t.minX}function m(o,t){return o.minY-t.minY}function g(o){return(o.maxX-o.minX)*(o.maxY-o.minY)}function M(o){return o.maxX-o.minX+(o.maxY-o.minY)}function Z(o,t){return(Math.max(t.maxX,o.maxX)-Math.min(t.minX,o.minX))*(Math.max(t.maxY,o.maxY)-Math.min(t.minY,o.minY))}function c(o,t){const s=Math.max(o.minX,t.minX),i=Math.max(o.minY,t.minY),l=Math.min(o.maxX,t.maxX),e=Math.min(o.maxY,t.maxY);return Math.max(0,l-s)*Math.max(0,e-i)}function f(o,t){return o.minX<=t.minX&&o.minY<=t.minY&&t.maxX<=o.maxX&&t.maxY<=o.maxY}function I(o,t){return t.minX<=o.maxX&&t.minY<=o.maxY&&t.maxX>=o.minX&&t.maxY>=o.minY}function j(o,t,s,i,l){const e=[t,s];for(;e.length;){const n=(0,A.j0)(e.pop()),r=(0,A.j0)(e.pop());if(n-r<=i)continue;const a=r+Math.ceil((n-r)/i/2)*i;(0,O.q)(o,a,r,n,l),e.push(r,a,a,n)}}const W=new F.Z,K=new F.Z,C=new F.Z,Y=new F.Z({deallocator:void 0});class H{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class _ extends H{constructor(){super(...arguments),this.height=1,this.indexHint=new B.SO}}class u extends _{constructor(t){super(),this.children=t,this.leaf=!0}}class d extends _{constructor(t){super(),this.children=t,this.leaf=!1}}},61256:(Q,U,h)=>{h.d(U,{H:()=>R});var B=h(8314),A=h(36592),F=h(65401);const b={minX:0,minY:0,maxX:0,maxY:0};class R{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new A.Q(9,(0,B.Z)("esri-csp-restrictions")?m=>({minX:m[0],minY:m[1],maxX:m[2],maxY:m[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const m=new Array(this._idByBounds.size);let g=0;this._idByBounds.forEach((M,Z)=>{m[g++]=Z}),this._indexInvalid=!1,this._index.clear(),this._index.load(m)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(m=>this._idByBounds.has(m))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const m=(0,F.cS)();for(const g of this._boundsById.values())g&&(m[0]=Math.min(g[0],m[0]),m[1]=Math.min(g[1],m[1]),m[2]=Math.max(g[2],m[2]),m[3]=Math.max(g[3],m[3]));return m}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(m){const g=this._boundsById.get(m);this._boundsById.delete(m),g&&(this._idByBounds.delete(g),this._indexInvalid||this._index.remove(g))}forEachInBounds(m,g){this._loadIndex(),function D(T,m,g){(function E(T){b.minX=T[0],b.minY=T[1],b.maxX=T[2],b.maxY=T[3]})(m),T.search(b,g)}(this._index,m,M=>g(this._idByBounds.get(M)))}get(m){return this._boundsById.get(m)}has(m){return this._boundsById.has(m)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(m,g){if(!this._indexInvalid){const M=this._boundsById.get(m);M&&(this._index.remove(M),this._idByBounds.delete(M))}this._boundsById.set(m,g),g&&(this._idByBounds.set(g,m),this._indexInvalid||(this._boundsToLoad.push(g),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},3579:(Q,U,h)=>{h.d(U,{Z:()=>M});var B=h(26584),A=h(61885),F=h(63290),O=h(62208),b=h(5548),E=h(65401),D=h(82054),R=h(61256),T=h(92794),m=h(6185);const g=(0,b.Ue)();class M{constructor(c){this.geometryInfo=c,this._boundsStore=new R.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new A.Z,this.featureAdapter=T.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let c=0;return this._featuresById.forEach(f=>{(0,O.pC)(f.geometry)&&f.geometry.coords&&(c+=f.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:c/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(c){if((0,O.Wi)(this.fullBounds))return null;const[f,I,j,W]=this.fullBounds;return{xmin:f,ymin:I,xmax:j,ymax:W,spatialReference:(0,m.S2)(c)}}add(c){this._add(c),this._emitChanged()}addMany(c){for(const f of c)this._add(f);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(c){const f=this._featuresById.get(c);return f?(this._remove(f),this._emitChanged(),f):null}removeManyById(c){this._boundsStore.invalidateIndex();for(const f of c){const I=this._featuresById.get(f);I&&this._remove(I)}this._emitChanged()}forEachBounds(c,f){for(const I of c){const j=this._boundsStore.get(I.objectId);j&&f((0,b.JR)(g,j))}}getFeature(c){return this._featuresById.get(c)}has(c){return this._featuresById.has(c)}forEach(c){this._featuresById.forEach(f=>c(f))}forEachInBounds(c,f){this._boundsStore.forEachInBounds(c,I=>{f(this._featuresById.get(I))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let c=!1;this._featuresById.forEach((f,I)=>{this._markedIds.has(I)||(c=!0,this._remove(f))}),this._markedIds.clear(),c&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(c){if(!c)return;const f=c.objectId;if(null==f)return void F.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new B.Z("featurestore:invalid-feature","feature id is missing",{feature:c}));const I=this._featuresById.get(f);let j;if(this._markedIds.add(f),I?(c.displayId=I.displayId,j=this._boundsStore.get(f),this._boundsStore.delete(f)):(0,O.pC)(this.onFeatureAdd)&&this.onFeatureAdd(c),(0,O.Wi)(c.geometry)||!c.geometry.coords||!c.geometry.coords.length)return this._boundsStore.set(f,null),void this._featuresById.set(f,c);j=(0,D.$)((0,O.pC)(j)?j:(0,E.Ue)(),c.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),(0,O.pC)(j)&&this._boundsStore.set(f,j),this._featuresById.set(f,c)}_remove(c){(0,O.pC)(this.onFeatureRemove)&&this.onFeatureRemove(c);const f=c.objectId;return this._markedIds.delete(f),this._boundsStore.delete(f),this._featuresById.delete(f),c}}},92794:(Q,U,h)=>{h.d(U,{n:()=>b});var B=h(62208),A=h(77044),F=h(66385),O=h(88071);const b={getObjectId:E=>E.objectId,getAttributes:E=>E.attributes,getAttribute:(E,D)=>E.attributes[D],cloneWithGeometry:(E,D)=>new F.u_(D,E.attributes,null,E.objectId),getGeometry:E=>E.geometry,getCentroid:(E,D)=>((0,B.Wi)(E.centroid)&&(E.centroid=(0,A.Y)(new O.Z,E.geometry,D.hasZ,D.hasM)),E.centroid)}},84079:(Q,U,h)=>{h.r(U),h.d(U,{default:()=>Y});var B=h(15861),A=h(84792),F=h(59213),O=h(26584),b=h(63290),E=h(62208),D=h(10699),R=h(91179),T=h(37053),m=h(82054),g=h(3579),M=h(82959),Z=h(58175),c=h(58775),f=h(56554),I=h(35775),j=h(60466),W=h(85),K=h(36630);const C={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class Y{constructor(){var _=this;this._queryEngine=null,this._snapshotFeatures=function(){var u=(0,B.Z)(function*(d){const o=yield _._fetch(d);return _._createFeatures(o)});return function(d){return u.apply(this,arguments)}}()}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}load(_,u={}){var d=this;return(0,B.Z)(function*(){d._loadOptions={url:_.url,customParameters:_.customParameters};const o=[];yield d._checkProjection(_.spatialReference);let t=null;_.url&&(t=yield d._fetch(u?.signal));const s=(0,c.my)(t,{geometryType:_.geometryType}),i=_.fields||s.fields||[],l=null!=_.hasZ?_.hasZ:s.hasZ,e=s.geometryType;let n=_.objectIdField||s.objectIdFieldName||"__OBJECTID";const r=_.spatialReference||T.Zn;let a=_.timeInfo;i===s.fields&&s.unknownFields.length>0&&o.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:s.unknownFields}});let p=new j.Z(i).get(n);p?("esriFieldTypeString"!==p.type&&(p.type="esriFieldTypeOID"),p.editable=!1,p.nullable=!1,n=p.name):(p={alias:n,name:n,type:"string"===s.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},i.unshift(p));const y={};for(const x of i){if(null==x.name&&(x.name=x.alias),null==x.alias&&(x.alias=x.name),!x.name)throw new O.Z("geojson-layer:invalid-field-name","field name is missing",{field:x});if(!W.v.jsonValues.includes(x.type))throw new O.Z("geojson-layer:invalid-field-type",`invalid type for field "${x.name}"`,{field:x});if(x.name!==p.name){const L=(0,K.os)(x);void 0!==L&&(y[x.name]=L)}}d._fieldsIndex=new j.Z(i);const v=d._fieldsIndex.requiredFields.indexOf(p);if(v>-1&&d._fieldsIndex.requiredFields.splice(v,1),a){if(a.startTimeField){const x=d._fieldsIndex.get(a.startTimeField);x?(a.startTimeField=x.name,x.type="esriFieldTypeDate"):a.startTimeField=null}if(a.endTimeField){const x=d._fieldsIndex.get(a.endTimeField);x?(a.endTimeField=x.name,x.type="esriFieldTypeDate"):a.endTimeField=null}if(a.trackIdField){const x=d._fieldsIndex.get(a.trackIdField);x?a.trackIdField=x.name:(a.trackIdField=null,o.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:a}}))}a.startTimeField||a.endTimeField||(o.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:a}}),a=null)}const P=e?(0,f.bU)(e):void 0,S={warnings:o,featureErrors:[],layerDefinition:{...C,drawingInfo:P??void 0,templates:(0,f.Hq)(y),extent:void 0,geometryType:e,objectIdField:n,fields:i,hasZ:!!l,timeInfo:a}};d._queryEngine=new Z.q({fields:i,geometryType:e,hasM:!1,hasZ:l,objectIdField:n,spatialReference:r,timeInfo:a,featureStore:new g.Z({geometryType:e,hasM:!1,hasZ:l}),cacheSpatialQueries:!0}),d._createDefaultAttributes=(0,f.Dm)(y,n);const w=yield d._createFeatures(t);d._objectIdGenerator=d._createObjectIdGenerator(d._queryEngine,w);const N=d._normalizeFeatures(w,S.warnings,S.featureErrors);d._queryEngine.featureStore.addMany(N);const{fullExtent:J,timeExtent:X}=yield d._queryEngine.fetchRecomputedExtents();if(S.layerDefinition.extent=J,X){const{start:x,end:L}=X;S.layerDefinition.timeInfo.timeExtent=[x,L]}return S})()}applyEdits(_){var u=this;return(0,B.Z)(function*(){const{spatialReference:d,geometryType:o}=u._queryEngine;return yield Promise.all([(0,I.b)(d,o),(0,M._W)(_.adds,d),(0,M._W)(_.updates,d)]),yield u._waitSnapshotComplete(),u._applyEdits(_)})()}queryFeatures(_={},u={}){var d=this;return(0,B.Z)(function*(){return yield d._waitSnapshotComplete(),d._queryEngine.executeQuery(_,u.signal)})()}queryFeatureCount(_={},u={}){var d=this;return(0,B.Z)(function*(){return yield d._waitSnapshotComplete(),d._queryEngine.executeQueryForCount(_,u.signal)})()}queryObjectIds(_={},u={}){var d=this;return(0,B.Z)(function*(){return yield d._waitSnapshotComplete(),d._queryEngine.executeQueryForIds(_,u.signal)})()}queryExtent(_={},u={}){var d=this;return(0,B.Z)(function*(){return yield d._waitSnapshotComplete(),d._queryEngine.executeQueryForExtent(_,u.signal)})()}querySnapping(_,u={}){var d=this;return(0,B.Z)(function*(){return yield d._waitSnapshotComplete(),d._queryEngine.executeQueryForSnapping(_,u.signal)})()}refresh(_){var u=this;return(0,B.Z)(function*(){u._loadOptions.customParameters=_,u._snapshotTask?.abort(),u._snapshotTask=(0,F.vr)(u._snapshotFeatures),u._snapshotTask.promise.then(t=>{u._queryEngine.featureStore.clear(),u._objectIdGenerator=u._createObjectIdGenerator(u._queryEngine,t);const s=u._normalizeFeatures(t);s&&u._queryEngine.featureStore.addMany(s)},t=>{u._queryEngine.featureStore.clear(),(0,D.D_)(t)||b.Z.getLogger("esri.layers.GeoJSONLayer").error(new O.Z("geojson-layer:refresh","An error occurred during refresh",{error:t}))}),yield u._waitSnapshotComplete();const{fullExtent:d,timeExtent:o}=yield u._queryEngine.fetchRecomputedExtents();return{extent:d,timeExtent:o}})()}_createFeatures(_){var u=this;return(0,B.Z)(function*(){if(null==_)return[];const{geometryType:d,hasZ:o,objectIdField:t}=u._queryEngine,s=(0,c.lG)(_,{geometryType:d,hasZ:o,objectIdField:t});if(!(0,T.fS)(u._queryEngine.spatialReference,T.Zn))for(const i of s)(0,E.pC)(i.geometry)&&(i.geometry=(0,m.GH)((0,M.iV)((0,m.di)(i.geometry,u._queryEngine.geometryType,u._queryEngine.hasZ,!1),T.Zn,u._queryEngine.spatialReference)));return s})()}_waitSnapshotComplete(){var _=this;return(0,B.Z)(function*(){if(_._snapshotTask&&!_._snapshotTask.finished){try{yield _._snapshotTask.promise}catch{}return _._waitSnapshotComplete()}})()}_fetch(_){var u=this;return(0,B.Z)(function*(){const{url:d,customParameters:o}=u._loadOptions,t=(yield(0,A.default)(d,{responseType:"json",query:{...o},signal:_})).data;return yield(0,c.O3)(t),t})()}_normalizeFeatures(_,u,d){const{objectIdField:o}=this._queryEngine,t=[];for(const s of _){const i=this._createDefaultAttributes(),l=(0,I.O0)(this._fieldsIndex,i,s.attributes,!0,u);l?d?.push(l):(this._assignObjectId(i,s.attributes,!0),s.attributes=i,s.objectId=i[o],t.push(s))}return t}_applyEdits(_){var u=this;return(0,B.Z)(function*(){const{adds:d,updates:o,deletes:t}=_,s={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(d&&d.length&&u._applyAddEdits(s,d),o&&o.length&&u._applyUpdateEdits(s,o),t&&t.length){for(const e of t)s.deleteResults.push((0,I.d1)(e));u._queryEngine.featureStore.removeManyById(t)}const{fullExtent:i,timeExtent:l}=yield u._queryEngine.fetchRecomputedExtents();return{extent:i,timeExtent:l,featureEditResults:s}})()}_applyAddEdits(_,u){const{addResults:d}=_,{geometryType:o,hasM:t,hasZ:s,objectIdField:i,spatialReference:l,featureStore:e}=this._queryEngine,n=[];for(const r of u){if(r.geometry&&o!==(0,R.Ji)(r.geometry)){d.push((0,I.av)("Incorrect geometry type."));continue}const a=this._createDefaultAttributes(),p=(0,I.O0)(this._fieldsIndex,a,r.attributes);if(p)d.push(p);else{if(this._assignObjectId(a,r.attributes),r.attributes=a,null!=r.uid&&(_.uidToObjectId[r.uid]=r.attributes[i]),(0,E.pC)(r.geometry)){const y=r.geometry.spatialReference??l;r.geometry=(0,M.iV)((0,I.og)(r.geometry,y),y,l)}n.push(r),d.push((0,I.d1)(r.attributes[i]))}}e.addMany((0,m.Yn)([],n,o,s,t,i))}_applyUpdateEdits({updateResults:_},u){const{geometryType:d,hasM:o,hasZ:t,objectIdField:s,spatialReference:i,featureStore:l}=this._queryEngine;for(const e of u){const{attributes:n,geometry:r}=e,a=n&&n[s];if(null==a){_.push((0,I.av)(`Identifier field ${s} missing`));continue}if(!l.has(a)){_.push((0,I.av)(`Feature with object id ${a} missing`));continue}const p=(0,m.EI)(l.getFeature(a),d,t,o);if((0,E.pC)(r)){if(d!==(0,R.Ji)(r)){_.push((0,I.av)("Incorrect geometry type."));continue}const y=r.spatialReference??i;p.geometry=(0,M.iV)((0,I.og)(r,y),y,i)}if(n){const y=(0,I.O0)(this._fieldsIndex,p.attributes,n);if(y){_.push(y);continue}}l.add((0,m.XA)(p,d,t,o,s)),_.push((0,I.d1)(a))}}_createObjectIdGenerator(_,u){const d=_.fieldsIndex.get(_.objectIdField);if("esriFieldTypeString"===d.type)return()=>d.name+"-"+Date.now().toString(16);let o=Number.NEGATIVE_INFINITY;for(const t of u)t.objectId&&(o=Math.max(o,t.objectId));return o=Math.max(0,o)+1,()=>o++}_assignObjectId(_,u,d=!1){const o=this._queryEngine.objectIdField;_[o]=d&&o in u?u[o]:this._objectIdGenerator()}_checkProjection(_){return(0,B.Z)(function*(){try{yield(0,M._W)(T.Zn,_)}catch{throw new O.Z("geojson-layer","Projection not supported")}})()}}},58775:(Q,U,h)=>{h.d(U,{O3:()=>s,lG:()=>l,my:()=>i,q9:()=>E});var B=h(26584),A=h(66385),F=h(88071),O=h(36630);const b={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function E(e){return b[e]}function*D(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const n of e.features)n&&(yield n)}}function*R(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const n of e.coordinates)yield*n;break;case"MultiPolygon":for(const n of e.coordinates)for(const r of n)yield*r}}function m(e){for(const n of e)if(n.length>2)return!0;return!1}function Z(e){let n=0;for(let r=0;r<e.length;r++){const a=e[r],p=e[(r+1)%e.length];n+=a[0]*p[1]-p[0]*a[1]}return n<=0}function c(e){const n=e[0],r=e[e.length-1];return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]||e.push(n),e}function f(e,n,r){switch(n.type){case"LineString":return function I(e,n,r){return u(e,n.coordinates,r),e}(e,n,r);case"MultiLineString":return function j(e,n,r){for(const a of n.coordinates)u(e,a,r);return e}(e,n,r);case"MultiPoint":return function W(e,n,r){return u(e,n.coordinates,r),e}(e,n,r);case"MultiPolygon":return function K(e,n,r){for(const a of n.coordinates){H(e,a[0],r);for(let p=1;p<a.length;p++)_(e,a[p],r)}return e}(e,n,r);case"Point":return function C(e,n,r){return o(e,n.coordinates,r),e}(e,n,r);case"Polygon":return function Y(e,n,r){const a=n.coordinates;H(e,a[0],r);for(let p=1;p<a.length;p++)_(e,a[p],r);return e}(e,n,r)}}function H(e,n,r){const a=c(n);!function g(e){return!Z(e)}(a)?u(e,a,r):d(e,a,r)}function _(e,n,r){const a=c(n);!function M(e){return Z(e)}(a)?u(e,a,r):d(e,a,r)}function u(e,n,r){for(const a of n)o(e,a,r);e.lengths.push(n.length)}function d(e,n,r){for(let a=n.length-1;a>=0;a--)o(e,n[a],r);e.lengths.push(n.length)}function o(e,n,r){const[a,p,y]=n;e.coords.push(a,p),r.hasZ&&e.coords.push(y||0)}function t(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function s(e){if(!e)throw new B.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new B.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:n}=e;if(!n)return;const r="string"==typeof n?n:"name"===n.type?n.properties.name:"EPSG"===n.type?n.properties.code:null,a=new RegExp(".*(CRS84H?|4326)$","i");if(!r||!a.test(r))throw new B.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:n})}function i(e,n={}){const r=[],a=new Set,p=new Set;let y,v=!1,P=null,S=!1,{geometryType:w=null}=n,N=!1;for(const X of D(e)){const{geometry:x,properties:L,id:z}=X;if((!x||(w||(w=E(x.type)),E(x.type)===w))&&(v||(v=m(R(x))),S||(S=null!=z,S&&(y=typeof z,L&&(P=Object.keys(L).filter($=>L[$]===z)))),L&&P&&S&&null!=z&&(P.length>1?P=P.filter($=>L[$]===z):1===P.length&&(P=L[P[0]]===z?P:[])),!N&&L)){let $=!0;for(const G in L){if(a.has(G))continue;const k=L[G];if(null==k){$=!1,p.add(G);continue}const q=t(k);if("unknown"===q){p.add(G);continue}p.delete(G),a.add(G);const V=(0,O.q6)(G);V&&r.push({name:V,alias:G,type:q})}N=$}}const J=(0,O.q6)(1===P?.length&&P[0]||null)??void 0;if(J)for(const X of r)if(X.name===J&&(0,O.H7)(X)){X.type="esriFieldTypeOID";break}return{fields:r,geometryType:w,hasZ:v,objectIdFieldName:J,objectIdFieldType:y,unknownFields:Array.from(p)}}function l(e,n){return Array.from(function*T(e,n={}){const{geometryType:r,objectIdField:a}=n;for(const p of e){const{geometry:y,properties:v,id:P}=p;if(y&&E(y.type)!==r)continue;const S=v||{};let w;a&&(w=S[a],null==P||w||(S[a]=w=P)),yield new A.u_(y?f(new F.Z,y,n):null,S,null,w??void 0)}}(D(e),n))}},56554:(Q,U,h)=>{h.d(U,{Dm:()=>R,Hq:()=>T,MS:()=>m,bU:()=>b});var B=h(8314),A=h(58817),F=h(87757),O=h(24837);function b(g){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===g||"esriGeometryMultipoint"===g?O.I4:"esriGeometryPolyline"===g?O.ET:O.lF}}}const E=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let D=1;function R(g,M){if((0,B.Z)("esri-csp-restrictions"))return()=>({[M]:null,...g});try{let Z=`this.${M} = null;`;for(const f in g)Z+=`this${E.test(f)?`.${f}`:`["${f}"]`} = ${JSON.stringify(g[f])};`;const c=new Function(`\n      return class AttributesClass$${D++} {\n        constructor() {\n          ${Z};\n        }\n      }\n    `)();return()=>new c}catch{return()=>({[M]:null,...g})}}function T(g={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,A.d9)(g)}}]}function m(g,M){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:g},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:M,supportsDelete:M,supportsEditing:M,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:M,supportsExceedsLimitStatistics:!0},query:F.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:M,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}}}]);