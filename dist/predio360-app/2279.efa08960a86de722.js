"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[2279],{45181:(y,m,t)=>{t.r(m),t.d(m,{default:()=>o});var p=t(15861),E=t(17626),D=t(10699),h=t(32917),c=(t(63290),t(8314),t(4619),t(26584),t(76898)),f=t(69759),d=t(96942);let l=class extends((0,d.Z)(f.Z)){constructor(){var s;super(...arguments),s=this,this.type="imagery-3d",this.redrawDebounced=(0,D.Ds)(function(){var n=(0,p.Z)(function*(e){s.redraw((r,_)=>s._redrawImage(r,_),e)});return function(e){return n.apply(this,arguments)}}(),2e3)}initialize(){this.addHandles([(0,h.gx)(()=>this.view.basemapTerrain.ready,()=>this._initializeMaximumDataResolution(),{once:!0,initial:!0}),this.layer.on("redraw",()=>this._updatingHandles.addPromise(this.redrawDebounced()))]),this._updatingHandles.add(()=>this.layer?.exportImageServiceParameters?.version,()=>{this._updatingHandles.addPromise(this.refreshDebounced())}),this._updatingHandles.add(()=>this.layer?.renderer,()=>{this._updatingHandles.addPromise(this.refreshDebounced())}),this._updatingHandles.add(()=>this.timeExtent,()=>this._updatingHandles.addPromise(this.refreshDebounced()))}_initializeMaximumDataResolution(){this.maximumDataResolution=this.layer.loaded?this.layer.serviceRasterInfo.pixelSize:null}getFetchOptions(){return{timeExtent:this.timeExtent}}processResult(s,n,e){var r=this;return(0,p.Z)(function*(){n.imageOrCanvasElement?s.image=n.imageOrCanvasElement:(s.image=document.createElement("canvas"),s.pixelData=n.pixelData,yield r._redrawImage(s,e))})()}_redrawImage(s,n){var e=this;return(0,p.Z)(function*(){if(!(s.image instanceof HTMLCanvasElement)||null==s.pixelData)throw new Error;const r=s.image,_=r.getContext("2d"),M=yield e.layer.applyRenderer(s.pixelData,{signal:n}),u=e.layer.applyFilter(M).pixelBlock;if(null==u)throw new Error;r.width=u.width,r.height=u.height;const I=_.createImageData(u.width,u.height);I.data.set(u.getAsRGBA()),_.putImageData(I,0,0)})()}};l=(0,E._)([(0,c.j)("esri.views.3d.layers.ImageryLayerView3D")],l);const o=l},10023:(y,m,t)=>{t.d(m,{V5:()=>g,e7:()=>D,zc:()=>P});var p=t(15861),E=t(90194);function D(a){return h.apply(this,arguments)}function h(){return(h=(0,p.Z)(function*(a,i=a.popupTemplate){if(null==i)return[];const c=yield i.getRequiredFields(a.fieldsIndex),{lastEditInfoEnabled:f}=i,{objectIdField:d,typeIdField:l,globalIdField:o,relationships:s}=a;if(c.includes("*"))return["*"];const n=f?(0,E.CH)(a):[],e=(0,E.Q0)(a.fieldsIndex,[...c,...n]);return l&&e.push(l),e&&d&&a.fieldsIndex?.has(d)&&!e.includes(d)&&e.push(d),e&&o&&a.fieldsIndex?.has(o)&&!e.includes(o)&&e.push(o),s&&s.forEach(r=>{const{keyField:_}=r;e&&_&&a.fieldsIndex?.has(_)&&!e.includes(_)&&e.push(_)}),e})).apply(this,arguments)}function g(a,i){return a.popupTemplate?a.popupTemplate:null!=i&&i.defaultPopupTemplateEnabled&&null!=a.defaultPopupTemplate?a.defaultPopupTemplate:null}function P(a,i){return null!=g(a,{defaultPopupTemplateEnabled:i})}}}]);