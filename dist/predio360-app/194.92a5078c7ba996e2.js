"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[194],{52489:(T,c,t)=>{t.d(c,{D:()=>p});var a=t(22558);function p(r){r?.writtenProperties&&r.writtenProperties.forEach(({target:l,propName:d,newOrigin:m})=>{(0,a.l)(l)&&m&&l.originOf(d)!==m&&l.updateOrigin(d,m)})}},22558:(T,c,t)=>{function a(p){return p&&"getAtOrigin"in p&&"originOf"in p}t.d(c,{l:()=>a})},36912:(T,c,t)=>{t.r(c),t.d(c,{save:()=>ct,saveAll:()=>gt,saveAllAs:()=>vt,saveAs:()=>Lt});var a=t(15861),p=t(85931),r=t(26584),l=t(52489),d=t(82674),m=t(38305),g=t(17196),O=t(72469),v=t(30164),y=t(37281);const L="Feature Service",M="feature-layer-utils",Z=`${M}-save`,D=`${M}-save-as`,I=`${M}-saveall`,S=`${M}-saveall-as`;function U(n){return{isValid:(0,O.fP)(n)&&("feature"!==n.type||!n.dynamicDataSource),errorMessage:"Feature layer should be a layer or table in a map or feature service"}}function Y(n){const e=[],o=[];for(const{layer:s,layerJSON:f}of n)s.isTable?o.push(f):e.push(f);return{layers:e,tables:o}}function Q(n){return Y([n])}function H(n,e){return A.apply(this,arguments)}function A(){return(A=(0,a.Z)(function*(n,e){return/\/\d+\/?$/.test(n.url)?Q(e[0]):X(e,n)})).apply(this,arguments)}function X(n,e){return C.apply(this,arguments)}function C(){return C=(0,a.Z)(function*(n,e){if(n.reverse(),!e)return Y(n);const o=yield function et(n,e){return R.apply(this,arguments)}(e,n);for(const s of n)q(s.layer,s.layerJSON,o);return function at(n,e){const o=[],s=[];for(const{layer:f}of e){const{isTable:i,layerId:u}=f;i?s.push(u):o.push(u)}b(n.layers,o),b(n.tables,s)}(o,n),o}),C.apply(this,arguments)}function R(){return R=(0,a.Z)(function*(n,e){let o=yield n.fetchData("json");if(function rt(n){return!!(n&&Array.isArray(n.layers)&&Array.isArray(n.tables))}(o))return o;o||={},function ot(n){n.layers||=[],n.tables||=[]}(o);const{layer:{url:s,customParameters:f,apiKey:i}}=e[0];return yield function lt(n,e,o){return W.apply(this,arguments)}(o,{url:s??"",customParameters:f,apiKey:i},e.map(u=>u.layer.layerId)),o}),R.apply(this,arguments)}function b(n,e){if(n.length<2)return;const o=[];for(const{id:s}of n)o.push(s);(0,p.fS)(o.sort(w),e.slice().sort(w))&&n.sort((s,f)=>{const i=e.indexOf(s.id),u=e.indexOf(f.id);return i<u?-1:i>u?1:0})}function w(n,e){return n<e?-1:n>e?1:0}function W(){return W=(0,a.Z)(function*(n,e,o){const{url:s,customParameters:f,apiKey:i}=e,{serviceJSON:u,layersJSON:h}=yield(0,g.V)(s,{customParameters:f,apiKey:i}),P=k(n.layers,u.layers,o),E=k(n.tables,u.tables,o);n.layers=P.itemResources,n.tables=E.itemResources;const x=[...P.added,...E.added],Pt=h?[...h.layers,...h.tables]:[];yield function st(n,e,o,s){return B.apply(this,arguments)}(n,x,s,Pt)}),W.apply(this,arguments)}function k(n,e,o){const s=(0,p.e5)(n,e,(i,u)=>i.id===u.id);n=n.filter(i=>!s.removed.some(u=>u.id===i.id));const f=s.added;return f.forEach(({id:i})=>{n.push({id:i})}),{itemResources:n,added:f.filter(({id:i})=>!o.includes(i))}}function B(){return B=(0,a.Z)(function*(n,e,o,s){const f=yield function ut(n){return K.apply(this,arguments)}(e),i=e.map(({id:u,type:h})=>new(f.get(h))({url:o,layerId:u,sourceJSON:s.find(({id:P})=>P===u)}));yield Promise.allSettled(i.map(u=>u.load())),i.forEach(u=>{const{layerId:h,loaded:P,defaultPopupTemplate:E}=u;if(!P||null==E)return;const x={id:h,popupInfo:E.toJSON()};"ArcGISFeatureLayer"!==u.operationalLayerType&&(x.layerType=u.operationalLayerType),q(u,x,n)})}),B.apply(this,arguments)}function K(){return(K=(0,a.Z)(function*(n){const e=[];n.forEach(({type:f})=>{const i=function it(n){let e;switch(n){case"Feature Layer":case"Table":e="FeatureLayer";break;case"Oriented Imagery Layer":e="OrientedImageryLayer";break;case"Catalog Layer":e="CatalogLayer"}return e}(f);e.push((0,v.T[i])())});const o=yield Promise.all(e),s=new Map;return n.forEach(({type:f},i)=>{s.set(f,o[i])}),s})).apply(this,arguments)}function q(n,e,o){!function _(n,e){const o=n.findIndex(({id:s})=>s===e.id);-1===o?n.push(e):n[o]=e}(n.isTable?o.tables:o.layers,e)}function tt(n,e){if(!n.length)throw new r.Z(`${e}:missing-parameters`,"'layers' array should contain at least one feature layer")}function nt(n,e){const o=n.map(s=>s.layerId);if(new Set(o).size!==o.length)throw new r.Z(`${e}:invalid-parameters`,"'layers' array should contain only one instance each of layer or table in a feature service")}function j(){return(j=(0,a.Z)(function*(n){tt(n,I),yield Promise.all(n.map(e=>e.load()));for(const e of n)(0,d.DC)(e,I,U),(0,d.Ym)({layer:e,itemType:L,errorNamePrefix:I});(function ft(n,e){const o=n.map(s=>s.portalItem.id);if(new Set(o).size>1)throw new r.Z(`${e}:invalid-parameters`,"All layers in the 'layers' array should be loaded from the same portal item")})(n,I),nt(n,I)})).apply(this,arguments)}function dt(n,e){return N.apply(this,arguments)}function N(){return(N=(0,a.Z)(function*(n,e){const{url:o,layerId:s,title:f,fullExtent:i,isTable:u}=n,h=(0,m.Qc)(o);e.url="FeatureServer"===h?.serverType?o:`${o}/${s}`,e.title||=f,e.extent=null,u||null==i||(e.extent=yield(0,y.$o)(i)),(0,y.ck)(e,y.hz.METADATA),(0,y.ck)(e,y.hz.MULTI_LAYER),(0,y.qj)(e,y.hz.SINGLE_LAYER),u&&(0,y.qj)(e,y.hz.TABLE)})).apply(this,arguments)}function G(){return(G=(0,a.Z)(function*(n){tt(n,S),yield Promise.all(n.map(e=>e.load()));for(const e of n)(0,d.DC)(e,S,U);(function mt(n,e){for(const i of n){const u=i.parsedUrl.path,h=(0,m.Qc)(u);if(!h?.url.path)throw new r.Z(`${e}:invalid-parameters`,(0,d.xG)(i,`has unsupported url pattern: ${u}`),{layer:i});const E=h?.serverType;if("FeatureServer"!==E&&"MapServer"!==E)throw new r.Z(`${e}:invalid-parameters`,(0,d.xG)(i,`has unsupported server type: ${E}`),{layer:i});if("MapServer"===E&&n.length>1)throw new r.Z(`${e}:invalid-parameters`,"Only one layer or table in a map service can be saved")}const s=(0,m.Qc)(n[0].parsedUrl.path)?.url.path;if(!n.every(i=>(0,m.Qc)(i.parsedUrl.path)?.url.path===s))throw new r.Z(`${e}:invalid-parameters`,"'layers' array should only contain layers or tables that belong to the same feature service")})(n,S),nt(n,S)})).apply(this,arguments)}function $(){return($=(0,a.Z)(function*(n,e){let o=0,s=0;for(const{isTable:u}of e)u?s++:o++;const f=e[0].parsedUrl.path,i=(0,m.Qc)(f);if(n.url="FeatureServer"===i?.serverType?i.url.path:f,n.title||=i.title,n.extent=null,o>0){const u=e.map(h=>h.fullExtent).filter(p.pC).reduce((h,P)=>h.clone().union(P));u&&(n.extent=yield(0,y.$o)(u))}(0,y.ck)(n,y.hz.METADATA),(0,y.IW)(n,y.hz.MULTI_LAYER,e.length>1),(0,y.IW)(n,y.hz.SINGLE_LAYER,1===e.length),(0,y.IW)(n,y.hz.TABLE,s>0&&0===o),(0,d.UY)(n)})).apply(this,arguments)}function ct(n,e){return z.apply(this,arguments)}function z(){return(z=(0,a.Z)(function*(n,e){return(0,d.a1)({layer:n,itemType:L,validateLayer:U,createItemData:(o,s)=>H(s,[o]),errorNamePrefix:Z},e)})).apply(this,arguments)}function gt(n,e){return F.apply(this,arguments)}function F(){return F=(0,a.Z)(function*(n,e){yield function yt(n){return j.apply(this,arguments)}(n);const o=n[0].portalItem,s=(0,d.V3)(o),f=yield Promise.all(n.map(u=>(0,d.Nw)(u,s,e))),i=yield H(o,n.map((u,h)=>({layer:u,layerJSON:f[h]})));return(0,d.UY)(o),yield o.update({data:i}),yield Promise.all(n.slice(1).map(u=>u.portalItem.reload())),(0,l.D)(s),o.clone()}),F.apply(this,arguments)}function Lt(n,e,o){return J.apply(this,arguments)}function J(){return(J=(0,a.Z)(function*(n,e,o){return(0,d.po)({layer:n,itemType:L,validateLayer:U,createItemData:(s,f)=>Promise.resolve(Q(s)),errorNamePrefix:D,newItem:e,setItemProperties:dt},o)})).apply(this,arguments)}function vt(n,e,o){return V.apply(this,arguments)}function V(){return V=(0,a.Z)(function*(n,e,o){yield function ht(n){return G.apply(this,arguments)}(n);const s=(0,d.uT)({itemType:L,errorNamePrefix:S,newItem:e}),f=(0,d.V3)(s),i=yield Promise.all(n.map(h=>(0,d.Nw)(h,f,o))),u=yield X(n.map((h,P)=>({layer:h,layerJSON:i[P]})));yield function pt(n,e){return $.apply(this,arguments)}(s,n),yield(0,d.jX)(s,u,o);for(const h of n)h.portalItem=s.clone();return(0,l.D)(f),s}),V.apply(this,arguments)}},30164:(T,c,t)=>{t.d(c,{T:()=>p});var a=t(15861);const p={BingMapsLayer:(r=(0,a.Z)(function*(){return(yield t.e(2248).then(t.bind(t,72248))).default}),function(){return r.apply(this,arguments)}),BuildingSceneLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(2964),t.e(2432),t.e(9410),t.e(8592),t.e(676)]).then(t.bind(t,6189))).default});return function(){return r.apply(this,arguments)}}(),CatalogLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(5262),t.e(6072),t.e(4802),t.e(5349),t.e(1601)]).then(t.bind(t,41601))).default});return function(){return r.apply(this,arguments)}}(),CSVLayer:function(){var r=(0,a.Z)(function*(){return(yield t.e(5625).then(t.bind(t,85625))).default});return function(){return r.apply(this,arguments)}}(),DimensionLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(7614)]).then(t.bind(t,17614))).default});return function(){return r.apply(this,arguments)}}(),ElevationLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(5810)]).then(t.bind(t,75810))).default});return function(){return r.apply(this,arguments)}}(),FeatureLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.resolve().then(t.bind(t,80415))).default});return function(){return r.apply(this,arguments)}}(),GeoJSONLayer:function(){var r=(0,a.Z)(function*(){return(yield t.e(2903).then(t.bind(t,72903))).default});return function(){return r.apply(this,arguments)}}(),GeoRSSLayer:function(){var r=(0,a.Z)(function*(){return(yield t.e(6306).then(t.bind(t,96306))).default});return function(){return r.apply(this,arguments)}}(),GroupLayer:function(){var r=(0,a.Z)(function*(){return(yield t.e(5700).then(t.bind(t,55700))).default});return function(){return r.apply(this,arguments)}}(),ImageryLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(5262),t.e(6926),t.e(2863),t.e(5224),t.e(5785)]).then(t.bind(t,65785))).default});return function(){return r.apply(this,arguments)}}(),ImageryTileLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8594),t.e(6926),t.e(2863),t.e(1423),t.e(5224),t.e(8592),t.e(5821)]).then(t.bind(t,85821))).default});return function(){return r.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(2432),t.e(7867)]).then(t.bind(t,67867))).default});return function(){return r.apply(this,arguments)}}(),KMLLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(8411)]).then(t.bind(t,38411))).default});return function(){return r.apply(this,arguments)}}(),LineOfSightLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(5628)]).then(t.bind(t,29457))).default});return function(){return r.apply(this,arguments)}}(),LinkChartLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(337),t.e(2507),t.e(774),t.e(6072),t.e(7758),t.e(7689),t.e(8592),t.e(8557)]).then(t.bind(t,98557))).default});return function(){return r.apply(this,arguments)}}(),MapImageLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(5262),t.e(4802),t.e(5485),t.e(8887)]).then(t.bind(t,48887))).default});return function(){return r.apply(this,arguments)}}(),MapNotesLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(9859)]).then(t.bind(t,19859))).default});return function(){return r.apply(this,arguments)}}(),MediaLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(6521)]).then(t.bind(t,29371))).default});return function(){return r.apply(this,arguments)}}(),OGCFeatureLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(9628),t.e(2955)]).then(t.bind(t,36554))).default});return function(){return r.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(5980)]).then(t.bind(t,71591))).default});return function(){return r.apply(this,arguments)}}(),OrientedImageryLayer:function(){var r=(0,a.Z)(function*(){return(yield t.e(6150).then(t.bind(t,66150))).default});return function(){return r.apply(this,arguments)}}(),PointCloudLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(2432),t.e(7155)]).then(t.bind(t,7155))).default});return function(){return r.apply(this,arguments)}}(),RouteLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(403),t.e(4940)]).then(t.bind(t,84940))).default});return function(){return r.apply(this,arguments)}}(),SceneLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(2964),t.e(5453),t.e(2432),t.e(8592),t.e(7986)]).then(t.bind(t,47986))).default});return function(){return r.apply(this,arguments)}}(),StreamLayer:function(){var r=(0,a.Z)(function*(){return(yield t.e(289).then(t.bind(t,70289))).default});return function(){return r.apply(this,arguments)}}(),SubtypeGroupLayer:function(){var r=(0,a.Z)(function*(){return(yield t.e(1976).then(t.bind(t,81976))).default});return function(){return r.apply(this,arguments)}}(),TileLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(5262),t.e(4802),t.e(5485),t.e(8592),t.e(9735)]).then(t.bind(t,59735))).default});return function(){return r.apply(this,arguments)}}(),IntegratedMesh3DTilesLayer:function(){var r=(0,a.Z)(function*(){return(yield t.e(7037).then(t.bind(t,47037))).default});return function(){return r.apply(this,arguments)}}(),UnknownLayer:function(){var r=(0,a.Z)(function*(){return(yield t.e(6339).then(t.bind(t,56339))).default});return function(){return r.apply(this,arguments)}}(),UnsupportedLayer:function(){var r=(0,a.Z)(function*(){return(yield t.e(6240).then(t.bind(t,16240))).default});return function(){return r.apply(this,arguments)}}(),VectorTileLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8364),t.e(8592),t.e(193)]).then(t.bind(t,10193))).default});return function(){return r.apply(this,arguments)}}(),VoxelLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(2432),t.e(6007)]).then(t.bind(t,26007))).default});return function(){return r.apply(this,arguments)}}(),WFSLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(9636),t.e(8762)]).then(t.bind(t,98762))).default});return function(){return r.apply(this,arguments)}}(),WMSLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(6894)]).then(t.bind(t,46894))).default});return function(){return r.apply(this,arguments)}}(),WMTSLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(9526)]).then(t.bind(t,69526))).default});return function(){return r.apply(this,arguments)}}(),WebTileLayer:function(){var r=(0,a.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(2585)]).then(t.bind(t,28678))).default});return function(){return r.apply(this,arguments)}}()};var r},88755:(T,c,t)=>{t.d(c,{Y:()=>l,h:()=>r});var a=t(21726),p=t(31099);function r(m,g){return{...d(m,g),readResourcePaths:[]}}function l(m,g,O){const v=(0,a.mN)(m.itemUrl);return{...d(m,g),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:v?{rootPath:v.path,writtenUrls:[]}:null,resources:O?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function d(m,g){return{origin:g,url:(0,a.mN)(m.itemUrl),portal:m.portal||p.Z.getDefault(),portalItem:m}}},45205:(T,c,t)=>{t.d(c,{T:()=>r});var a=t(15861),p=t(84792);function r(d,m){return l.apply(this,arguments)}function l(){return(l=(0,a.Z)(function*(d,m){const{data:g}=yield(0,p.Z)(d,{responseType:"json",query:{f:"json",...m?.customParameters,token:m?.apiKey}});return g})).apply(this,arguments)}},53675:(T,c,t)=>{t.d(c,{w:()=>l});var a=t(59318),p=t(26584),r=t(12680);function l(d){if(a.Z.apiKey&&(0,r.r)(d.portal.url))throw new p.Z("save-api-key-utils:api-key-not-supported",`Saving is not supported on ${d.portal.url} when using an api key`)}},71404:(T,c,t)=>{t.d(c,{P:()=>r,z:()=>m});var a=t(15861),p=t(26584);function r(g){return l.apply(this,arguments)}function l(){return(l=(0,a.Z)(function*(g){const O=[];for(const v of g.allLayers)if("beforeSave"in v&&"function"==typeof v.beforeSave){const y=v.beforeSave();y&&O.push(y)}yield Promise.allSettled(O)})).apply(this,arguments)}const d=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function m(g,O,v){let y=(g.messages??[]).filter(({type:L})=>"error"===L).map(({name:L,message:M,details:Z})=>new p.Z(L,M,Z));if(g.blockedRelativeUrls&&(y=y.concat(g.blockedRelativeUrls.map(L=>new p.Z("url:unsupported",`Relative url '${L}' is not supported`)))),v){const{ignoreUnsupported:L,supplementalUnsupportedErrors:M=[],requiredPropertyChecksDisabled:Z}=v;L&&(y=y.filter(({name:D})=>!(d.has(D)||M.includes(D)))),Z&&(y=y.filter(D=>"web-document-write:property-required"!==D.name))}if(y.length>0)throw new p.Z(O.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:y})}}}]);