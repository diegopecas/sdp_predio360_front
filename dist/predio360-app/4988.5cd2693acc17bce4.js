"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[4988,5919],{91365:(Te,ge,j)=>{j.d(ge,{Qn:()=>P,iG:()=>q});var E,K=j(25919),_=j(21837);class V{}V.instance=new _.vF("Etc/UTC"),(E||(E={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const p={[E.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};class Y extends Error{constructor(N,W){super((0,K.Hy)(p[N],W)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,Y)}}class q{constructor(N){this._date=N,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(N=0,W=1,w=1,H=0,te=0,F=0,k=0,v){if(isNaN(N)||isNaN(W)||isNaN(w)||isNaN(H)||isNaN(te)||isNaN(F)||isNaN(k))return null;let S=0;const g=_.ou.local(N,W).daysInMonth;w<1&&(S=w-1,w=1),w>g&&(S=w-g,w=g);let f=0;W>12?(f=W-12,W=12):W<1&&(f=W-1,W=1);let C=0;te>59?(C=te-59,te=59):te<0&&(C=te,te=0);let y=0;F>59?(y=F-59,F=59):F<0&&(y=F,F=0);let A=0;k>999?(A=k-999,k=999):k<0&&(A=k,k=0);let z=_.ou.fromObject({day:w,year:N,month:W,hour:H,minute:te,second:F,millisecond:k},{zone:P(v)});return 0!==f&&(z=z.plus({months:f})),0!==S&&(z=z.plus({days:S})),0!==C&&(z=z.plus({minutes:C})),0!==y&&(z=z.plus({seconds:y})),0!==A&&(z=z.plus({milliseconds:A})),new q(z)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(N,W){const w=P(W);return N.isUnknownTimeZone||w===V.instance?q.fromParts(N.year,N.monthJS+1,N.day,N.hour,N.minute,N.second,N.millisecond,w):new q(N._date.setZone(W))}static dateJSToArcadeDate(N){return new q(_.ou.fromJSDate(N,{zone:"system"}))}static dateJSAndZoneToArcadeDate(N,W="system"){return new q(_.ou.fromJSDate(N,{zone:W}))}static unknownEpochToArcadeDate(N){return new q(_.ou.fromMillis(N,{zone:V.instance}))}static unknownDateJSToArcadeDate(N){return new q(_.ou.fromMillis(N.getTime(),{zone:V.instance}))}static epochToArcadeDate(N,W="system"){return new q(_.ou.fromMillis(N,{zone:W}))}static dateTimeToArcadeDate(N){return new q(N)}changeTimeZone(N){const W=P(N);return q.dateTimeToArcadeDate(this._date.setZone(W))}static dateTimeAndZoneToArcadeDate(N,W){const w=P(W);return N.zone===V.instance||w===V.instance?q.fromParts(N.year,N.month,N.day,N.hour,N.minute,N.second,N.millisecond,w):new q(N.setZone(w))}static nowToArcadeDate(N){return new q(_.ou.fromJSDate(new Date,{zone:N}))}static nowUTCToArcadeDate(){return new q(_.ou.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===q.systemTimeZoneCanonicalName}equals(N){return this.isSystem&&N.isSystem?this.toNumber()===N.toNumber():this.isUnknownTimeZone===N.isUnknownTimeZone&&this._date.equals(N._date)}get isUnknownTimeZone(){return this._date.zone===V.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let N=this._date.weekday;return N>6&&(N=0),N}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const N=this.zone;return"fixed"===N.type?0===N.fixed?"utc":N.formatOffset(0,"short"):N.name}stringify(){return JSON.stringify(this.toJSDate())}plus(N){return new q(this._date.plus(N))}diff(N,W="milliseconds"){return this._date.diff(N._date,W)[W]}toISOString(N){return this._date.toISO(N?{suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}:{includeOffset:!this.isUnknownTimeZone})}toFormat(N,W){return this._date.toFormat(N,W)}toJSDate(){return this._date.toJSDate()}toSQLString(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new q(this._date.toUTC())}toLocal(){return new q(this._date.toLocal())}toString(){return this.toISOString(!0)}}function P(L){if(L instanceof _.ld)return L;if("system"===L.toLowerCase())return"system";if("utc"===L.toLowerCase())return"utc";if("unknown"===L.toLowerCase())return V.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(L)){const W=_.Qf.parseSpecifier("UTC"+(L.startsWith("+")||L.startsWith("-")?"":"+")+L);if(W)return W}const N=_.vF.create(L);if(!N.isValid)throw new Y(E.TimeZoneNotRecognised);return N}},78778:(Te,ge,j)=>{j.d(ge,{P:()=>K});class K{constructor(V){this.source=V}}},9288:(Te,ge,j)=>{j.d(ge,{s:()=>K});class K{constructor(V,E){this._moduleSingletons=V,this._syntaxModules=E}loadLibrary(V){if(null==this._syntaxModules)return null;const E=this._syntaxModules[V.toLowerCase()];return E?{syntax:E.script,uri:E.uri}:null}}},37780:(Te,ge,j)=>{j.d(ge,{Z:()=>_});var K=j(6729);class _ extends K.Z{constructor(E){super(),this.declaredClass="esri.arcade.Portal",this.immutable=!1,this.setField("url",E),this.immutable=!0}}},22386:(Te,ge,j)=>{j.d(ge,{Z:()=>_});var K=j(6729);class _ extends K.Z{constructor(E,p,Y,q,P,L){super(),this.attachmentUrl=P,this.declaredClass="esri.arcade.Attachment",this.immutable=!1,this.setField("id",E),this.setField("name",p),this.setField("contenttype",Y),this.setField("size",q),this.setField("exifinfo",L),this.immutable=!0}}},6729:(Te,ge,j)=>{j.d(ge,{Z:()=>P});var K=j(15861),_=j(91365),V=j(25919),E=j(98362),p=j(47562),Y=j(21674);function q(L,N,W=!1){if(null==L)return null;if((0,p.b)(L))return(0,p.g)(L);if((0,p.a)(L))return(0,p.h)(L);if((0,p.c)(L))return(0,p.j)(L);if((0,p.k)(L))return(0,p.l)(L,N);if((0,p.m)(L)){const H=[];for(const te of L)H.push(q(te,N,W));return H}const w=new P;w.immutable=!1;for(const H of Object.keys(L)){const te=L[H];void 0!==te&&w.setField(H,q(te,N,W))}return w.immutable=W,w}class P{constructor(N){this.declaredClass="esri.arcade.Dictionary",this.attributes=null,this.plain=!1,this.immutable=!0,this.attributes=N instanceof P?N.attributes:N??{}}field(N){const W=N.toLowerCase(),w=this.attributes[N];if(void 0!==w)return w;for(const H in this.attributes)if(H.toLowerCase()===W)return this.attributes[H];throw new V.aV(null,V.rH.FieldNotFound,null,{key:N})}setField(N,W){if(this.immutable)throw new V.aV(null,V.rH.Immutable,null);if((0,p.i)(W))throw new V.aV(null,V.rH.NoFunctionInDictionary,null);const w=N.toLowerCase();if(W instanceof Date&&(W=_.iG.dateJSToArcadeDate(W)),void 0===this.attributes[N]){for(const H in this.attributes)if(H.toLowerCase()===w)return void(this.attributes[H]=W);this.attributes[N]=W}else this.attributes[N]=W}hasField(N){const W=N.toLowerCase();if(void 0!==this.attributes[N])return!0;for(const w in this.attributes)if(w.toLowerCase()===W)return!0;return!1}keys(){let N=[];for(const W in this.attributes)N.push(W);return N=N.sort(),N}castToText(N=!1){let W="";for(const w in this.attributes){""!==W&&(W+=",");const H=this.attributes[w];null==H?W+=JSON.stringify(w)+":null":(0,p.a)(H)||(0,p.b)(H)||(0,p.c)(H)?W+=JSON.stringify(w)+":"+JSON.stringify(H):H instanceof Y.Z?W+=JSON.stringify(w)+":"+(0,p.t)(H):H instanceof E.Z||H instanceof Array?W+=JSON.stringify(w)+":"+(0,p.t)(H,null,N):H instanceof _.iG?W+=N?JSON.stringify(w)+":"+JSON.stringify(H.getTime()):JSON.stringify(w)+":"+H.stringify():null!==H&&"object"==typeof H&&void 0!==H.castToText&&(W+=JSON.stringify(w)+":"+H.castToText(N))}return"{"+W+"}"}static convertObjectToArcadeDictionary(N,W,w=!0){const H=new P;H.immutable=!1;for(const te in N){const F=N[te];void 0!==F&&H.setField(te.toString(),q(F,W))}return H.immutable=w,H}static convertJsonToArcade(N,W,w=!1){return q(N,W,w)}castAsJson(N=null){const W={};for(let w in this.attributes){const H=this.attributes[w];void 0!==H&&(N?.keyTranslate&&(w=N.keyTranslate(w)),W[w]=(0,p.d)(H,N))}return W}castDictionaryValueAsJsonAsync(N,W,w,H=null,te){return(0,K.Z)(function*(){const F=yield(0,p.e)(w,H,te);return N[W]=F,F})()}castAsJsonAsync(N=null,W=null){var w=this;return(0,K.Z)(function*(){const H={},te=[];for(let F in w.attributes){const k=w.attributes[F];W?.keyTranslate&&(F=W.keyTranslate(F)),void 0!==k&&((0,p.f)(k)||k instanceof Y.Z||k instanceof _.iG?H[F]=(0,p.d)(k,W):te.push(w.castDictionaryValueAsJsonAsync(H,F,k,N,W)))}return te.length>0&&(yield Promise.all(te)),H})()}}},42275:(Te,ge,j)=>{j.d(ge,{Z:()=>H});var K=j(15861),_=j(6729),V=j(98362),E=j(47562),p=j(21674),Y=j(72642),q=j(91179),P=j(82054),L=j(62208),N=j(91365),W=j(25919),w=j(29050);class H{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature",this._optimizedGeomDefinition=null,this._geometry=null,this.attributes=null,this._layer=null,this._datesfixed=!0,this.dateTimeReferenceFieldIndex=null,this.contextTimeReference=null,this.immutable=!0,this._datefields=null,this.immutable=!0}static createFromGraphic(F,k){const v=new H;return v.contextTimeReference=k??null,v._geometry=(0,L.pC)(F.geometry)?F.geometry:null,v.attributes=null==F.attributes?{}:F.attributes,F._sourceLayer?(v._layer=F._sourceLayer,v._datesfixed=!1):F._layer?(v._layer=F._layer,v._datesfixed=!1):F.layer&&"fields"in F.layer?(v._layer=F.layer,v._datesfixed=!1):F.sourceLayer&&"fields"in F.sourceLayer&&(v._layer=F.sourceLayer,v._datesfixed=!1),v._layer&&!1===v._datesfixed&&(v.dateTimeReferenceFieldIndex=void 0!==v._layer.dateTimeReferenceFieldIndex?v._layer.dateTimeReferenceFieldIndex:w.nu.createFromLayer(v._layer)),v}static createFromArcadeFeature(F){const k=new H;return k._datesfixed=F._datesfixed,k.attributes=F.attributes,k._geometry=F._geometry,k._optimizedGeomDefinition=F._optimizedGeomDefinition,F._layer&&(k._layer=F._layer),k.dateTimeReferenceFieldIndex=F.dateTimeReferenceFieldIndex,k.contextTimeReference=F.contextTimeReference,k}static createFromOptimisedFeature(F,k,v){const S=new H;return S._geometry=F.geometry?{geometry:F.geometry}:null,S._optimizedGeomDefinition=v,S.attributes=F.attributes||{},S._layer=k,S._datesfixed=!1,S}static createFromArcadeDictionary(F){const k=new H;return k.attributes=F.field("attributes"),null!==k.attributes&&k.attributes instanceof _.Z?(k.attributes=k.attributes.attributes,null===k.attributes&&(k.attributes={})):k.attributes={},k._geometry=F.field("geometry"),null!==k._geometry&&(k._geometry instanceof _.Z?k._geometry=H.parseGeometryFromDictionary(k._geometry):k._geometry instanceof p.Z||(k._geometry=null)),k}static createFromGraphicLikeObject(F,k,v=null,S){const g=new H;return g.contextTimeReference=S??null,null===k&&(k={}),g.attributes=k,g._geometry=(0,L.pC)(F)?F:null,g._layer=v,g._layer&&(g._datesfixed=!1,g.dateTimeReferenceFieldIndex=void 0!==g._layer.dateTimeReferenceFieldIndex?g._layer.dateTimeReferenceFieldIndex:w.nu.createFromLayer(g._layer)),g}repurposeFromGraphicLikeObject(F,k,v=null){null===k&&(k={}),this.attributes=k,this._geometry=F||null,this._layer=v,this._datesfixed=!this._layer}get layerPreferredTimeZone(){return this.dateTimeReferenceFieldIndex?.layerPreferredTimeZone??""}fieldSourceTimeZone(F){return this.dateTimeReferenceFieldIndex?.fieldTimeZone(F)??""}castToText(F=!1){let k="";!1===this._datesfixed&&this._fixDates();for(const v in this.attributes){""!==k&&(k+=",");const S=this.attributes[v];null==S?k+=JSON.stringify(v)+":null":(0,E.a)(S)||(0,E.b)(S)||(0,E.c)(S)?k+=JSON.stringify(v)+":"+JSON.stringify(S):S instanceof p.Z?k+=JSON.stringify(v)+":"+(0,E.t)(S):S instanceof V.Z||S instanceof Array?k+=JSON.stringify(v)+":"+(0,E.t)(S,null,F):S instanceof N.iG?k+=F?JSON.stringify(v)+":"+JSON.stringify(S.getTime()):JSON.stringify(v)+":"+S.stringify():null!==S&&"object"==typeof S&&void 0!==S.castToText&&(k+=JSON.stringify(v)+":"+S.castToText(F))}return'{"geometry":'+(null===this.geometry()?"null":(0,E.t)(this.geometry()))+',"attributes":{'+k+"}}"}_fixDates(){if(null!==this._datefields)return this._datefields.length>0&&this._fixDateFields(this._datefields),void(this._datesfixed=!0);const F=[],k=this._layer.fields;for(let v=0;v<k.length;v++){const S=k[v],g=S.type;"date"!==g&&"esriFieldTypeDate"!==g||F.push(S.name)}this._datefields=F,F.length>0&&this._fixDateFields(F),this._datesfixed=!0}isUnknownDateTimeField(F){return"unknown"===this.dateTimeReferenceFieldIndex?.fieldTimeZone(F)}_fixDateFields(F){this.attributes={...this.attributes};const k=this.contextTimeReference?.timeZone??"system";for(let v=0;v<F.length;v++){let S=this.attributes[F[v]];if(null!==S)if(void 0===S){for(const g in this.attributes)if(g.toLowerCase()===F[v].toLowerCase()){if(S=this.attributes[g],null!==S){const f=this.isUnknownDateTimeField(g);this.attributes[g]=(0,E.k)(S)?S:S instanceof Date?f?N.iG.unknownDateJSToArcadeDate(S):N.iG.dateJSAndZoneToArcadeDate(S,k):f?N.iG.unknownEpochToArcadeDate(S):N.iG.epochToArcadeDate(S,k)}break}}else{const g=this.isUnknownDateTimeField(F[v]);this.attributes[F[v]]=(0,E.k)(S)?S:S instanceof Date?g?N.iG.unknownDateJSToArcadeDate(S):N.iG.dateJSAndZoneToArcadeDate(S,k):g?N.iG.unknownEpochToArcadeDate(S):N.iG.epochToArcadeDate(S,k)}}}geometry(){return null===this._geometry||this._geometry instanceof p.Z||(this._optimizedGeomDefinition?(this._geometry=(0,L.Wg)((0,q.im)((0,P.di)(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=(0,L.Wg)((0,q.im)(this._geometry))),this._geometry}field(F){!1===this._datesfixed&&this._fixDates();const k=this.attributes[F];if(void 0!==k)return k;const v=F.toLowerCase();for(const S in this.attributes)if(S.toLowerCase()===v)return this.attributes[S];if(this._hasFieldDefinition(v))return null;throw new W.aV(null,W.rH.FieldNotFound,null,{key:F})}_hasFieldDefinition(F){if(null===this._layer)return!1;for(let k=0;k<this._layer.fields.length;k++)if(this._layer.fields[k].name.toLowerCase()===F)return!0;return!1}setField(F,k){if(this.immutable)throw new W.aV(null,W.rH.Immutable,null);if(k instanceof Date&&(k=this.isUnknownDateTimeField(F)?N.iG.unknownDateJSToArcadeDate(k):N.iG.dateJSToArcadeDate(k)),!1===(0,E.f)(k))throw new W.aV(null,W.rH.TypeNotAllowedInFeature,null);const v=F.toLowerCase();if(void 0===this.attributes[F]){for(const S in this.attributes)if(S.toLowerCase()===v)return void(this.attributes[S]=k);this.attributes[F]=k}else this.attributes[F]=k}hasField(F){const k=F.toLowerCase();if(void 0!==this.attributes[F])return!0;for(const v in this.attributes)if(v.toLowerCase()===k)return!0;return!!this._hasFieldDefinition(k)}keys(){let F=[];const k={};for(const v in this.attributes)F.push(v),k[v.toLowerCase()]=1;if(null!==this._layer)for(let v=0;v<this._layer.fields.length;v++){const S=this._layer.fields[v];1!==k[S.name.toLowerCase()]&&F.push(S.name)}return F=F.sort(),F}static parseGeometryFromDictionary(F){const k=H._convertDictionaryToJson(F,!0);return void 0!==k.hasm&&(k.hasM=k.hasm,delete k.hasm),void 0!==k.hasz&&(k.hasZ=k.hasz,delete k.hasz),void 0!==k.spatialreference&&(k.spatialReference=k.spatialreference,delete k.spatialreference),void 0!==k.rings&&(k.rings=this._fixPathArrays(k.rings,!0===k.hasZ,!0===k.hasZ)),void 0!==k.paths&&(k.paths=this._fixPathArrays(k.paths,!0===k.hasZ,!0===k.hasM)),void 0!==k.points&&(k.points=this._fixPointArrays(k.points,!0===k.hasZ,!0===k.hasM)),(0,q.im)(k)}static _fixPathArrays(F,k,v){const S=[];if(F instanceof Array)for(let g=0;g<F.length;g++)S.push(this._fixPointArrays(F[g],k,v));else if(F instanceof V.Z)for(let g=0;g<F.length();g++)S.push(this._fixPointArrays(F.get(g),k,v));return S}static _fixPointArrays(F,k,v){const S=[];if(F instanceof Array)for(let g=0;g<F.length;g++){const f=F[g];S.push(f instanceof Y.Z?k&&v?[f.x,f.y,f.z,f.m]:k?[f.x,f.y,f.z]:v?[f.x,f.y,f.m]:[f.x,f.y]:f instanceof V.Z?f.toArray():f)}else if(F instanceof V.Z)for(let g=0;g<F.length();g++){const f=F.get(g);S.push(f instanceof Y.Z?k&&v?[f.x,f.y,f.z,f.m]:k?[f.x,f.y,f.z]:v?[f.x,f.y,f.m]:[f.x,f.y]:f instanceof V.Z?f.toArray():f)}return S}static _convertDictionaryToJson(F,k=!1){const v={};for(const S in F.attributes){let g=F.attributes[S];g instanceof _.Z&&(g=H._convertDictionaryToJson(g)),k?v[S.toLowerCase()]=g:v[S]=g}return v}static parseAttributesFromDictionary(F){const k={};for(const v in F.attributes){const S=F.attributes[v];if(!(0,E.f)(S))throw new W.aV(null,W.rH.InvalidParameter,null);k[v]=S}return k}static fromJson(F,k){let v=null;null!=F.geometry&&(v=(0,q.im)(F.geometry));const S={};if(null!=F.attributes)for(const g in F.attributes){const f=F.attributes[g];if(null===f)S[g]=f;else{if(!((0,E.c)(f)||(0,E.b)(f)||(0,E.a)(f)||(0,E.k)(f)))throw new W.aV(null,W.rH.InvalidParameter,null);S[g]=f}}return H.createFromGraphicLikeObject(v,S,null,k??null)}fullSchema(){return this._layer}gdbVersion(){if(null===this._layer)return"";const F=this._layer.gdbVersion;return void 0===F?"":""===F&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":F}castAsJson(F){const k={attributes:{},geometry:!0===F?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null};for(const v in this.attributes){const S=this.attributes[v];void 0!==S&&(k.attributes[v]=(0,E.d)(S,F))}return k}castAsJsonAsync(F=null,k){var v=this;return(0,K.Z)(function*(){return v.castAsJson(k)})()}}},7652:(Te,ge,j)=>{j.d(ge,{Bx:()=>E,Rm:()=>_,Vg:()=>p,aq:()=>V});var K=j(10699);class _{constructor(){}}function V(Y,q,P){if(Y instanceof _&&!(Y instanceof p)){const L=new p;return L.fn=Y,L.parameterEvaluator=P,L.context=q,L}return Y}class E extends _{constructor(q){super(),this.fn=q}createFunction(q){return(...P)=>this.fn(q,{preparsed:!0,arguments:P})}call(q,P){return this.fn(q,P)}marshalledCall(q,P,L,N){return N(q,P,(W,w,H)=>{H=H.map(F=>F instanceof _&&!(F instanceof p)?V(F,q,N):F);const te=this.call(L,{args:H});return(0,K.y8)(te)?te.then(F=>V(F,L,N)):te})}}class p extends _{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(q){return this.fn.createFunction(this.context)}call(q,P){return this.fn.marshalledCall(q,P,this.context,this.parameterEvaluator)}marshalledCall(q,P,L){return this.fn.marshalledCall(q,P,this.context,this.parameterEvaluator)}}},98362:(Te,ge,j)=>{j.d(ge,{Z:()=>K});class K{constructor(V=[]){this._elements=V}length(){return this._elements.length}get(V){return this._elements[V]}toArray(){const V=[];for(let E=0;E<this.length();E++)V.push(this.get(E));return V}}},5371:(Te,ge,j)=>{j.d(ge,{Z:()=>V});var K=j(98362),_=j(26685);class V extends K.Z{constructor(p,Y,q,P,L){super(p),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=q,this._hasM=P,this._spRef=Y,this._cacheId=L}get(p){if(void 0===this._lazyPath[p]){const Y=this._elements[p];if(void 0===Y)return;this._lazyPath[p]=new _.Z(Y,this._spRef,this._hasZ,this._hasM,this._cacheId,p)}return this._lazyPath[p]}equalityTest(p){return p===this||null!==p&&p instanceof V&&p.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}},26685:(Te,ge,j)=>{j.d(ge,{Z:()=>V});var K=j(98362),_=j(72642);class V extends K.Z{constructor(p,Y,q,P,L,N){super(p),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=Y,this._hasZ=q,this._hasM=P,this._cacheId=L,this._partId=N}get(p){if(void 0===this._lazyPt[p]){const Y=this._elements[p];if(void 0===Y)return;const q=this._hasZ,P=this._hasM;let L=null;L=q&&!P?new _.Z(Y[0],Y[1],Y[2],void 0,this._spRef):P&&!q?new _.Z(Y[0],Y[1],void 0,Y[2],this._spRef):q&&P?new _.Z(Y[0],Y[1],Y[2],Y[3],this._spRef):new _.Z(Y[0],Y[1],this._spRef),L.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+p.toString(),this._lazyPt[p]=L}return this._lazyPt[p]}equalityTest(p){return p===this||null!==p&&p instanceof V&&p.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}},29050:(Te,ge,j)=>{j.d(ge,{nu:()=>L}),j(91365);var _=j(60466),p=(j(41039),j(21837),j(60194));class L{constructor(){this.dateTimeReferenceMetaData=null,this._fieldTimeZoneIndex={},this._fieldIndex=null,this._ianaPreferred=null,this._ianaTimeInfo=null,this._ianaEditFields=null,this._ianaLayerDateFields=null}static create(W,w){const H=new L;return H.dateTimeReferenceMetaData=w,H._fieldIndex=W instanceof _.Z?W:new _.Z(W),H}static createFromLayer(W){if(!W)return null;if(!W.fieldsIndex)return!W.declaredClass&&W.fields?L.create(W.fields,W):null;const w=new L;return w._fieldIndex=W.fieldsIndex,w.dateTimeReferenceMetaData={timeInfo:W?.timeInfo?.toJSON()??null,editFieldsInfo:W?.editFieldsInfo?.toJSON()??null,dateFieldsTimeReference:W?.dateFieldsTimeReference?.toJSON()??null,preferredTimeReference:W?.preferredTimeReference?.toJSON()??null,datesInUnknownTimezone:!0===W?.datesInUnknownTimezone},w}fieldTimeZone(W){const w=this._fieldIndex?.get(W);if(!w||"date"!==w.type&&"esriFieldTypeDate"!==w.type)return null;const H=this._fieldTimeZoneIndex[w.name];if(void 0!==H)return H;const te=[{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.creationDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.editDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.startTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.endTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone}];for(const k of te)if(k.field===w.name){const v=this.convertToIANA(k.timeReference,k.isunknown);return this._fieldTimeZoneIndex[w.name]=v,v}const F=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,this.dateTimeReferenceMetaData?.datesInUnknownTimezone);return this._fieldTimeZoneIndex[w.name]=F,F}convertToIANA(W,w){return w?"unknown":function P(N){return N?.timeZoneIANA?N?.timeZoneIANA:N?.timeZone?(0,p.G)(N,""):""}(W)}get layerPreferredTimeZone(){if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";const W=this.dateTimeReferenceMetaData?.preferredTimeReference;return this._ianaPreferred=this.convertToIANA(W,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaPreferred}get layerTimeInfoTimeZone(){if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";const W=this.dateTimeReferenceMetaData?.timeInfo?.timeReference;return this._ianaTimeInfo=this.convertToIANA(W,!1),this._ianaTimeInfo}get layerEditFieldsTimeZone(){if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";const W=this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference;return this._ianaEditFields=this.convertToIANA(W,this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaEditFields}get layerDateFieldsTimeZone(){if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;this._ianaLayerDateFields="";const W=this.dateTimeReferenceMetaData?.dateFieldsTimeReference;return this._ianaLayerDateFields=this.convertToIANA(W,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaLayerDateFields}}},25919:(Te,ge,j)=>{var K,F;j.d(ge,{Hy:()=>L,OF:()=>q,TD:()=>W,Tu:()=>H,VO:()=>N,aV:()=>p,kq:()=>P,rH:()=>K}),(F=K||(K={})).AsyncNotEnabled="AsyncNotEnabled",F.ModulesNotSupported="ModulesNotSupported",F.CircularModules="CircularModules",F.NeverReach="NeverReach",F.UnsupportedHashType="UnsupportedHashType",F.InvalidParameter="InvalidParameter",F.UnexpectedToken="UnexpectedToken",F.Unrecognised="Unrecognised",F.UnrecognisedType="UnrecognisedType",F.MaximumCallDepth="MaximumCallDepth",F.BooleanConditionRequired="BooleanConditionRequired",F.TypeNotAllowedInFeature="TypeNotAllowedInFeature",F.KeyMustBeString="KeyMustBeString",F.WrongNumberOfParameters="WrongNumberOfParameters",F.CallNonFunction="CallNonFunction",F.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",F.NoFunctionInDictionary="NoFunctionInDictionary",F.NoFunctionInArray="NoFunctionInArray",F.AssignModuleFunction="AssignModuleFunction",F.LogicExpressionOrAnd="LogicExpressionOrAnd",F.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",F.FuncionNotFound="FunctionNotFound",F.InvalidMemberAccessKey="InvalidMemberAccessKey",F.UnsupportedUnaryOperator="UnsupportUnaryOperator",F.InvalidIdentifier="InvalidIdentifier",F.MemberOfNull="MemberOfNull",F.UnsupportedOperator="UnsupportedOperator",F.Cancelled="Cancelled",F.ModuleAccessorMustBeString="ModuleAccessorMustBeString",F.ModuleExportNotFound="ModuleExportNotFound",F.Immutable="Immutable",F.OutOfBounds="OutOfBounds",F.IllegalResult="IllegalResult",F.FieldNotFound="FieldNotFound",F.PortalRequired="PortalRequired",F.LogicError="LogicError",F.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",F.KeyAccessorMustBeString="KeyAccessorMustBeString",F.WrongSpatialReference="WrongSpatialReference";const _={[K.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[K.LogicError]:"Logic error - {reason}",[K.NeverReach]:"Encountered unreachable logic",[K.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[K.ModuleAccessorMustBeString]:"Module accessor must be a string",[K.ModuleExportNotFound]:"Module has no export with provided identifier",[K.ModulesNotSupported]:"Current profile does not support modules",[K.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[K.FuncionNotFound]:"Function not found",[K.FieldNotFound]:"Key not found - {key}",[K.CircularModules]:"Circular module dependencies are not allowed",[K.Cancelled]:"Execution cancelled",[K.UnsupportedHashType]:"Type not supported in hash function",[K.IllegalResult]:"Value is not a supported return type",[K.PortalRequired]:"Portal is required",[K.InvalidParameter]:"Invalid parameter",[K.WrongNumberOfParameters]:"Call with wrong number of parameters",[K.Unrecognised]:"Unrecognised code structure",[K.UnrecognisedType]:"Unrecognised type",[K.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[K.BooleanConditionRequired]:"Conditions must use booleans",[K.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[K.NoFunctionInArray]:"Arrays cannot contain functions.",[K.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[K.KeyAccessorMustBeString]:"Accessor must be a string",[K.KeyMustBeString]:"Object keys must be a string",[K.Immutable]:"Object is immutable",[K.InvalidParameter]:"Invalid parameter",[K.UnexpectedToken]:"Unexpected token",[K.MemberOfNull]:"Cannot access property of null object",[K.MaximumCallDepth]:"Exceeded maximum function depth",[K.OutOfBounds]:"Out of bounds",[K.InvalidIdentifier]:"Identifier not recognised",[K.FuncionNotFound]:"Function not found",[K.CallNonFunction]:"Expression is not a function",[K.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[K.AssignModuleFunction]:"Cannot assign function to module variable",[K.UnsupportedUnaryOperator]:"Unsupported unary operator",[K.UnsupportedOperator]:"Unsupported operator",[K.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[K.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&"};class V extends Error{constructor(...k){super(...k)}}class E extends V{constructor(k,v){super(Y(v)+k.message,{cause:k}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,E),v&&v.loc&&(this.loc=v.loc)}}class p extends Error{constructor(k,v,S,g){super("Execution error - "+Y(S)+L(_[v],g)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,p),S&&S.loc&&(this.loc=S.loc)}}function Y(F){return F&&F.loc?`Line : ${F.loc.start?.line}, ${F.loc.start?.column}: `:""}class q extends Error{constructor(k,v,S,g){super("Compilation error - "+Y(S)+L(_[v],g)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,q),S&&S.loc&&(this.loc=S.loc)}}class P extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,P)}}function L(F,k){try{if(!k)return F;for(const v in k){let S=k[v];S||(S=""),F=F.replace("{"+v+"}",k[v])}}catch{}return F}function N(F,k,v){return"esri.arcade.arcadeexecutionerror"===v.declaredRootClass||"esri.arcade.arcadecompilationerror"===v.declaredRootClass?null===v.loc&&k&&k.loc?new E(v,{cause:v}):v:k&&k.loc?new E(v,{cause:v}):v}var W;!function(F){F.UnrecognisedUri="UnrecognisedUri",F.UnsupportedUriProtocol="UnsupportedUriProtocol"}(W||(W={}));const w={[W.UnrecognisedUri]:"Unrecognised uri - {uri}",[W.UnsupportedUriProtocol]:"Unrecognised uri protocol"};class H extends Error{constructor(k,v){super(L(w[k],v)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,H)}}},77132:(Te,ge,j)=>{j.d(ge,{Bj:()=>E,EI:()=>k,HD:()=>P,JW:()=>Y,J_:()=>w,Lz:()=>S,NP:()=>H,Qk:()=>A,SV:()=>v,Sh:()=>q,US:()=>T,dj:()=>p,hd:()=>Q,hj:()=>N,q2:()=>z,tI:()=>f,tt:()=>te,yE:()=>Z});var E,p,G,K=j(91365),_=j(2004),V=j(36255);function Y(G){return V.Z.fromJSON(G.toJSON())}function q(G){return G.toJSON?G.toJSON():G}function P(G){return"string"==typeof G||G instanceof String}function N(G){return"number"==typeof G}function w(G){return G instanceof Date}function H(G){return G instanceof K.iG}function te(G,re){return G===re||!(!w(G)&&!H(G)||!w(re)&&!H(re))&&G.getTime()===re.getTime()}function k(G){if(null==G)return null;if("number"==typeof G)return G;switch(G.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function v(G){if(null==G)return null;switch(G.type){case"polygon":case"multipoint":case"polyline":return G.extent;case"point":return new _.Z({xmin:G.x,ymin:G.y,xmax:G.x,ymax:G.y,spatialReference:G.spatialReference});case"extent":return G}return null}function S(G){if(null==G)return null;if("number"==typeof G||"number"==typeof G)return G;switch(G.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}(G=E||(E={}))[G.Standardised=0]="Standardised",G[G.StandardisedNoInterval=1]="StandardisedNoInterval",G[G.SqlServer=2]="SqlServer",G[G.Oracle=3]="Oracle",G[G.Postgres=4]="Postgres",G[G.PGDB=5]="PGDB",G[G.FILEGDB=6]="FILEGDB",G[G.NotEvaluated=7]="NotEvaluated",function(G){G[G.InFeatureSet=0]="InFeatureSet",G[G.NotInFeatureSet=1]="NotInFeatureSet",G[G.Unknown=2]="Unknown"}(p||(p={}));const f=1e3,A={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},z={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},Z={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function T(G){return void 0===G?"":G=(G=(G=G.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function Q(G,re){re||(re={}),"function"==typeof re&&(re={cmp:re});const de="boolean"==typeof re.cycles&&re.cycles,he=re.cmp&&(Be=re.cmp,function(pe){return function(ne,ye){return Be({key:ne,value:pe[ne]},{key:ye,value:pe[ye]})}});var Be;const Ae=[];return function pe(ne){if(ne&&ne.toJSON&&"function"==typeof ne.toJSON&&(ne=ne.toJSON()),void 0===ne)return;if("number"==typeof ne)return isFinite(ne)?""+ne:"null";if("object"!=typeof ne)return JSON.stringify(ne);let ye,ve;if(Array.isArray(ne)){for(ve="[",ye=0;ye<ne.length;ye++)ye&&(ve+=","),ve+=pe(ne[ye])||"null";return ve+"]"}if(null===ne)return"null";if(Ae.includes(ne)){if(de)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const Ie=Ae.push(ne)-1,Qe=Object.keys(ne).sort(he&&he(ne));for(ve="",ye=0;ye<Qe.length;ye++){const Xe=Qe[ye],Ze=pe(ne[Xe]);Ze&&(ve&&(ve+=","),ve+=JSON.stringify(Xe)+":"+Ze)}return Ae.splice(Ie,1),"{"+ve+"}"}(G)}},85692:(Te,ge,j)=>{j.d(ge,{AW:()=>V,Ay:()=>H,B9:()=>g,Es:()=>y,RI:()=>S,_R:()=>Y,nB:()=>z,s9:()=>w,ws:()=>C});var K=j(72642),_=j(11519);function V(Z,h,T){return Math.sqrt((Z[0]-h[0])**2+(Z[1]-h[1])**2+(void 0!==Z[2]&&void 0!==h[2]?(Z[2]*T-h[2]*T)**2:0))}const E=[];for(const Z of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const h=Z[0];for(let T=1;T<Z.length;T++)E[Z[T]]=h}const p=[];function Y(Z){return Z.vcsWkid&&void 0!==E[Z.vcsWkid]?p[E[Z.vcsWkid]]:Z.latestVcsWkid&&void 0!==E[Z.latestVcsWkid]?p[E[Z.latestVcsWkid]]:1}function q(Z,h,T){const Q={x:0,y:0};h&&(Q.z=0),T&&(Q.m=0);let G=0,re=Z[0];for(let de=0;de<Z.length;de++){const he=Z[de];if(!1===W(he,re)){const Be=N(re,he,h),Ae=P(re,he,h,T);Ae.x*=Be,Ae.y*=Be,Q.x+=Ae.x,Q.y+=Ae.y,h&&(Ae.z*=Be,Q.z+=Ae.z),T&&(Ae.m*=Be,Q.m+=Ae.m),G+=Be,re=he}}return G>0?(Q.x/=G,Q.y/=G,h&&(Q.z/=G),T&&(Q.m/=G)):(Q.x=Z[0][0],Q.y=Z[0][1],h&&(Q.z=Z[0][2]),T&&h?Q.m=Z[0][3]:T&&(Q.m=Z[0][2])),Q}function P(Z,h,T,Q){const G={x:(Z[0]+h[0])/2,y:(Z[1]+h[1])/2};return T&&(G.z=(Z[2]+h[2])/2),T&&Q?G.m=(Z[3]+h[3])/2:Q&&(G.m=(Z[2]+h[2])/2),G}function L(Z,h){if(Z.length<=1)return 0;let T=0;for(let Q=1;Q<Z.length;Q++)T+=N(Z[Q-1],Z[Q],h);return T}function N(Z,h,T){const Q=h[0]-Z[0],G=h[1]-Z[1];if(T){const re=h[2]-h[2];return Math.sqrt(Q*Q+G*G+re*re)}return Math.sqrt(Q*Q+G*G)}function W(Z,h){if(Z.length!==h.length)return!1;for(let T=0;T<Z.length;T++)if(Z[T]!==h[T])return!1;return!0}function w(Z){const h={x:0,y:0,spatialReference:Z.spatialReference.toJSON()},T={x:0,y:0,spatialReference:Z.spatialReference.toJSON()};let Q=0,G=0;for(let re=0;re<Z.paths.length;re++){if(0===Z.paths[re].length)continue;const de=L(Z.paths[re],!0===Z.hasZ);if(0===de){const he=q(Z.paths[re],!0===Z.hasZ,!0===Z.hasM);h.x+=he.x,h.y+=he.y,!0===Z.hasZ&&(h.z+=he.z),!0===Z.hasM&&(h.m+=he.m),++Q}else{const he=q(Z.paths[re],!0===Z.hasZ,!0===Z.hasM);T.x+=he.x*de,T.y+=he.y*de,!0===Z.hasZ&&(T.z+=he.z*de),!0===Z.hasM&&(T.m+=he.m*de),G+=de}}return G>0?(T.x/=G,T.y/=G,!0===Z.hasZ&&(T.z/=G),!0===Z.hasM&&(T.m/=G),new K.Z(T)):Q>0?(h.x/=Q,h.y/=Q,!0===Z.hasZ&&(T.z/=Q),!0===Z.hasM&&(h.m/=Q),new K.Z(h)):null}function H(Z){if(0===Z.points.length)return null;let h=0,T=0,Q=0,G=0;for(let de=0;de<Z.points.length;de++){const he=Z.getPoint(de);!0===he.hasZ&&(Q+=he.z),!0===he.hasM&&(G+=he.m),h+=he.x,T+=he.y,G+=he.m}const re={x:h/Z.points.length,y:T/Z.points.length,spatialReference:null};return re.spatialReference=Z.spatialReference.toJSON(),!0===Z.hasZ&&(re.z=Q/Z.points.length),!0===Z.hasM&&(re.m=G/Z.points.length),new K.Z(re)}function k(Z,h,T=0){for(;Z<T;)Z+=h;const Q=T+h;for(;Z>=Q;)Z-=h;return Z}function v(Z,h){return Math.atan2(h.y-Z.y,h.x-Z.x)}function S(Z,h){return k(v(Z,h),2*Math.PI)*(180/Math.PI)}function g(Z,h){return k(Math.PI/2-v(Z,h),2*Math.PI)*(180/Math.PI)}function f(Z,h,T){const Q={x:Z.x-h.x,y:Z.y-h.y},G={x:T.x-h.x,y:T.y-h.y};return Math.atan2(function F(Z,h){return Z.x*h.y-h.x*Z.y}(Q,G),function te(Z,h){return Z.x*h.x+Z.y*h.y}(Q,G))}function C(Z,h,T){return k(f(Z,h,T),2*Math.PI)*(180/Math.PI)}function y(Z,h,T){return k(-1*f(Z,h,T),2*Math.PI)*(180/Math.PI)}p[9002]=.3048,p[9003]=.3048006096012192,p[9095]=.3048007491;const A=[0,0];function z(Z){for(let h=0;h<Z.length;h++){const T=Z[h];for(let G=0;G<T.length-1;G++){const re=T[G],de=T[G+1];for(let he=h+1;he<Z.length;he++)for(let Be=0;Be<Z[he].length-1;Be++){const Ae=Z[he][Be],pe=Z[he][Be+1];if((0,_.UT)(re,de,Ae,pe,A)&&!(A[0]===re[0]&&A[1]===re[1]||A[0]===Ae[0]&&A[1]===Ae[1]||A[0]===de[0]&&A[1]===de[1]||A[0]===pe[0]&&A[1]===pe[1]))return!0}}const Q=T.length;if(!(Q<3))for(let G=0;G<=Q-2;G++){const re=T[G],de=T[G+1];for(let he=G+2;he<=Q-2;he++){const Be=T[he],Ae=T[he+1];if((0,_.UT)(re,de,Be,Ae,A)&&!(A[0]===re[0]&&A[1]===re[1]||A[0]===Be[0]&&A[1]===Be[1]||A[0]===de[0]&&A[1]===de[1]||A[0]===Ae[0]&&A[1]===Ae[1]))return!0}}}return!1}},84228:(Te,ge,j)=>{j.d(ge,{r:()=>w});var K=j(91365),_=j(47562),V=j(25919),E=j(56683),p=j(21837);const P=[0,31,59,90,120,151,181,212,243,273,304,334],L=[0,31,60,91,121,152,182,213,244,274,305,335];function N(H){return null===H?H:!1===H.isValid?null:H}function W(H,te){return""===H||"default"===H.toLowerCase().trim()?(0,_.C)(te):H}function w(H,te){H.today=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,0,0,F,k);const f=new Date;return f.setHours(0,0,0,0),K.iG.dateJSAndZoneToArcadeDate(f,(0,_.C)(F))})},H.changetimezone=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,2,2,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));if(null===f)return null;const C=K.iG.arcadeDateAndZoneToArcadeDate(f,W((0,_.j)(g[1]),F));return!1===C.isValid?null:C})},H.timezone=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,2,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));if(null===f)return null;const C=f.timeZone;return"system"===C?K.iG.systemTimeZoneCanonicalName:C})},H.timezoneoffset=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?null:f.timeZoneOffset})},H.now=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,0,0,F,k);const f=K.iG.nowToArcadeDate((0,_.C)(F));return!1===f.isValid?null:f})},H.timestamp=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,0,0,F,k);const f=K.iG.nowUTCToArcadeDate();return!1===f.isValid?null:f})},H.toutc=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?null:f.toUTC()})},H.tolocal=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?null:f.toLocal()})},H.day=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.day})},H.month=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.monthJS})},H.year=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.year})},H.hour=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.hour})},H.second=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.second})},H.millisecond=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.millisecond})},H.minute=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.minute})},H.week=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,2,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));if(null===f)return NaN;const C=(0,_.g)((0,_.A)(g[1],0));if(C<0||C>6)throw new V.aV(F,V.rH.InvalidParameter,k);const Z=f.dayOfWeekJS,h=function Y(H,te,F){return H+(function q(H){return H%4==0&&(H%100!=0||H%400==0)}(F)?L:P)[te]}(f.day,f.monthJS,f.year)-1,T=Math.floor(h/7);return Z-C+(Z-C<0?7:0)<h-7*T?T+1:T})},H.weekday=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.dayOfWeekJS})},H.isoweekday=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.dayOfWeekISO})},H.isomonth=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.monthISO})},H.isoweek=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.weekISO})},H.isoyear=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,1,1,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));return null===f?NaN:f.yearISO})},H.date=function(F,k){return te(F,k,(v,S,g)=>{if((0,_.y)(g,0,8,F,k),3===g.length)return N(K.iG.fromParts((0,_.g)(g[0]),(0,_.g)(g[1])+1,(0,_.g)(g[2]),0,0,0,0,(0,_.C)(F)));if(4===g.length)return N(K.iG.fromParts((0,_.g)(g[0]),(0,_.g)(g[1])+1,(0,_.g)(g[2]),(0,_.g)(g[3]),0,0,0,(0,_.C)(F)));if(5===g.length)return N(K.iG.fromParts((0,_.g)(g[0]),(0,_.g)(g[1])+1,(0,_.g)(g[2]),(0,_.g)(g[3]),(0,_.g)(g[4]),0,0,(0,_.C)(F)));if(6===g.length)return N(K.iG.fromParts((0,_.g)(g[0]),(0,_.g)(g[1])+1,(0,_.g)(g[2]),(0,_.g)(g[3]),(0,_.g)(g[4]),(0,_.g)(g[5]),0,(0,_.C)(F)));if(7===g.length)return N(K.iG.fromParts((0,_.g)(g[0]),(0,_.g)(g[1])+1,(0,_.g)(g[2]),(0,_.g)(g[3]),(0,_.g)(g[4]),(0,_.g)(g[5]),(0,_.g)(g[6]),(0,_.C)(F)));if(8===g.length)return N(K.iG.fromParts((0,_.g)(g[0]),(0,_.g)(g[1])+1,(0,_.g)(g[2]),(0,_.g)(g[3]),(0,_.g)(g[4]),(0,_.g)(g[5]),(0,_.g)(g[6]),W((0,_.j)(g[7]),F)));if(2===g.length){let f,C=(0,_.j)(g[1]);return""===C?null:(C=(0,_.D)(C),f="X"===C?p.ou.fromSeconds((0,_.g)(g[0])):"x"===C?p.ou.fromMillis((0,_.g)(g[0])):p.ou.fromFormat((0,_.j)(g[0]),C,{locale:(0,E.Kd)(),numberingSystem:"latn"}),f.isValid?K.iG.dateTimeToArcadeDate(f):null)}if(1===g.length){if((0,_.c)(g[0])){if(""===g[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(g[0]))return(0,_.l)(g[0]+"-01-01",(0,_.C)(F))}const f=(0,_.g)(g[0]);if(!1===isNaN(f)){const C=p.ou.fromMillis(f);return C.isValid?K.iG.dateTimeAndZoneToArcadeDate(C,(0,_.C)(F)):null}return(0,_.l)(g[0],(0,_.C)(F))}return 0===g.length?K.iG.nowToArcadeDate((0,_.C)(F)):null})},H.datediff=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,2,4,F,k);let f=(0,_.l)(g[0],(0,_.C)(F)),C=(0,_.l)(g[1],(0,_.C)(F));if(null===f||null===C)return NaN;let y=(0,_.A)(g[3],"");switch(""!==y&&null!==y?(y=(0,_.j)(y),f=K.iG.arcadeDateAndZoneToArcadeDate(f,y),C=K.iG.arcadeDateAndZoneToArcadeDate(C,y)):f.timeZone!==C.timeZone&&(f.isUnknownTimeZone?f=K.iG.arcadeDateAndZoneToArcadeDate(f,C.timeZone):C=K.iG.arcadeDateAndZoneToArcadeDate(C,f.timeZone)),(0,_.j)(g[2]).toLowerCase()){case"days":case"day":case"d":return f.diff(C,"days");case"months":case"month":return f.diff(C,"months");case"minutes":case"minute":case"m":return f.diff(C,"M"===g[2]?"months":"minutes");case"seconds":case"second":case"s":return f.diff(C,"seconds");case"milliseconds":case"millisecond":case"ms":default:return f.diff(C);case"hours":case"hour":case"h":return f.diff(C,"hours");case"years":case"year":case"y":return f.diff(C,"years")}})},H.dateadd=function(F,k){return te(F,k,(v,S,g)=>{(0,_.y)(g,2,3,F,k);const f=(0,_.l)(g[0],(0,_.C)(F));if(null===f)return null;let C=(0,_.g)(g[1]);if(isNaN(C))return f;let y="milliseconds";switch((0,_.j)(g[2]).toLowerCase()){case"days":case"day":case"d":y="days",C=(0,_.E)(C);break;case"months":case"month":y="months",C=(0,_.E)(C);break;case"minutes":case"minute":case"m":y="M"===g[2]?"months":"minutes";break;case"seconds":case"second":case"s":y="seconds";break;case"milliseconds":case"millisecond":case"ms":y="milliseconds";break;case"hours":case"hour":case"h":y="hours";break;case"years":case"year":case"y":y="years"}return f.plus({[y]:C})})}}},50818:(Te,ge,j)=>{j.d(ge,{t:()=>q});var K=j(47562);function _(P){let L=0;for(let N=0;N<P.length;N++)L+=P[N];return L/P.length}function V(P){const L=_(P);let N=0;for(let W=0;W<P.length;W++)N+=(L-P[W])**2;return N/P.length}function q(P,L,N=1e3){switch(P.toLowerCase()){case"distinct":return function p(P,L){const N=[],W={},w=[];for(let H=0;H<P.length;H++){if(null!=P[H]&&P[H]!==K.v){const te=P[H];if((0,K.b)(te)||(0,K.c)(te))void 0===W[te]&&(N.push(te),W[te]=1);else{let F=!1;for(let k=0;k<w.length;k++)!0===(0,K.s)(w[k],te)&&(F=!0);!1===F&&(w.push(te),N.push(te))}}if(N.length>=L&&-1!==L)return N}return N}(L,N);case"avg":case"mean":return _((0,K.V)(L));case"min":return Math.min.apply(Math,(0,K.V)(L));case"sum":return function E(P){let L=0;for(let N=0;N<P.length;N++)L+=P[N];return L}((0,K.V)(L));case"max":return Math.max.apply(Math,(0,K.V)(L));case"stdev":case"stddev":return Math.sqrt(V((0,K.V)(L)));case"var":case"variance":return V((0,K.V)(L));case"count":return L.length}return 0}},24499:(Te,ge,j)=>{j.d(ge,{Z:()=>g,r:()=>v});var K=j(6729),_=j(42275),V=j(26685),E=j(47562),p=j(2004),Y=j(21674),q=j(72854),P=j(72642),L=j(37118),N=j(55214),W=j(85692),w=j(91179),H=j(25919),te=j(5371),F=j(25748);function k(f){return f&&"esri.arcade.Feature"===f.arcadeDeclaredClass}function v(f,C){f.ringisclockwise=function(y,A){return C(y,A,(z,Z,h)=>{(0,E.y)(h,1,1,y,A);let T=[],Q=!1,G=!1;if(null===h[0])return!1;if((0,E.m)(h[0])){for(const re of h[0]){if(!(re instanceof P.Z))throw new H.aV(y,H.rH.InvalidParameter,A);T.push(re.hasZ?re.hasM?[re.x,re.y,re.z,re.m]:[re.x,re.y,re.z]:[re.x,re.y])}T.length>0&&(Q=h[0][0].hasZ,G=h[0][0].hasM)}else if(h[0]instanceof V.Z)T=h[0]._elements,T.length>0&&(Q=h[0]._hasZ,G=h[0]._hasM);else{if(!(0,E.x)(h[0]))throw new H.aV(y,H.rH.InvalidParameter,A);for(const re of h[0].toArray()){if(!(re instanceof P.Z))throw new H.aV(y,H.rH.InvalidParameter,A);T.push(re.hasZ?re.hasM?[re.x,re.y,re.z,re.m]:[re.x,re.y,re.z]:[re.x,re.y])}T.length>0&&(Q=h[0].get(0).hasZ,G=h[0].get(0).hasM)}return!(T.length<3)&&(0,F.bu)(T,G,Q)})},f.polygon=function(y,A){return C(y,A,(z,Z,h)=>{(0,E.y)(h,1,1,y,A);let T=null;if(h[0]instanceof K.Z){if(T=(0,E.q)(_.Z.parseGeometryFromDictionary(h[0]),y.spatialReference),!(T instanceof L.Z))throw new H.aV(y,H.rH.InvalidParameter,A)}else T=h[0]instanceof L.Z?(0,w.im)(h[0].toJSON()):(0,E.q)(new L.Z(JSON.parse(h[0])),y.spatialReference);if(null!==T&&!1===T.spatialReference.equals(y.spatialReference))throw new H.aV(y,H.rH.WrongSpatialReference,A);return(0,E.F)(T)})},f.polyline=function(y,A){return C(y,A,(z,Z,h)=>{(0,E.y)(h,1,1,y,A);let T=null;if(h[0]instanceof K.Z){if(T=(0,E.q)(_.Z.parseGeometryFromDictionary(h[0]),y.spatialReference),!(T instanceof N.Z))throw new H.aV(y,H.rH.InvalidParameter,A)}else T=h[0]instanceof N.Z?(0,w.im)(h[0].toJSON()):(0,E.q)(new N.Z(JSON.parse(h[0])),y.spatialReference);if(null!==T&&!1===T.spatialReference.equals(y.spatialReference))throw new H.aV(y,H.rH.WrongSpatialReference,A);return(0,E.F)(T)})},f.point=function(y,A){return C(y,A,(z,Z,h)=>{(0,E.y)(h,1,1,y,A);let T=null;if(h[0]instanceof K.Z){if(T=(0,E.q)(_.Z.parseGeometryFromDictionary(h[0]),y.spatialReference),!(T instanceof P.Z))throw new H.aV(y,H.rH.InvalidParameter,A)}else T=h[0]instanceof P.Z?(0,w.im)(h[0].toJSON()):(0,E.q)(new P.Z(JSON.parse(h[0])),y.spatialReference);if(null!==T&&!1===T.spatialReference.equals(y.spatialReference))throw new H.aV(y,H.rH.WrongSpatialReference,A);return(0,E.F)(T)})},f.multipoint=function(y,A){return C(y,A,(z,Z,h)=>{(0,E.y)(h,1,1,y,A);let T=null;if(h[0]instanceof K.Z){if(T=(0,E.q)(_.Z.parseGeometryFromDictionary(h[0]),y.spatialReference),!(T instanceof q.Z))throw new H.aV(y,H.rH.InvalidParameter,A)}else T=h[0]instanceof q.Z?(0,w.im)(h[0].toJSON()):(0,E.q)(new q.Z(JSON.parse(h[0])),y.spatialReference);if(null!==T&&!1===T.spatialReference.equals(y.spatialReference))throw new H.aV(y,H.rH.WrongSpatialReference,A);return(0,E.F)(T)})},f.extent=function(y,A){return C(y,A,(z,Z,h)=>{h=(0,E.G)(h),(0,E.y)(h,1,1,y,A);let T=null;if(h[0]instanceof K.Z)T=(0,E.q)(_.Z.parseGeometryFromDictionary(h[0]),y.spatialReference);else if(h[0]instanceof P.Z){const Q={xmin:h[0].x,ymin:h[0].y,xmax:h[0].x,ymax:h[0].y,spatialReference:h[0].spatialReference.toJSON()},G=h[0];G.hasZ?(Q.zmin=G.z,Q.zmax=G.z):G.hasM&&(Q.mmin=G.m,Q.mmax=G.m),T=(0,w.im)(Q)}else T=h[0]instanceof L.Z||h[0]instanceof N.Z||h[0]instanceof q.Z?(0,w.im)(h[0].extent?.toJSON()):h[0]instanceof p.Z?(0,w.im)(h[0].toJSON()):(0,E.q)(new p.Z(JSON.parse(h[0])),y.spatialReference);if(null!==T&&!1===T.spatialReference.equals(y.spatialReference))throw new H.aV(y,H.rH.WrongSpatialReference,A);return(0,E.F)(T)})},f.geometry=function(y,A){return C(y,A,(z,Z,h)=>{(0,E.y)(h,1,1,y,A);let T=null;if(null===h[0])return null;if(T=k(h[0])?(0,E.q)(h[0].geometry(),y.spatialReference):(0,E.q)(h[0]instanceof K.Z?_.Z.parseGeometryFromDictionary(h[0]):(0,w.im)(JSON.parse(h[0])),y.spatialReference),null!==T&&!1===T.spatialReference.equals(y.spatialReference))throw new H.aV(y,H.rH.WrongSpatialReference,A);return(0,E.F)(T)})},f.setgeometry=function(y,A){return C(y,A,(z,Z,h)=>{if((0,E.y)(h,2,2,y,A),!k(h[0]))throw new H.aV(y,H.rH.InvalidParameter,A);if(!0===h[0].immutable)throw new H.aV(y,H.rH.Immutable,A);if(!(h[1]instanceof Y.Z||null===h[1]))throw new H.aV(y,H.rH.InvalidParameter,A);return h[0]._geometry=h[1],E.v})},f.feature=function(y,A){return C(y,A,(z,Z,h)=>{if(0===h.length)throw new H.aV(y,H.rH.WrongNumberOfParameters,A);let T=null;if(1===h.length)if((0,E.c)(h[0]))T=_.Z.fromJson(JSON.parse(h[0]),y.timeReference);else if(k(h[0]))T=_.Z.createFromArcadeFeature(h[0]);else if(h[0]instanceof Y.Z)T=_.Z.createFromGraphicLikeObject(h[0],null,null,y.timeReference);else{if(!(h[0]instanceof K.Z))throw new H.aV(y,H.rH.InvalidParameter,A);{let Q=h[0].hasField("geometry")?h[0].field("geometry"):null,G=h[0].hasField("attributes")?h[0].field("attributes"):null;null!==Q&&Q instanceof K.Z&&(Q=_.Z.parseGeometryFromDictionary(Q)),null!==G&&(G=_.Z.parseAttributesFromDictionary(G)),T=_.Z.createFromGraphicLikeObject(Q,G,null,y.timeReference)}}else if(2===h.length){let Q=null,G=null;if(null!==h[0])if(h[0]instanceof Y.Z)Q=h[0];else{if(!(Q instanceof K.Z))throw new H.aV(y,H.rH.InvalidParameter,A);Q=_.Z.parseGeometryFromDictionary(h[0])}if(null!==h[1]){if(!(h[1]instanceof K.Z))throw new H.aV(y,H.rH.InvalidParameter,A);G=_.Z.parseAttributesFromDictionary(h[1])}T=_.Z.createFromGraphicLikeObject(Q,G,null,y.timeReference)}else{let Q=null;const G={};if(null!==h[0])if(h[0]instanceof Y.Z)Q=h[0];else{if(!(Q instanceof K.Z))throw new H.aV(y,H.rH.InvalidParameter,A);Q=_.Z.parseGeometryFromDictionary(h[0])}for(let re=1;re<h.length;re+=2){const de=(0,E.j)(h[re]),he=h[re+1];if(!(null==he||(0,E.c)(he)||isNaN(he)||(0,E.k)(he)||(0,E.b)(he)||(0,E.a)(he)))throw new H.aV(y,H.rH.InvalidParameter,A);if((0,E.i)(he)||!1===(0,E.f)(he))throw new H.aV(y,H.rH.InvalidParameter,A);G[de]=he===E.v?null:he}T=_.Z.createFromGraphicLikeObject(Q,G,null,y.timeReference)}return T._geometry=(0,E.q)(T.geometry(),y.spatialReference),T.immutable=!1,T})},f.dictionary=function(y,A){return C(y,A,(z,Z,h)=>{if(0===h.length){const G=new K.Z;return G.immutable=!1,G}if(1===h.length&&(0,E.c)(h[0]))try{const G=JSON.parse(h[0]),re=K.Z.convertObjectToArcadeDictionary(G,(0,E.C)(y),!1);return re.immutable=!1,re}catch{throw new H.aV(y,H.rH.InvalidParameter,A)}if(h.length%2!=0)throw new H.aV(y,H.rH.WrongNumberOfParameters,A);const T={};for(let G=0;G<h.length;G+=2){const re=(0,E.j)(h[G]),de=h[G+1];if(!(null==de||(0,E.c)(de)||isNaN(de)||(0,E.k)(de)||(0,E.b)(de)||(0,E.a)(de)||(0,E.m)(de)||(0,E.x)(de)))throw new H.aV(y,H.rH.InvalidParameter,A);if((0,E.i)(de))throw new H.aV(y,H.rH.InvalidParameter,A);T[re]=de===E.v?null:de}const Q=new K.Z(T);return Q.immutable=!1,Q})},f.haskey=function(y,A){return C(y,A,(z,Z,h)=>{(0,E.y)(h,2,2,y,A);const T=(0,E.j)(h[1]);if(k(h[0])||h[0]instanceof K.Z)return h[0].hasField(T);if(h[0]instanceof Y.Z){const Q=g(h[0],T,null,null,2);return!Q||"notfound"!==Q.keystate}throw new H.aV(y,H.rH.InvalidParameter,A)})},f.hasvalue=function(y,A){return C(y,A,(z,Z,h)=>{if((0,E.y)(h,2,2,y,A),null===h[0]||null===h[1])return!1;const T=(0,E.j)(h[1]);return(0,E.w)(h[0])||h[0]instanceof K.Z?!!h[0].hasField(T)&&null!==h[0].field(T):h[0]instanceof Y.Z&&null!==g(h[0],T,null,null,0)})},f.indexof=function(y,A){return C(y,A,(z,Z,h)=>{(0,E.y)(h,2,2,y,A);const T=h[1];if((0,E.m)(h[0])){for(let Q=0;Q<h[0].length;Q++)if((0,E.s)(T,h[0][Q]))return Q;return-1}if((0,E.x)(h[0])){const Q=h[0].length();for(let G=0;G<Q;G++)if((0,E.s)(T,h[0].get(G)))return G;return-1}throw new H.aV(y,H.rH.InvalidParameter,A)})},f.angle=function(y,A){return C(y,A,(z,Z,h)=>{if(h=(0,E.G)(h),(0,E.y)(h,2,3,y,A),!(h[0]instanceof P.Z))throw new H.aV(y,H.rH.InvalidParameter,A);if(!(h[1]instanceof P.Z))throw new H.aV(y,H.rH.InvalidParameter,A);if(h.length>2&&!(h[2]instanceof P.Z))throw new H.aV(y,H.rH.InvalidParameter,A);return 2===h.length?(0,W.RI)(h[0],h[1]):(0,W.ws)(h[0],h[1],h[2])})},f.bearing=function(y,A){return C(y,A,(z,Z,h)=>{if(h=(0,E.G)(h),(0,E.y)(h,2,3,y,A),!(h[0]instanceof P.Z))throw new H.aV(y,H.rH.InvalidParameter,A);if(!(h[1]instanceof P.Z))throw new H.aV(y,H.rH.InvalidParameter,A);if(h.length>2&&!(h[2]instanceof P.Z))throw new H.aV(y,H.rH.InvalidParameter,A);return 2===h.length?(0,W.B9)(h[0],h[1]):(0,W.Es)(h[0],h[1],h[2])})},f.isselfintersecting=function(y,A){return C(y,A,(z,Z,h)=>{h=(0,E.G)(h),(0,E.y)(h,1,1,y,A);let T=h[0];if(T instanceof L.Z)return T.isSelfIntersecting;if(T instanceof N.Z)return T=T.paths,(0,W.nB)(T);if(T instanceof q.Z){const Q=T.points;for(let G=0;G<Q.length;G++)for(let re=0;re<Q.length;re++)if(re!==G){let de=!0;for(let he=0;he<Q[G].length;he++)if(Q[G][he]!==Q[re][he]){de=!1;break}if(!0===de)return!0}}return!(!(0,E.m)(T)&&!(0,E.x)(T))&&(T=(0,E.H)(T,y.spatialReference),null!==T&&(T=T.paths),(0,W.nB)(T))})}}let S=0;function g(f,C,y,A,z=1){let Z;switch(C=C.toLowerCase()){case"hasz":{const h=f.hasZ;return void 0!==h&&h}case"hasm":{const h=f.hasM;return void 0!==h&&h}case"spatialreference":{let h=f.spatialReference._arcadeCacheId;if(void 0===h){let Q=!0;Object.freeze&&Object.isFrozen(f.spatialReference)&&(Q=!1),Q&&(S++,f.spatialReference._arcadeCacheId=S,h=S)}const T=new K.Z({wkt:f.spatialReference.wkt,wkid:f.spatialReference.wkid});return void 0!==h&&(T._arcadeCacheId="SPREF"+h.toString()),T}}switch(f.type){case"extent":switch(C){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const h=f[C];return void 0!==h?h:null}case"type":return"Extent"}break;case"polygon":switch(C){case"rings":return Z=f.cache._arcadeCacheId,void 0===Z&&(S++,Z=S,f.cache._arcadeCacheId=Z),new te.Z(f.rings,f.spatialReference,!0===f.hasZ,!0===f.hasM,Z);case"type":return"Polygon"}break;case"point":switch(C){case"x":case"y":case"z":case"m":return void 0!==f[C]?f[C]:null;case"type":return"Point"}break;case"polyline":switch(C){case"paths":return Z=f.cache._arcadeCacheId,void 0===Z&&(S++,Z=S,f.cache._arcadeCacheId=Z),new te.Z(f.paths,f.spatialReference,!0===f.hasZ,!0===f.hasM,Z);case"type":return"Polyline"}break;case"multipoint":switch(C){case"points":return Z=f.cache._arcadeCacheId,void 0===Z&&(S++,Z=S,f.cache._arcadeCacheId=Z),new V.Z(f.points,f.spatialReference,!0===f.hasZ,!0===f.hasM,Z,1);case"type":return"Multipoint"}}if(1===z)throw new H.aV(y,H.rH.InvalidIdentifier,A);return 2===z?{keystate:"notfound"}:null}},63461:(Te,ge,j)=>{j.r(ge),j.d(ge,{registerFunctions:()=>S,setGeometryEngine:()=>k});var K=j(24263),_=j(27187),V=j(47562),E=j(85692),p=j(2004),Y=j(21674),q=j(72854),P=j(72642),L=j(37118),N=j(55214),W=j(91179),w=j(25919),H=j(16730);let te=null;function F(g){return 0===K.i8.indexOf("4.")?L.Z.fromExtent(g):new L.Z({spatialReference:g.spatialReference,rings:[[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]]})}function k(g){te=g}function v(g,f){if("polygon"!==g.type&&"polyline"!==g.type&&"extent"!==g.type)return 0;let C=1;(g.spatialReference.vcsWkid||g.spatialReference.latestVcsWkid)&&(C=(0,E._R)(g.spatialReference)/(0,H.c9)(g.spatialReference));let y=0;if("polyline"===g.type)for(const z of g.paths)for(let Z=1;Z<z.length;Z++)y+=(0,E.AW)(z[Z],z[Z-1],C);else if("polygon"===g.type)for(const z of g.rings){for(let Z=1;Z<z.length;Z++)y+=(0,E.AW)(z[Z],z[Z-1],C);(z[0][0]!==z[z.length-1][0]||z[0][1]!==z[z.length-1][1]||void 0!==z[0][2]&&z[0][2]!==z[z.length-1][2])&&(y+=(0,E.AW)(z[0],z[z.length-1],C))}else"extent"===g.type&&(y+=2*(0,E.AW)([g.xmin,g.ymin,0],[g.xmax,g.ymin,0],C),y+=2*(0,E.AW)([g.xmin,g.ymin,0],[g.xmin,g.ymax,0],C),y*=2,y+=4*Math.abs((0,V.A)(g.zmax,0)*C-(0,V.A)(g.zmin,0)*C));const A=new N.Z({hasZ:!1,hasM:!1,spatialReference:g.spatialReference,paths:[[0,0],[0,y]]});return te.planarLength(A,f)}function S(g,f){function C(y,A,z){if((0,V.y)(z,2,2,y,A),!(z[0]instanceof Y.Z&&z[1]instanceof Y.Z||z[0]instanceof Y.Z&&null===z[1]||z[1]instanceof Y.Z&&null===z[0]||null===z[0]&&null===z[1]))throw new w.aV(y,w.rH.InvalidParameter,A)}g.disjoint=function(y,A){return f(y,A,(z,Z,h)=>(h=(0,V.G)(h),C(y,A,h),null===h[0]||null===h[1]||te.disjoint(h[0],h[1])))},g.intersects=function(y,A){return f(y,A,(z,Z,h)=>(h=(0,V.G)(h),C(y,A,h),null!==h[0]&&null!==h[1]&&te.intersects(h[0],h[1])))},g.touches=function(y,A){return f(y,A,(z,Z,h)=>(h=(0,V.G)(h),C(y,A,h),null!==h[0]&&null!==h[1]&&te.touches(h[0],h[1])))},g.crosses=function(y,A){return f(y,A,(z,Z,h)=>(h=(0,V.G)(h),C(y,A,h),null!==h[0]&&null!==h[1]&&te.crosses(h[0],h[1])))},g.within=function(y,A){return f(y,A,(z,Z,h)=>(h=(0,V.G)(h),C(y,A,h),null!==h[0]&&null!==h[1]&&te.within(h[0],h[1])))},g.contains=function(y,A){return f(y,A,(z,Z,h)=>(h=(0,V.G)(h),C(y,A,h),null!==h[0]&&null!==h[1]&&te.contains(h[0],h[1])))},g.overlaps=function(y,A){return f(y,A,(z,Z,h)=>(h=(0,V.G)(h),C(y,A,h),null!==h[0]&&null!==h[1]&&te.overlaps(h[0],h[1])))},g.equals=function(y,A){return f(y,A,(z,Z,h)=>((0,V.y)(h,2,2,y,A),h[0]===h[1]||(h[0]instanceof Y.Z&&h[1]instanceof Y.Z?te.equals(h[0],h[1]):!(!(0,V.k)(h[0])||!(0,V.k)(h[1]))&&h[0].equals(h[1]))))},g.relate=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,3,3,y,A),h[0]instanceof Y.Z&&h[1]instanceof Y.Z)return te.relate(h[0],h[1],(0,V.j)(h[2]));if(h[0]instanceof Y.Z&&null===h[1]||h[1]instanceof Y.Z&&null===h[0]||null===h[0]&&null===h[1])return!1;throw new w.aV(y,w.rH.InvalidParameter,A)})},g.intersection=function(y,A){return f(y,A,(z,Z,h)=>(h=(0,V.G)(h),C(y,A,h),null===h[0]||null===h[1]?null:te.intersect(h[0],h[1])))},g.union=function(y,A){return f(y,A,(z,Z,h)=>{const T=[];if(0===(h=(0,V.G)(h)).length)throw new w.aV(y,w.rH.WrongNumberOfParameters,A);if(1===h.length)if((0,V.m)(h[0])){const Q=(0,V.G)(h[0]);for(let G=0;G<Q.length;G++)if(null!==Q[G]){if(!(Q[G]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);T.push(Q[G])}}else{if(!(0,V.x)(h[0])){if(h[0]instanceof Y.Z)return(0,V.q)((0,_.r1)(h[0]),y.spatialReference);if(null===h[0])return null;throw new w.aV(y,w.rH.InvalidParameter,A)}{const Q=(0,V.G)(h[0].toArray());for(let G=0;G<Q.length;G++)if(null!==Q[G]){if(!(Q[G]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);T.push(Q[G])}}}else for(let Q=0;Q<h.length;Q++)if(null!==h[Q]){if(!(h[Q]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);T.push(h[Q])}return 0===T.length?null:te.union(T)})},g.difference=function(y,A){return f(y,A,(z,Z,h)=>(h=(0,V.G)(h),C(y,A,h),null!==h[0]&&null===h[1]?(0,_.r1)(h[0]):null===h[0]?null:te.difference(h[0],h[1])))},g.symmetricdifference=function(y,A){return f(y,A,(z,Z,h)=>(h=(0,V.G)(h),C(y,A,h),null===h[0]&&null===h[1]?null:null===h[0]?(0,_.r1)(h[1]):null===h[1]?(0,_.r1)(h[0]):te.symmetricDifference(h[0],h[1])))},g.clip=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,2,y,A),!(h[1]instanceof p.Z)&&null!==h[1])throw new w.aV(y,w.rH.InvalidParameter,A);if(null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return null===h[1]?null:te.clip(h[0],h[1])})},g.cut=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,2,y,A),!(h[1]instanceof N.Z)&&null!==h[1])throw new w.aV(y,w.rH.InvalidParameter,A);if(null===h[0])return[];if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return null===h[1]?[(0,_.r1)(h[0])]:te.cut(h[0],h[1])})},g.area=function(y,A){return f(y,A,(z,Z,h)=>{if((0,V.y)(h,1,2,y,A),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const T=(0,V.J)(h[0],y.spatialReference);return null===T?0:te.planarArea(T,(0,_.EI)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return te.planarArea(h[0],(0,_.EI)((0,V.A)(h[1],-1)))})},g.areageodetic=function(y,A){return f(y,A,(z,Z,h)=>{if((0,V.y)(h,1,2,y,A),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const T=(0,V.J)(h[0],y.spatialReference);return null===T?0:te.geodesicArea(T,(0,_.EI)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return te.geodesicArea(h[0],(0,_.EI)((0,V.A)(h[1],-1)))})},g.length=function(y,A){return f(y,A,(z,Z,h)=>{if((0,V.y)(h,1,2,y,A),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const T=(0,V.H)(h[0],y.spatialReference);return null===T?0:te.planarLength(T,(0,_.Lz)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return te.planarLength(h[0],(0,_.Lz)((0,V.A)(h[1],-1)))})},g.length3d=function(y,A){return f(y,A,(z,Z,h)=>{if((0,V.y)(h,1,2,y,A),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const T=(0,V.H)(h[0],y.spatialReference);return null===T?0:!0===T.hasZ?v(T,(0,_.Lz)((0,V.A)(h[1],-1))):te.planarLength(T,(0,_.Lz)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return!0===h[0].hasZ?v(h[0],(0,_.Lz)((0,V.A)(h[1],-1))):te.planarLength(h[0],(0,_.Lz)((0,V.A)(h[1],-1)))})},g.lengthgeodetic=function(y,A){return f(y,A,(z,Z,h)=>{if((0,V.y)(h,1,2,y,A),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const T=(0,V.H)(h[0],y.spatialReference);return null===T?0:te.geodesicLength(T,(0,_.Lz)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return te.geodesicLength(h[0],(0,_.Lz)((0,V.A)(h[1],-1)))})},g.distance=function(y,A){return f(y,A,(z,Z,h)=>{h=(0,V.G)(h),(0,V.y)(h,2,3,y,A);let T=h[0];((0,V.m)(h[0])||(0,V.x)(h[0]))&&(T=(0,V.K)(h[0],y.spatialReference));let Q=h[1];if(((0,V.m)(h[1])||(0,V.x)(h[1]))&&(Q=(0,V.K)(h[1],y.spatialReference)),!(T instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);if(!(Q instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return te.distance(T,Q,(0,_.Lz)((0,V.A)(h[2],-1)))})},g.distancegeodetic=function(y,A){return f(y,A,(z,Z,h)=>{h=(0,V.G)(h),(0,V.y)(h,2,3,y,A);const T=h[0],Q=h[1];if(!(T instanceof P.Z))throw new w.aV(y,w.rH.InvalidParameter,A);if(!(Q instanceof P.Z))throw new w.aV(y,w.rH.InvalidParameter,A);const G=new N.Z({paths:[],spatialReference:T.spatialReference});return G.addPath([T,Q]),te.geodesicLength(G,(0,_.Lz)((0,V.A)(h[2],-1)))})},g.densify=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,y,A),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);const T=(0,V.g)(h[1]);if(isNaN(T))throw new w.aV(y,w.rH.InvalidParameter,A);if(T<=0)throw new w.aV(y,w.rH.InvalidParameter,A);return h[0]instanceof L.Z||h[0]instanceof N.Z?te.densify(h[0],T,(0,_.Lz)((0,V.A)(h[2],-1))):h[0]instanceof p.Z?te.densify(F(h[0]),T,(0,_.Lz)((0,V.A)(h[2],-1))):h[0]})},g.densifygeodetic=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,y,A),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);const T=(0,V.g)(h[1]);if(isNaN(T))throw new w.aV(y,w.rH.InvalidParameter,A);if(T<=0)throw new w.aV(y,w.rH.InvalidParameter,A);return h[0]instanceof L.Z||h[0]instanceof N.Z?te.geodesicDensify(h[0],T,(0,_.Lz)((0,V.A)(h[2],-1))):h[0]instanceof p.Z?te.geodesicDensify(F(h[0]),T,(0,_.Lz)((0,V.A)(h[2],-1))):h[0]})},g.generalize=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,4,y,A),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);const T=(0,V.g)(h[1]);if(isNaN(T))throw new w.aV(y,w.rH.InvalidParameter,A);return te.generalize(h[0],T,(0,V.h)((0,V.A)(h[2],!0)),(0,_.Lz)((0,V.A)(h[3],-1)))})},g.buffer=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,y,A),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);const T=(0,V.g)(h[1]);if(isNaN(T))throw new w.aV(y,w.rH.InvalidParameter,A);return 0===T?(0,_.r1)(h[0]):te.buffer(h[0],T,(0,_.Lz)((0,V.A)(h[2],-1)))})},g.buffergeodetic=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,y,A),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);const T=(0,V.g)(h[1]);if(isNaN(T))throw new w.aV(y,w.rH.InvalidParameter,A);return 0===T?(0,_.r1)(h[0]):te.geodesicBuffer(h[0],T,(0,_.Lz)((0,V.A)(h[2],-1)))})},g.offset=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,6,y,A),null===h[0])return null;if(!(h[0]instanceof L.Z||h[0]instanceof N.Z))throw new w.aV(y,w.rH.InvalidParameter,A);const T=(0,V.g)(h[1]);if(isNaN(T))throw new w.aV(y,w.rH.InvalidParameter,A);const Q=(0,V.g)((0,V.A)(h[4],10));if(isNaN(Q))throw new w.aV(y,w.rH.InvalidParameter,A);const G=(0,V.g)((0,V.A)(h[5],0));if(isNaN(G))throw new w.aV(y,w.rH.InvalidParameter,A);return te.offset(h[0],T,(0,_.Lz)((0,V.A)(h[2],-1)),(0,V.j)((0,V.A)(h[3],"round")).toLowerCase(),Q,G)})},g.rotate=function(y,A){return f(y,A,(z,Z,h)=>{h=(0,V.G)(h),(0,V.y)(h,2,3,y,A);let T=h[0];if(null===T)return null;if(!(T instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);T instanceof p.Z&&(T=L.Z.fromExtent(T));const Q=(0,V.g)(h[1]);if(isNaN(Q))throw new w.aV(y,w.rH.InvalidParameter,A);const G=(0,V.A)(h[2],null);if(null===G)return te.rotate(T,Q);if(G instanceof P.Z)return te.rotate(T,Q,G);throw new w.aV(y,w.rH.InvalidParameter,A)})},g.centroid=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,y,A),null===h[0])return null;let T=h[0];if(((0,V.m)(h[0])||(0,V.x)(h[0]))&&(T=(0,V.K)(h[0],y.spatialReference)),null===T)return null;if(!(T instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return T instanceof P.Z?(0,V.q)((0,_.r1)(h[0]),y.spatialReference):T instanceof L.Z?T.centroid:T instanceof N.Z?(0,E.s9)(T):T instanceof q.Z?(0,E.Ay)(T):T instanceof p.Z?T.center:null})},g.multiparttosinglepart=function(y,A){return f(y,A,(z,Z,h)=>{h=(0,V.G)(h),(0,V.y)(h,1,1,y,A);const T=[];if(null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);if(h[0]instanceof P.Z)return[(0,V.q)((0,_.r1)(h[0]),y.spatialReference)];if(h[0]instanceof p.Z)return[(0,V.q)((0,_.r1)(h[0]),y.spatialReference)];const Q=te.simplify(h[0]);if(Q instanceof L.Z){const G=[],re=[];for(let de=0;de<Q.rings.length;de++)if(Q.isClockwise(Q.rings[de])){const he=(0,W.im)({rings:[Q.rings[de]],hasZ:!0===Q.hasZ,hasM:!0===Q.hasM,spatialReference:Q.spatialReference.toJSON()});G.push(he)}else re.push({ring:Q.rings[de],pt:Q.getPoint(de,0)});for(let de=0;de<re.length;de++)for(let he=0;he<G.length;he++)if(G[he].contains(re[de].pt)){G[he].addRing(re[de].ring);break}return G}if(Q instanceof N.Z){const G=[];for(let re=0;re<Q.paths.length;re++){const de=(0,W.im)({paths:[Q.paths[re]],hasZ:!0===Q.hasZ,hasM:!0===Q.hasM,spatialReference:Q.spatialReference.toJSON()});G.push(de)}return G}if(h[0]instanceof q.Z){const G=(0,V.q)((0,_.r1)(h[0]),y.spatialReference);for(let re=0;re<G.points.length;re++)T.push(G.getPoint(re));return T}return null})},g.issimple=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,y,A),null===h[0])return!0;if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return te.isSimple(h[0])})},g.simplify=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,y,A),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return te.simplify(h[0])})},g.convexhull=function(y,A){return f(y,A,(z,Z,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,y,A),null===h[0])return null;if(!(h[0]instanceof Y.Z))throw new w.aV(y,w.rH.InvalidParameter,A);return te.convexHull(h[0])})}}},46668:(Te,ge,j)=>{j.d(ge,{a:()=>q});const K=2654435761,_=2246822519,V=3266489917,E=668265263,p=374761393;function Y(P){const L=[];for(let N=0,W=P.length;N<W;N++){let w=P.charCodeAt(N);w<128?L.push(w):w<2048?L.push(192|w>>6,128|63&w):w<55296||w>=57344?L.push(224|w>>12,128|w>>6&63,128|63&w):(N++,w=65536+((1023&w)<<10|1023&P.charCodeAt(N)),L.push(240|w>>18,128|w>>12&63,128|w>>6&63,128|63&w))}return new Uint8Array(L)}class q{constructor(L){this._seed=L,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(L){const N=[];for(const W of L)isNaN(W)?N.push("NaN"):N.push(W===1/0?"Infinity":W===-1/0?"-Infinity":0===W?"0":W.toString(16));this.update(Y(N.join("")))}updateIntArray(L){const N=Int32Array.from(L);this.update(new Uint8Array(N.buffer))}updateUint8Array(L){this.update(Uint8Array.from(L))}updateWithString(L){return this.update(Y(L))}update(L){return this._bufs.push(L),this._totallen+=L.length,this}digest(){const L=new Uint8Array(this._totallen);let N=0;for(const W of this._bufs)L.set(W,N),N+=W.length;return this.init(),this._xxHash32(L,this._seed)}_xxHash32(L,N=0){const W=L;let w=N+p&4294967295,H=0;if(W.length>=16){const F=[N+K+_&4294967295,N+_&4294967295,N+0&4294967295,N-K&4294967295],k=L,v=k.length-16;let S=0;for(H=0;(4294967280&H)<=v;H+=4){let A=F[S]+((k[H+0]+(k[H+1]<<8))*_+((k[H+2]+(k[H+3]<<8))*_<<16))&4294967295;A=A<<13|A>>>19,F[S]=(65535&A)*K+((A>>>16)*K<<16)&4294967295,S=S+1&3}w=(F[0]<<1|F[0]>>>31)+(F[1]<<7|F[1]>>>25)+(F[2]<<12|F[2]>>>20)+(F[3]<<18|F[3]>>>14)&4294967295}w=w+L.length&4294967295;const te=L.length-4;for(;H<=te;H+=4)w=w+((W[H+0]+(W[H+1]<<8))*V+((W[H+2]+(W[H+3]<<8))*V<<16))&4294967295,w=w<<17|w>>>15,w=(65535&w)*E+((w>>>16)*E<<16)&4294967295;for(;H<W.length;++H)w+=W[H]*p,w=w<<11|w>>>21,w=(65535&w)*K+((w>>>16)*K<<16)&4294967295;return w^=w>>>15,w=((65535&w)*_&4294967295)+((w>>>16)*_<<16),w^=w>>>13,w=((65535&w)*V&4294967295)+((w>>>16)*V<<16),w^=w>>>16,w<0?w+4294967296:w}}},53840:(Te,ge,j)=>{j.d(ge,{r:()=>E});var K=j(47562),_=j(75327);function V(p,Y,q){return void 0===q||0==+q?Math[p](Y):(Y=+Y,q=+q,isNaN(Y)||"number"!=typeof q||q%1!=0?NaN:(Y=Y.toString().split("e"),+((Y=(Y=Math[p](+(Y[0]+"e"+(Y[1]?+Y[1]-q:-q)))).toString().split("e"))[0]+"e"+(Y[1]?+Y[1]+q:q))))}function E(p,Y){function q(P,L,N){const W=(0,K.g)(P);return isNaN(W)?W:isNaN(L)||isNaN(N)||L>N?NaN:W<L?L:W>N?N:W}p.number=function(P,L){return Y(P,L,(N,W,w)=>{(0,K.y)(w,1,2,P,L);const H=w[0];if((0,K.b)(H))return H;if(null===H)return 0;if((0,K.k)(H))return H.toNumber();if((0,K.a)(H))return Number(H);if((0,K.m)(H))return NaN;if(""===H||void 0===H)return Number(H);if((0,K.c)(H)){if(void 0!==w[1]){let te=(0,K.L)(w[1],"\u2030","");return te=(0,K.L)(te,"\xa4",""),(0,_.Qc)(H,{pattern:te})}return Number(H.trim())}return Number(H)})},p.abs=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),Math.abs((0,K.g)(w[0]))))},p.acos=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),Math.acos((0,K.g)(w[0]))))},p.asin=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),Math.asin((0,K.g)(w[0]))))},p.atan=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),Math.atan((0,K.g)(w[0]))))},p.atan2=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,2,2,P,L),Math.atan2((0,K.g)(w[0]),(0,K.g)(w[1]))))},p.ceil=function(P,L){return Y(P,L,(N,W,w)=>{if((0,K.y)(w,1,2,P,L),2===w.length){let H=(0,K.g)(w[1]);return isNaN(H)&&(H=0),V("ceil",(0,K.g)(w[0]),-1*H)}return Math.ceil((0,K.g)(w[0]))})},p.round=function(P,L){return Y(P,L,(N,W,w)=>{if((0,K.y)(w,1,2,P,L),2===w.length){let H=(0,K.g)(w[1]);return isNaN(H)&&(H=0),V("round",(0,K.g)(w[0]),-1*H)}return Math.round((0,K.g)(w[0]))})},p.floor=function(P,L){return Y(P,L,(N,W,w)=>{if((0,K.y)(w,1,2,P,L),2===w.length){let H=(0,K.g)(w[1]);return isNaN(H)&&(H=0),V("floor",(0,K.g)(w[0]),-1*H)}return Math.floor((0,K.g)(w[0]))})},p.cos=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),Math.cos((0,K.g)(w[0]))))},p.isnan=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),"number"==typeof w[0]&&isNaN(w[0])))},p.exp=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),Math.exp((0,K.g)(w[0]))))},p.log=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),Math.log((0,K.g)(w[0]))))},p.pow=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,2,2,P,L),(0,K.g)(w[0])**(0,K.g)(w[1])))},p.random=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,0,0,P,L),Math.random()))},p.sin=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),Math.sin((0,K.g)(w[0]))))},p.sqrt=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),Math.sqrt((0,K.g)(w[0]))))},p.tan=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),Math.tan((0,K.g)(w[0]))))},p.defaultvalue=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,2,2,P,L),null===w[0]||""===w[0]||void 0===w[0]?w[1]:w[0]))},p.isempty=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),null===w[0]||""===w[0]||void 0===w[0]))},p.boolean=function(P,L){return Y(P,L,(N,W,w)=>((0,K.y)(w,1,1,P,L),(0,K.h)(w[0])))},p.constrain=function(P,L){return Y(P,L,(N,W,w)=>{(0,K.y)(w,3,3,P,L);const H=(0,K.g)(w[1]),te=(0,K.g)(w[2]);if((0,K.m)(w[0])){const F=[];for(const k of w[0])F.push(q(k,H,te));return F}if((0,K.x)(w[0])){const F=[];for(let k=0;k<w[0].length();k++)F.push(q(w[0].get(k),H,te));return F}return q(w[0],H,te)})}}},97536:(Te,ge,j)=>{j.d(ge,{r:()=>p});var K=j(25919),_=j(47562),V=j(50818);function E(Y,q,P,L){if(1===L.length){if((0,_.m)(L[0]))return(0,V.t)(Y,L[0],-1);if((0,_.x)(L[0]))return(0,V.t)(Y,L[0].toArray(),-1)}return(0,V.t)(Y,L,-1)}function p(Y,q){Y.stdev=function(P,L){return q(P,L,(N,W,w)=>E("stdev",0,0,w))},Y.variance=function(P,L){return q(P,L,(N,W,w)=>E("variance",0,0,w))},Y.average=function(P,L){return q(P,L,(N,W,w)=>E("mean",0,0,w))},Y.mean=function(P,L){return q(P,L,(N,W,w)=>E("mean",0,0,w))},Y.sum=function(P,L){return q(P,L,(N,W,w)=>E("sum",0,0,w))},Y.min=function(P,L){return q(P,L,(N,W,w)=>E("min",0,0,w))},Y.max=function(P,L){return q(P,L,(N,W,w)=>E("max",0,0,w))},Y.distinct=function(P,L){return q(P,L,(N,W,w)=>E("distinct",0,0,w))},Y.count=function(P,L){return q(P,L,(N,W,w)=>{if((0,_.y)(w,1,1,P,L),(0,_.m)(w[0])||(0,_.c)(w[0]))return w[0].length;if((0,_.x)(w[0]))return w[0].length();throw new K.aV(P,K.rH.InvalidParameter,L)})}}},32576:(Te,ge,j)=>{j.d(ge,{r:()=>rt});var K=j(37780),_=j(22386),V=j(6729),E=j(25919),p=j(47562),Y=j(77132),q=j(62208);const P=B=>(b,I,U)=>(U=U||14,+B(b,I).toFixed(U)),L=(B,b)=>B+b,W=(B,b)=>B*b,w=(B,b)=>B/b,H=(B,b,I)=>P(L)(B,b,I),F=(B,b,I)=>P(W)(B,b,I),k=(B,b,I)=>P(w)(B,b,I),v=360,S=400,g=2*Math.PI,f=3600,C=3240,y=60,A=60,z=180*f/Math.PI,Z=v*y*A,h=90*f,T=180*f,Q=270*f,G=String.fromCharCode(7501),re="\xb0";function de(B){if(!1===(0,p.c)(B))throw new E.aV(null,E.rH.InvalidParameter,null);return B}function he(B,b){const I=10**b;return Math.round(B*I)/I}function Ae(B){const b=parseFloat(B.toString().replace(Math.trunc(B).toString(),"0"))*Math.sign(B);return B<0?{fraction:b,integer:Math.ceil(B)}:{fraction:b,integer:Math.floor(B)}}var pe,ne,ye,ve,B;function Ie(B,b){switch(B){case pe.north:return"SHORT"===b?"N":"North";case pe.east:return"SHORT"===b?"E":"East";case pe.south:return"SHORT"===b?"S":"South";case pe.west:return"SHORT"===b?"W":"West"}}function Qe(B,b,I){for(;B.length<I;)B=b+B;return B}function Xe(B,b){return B-Math.floor(B/b)*b}function Ze(B){switch(B){case ne.truncated_degrees:case ne.decimal_degrees:return v;case ne.radians:return g;case ne.gradians:return S;case ne.seconds:return Z;case ne.fractional_degree_minutes:return y;case ne.fractional_minute_seconds:return A;default:throw new E.aV(null,E.rH.LogicError,null,{reason:"unsupported evaluations"})}}function Me(B){switch(B.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return ye.north_azimuth;case"POLAR":return ye.polar;case"QUADRANT":return ye.quadrant;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return ye.south_azimuth}throw new E.aV(null,E.rH.LogicError,null,{reason:"unsupported directionType"})}function ht(B){switch(B.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return ne.decimal_degrees;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return ne.degrees_minutes_seconds;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return ne.radians;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return ne.gradians}throw new E.aV(null,E.rH.LogicError,null,{reason:"unsupported units"})}(B=pe||(pe={}))[B.north=0]="north",B[B.east=1]="east",B[B.south=2]="south",B[B.west=3]="west",function(B){B[B.decimal_degrees=1]="decimal_degrees",B[B.seconds=2]="seconds",B[B.degrees_minutes_seconds=3]="degrees_minutes_seconds",B[B.radians=4]="radians",B[B.gradians=5]="gradians",B[B.truncated_degrees=6]="truncated_degrees",B[B.fractional_degree_minutes=7]="fractional_degree_minutes",B[B.fractional_minute_seconds=8]="fractional_minute_seconds"}(ne||(ne={})),function(B){B[B.north_azimuth=1]="north_azimuth",B[B.polar=2]="polar",B[B.quadrant=3]="quadrant",B[B.south_azimuth=4]="south_azimuth"}(ye||(ye={})),function(B){B[B.meridian=0]="meridian",B[B.direction=1]="direction"}(ve||(ve={}));class Ge{constructor(b,I,U){this.m_degrees=b,this.m_minutes=I,this.m_seconds=U}getField(b){switch(b){case ne.decimal_degrees:case ne.truncated_degrees:return this.m_degrees;case ne.fractional_degree_minutes:return this.m_minutes;case ne.seconds:case ne.fractional_minute_seconds:return this.m_seconds;default:throw new E.aV(null,E.rH.LogicError,null,{reason:"unexpected evaluation"})}}static secondsToDMS(b){const I=Ae(b).fraction;let U=Ae(b).integer;const J=Math.floor(U/f);U-=J*f;const oe=Math.floor(U/A);return U-=oe*A,new Ge(J,oe,U+I)}static numberToDms(b){const I=Ae(b).fraction,U=Ae(b).integer,J=F(Ae(100*I).fraction,100),oe=Ae(100*I).integer;return new Ge(U,oe,J)}format(b,I){let U=he(this.m_seconds,I),J=this.m_minutes,oe=this.m_degrees;if(b===ne.seconds||b===ne.fractional_minute_seconds)A<=U&&(U-=A,++J),y<=J&&(J=0,++oe),v<=oe&&(oe=0);else if(b===ne.fractional_degree_minutes)U=0,J=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,oe=this.m_degrees,y<=J&&(J=0,++oe),v<=oe&&(oe=0);else if(b===ne.decimal_degrees||b===ne.truncated_degrees){const R=k(this.m_seconds,f),ee=k(this.m_minutes,y);oe=Math.round(this.m_degrees+ee+R),J=0,U=0}return new Ge(oe,J,U)}static dmsToSeconds(b,I,U){return b*f+I*A+U}}class At{constructor(b,I,U){this.meridian=b,this.angle=I,this.direction=U}fetchAzimuth(b){return b===ve.meridian?this.meridian:this.direction}}class Oe{constructor(b){this._angle=b}static createFromAngleAndDirection(b,I){return new Oe(new Ne(Oe._convertDirectionFormat(b.extractAngularUnits(ne.seconds),I,ye.north_azimuth)))}getAngle(b){const I=this._angle.extractAngularUnits(ne.seconds);switch(b){case ye.north_azimuth:case ye.south_azimuth:case ye.polar:return new Ne(Oe._convertDirectionFormat(I,ye.north_azimuth,b));case ye.quadrant:{const U=Oe.secondsNorthAzimuthToQuadrant(I);return new Ne(U.angle)}}}getMeridian(b){const I=this._angle.extractAngularUnits(ne.seconds);switch(b){case ye.north_azimuth:return pe.north;case ye.south_azimuth:return pe.south;case ye.polar:return pe.east;case ye.quadrant:return Oe.secondsNorthAzimuthToQuadrant(I).meridian}}getDirection(b){const I=this._angle.extractAngularUnits(ne.seconds);switch(b){case ye.north_azimuth:return pe.east;case ye.south_azimuth:return pe.west;case ye.polar:return pe.north;case ye.quadrant:return Oe.secondsNorthAzimuthToQuadrant(I).direction}}static secondsNorthAzimuthToQuadrant(b){const I=b<=h||b>=Q?pe.north:pe.south,U=I===pe.north?Math.min(Z-b,b):Math.abs(b-T);return new At(I,U,b>T?pe.west:pe.east)}static createFromAngleMeridianAndDirection(b,I,U){return new Oe(new Ne(Oe.secondsQuadrantToNorthAzimuth(b.extractAngularUnits(ne.seconds),I,U)))}static secondsQuadrantToNorthAzimuth(b,I,U){return I===pe.north?U===pe.east?b:Z-b:U===pe.east?T-b:T+b}static _convertDirectionFormat(b,I,U){let J=0;switch(I){case ye.north_azimuth:J=b;break;case ye.polar:J=h-b;break;case ye.quadrant:throw new E.aV(null,E.rH.LogicError,null,{reason:"unexpected evaluation"});case ye.south_azimuth:J=b+T}let oe=0;switch(U){case ye.north_azimuth:oe=J;break;case ye.polar:oe=h-J;break;case ye.quadrant:throw new E.aV(null,E.rH.LogicError,null,{reason:"unexpected evaluation"});case ye.south_azimuth:oe=J-T}return oe=function Be(B,b){return B%b}(oe,Z),oe<0?Z+oe:oe}}function pt(B,b,I){let U=null;switch(b){case ne.decimal_degrees:U=F(B,f);break;case ne.seconds:U=B;break;case ne.gradians:U=F(B,C);break;case ne.radians:U=F(B,z);break;default:throw new E.aV(null,E.rH.LogicError,null,{reason:"unexpected evaluation"})}switch(I){case ne.decimal_degrees:return k(U,f);case ne.seconds:return U;case ne.gradians:return k(U,C);case ne.radians:return U/z;default:throw new E.aV(null,E.rH.LogicError,null,{reason:"unexpected evaluation"})}}class Ne{constructor(b){this._seconds=b}static createFromAngleAndUnits(b,I){return new Ne(pt(b,I,ne.seconds))}extractAngularUnits(b){return pt(this._seconds,ne.seconds,qe(b))}static createFromDegreesMinutesSeconds(b,I,U){return new Ne(H(H(F(b,f),F(I,A)),U))}}function qe(B){switch((0,q.O3)(B),B){case ne.decimal_degrees:case ne.truncated_degrees:case ne.degrees_minutes_seconds:return ne.decimal_degrees;case ne.gradians:return ne.gradians;case ne.fractional_degree_minutes:return ne.fractional_degree_minutes;case ne.radians:return ne.radians;case ne.seconds:case ne.fractional_minute_seconds:return ne.seconds}}class lt{constructor(b,I,U,J){this.view=b,this.angle=I,this.merdian=U,this.direction=J,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(b,I,U){return new lt(b,I.getAngle(U),I.getMeridian(U),I.getDirection(U))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return null===this._dms&&this._calculateDms(),this._dms}fetchFormattedDms(){return null===this._formattedDms&&this._calculateDms(),this._formattedDms}_calculateDms(){let b=null,I=ne.truncated_degrees,U=0;for(let J=0;J<this.view.length;J++){const oe=this.view[J];switch(oe){case"m":b=Ye(this.view,J,oe),I=I===ne.truncated_degrees?ne.fractional_degree_minutes:I,J=b.newpos;continue;case"s":b=Ye(this.view,J,oe),I=ne.fractional_minute_seconds,U=U<b.rounding?b.rounding:U,J=b.newpos;continue;default:continue}}this._dms=Ge.secondsToDMS(this.angle.extractAngularUnits(ne.seconds)),this._formattedDms=Ge.secondsToDMS(this.angle.extractAngularUnits(ne.seconds)).format(I,U)}}function Fe(B,b,I,U,J){let oe=null;switch(b){case ne.decimal_degrees:case ne.radians:case ne.gradians:return oe=Xe(he(B.extractAngularUnits(b),U),Ze(b)),Qe(oe.toFixed(U),"0",I+U+(U>0?1:0));case ne.truncated_degrees:case ne.fractional_degree_minutes:return oe=Xe(J.fetchFormattedDms().getField(b),Ze(b)),Qe(oe.toFixed(U),"0",I+U+(U>0?1:0));case ne.fractional_minute_seconds:return oe=Xe(he(J.fetchDms().getField(b),U),Ze(b)),Qe(oe.toFixed(U),"0",I+U+(U>0?1:0));default:throw new E.aV(null,E.rH.LogicError,null,{reason:"unexpected evaluation"})}}function Re(B){switch(B.toUpperCase().trim()){case"N":case"NORTH":return pe.north;case"E":case"EAST":return pe.east;case"S":case"SOUTH":return pe.south;case"W":case"WEST":return pe.west}return null}function Le(B){const b=parseFloat(B);if((0,p.b)(b)){if(isNaN(b))throw new E.aV(null,E.rH.LogicError,null,{reason:"invalid conversion"});return b}throw new E.aV(null,E.rH.LogicError,null,{reason:"invalid conversion"})}function je(B,b,I){const U=I===ye.quadrant;let J=null,oe=null,R=0,ee=0,se=0;if(U){if(B.length<2)throw new E.aV(null,E.rH.LogicError,null,{reason:"conversion error"});se=1;const me=function Pe(B){switch((0,p.g)(B)){case 1:return{first:pe.north,second:pe.east};case 2:return{first:pe.south,second:pe.east};case 3:return{first:pe.south,second:pe.west};case 4:return{first:pe.north,second:pe.west}}return null}((0,p.j)(B[B.length-1]));if(me?(J=me.first,oe=me.second):(R=1,J=Re((0,p.j)(B[0])),oe=Re((0,p.j)(B[B.length-1]))),null===J||null===oe)throw new E.aV(null,E.rH.LogicError,null,{reason:"invalid conversion"})}switch(b){case ne.decimal_degrees:case ne.radians:case ne.gradians:if(0===B.length)throw new E.aV(null,E.rH.LogicError,null,{reason:"invalid conversion"});return U?Oe.createFromAngleMeridianAndDirection(Ne.createFromAngleAndUnits(Le(B[R]),qe(b)),J,oe):Oe.createFromAngleAndDirection(Ne.createFromAngleAndUnits(Le(B[R]),qe(b)),I);case ne.degrees_minutes_seconds:if(ee=B.length-se-R,3===ee){const me=Ne.createFromDegreesMinutesSeconds(Le(B[R]),Le(B[R+1]),Le(B[R+2]));return U?Oe.createFromAngleMeridianAndDirection(me,J,oe):Oe.createFromAngleAndDirection(me,I)}if(1===ee){const me=Le(B[R]),He=Ge.numberToDms(me),D=Ne.createFromDegreesMinutesSeconds(He.m_degrees,He.m_minutes,He.m_seconds);return U?Oe.createFromAngleMeridianAndDirection(D,J,oe):Oe.createFromAngleAndDirection(D,I)}}throw new E.aV(null,E.rH.LogicError,null,{reason:"invalid conversion"})}function Ye(B,b,I){const U={padding:0,rounding:0,newpos:b};let J=!1;for(;b<B.length;){const oe=B[b];if(oe===I)J?U.rounding++:U.padding++,b++;else{if("."!==oe)break;J=!0,b++}}return U.newpos=b-1,U}function It(B,b,I){const U={escaped:"",newpos:b};for(b++;b<B.length;){const J=B[b];if(b++,"]"===J)break;U.escaped+=J}return U.newpos=b-1,U}function ct(B,b,I){if(!(b instanceof V.Z))throw new E.aV(null,E.rH.InvalidParameter,null);if(!1===b.hasField("directionType"))throw new E.aV(null,E.rH.LogicError,null,{reason:"missing directionType"});if(!1===b.hasField("angleType"))throw new E.aV(null,E.rH.LogicError,null,{reason:"missing angleType"});const U=Me(de(b.field("directiontype"))),J=function be(B,b,I){if((0,p.b)(B))return function Et(B,b,I){if(I===ye.quadrant)throw new E.aV(null,E.rH.LogicError,null,{reason:"conversion error"});if(b===ne.degrees_minutes_seconds){const U=Ge.numberToDms(B);return Oe.createFromAngleAndDirection(Ne.createFromDegreesMinutesSeconds(U.m_degrees,U.m_minutes,U.m_seconds),I)}return Oe.createFromAngleAndDirection(Ne.createFromAngleAndUnits(B,qe(b)),I)}((0,p.g)(B),b,I);if((0,p.c)(B))return je(function at(B){const b=[" ","-","/","'",'"',"\\","^",re,G,"\t","\r","\n","*"];let I="";for(let U=0;U<B.length;U++){const J=B.charAt(U);b.includes(J)?I+="RRSPLITRRSPLITRR":I+=J}return I.split("RRSPLITRRSPLITRR").filter(U=>""!==U)}(B),b,I);if((0,p.m)(B))return je(B,b,I);if((0,p.x)(B))return je(B.toArray(),b,I);throw new E.aV(null,E.rH.LogicError,null,{reason:"conversion error"})}(B,ht(de(b.field("angletype"))),U);if(!(I instanceof V.Z))throw new E.aV(null,E.rH.InvalidParameter,null);if(!1===I.hasField("directionType"))throw new E.aV(null,E.rH.LogicError,null,{reason:"missing directionType"});if(!1===I.hasField("outputType"))throw new E.aV(null,E.rH.LogicError,null,{reason:"missing angleType"});const oe=Me(de(I.field("directiontype"))),R=I.hasField("angleType")?ht(de(I.field("angletype"))):null,ee=de(I.field("outputType")).toUpperCase().trim();if(!oe||!ee)throw new E.aV(null,E.rH.LogicError,null,{reason:"conversion error"});if(!(R||"TEXT"===ee&&I.hasField("format")))throw new E.aV(null,E.rH.LogicError,null,{reason:"invalid unit"});switch(ee){case"VALUE":return oe===ye.quadrant||R===ne.degrees_minutes_seconds?function Ct(B,b,I){const U=B.getAngle(b);if(b===ye.quadrant&&I===ne.degrees_minutes_seconds){const J=Ge.secondsToDMS(U.extractAngularUnits(ne.seconds));return[Ie(B.getMeridian(b),"SHORT"),J.m_degrees,J.m_minutes,J.m_seconds,Ie(B.getDirection(b),"SHORT")]}if(I===ne.degrees_minutes_seconds){const J=Ge.secondsToDMS(U.extractAngularUnits(ne.seconds));return[J.m_degrees,J.m_minutes,J.m_seconds]}return b===ye.quadrant?[Ie(B.getMeridian(b),"SHORT"),U.extractAngularUnits(I),Ie(B.getDirection(b),"SHORT")]:[U.extractAngularUnits(I)]}(J,oe,R):function Dt(B,b,I){const U=qe(I);if(U&&I!==ne.degrees_minutes_seconds)return B.getAngle(b).extractAngularUnits(U);throw new E.aV(null,E.rH.LogicError,null,{reason:"conversion error"})}(J,oe,R);case"TEXT":{let se="";return I.hasField("format")&&(se=(0,p.j)(I.field("format"))),null!==se&&""!==se||(se=function bt(B,b){let I="";switch(B){case ne.decimal_degrees:I=b===ye.quadrant?"DD.DD"+re:"DDD.DD"+re;break;case ne.degrees_minutes_seconds:I=b===ye.quadrant?"dd"+re+" mm' ss\"":"ddd"+re+" mm' ss.ss\"";break;case ne.radians:I="R.RR";break;case ne.gradians:I="GGG.GG"+G;break;default:throw new E.aV(null,E.rH.LogicError,null,{reason:"conversion error"})}return b===ye.quadrant&&(I="p "+I+" b"),I}(R,oe)),function gt(B,b,I){let U="",J=null,oe=null;const R=lt.createFromStringAndBearing(b,B,I),ee={D:ne.decimal_degrees,d:ne.truncated_degrees,m:ne.fractional_degree_minutes,s:ne.fractional_minute_seconds,R:ne.radians,G:ne.gradians};for(let se=0;se<b.length;se++){const me=b[se];switch(me){case"[":J=It(b,se),U+=J.escaped,se=J.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":J=Ye(b,se,me),oe=B.getAngle(I),U+=Fe(oe,ee[me],J.padding,J.rounding,R),se=J.newpos;continue;case"P":case"p":U+=Ie(R.fetchMeridian(),"p"===me?"SHORT":"LONG");continue;case"B":case"b":U+=Ie(R.fetchDirection(),"b"===me?"SHORT":"LONG");continue;default:U+=me}}return U}(J,se,oe)}default:throw new E.aV(null,E.rH.InvalidParameter,null)}}var st=j(46668),dt=j(2004),mt=j(72854),wt=j(72642),et=j(37118),ot=j(55214),Ft=j(65234),vt=j(21726);function ie(B,b){if(!B||!b)return B===b;if(B.x===b.x&&B.y===b.y){if(B.hasZ){if(B.z!==b.z)return!1}else if(b.hasZ)return!1;if(B.hasM){if(B.m!==b.m)return!1}else if(b.hasM)return!1;return!0}return!1}function Ue(B,b,I){if(null!==B)if((0,p.m)(B)){if(b.updateUint8Array([61]),I.map.has(B)){const U=I.map.get(B);b.updateIntArray([61237541^U])}else{I.map.set(B,I.currentLength++);for(const U of B)Ue(U,b,I);I.map.delete(B),I.currentLength--}b.updateUint8Array([199])}else if((0,p.x)(B)){if(b.updateUint8Array([61]),I.map.has(B)){const U=I.map.get(B);b.updateIntArray([61237541^U])}else{I.map.set(B,I.currentLength++);for(const U of B.toArray())Ue(U,b,I);I.map.delete(B),I.currentLength--}b.updateUint8Array([199])}else{if((0,p.k)(B))return b.updateIntArray([B.toNumber()]),void b.updateUint8Array([241]);if((0,p.c)(B))return b.updateIntArray([B.length]),b.updateWithString(B),void b.updateUint8Array([41]);if((0,p.a)(B))b.updateUint8Array([!0===B?1:0,113]);else{if((0,p.b)(B))return b.updateFloatArray([B]),void b.updateUint8Array([173]);if(B instanceof _.Z)throw new E.aV(I.context,E.rH.UnsupportedHashType,I.node);if(B instanceof K.Z)throw new E.aV(I.context,E.rH.UnsupportedHashType,I.node);if(!(B instanceof V.Z)){if((0,p.w)(B))throw new E.aV(I.context,E.rH.UnsupportedHashType,I.node);if(B instanceof wt.Z)return b.updateIntArray([3833836621]),b.updateIntArray([0]),b.updateFloatArray([B.x]),b.updateIntArray([1]),b.updateFloatArray([B.y]),B.hasZ&&(b.updateIntArray([2]),b.updateFloatArray([B.z])),B.hasM&&(b.updateIntArray([3]),b.updateFloatArray([B.m])),b.updateIntArray([3765347959]),void Ue(B.spatialReference.wkid,b,I);if(B instanceof et.Z){b.updateIntArray([1266616829]);for(let U=0;U<B.rings.length;U++){const J=B.rings[U],oe=[];let R=null,ee=null;for(let se=0;se<J.length;se++){const me=B.getPoint(U,se);if(0===se)R=me;else if(ie(ee,me))continue;ee=me,se===J.length-1&&ie(R,me)||oe.push(me)}b.updateIntArray([1397116793,oe.length]);for(let se=0;se<oe.length;se++){const me=oe[se];b.updateIntArray([3962308117,se]),Ue(me,b,I),b.updateIntArray([2716288009])}b.updateIntArray([2278822459])}return b.updateIntArray([3878477243]),void Ue(B.spatialReference.wkid,b,I)}if(B instanceof ot.Z){b.updateIntArray([4106883559]);for(let U=0;U<B.paths.length;U++){const J=B.paths[U];b.updateIntArray([1397116793,J.length]);for(let oe=0;oe<J.length;oe++)b.updateIntArray([3962308117,oe]),Ue(B.getPoint(U,oe),b,I),b.updateIntArray([2716288009]);b.updateIntArray([2278822459])}return b.updateIntArray([2568784753]),void Ue(B.spatialReference.wkid,b,I)}if(B instanceof mt.Z){b.updateIntArray([588535921,B.points.length]);for(let U=0;U<B.points.length;U++){const J=B.getPoint(U);b.updateIntArray([U]),Ue(J,b,I)}return b.updateIntArray([1700171621]),void Ue(B.spatialReference.wkid,b,I)}if(B instanceof dt.Z)return b.updateIntArray([3483648373]),b.updateIntArray([0]),b.updateFloatArray([B.xmax]),b.updateIntArray([1]),b.updateFloatArray([B.xmin]),b.updateIntArray([2]),b.updateFloatArray([B.ymax]),b.updateIntArray([3]),b.updateFloatArray([B.ymin]),B.hasZ&&(b.updateIntArray([4]),b.updateFloatArray([B.zmax]),b.updateIntArray([5]),b.updateFloatArray([B.zmin])),B.hasM&&(b.updateIntArray([6]),b.updateFloatArray([B.mmax]),b.updateIntArray([7]),b.updateFloatArray([B.mmin])),b.updateIntArray([3622027469]),void Ue(B.spatialReference.wkid,b,I);if(B instanceof Ft.Z)return b.updateIntArray([14]),null!=B.wkid&&b.updateIntArray([B.wkid]),void(B.wkt&&b.updateWithString(B.wkt));throw(0,p.i)(B)||(0,p.T)(B)||(0,p.U)(B),new E.aV(I.context,E.rH.UnsupportedHashType,I.node)}if(b.updateUint8Array([223]),I.map.has(B)){const U=I.map.get(B);b.updateIntArray([61237541^U])}else{I.map.set(B,I.currentLength++);for(const U of B.keys())b.updateIntArray([U.length]),b.updateWithString(U),b.updateUint8Array([251]),Ue(B.field(U),b,I),b.updateUint8Array([239]);I.map.delete(B),I.currentLength--}b.updateUint8Array([73])}}else b.updateUint8Array([0,139])}function rt(B,b){B.portal=function(I,U){return b(I,U,(J,oe,R)=>((0,p.y)(R,1,1,I,U),new K.Z((0,p.j)(R[0]))))},B.typeof=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,1,1,I,U);const ee=(0,p.B)(R[0]);if("Unrecognised Type"===ee)throw new E.aV(I,E.rH.UnrecognisedType,U);return ee})},B.trim=function(I,U){return b(I,U,(J,oe,R)=>((0,p.y)(R,1,1,I,U),(0,p.j)(R[0]).trim()))},B.tohex=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,1,1,I,U);const ee=(0,p.g)(R[0]);return isNaN(ee)?ee:ee.toString(16)})},B.upper=function(I,U){return b(I,U,(J,oe,R)=>((0,p.y)(R,1,1,I,U),(0,p.j)(R[0]).toUpperCase()))},B.proper=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,1,2,I,U);let ee=1;2===R.length&&"firstword"===(0,p.j)(R[1]).toLowerCase()&&(ee=2);const se=/\s/,me=(0,p.j)(R[0]);let He="",D=!0;for(let O=0;O<me.length;O++){let X=me[O];se.test(X)?1===ee&&(D=!0):X.toUpperCase()!==X.toLowerCase()&&(D?(X=X.toUpperCase(),D=!1):X=X.toLowerCase()),He+=X}return He})},B.lower=function(I,U){return b(I,U,(J,oe,R)=>((0,p.y)(R,1,1,I,U),(0,p.j)(R[0]).toLowerCase()))},B.guid=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,0,1,I,U),R.length>0)switch((0,p.j)(R[0]).toLowerCase()){case"digits":return(0,p.M)().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return(0,p.M)();case"digits-hyphen-braces":return"{"+(0,p.M)()+"}";case"digits-hyphen-parentheses":return"("+(0,p.M)()+")"}return"{"+(0,p.M)()+"}"})},B.standardizeguid=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,2,2,I,U);let ee=(0,p.j)(R[0]);if(""===ee||null===ee)return"";const se=/^(\{|\()?(?<partA>[0-9a-z]{8})(\-?)(?<partB>[0-9a-z]{4})(\-?)(?<partC>[0-9a-z]{4})(\-?)(?<partD>[0-9a-z]{4})(\-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(ee);if(!se)return"";const me=se.groups;switch(ee=me.partA+"-"+me.partB+"-"+me.partC+"-"+me.partD+"-"+me.partE,(0,p.j)(R[1]).toLowerCase()){case"digits":return ee.replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return ee;case"digits-hyphen-braces":return"{"+ee+"}";case"digits-hyphen-parentheses":return"("+ee+")"}return"{"+ee+"}"})},B.console=function(I,U){return b(I,U,(J,oe,R)=>(0===R.length||I.console((0,p.j)(1===R.length?R[0]:R)),p.v))},B.mid=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,2,3,I,U);let ee=(0,p.g)(R[1]);if(isNaN(ee))return"";if(ee<0&&(ee=0),2===R.length)return(0,p.j)(R[0]).substr(ee);let se=(0,p.g)(R[2]);return isNaN(se)?"":(se<0&&(se=0),(0,p.j)(R[0]).substr(ee,se))})},B.find=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,2,3,I,U);let ee=0;if(R.length>2){if(ee=(0,p.g)((0,p.A)(R[2],0)),isNaN(ee))return-1;ee<0&&(ee=0)}return(0,p.j)(R[1]).indexOf((0,p.j)(R[0]),ee)})},B.left=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,2,2,I,U);let ee=(0,p.g)(R[1]);return isNaN(ee)?"":(ee<0&&(ee=0),(0,p.j)(R[0]).substr(0,ee))})},B.right=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,2,2,I,U);let ee=(0,p.g)(R[1]);return isNaN(ee)?"":(ee<0&&(ee=0),(0,p.j)(R[0]).substr(-1*ee,ee))})},B.split=function(I,U){return b(I,U,(J,oe,R)=>{let ee;(0,p.y)(R,2,4,I,U);let se=(0,p.g)((0,p.A)(R[2],-1));const me=(0,p.h)((0,p.A)(R[3],!1));if(-1===se||null===se||!0===me?ee=(0,p.j)(R[0]).split((0,p.j)(R[1])):(isNaN(se)&&(se=-1),se<-1&&(se=-1),ee=(0,p.j)(R[0]).split((0,p.j)(R[1]),se)),!1===me)return ee;const He=[];for(let D=0;D<ee.length&&!(-1!==se&&He.length>=se);D++)""!==ee[D]&&void 0!==ee[D]&&He.push(ee[D]);return He})},B.text=function(I,U){return b(I,U,(J,oe,R)=>((0,p.y)(R,1,2,I,U),(0,p.t)(R[0],R[1])))},B.concatenate=function(I,U){return b(I,U,(J,oe,R)=>{const ee=[];if(R.length<1)return"";if((0,p.m)(R[0])){const se=(0,p.A)(R[2],"");for(let me=0;me<R[0].length;me++)ee[me]=(0,p.t)(R[0][me],se);return ee.join(R.length>1?R[1]:"")}if((0,p.x)(R[0])){const se=(0,p.A)(R[2],"");for(let me=0;me<R[0].length();me++)ee[me]=(0,p.t)(R[0].get(me),se);return ee.join(R.length>1?R[1]:"")}for(let se=0;se<R.length;se++)ee[se]=(0,p.t)(R[se]);return ee.join("")})},B.reverse=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,1,1,I,U),(0,p.m)(R[0])){const ee=R[0].slice(0);return ee.reverse(),ee}if((0,p.x)(R[0])){const ee=R[0].toArray().slice(0);return ee.reverse(),ee}throw new E.aV(I,E.rH.InvalidParameter,U)})},B.replace=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,3,4,I,U);const ee=(0,p.j)(R[0]),se=(0,p.j)(R[1]),me=(0,p.j)(R[2]);return 4!==R.length||(0,p.h)(R[3])?(0,p.L)(ee,se,me):ee.replace(se,me)})},B.schema=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.w)(R[0])){const ee=(0,p.N)(R[0]);return ee?V.Z.convertObjectToArcadeDictionary(ee,(0,p.C)(I)):null}throw new E.aV(I,E.rH.InvalidParameter,U)})},B.subtypes=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,1,1,I,U),(0,p.w)(R[0])){const ee=(0,p.O)(R[0]);return ee?V.Z.convertObjectToArcadeDictionary(ee,(0,p.C)(I)):null}throw new E.aV(I,E.rH.InvalidParameter,U)})},B.subtypecode=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,1,1,I,U),(0,p.w)(R[0])){const ee=(0,p.O)(R[0]);if(!ee)return null;if(ee.subtypeField&&R[0].hasField(ee.subtypeField)){const se=R[0].field(ee.subtypeField);for(const me of ee.subtypes)if(me.code===se)return me.code;return null}return null}throw new E.aV(I,E.rH.InvalidParameter,U)})},B.subtypename=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,1,1,I,U),(0,p.w)(R[0])){const ee=(0,p.O)(R[0]);if(!ee)return"";if(ee.subtypeField&&R[0].hasField(ee.subtypeField)){const se=R[0].field(ee.subtypeField);for(const me of ee.subtypes)if(me.code===se)return me.name;return""}return""}throw new E.aV(I,E.rH.InvalidParameter,U)})},B.gdbversion=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,1,1,I,U),(0,p.w)(R[0]))return R[0].gdbVersion();throw new E.aV(I,E.rH.InvalidParameter,U)})},B.domain=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,2,3,I,U),(0,p.w)(R[0])){const ee=(0,p.P)(R[0],(0,p.j)(R[1]),void 0===R[2]?void 0:(0,p.g)(R[2]));return ee&&ee.domain?V.Z.convertObjectToArcadeDictionary("coded-value"===ee.domain.type||"codedValue"===ee.domain.type?{type:"codedValue",name:ee.domain.name,dataType:Y.yE[ee.field.type],codedValues:ee.domain.codedValues.map(se=>({name:se.name,code:se.code}))}:{type:"range",name:ee.domain.name,dataType:Y.yE[ee.field.type],min:ee.domain.min,max:ee.domain.max},(0,p.C)(I)):null}throw new E.aV(I,E.rH.InvalidParameter,U)})},B.domainname=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,2,4,I,U),(0,p.w)(R[0]))return(0,p.Q)(R[0],(0,p.j)(R[1]),R[2],void 0===R[3]?void 0:(0,p.g)(R[3]));throw new E.aV(I,E.rH.InvalidParameter,U)})},B.domaincode=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,2,4,I,U),(0,p.w)(R[0]))return(0,p.S)(R[0],(0,p.j)(R[1]),R[2],void 0===R[3]?void 0:(0,p.g)(R[3]));throw new E.aV(I,E.rH.InvalidParameter,U)})},B.urlencode=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,1,1,I,U),null===R[0])return"";if(R[0]instanceof V.Z){let ee="";for(const se of R[0].keys()){const me=R[0].field(se);""!==ee&&(ee+="&"),ee+=null===me?encodeURIComponent(se)+"=":encodeURIComponent(se)+"="+encodeURIComponent(me)}return ee}return encodeURIComponent((0,p.j)(R[0]))})},B.hash=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,1,1,I,U);const ee=new st.a(0);return Ue(R[0],ee,{context:I,node:U,map:new Map,currentLength:0}),ee.digest()})},B.convertdirection=function(I,U){return b(I,U,(J,oe,R)=>((0,p.y)(R,3,3,I,U),ct(R[0],R[1],R[2])))},B.fromjson=function(I,U){return b(I,U,(J,oe,R)=>{if((0,p.y)(R,1,1,I,U),!1===(0,p.c)(R[0]))throw new E.aV(I,E.rH.InvalidParameter,U);return V.Z.convertJsonToArcade(JSON.parse((0,p.j)(R[0])),(0,p.C)(I))})},B.expects=function(I,U){return b(I,U,(J,oe,R)=>{if(R.length<1)throw new E.aV(I,E.rH.WrongNumberOfParameters,U);return p.v})},B.tocharcode=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,1,2,I,U);const ee=(0,p.g)((0,p.A)(R[1],0)),se=(0,p.j)(R[0]);if(0===se.length&&1===R.length)return null;if(se.length<=ee||ee<0)throw new E.aV(I,E.rH.OutOfBounds,U);return se.charCodeAt(ee)})},B.tocodepoint=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,1,2,I,U);const ee=(0,p.g)((0,p.A)(R[1],0)),se=(0,p.j)(R[0]);if(0===se.length&&1===R.length)return null;if(se.length<=ee||ee<0)throw new E.aV(I,E.rH.OutOfBounds,U);return se.codePointAt(ee)})},B.fromcharcode=function(I,U){return b(I,U,(J,oe,R)=>{if(R.length<1)throw new E.aV(I,E.rH.WrongNumberOfParameters,U);const ee=R.map(se=>Math.trunc((0,p.g)(se))).filter(se=>se>=0&&se<=65535);return 0===ee.length?null:String.fromCharCode.apply(null,ee)})},B.fromcodepoint=function(I,U){return b(I,U,(J,oe,R)=>{if(R.length<1)throw new E.aV(I,E.rH.WrongNumberOfParameters,U);let ee;try{ee=R.map(se=>Math.trunc((0,p.g)(se))).filter(se=>se<=1114111&&se>>>0===se)}catch{return null}return 0===ee.length?null:String.fromCodePoint.apply(null,ee)})},B.getuser=function(I,U){return b(I,U,(J,oe,R)=>{(0,p.y)(R,0,2,I,U);let ee=(0,p.A)(R[1],"");if(ee=!0===ee||!1===ee?"":(0,p.j)(ee),null!==ee&&""!==ee)return null;if(0===R.length||R[0]instanceof K.Z){let se=null;if(I.services&&I.services.portal&&(se=I.services.portal),R.length>0&&!function xe(B,b){return!!B&&(0,vt.tm)(B,b?.restUrl||"")}(R[0].field("url"),se)||!se)return null;if(""===ee){const me=function yt(B){return"loaded"===B.loadStatus&&B.user&&B.user.sourceJSON?B.user.sourceJSON:null}(se);if(me){const He=JSON.parse(JSON.stringify(me));for(const D of["lastLogin","created","modified"])null!=He[D]&&(He[D]=new Date(He[D]));return V.Z.convertObjectToArcadeDictionary(He,(0,p.C)(I))}}return null}throw new E.aV(I,E.rH.InvalidParameter,U)})}}},27187:(Te,ge,j)=>{j.d(ge,{EI:()=>_,Lz:()=>E,SV:()=>V,r1:()=>Y});var K=j(2004);function _(q){if(null==q)return null;if("number"==typeof q)return q;let P=q.toLowerCase();switch(P=P.replace(/\s/g,""),P=P.replace(/-/g,""),P){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 109404;case"miles":case"mile":case"squaremile":case"squaremiles":return 109439;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 109414;case"acres":case"acre":case"ac":return 109402;case"hectares":case"hectare":case"ha":return 109401;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 109442;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 109405;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 109409}return null}function V(q){if(null==q)return null;switch(q.type){case"polygon":case"multipoint":case"polyline":return q.extent;case"point":return new K.Z({xmin:q.x,ymin:q.y,xmax:q.x,ymax:q.y,spatialReference:q.spatialReference});case"extent":return q}return null}function E(q){if(null==q)return null;if("number"==typeof q)return q;let P=q.toLowerCase();switch(P=P.replace(/\s/g,""),P=P.replace(/-/g,""),P){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 9001;case"miles":case"mile":case"squaremile":case"squaremiles":return 9093;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 9036;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 9096;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 9002;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 9030}return null}function Y(q){if(null==q)return null;const P=q.clone();return void 0!==q.cache._geVersion&&(P.cache._geVersion=q.cache._geVersion),P}},19927:(Te,ge,j)=>{j.d(ge,{Kq:()=>te,Vf:()=>k,bV:()=>N,dN:()=>v,gW:()=>q,mb:()=>H,w8:()=>w,x5:()=>W});const K={all:{min:2,max:2},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:1,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}},_={functionDefinitions:new Map,constantDefinitions:new Map},V={functionDefinitions:new Map,constantDefinitions:new Map};for(const g of["pi","infinity"])V.constantDefinitions.set(g,{type:"constant"}),_.constantDefinitions.set(g,{type:"constant"});V.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]}),_.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const g in K){const f=K[g];V.functionDefinitions.set(g,{overloads:[{type:"function",parametersInfo:{min:f.min,max:f.max}}]}),_.functionDefinitions.set(g,{overloads:[{type:"function",parametersInfo:{min:f.min,max:f.max}}]})}const E=["featureset","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","getfeatureset","getuser","attachments","featuresetbyportalitem"],p=["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","length3d","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","convexhull","simplify","multiparttosinglepart"];function Y(g){return"string"==typeof g||g instanceof String}function q(g,f){const C="sync"===f?_:V;C.functionDefinitions.has(g.name.toLowerCase())?C.functionDefinitions.get(g.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:g.min,max:g.max}}):C.functionDefinitions.set(g.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:g.min,max:g.max}}]})}function P(g,f){if(g)for(const C of g)L(C,f)}function L(g,f){if(g&&!1!==f(g))switch(g.type){case"ImportDeclaration":P(g.specifiers,f),L(g.source,f);break;case"ExportNamedDeclaration":L(g.declaration,f);break;case"ArrayExpression":P(g.elements,f);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":L(g.left,f),L(g.right,f);break;case"BlockStatement":case"Program":P(g.body,f);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":L(g.callee,f),P(g.arguments,f);break;case"ExpressionStatement":L(g.expression,f);break;case"ForInStatement":L(g.left,f),L(g.right,f),L(g.body,f);break;case"ForStatement":L(g.init,f),L(g.test,f),L(g.update,f),L(g.body,f);break;case"WhileStatement":L(g.test,f),L(g.body,f);break;case"FunctionDeclaration":L(g.id,f),P(g.params,f),L(g.body,f);break;case"IfStatement":L(g.test,f),L(g.consequent,f),L(g.alternate,f);break;case"MemberExpression":L(g.object,f),L(g.property,f);break;case"ObjectExpression":P(g.properties,f);break;case"Property":L(g.key,f),L(g.value,f);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":L(g.argument,f);break;case"VariableDeclaration":P(g.declarations,f);break;case"VariableDeclarator":L(g.id,f),L(g.init,f);break;case"TemplateLiteral":P(g.expressions,f),P(g.quasis,f)}}function N(g,f){let C=!1;const y=f.toLowerCase();return L(g,A=>!C&&("Identifier"===A.type&&A.name&&A.name.toLowerCase()===y&&(C=!0),!0)),C}function W(g){const f=[];return L(g,C=>("ImportDeclaration"===C.type&&C.source&&C.source.value&&f.push({libname:C.specifiers[0].local.name.toLowerCase(),source:C.source.value}),!0)),f}function w(g,f){let C=!1;const y=f.toLowerCase();return L(g,A=>!(C||"CallExpression"===A.type&&"Identifier"===A.callee.type&&A.callee.name&&A.callee.name.toLowerCase()===y&&(C=!0,1))),C}function H(g){const f=[];return L(g,C=>"MemberExpression"!==C.type||"Identifier"!==C.object.type||(!1===C.computed&&C.object&&C.object.name&&C.property&&"Identifier"===C.property.type&&C.property.name?f.push(C.object.name.toLowerCase()+"."+C.property.name.toLowerCase()):C.object&&C.object.name&&C.property&&"Literal"===C.property.type&&"string"==typeof C.property.value&&f.push(C.object.name.toLowerCase()+"."+C.property.value?.toString().toLowerCase()),!1)),f}function te(g){const f=[];return L(g,C=>{if("CallExpression"===C.type){if("Identifier"===C.callee.type&&"expects"===C.callee.name.toLowerCase()){let y="";for(let A=0;A<(C.arguments||[]).length;A++)0===A?"Identifier"===C.arguments[A].type&&(y=C.arguments[A].name.toLowerCase()):y&&"Literal"===C.arguments[A].type&&Y(C.arguments[A].value)&&f.push(y+"."+C.arguments[A].value.toLowerCase());return!1}if("Identifier"===C.callee.type&&["domainname","domaincode","domain","haskey"].includes(C.callee.name.toLowerCase())&&C.arguments.length>=2){let y="";return"Identifier"===C.arguments[0].type&&(y=C.arguments[0].name.toLowerCase()),y&&"Literal"===C.arguments[1].type&&Y(C.arguments[1].value)&&f.push(y+"."+C.arguments[1].value.toLowerCase()),!1}}return"MemberExpression"!==C.type||"Identifier"!==C.object.type||(!1===C.computed&&C.object&&C.object.name&&C.property&&"Identifier"===C.property.type&&C.property.name?f.push(C.object.name.toLowerCase()+"."+C.property.name.toLowerCase()):C.object&&C.object.name&&C.property&&"Literal"===C.property.type&&"string"==typeof C.property.value&&f.push(C.object.name.toLowerCase()+"."+C.property.value?.toString().toLowerCase()),!1)}),f}function k(g){const f=[];return L(g,C=>("CallExpression"===C.type&&"Identifier"===C.callee.type&&f.push(C.callee.name.toLowerCase()),!0)),f}function v(g,f=[]){let C=null;if(void 0===g.usesFeatureSet){null===C&&(C=k(g)),g.usesFeatureSet=!1;for(let y=0;y<C.length;y++)E.includes(C[y])&&(g.usesFeatureSet=!0,g.isAsync=!0);if(!1===g.usesFeatureSet&&f&&f.length>0)for(const y of f)if(N(g,y)){g.usesFeatureSet=!0,g.isAsync=!0;break}}if(void 0===g.usesModules&&(g.usesModules=!1,W(g).length>0&&(g.usesModules=!0)),void 0===g.usesGeometry){g.usesGeometry=!1,null===C&&(C=k(g));for(let y=0;y<C.length;y++)p.includes(C[y])&&(g.usesGeometry=!0)}}},67525:(Te,ge,j)=>{j.d(ge,{A:()=>q});var K=j(15861),_=j(25919),V=j(98362),E=j(47562),p=j(10699);const q=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:function Y(P){function L(v,S,g){if(v instanceof V.Z)return v.toArray();if((0,E.m)(v))return v;throw new _.aV(S,_.rH.InvalidParameter,g)}function N(v,S){const g=v.length,f=Math.floor(g/2);return 0===g?[]:1===g?[v[0]]:function W(v,S,g){const f=[];for(;v.length>0||S.length>0;)if(v.length>0&&S.length>0){let C=g(v[0],S[0]);isNaN(C)&&(C=0),C<=0?(f.push(v[0]),v=v.slice(1)):(f.push(S[0]),S=S.slice(1))}else v.length>0?(f.push(v[0]),v=v.slice(1)):S.length>0&&(f.push(S[0]),S=S.slice(1));return f}(N(v.slice(0,f),S),N(v.slice(f,g),S),S)}function w(v,S){return H.apply(this,arguments)}function H(){return(H=(0,K.Z)(function*(v,S){const g=v.length,f=Math.floor(g/2);if(0===g)return[];if(1===g)return[v[0]];const C=[yield w(v.slice(0,f),S),yield w(v.slice(f,g),S)];return te(C[0],C[1],S,[])})).apply(this,arguments)}function te(v,S,g,f){return F.apply(this,arguments)}function F(){return(F=(0,K.Z)(function*(v,S,g,f){const C=f;if(!(v.length>0||S.length>0))return f;if(v.length>0&&S.length>0){let y=yield g(v[0],S[0]);return isNaN(y)&&(y=1),y<=0?(C.push(v[0]),v=v.slice(1)):(C.push(S[0]),S=S.slice(1)),te(v,S,g,f)}return v.length>0?(C.push(v[0]),te(v=v.slice(1),S,g,f)):S.length>0?(C.push(S[0]),te(v,S=S.slice(1),g,f)):void 0})).apply(this,arguments)}function k(v,S,g,f){(0,E.y)(g,1,2,v,S);let C=g[0];if((0,E.x)(C)&&(C=C.toArray()),!1===(0,E.m)(C))throw new _.aV(v,_.rH.InvalidParameter,S);if(g.length>1){if(!1===(0,E.i)(g[1]))throw new _.aV(v,_.rH.InvalidParameter,S);let h=C;const T=g[1].createFunction(v);return f?w(h,T):(h=N(h,(Q,G)=>T(Q,G)),h)}let y=C;if(0===y.length)return[];const A={};for(let h=0;h<y.length;h++){const T=(0,E.B)(y[h]);""!==T&&(A[T]=!0)}if(!0===A.Array||!0===A.Dictionary||!0===A.Feature||!0===A.Point||!0===A.Polygon||!0===A.Polyline||!0===A.Multipoint||!0===A.Extent||!0===A.Function)return y.slice(0);let z=0,Z="";for(const h in A)z++,Z=h;return y=z>1||"String"===Z?N(y,(h,T)=>{if(null==h||h===E.v)return null==T||T===E.v?0:1;if(null==T||T===E.v)return-1;const Q=(0,E.j)(h),G=(0,E.j)(T);return Q<G?-1:Q===G?0:1}):"Number"===Z?N(y,(h,T)=>h-T):"Boolean"===Z?N(y,(h,T)=>h===T?0:T?-1:1):"Date"===Z?N(y,(h,T)=>T-h):y.slice(0),y}P.functions.array=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{(0,E.y)(C,1,2,v,S);const y=(0,E.g)(C[0]);if(isNaN(y)||!1===(0,E.z)(y))throw new _.aV(v,_.rH.InvalidParameter,S);const A=(0,E.A)(C[1],null),z=new Array(y);return z.fill(A),z})},P.functions.front=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{if((0,E.y)(C,1,1,v,S),(0,E.x)(C[0])){if(C[0].length()<=0)throw new _.aV(v,_.rH.OutOfBounds,S);return C[0].get(0)}if((0,E.m)(C[0])){if(C[0].length<=0)throw new _.aV(v,_.rH.OutOfBounds,S);return C[0][0]}throw new _.aV(v,_.rH.InvalidParameter,S)})},P.functions.back=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{if((0,E.y)(C,1,1,v,S),(0,E.x)(C[0])){if(C[0].length()<=0)throw new _.aV(v,_.rH.OutOfBounds,S);return C[0].get(C[0].length()-1)}if((0,E.m)(C[0])){if(C[0].length<=0)throw new _.aV(v,_.rH.OutOfBounds,S);return C[0][C[0].length-1]}throw new _.aV(v,_.rH.InvalidParameter,S)})},P.functions.push=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{if((0,E.y)(C,1,2,v,S),(0,E.m)(C[0]))return C[0][C[0].length]=C[1],C[0].length;throw new _.aV(v,_.rH.InvalidParameter,S)})},P.functions.pop=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{if((0,E.y)(C,1,1,v,S),(0,E.m)(C[0])){if(C[0].length<=0)throw new _.aV(v,_.rH.OutOfBounds,S);const y=C[0][C[0].length-1];return C[0].length=C[0].length-1,y}throw new _.aV(v,_.rH.InvalidParameter,S)})},P.functions.erase=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{if((0,E.y)(C,2,2,v,S),(0,E.m)(C[0])){let y=(0,E.g)(C[1]);if(isNaN(y)||!1===(0,E.z)(y))throw new _.aV(v,_.rH.InvalidParameter,S);const A=C[0];if(A.length<=0)throw new _.aV(v,_.rH.OutOfBounds,S);if(y<0&&(y=A.length+y),y<0)throw new _.aV(v,_.rH.OutOfBounds,S);if(y>=A.length)throw new _.aV(v,_.rH.OutOfBounds,S);return A.splice(y,1),E.v}throw new _.aV(v,_.rH.InvalidParameter,S)})},P.functions.insert=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{if((0,E.y)(C,3,3,v,S),(0,E.m)(C[0])){const y=(0,E.g)(C[1]);if(isNaN(y)||!1===(0,E.z)(y))throw new _.aV(v,_.rH.InvalidParameter,S);const A=C[2],z=C[0];if(y>z.length)throw new _.aV(v,_.rH.OutOfBounds,S);if(y<0&&y<-1*z.length)throw new _.aV(v,_.rH.OutOfBounds,S);return y===z.length?(z[y]=A,E.v):(z.splice(y,0,A),E.v)}throw new _.aV(v,_.rH.InvalidParameter,S)})},P.functions.resize=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{if((0,E.y)(C,2,3,v,S),(0,E.m)(C[0])){const y=(0,E.g)(C[1]);if(isNaN(y)||!1===(0,E.z)(y))throw new _.aV(v,_.rH.InvalidParameter,S);if(y<0)throw new _.aV(v,_.rH.InvalidParameter,S);const A=(0,E.A)(C[2],null),z=C[0];if(z.length>=y)return z.length=y,E.v;const Z=z.length;z.length=y;for(let h=Z;h<z.length;h++)z[h]=A;return E.v}throw new _.aV(v,_.rH.InvalidParameter,S)})},P.functions.includes=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{if((0,E.y)(C,2,2,v,S),(0,E.m)(C[0])){const y=C[1];return C[0].findIndex(A=>(0,E.s)(A,y))>-1}if((0,E.x)(C[0])){const y=C[1];return C[0].toArray().findIndex(A=>(0,E.s)(A,y))>-1}throw new _.aV(v,_.rH.InvalidParameter,S)})},P.functions.slice=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{if((0,E.y)(C,1,3,v,S),(0,E.m)(C[0])){const y=(0,E.g)((0,E.A)(C[1],0)),A=(0,E.g)((0,E.A)(C[2],C[0].length));if(isNaN(y)||!1===(0,E.z)(y))throw new _.aV(v,_.rH.InvalidParameter,S);if(isNaN(A)||!1===(0,E.z)(A))throw new _.aV(v,_.rH.InvalidParameter,S);return C[0].slice(y,A)}if((0,E.x)(C[0])){const y=C[0],A=(0,E.g)((0,E.A)(C[1],0)),z=(0,E.g)((0,E.A)(C[2],y.length()));if(isNaN(A)||!1===(0,E.z)(A))throw new _.aV(v,_.rH.InvalidParameter,S);if(isNaN(z)||!1===(0,E.z)(z))throw new _.aV(v,_.rH.InvalidParameter,S);return y.toArray().slice(A,z)}throw new _.aV(v,_.rH.InvalidParameter,S)})},P.functions.splice=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{const y=[];for(let A=0;A<C.length;A++)(0,E.m)(C[A])?y.push(...C[A]):(0,E.x)(C[A])?y.push(...C[A].toArray()):y.push(C[A]);return y})},P.functions.top=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{if((0,E.y)(C,2,2,v,S),(0,E.m)(C[0]))return(0,E.g)(C[1])>=C[0].length?C[0].slice(0):C[0].slice(0,(0,E.g)(C[1]));if((0,E.x)(C[0]))return(0,E.g)(C[1])>=C[0].length()?C[0].slice(0):C[0].slice(0,(0,E.g)(C[1]));throw new _.aV(v,_.rH.InvalidParameter,S)})},P.functions.first=function(v,S){return P.standardFunction(v,S,(g,f,C)=>((0,E.y)(C,1,1,v,S),(0,E.m)(C[0])?0===C[0].length?null:C[0][0]:(0,E.x)(C[0])?0===C[0].length()?null:C[0].get(0):null))},"sync"===P.mode&&(P.functions.sort=function(v,S){return P.standardFunction(v,S,(g,f,C)=>k(v,S,C,!1))},P.functions.any=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{(0,E.y)(C,2,2,v,S);const y=C[1].createFunction(v),A=L(C[0],v,S);for(const z of A){const Z=y(z);if((0,E.a)(Z)&&!0===Z)return!0}return!1})},P.functions.all=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{(0,E.y)(C,2,2,v,S);const y=C[1].createFunction(v),A=L(C[0],v,S);for(const z of A)if(!0!==y(z))return!1;return!0})},P.functions.none=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{(0,E.y)(C,2,2,v,S);const y=C[1].createFunction(v),A=L(C[0],v,S);for(const z of A)if(!0===y(z))return!1;return!0})},P.functions.reduce=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{(0,E.y)(C,2,3,v,S);const y=C[1].createFunction(v),A=L(C[0],v,S);return 2===C.length?0===A.length?null:A.reduce((z,Z)=>{const h=y(z,Z);return void 0!==h&&h!==E.v?h:null}):A.reduce((z,Z)=>{const h=y(z,Z);return void 0!==h&&h!==E.v?h:null},C[2])})},P.functions.map=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{(0,E.y)(C,2,2,v,S);const y=C[1].createFunction(v),A=L(C[0],v,S),z=[];for(const Z of A){const h=y(Z);z.push(void 0!==h&&h!==E.v?h:null)}return z})},P.functions.filter=function(v,S){return P.standardFunction(v,S,(g,f,C)=>{(0,E.y)(C,2,2,v,S);const y=C[1].createFunction(v),A=L(C[0],v,S),z=[];for(const Z of A)!0===y(Z)&&z.push(Z);return z})}),"async"===P.mode&&(P.functions.sort=function(v,S){return P.standardFunctionAsync(v,S,(g,f,C)=>k(v,S,C,!0))},P.functions.any=function(v,S){return P.standardFunctionAsync(v,S,function(){var g=(0,K.Z)(function*(f,C,y){(0,E.y)(y,2,2,v,S);const A=y[1].createFunction(v),z=L(y[0],v,S);for(const Z of z){const h=yield A(Z);let T=null;if(T=(0,p.y8)(T)?yield h:h,(0,E.a)(T)&&!0===T)return!0}return!1});return function(f,C,y){return g.apply(this,arguments)}}())},P.functions.all=function(v,S){return P.standardFunctionAsync(v,S,function(){var g=(0,K.Z)(function*(f,C,y){(0,E.y)(y,2,2,v,S);const A=y[1].createFunction(v),z=L(y[0],v,S);for(const Z of z){const h=yield A(Z);let T=null;if(T=(0,p.y8)(T)?yield h:h,!0!==T)return!1}return!0});return function(f,C,y){return g.apply(this,arguments)}}())},P.functions.none=function(v,S){return P.standardFunctionAsync(v,S,function(){var g=(0,K.Z)(function*(f,C,y){(0,E.y)(y,2,2,v,S);const A=y[1].createFunction(v),z=L(y[0],v,S);for(const Z of z){const h=yield A(Z);let T=null;if(T=(0,p.y8)(T)?yield h:h,!0===T)return!1}return!0});return function(f,C,y){return g.apply(this,arguments)}}())},P.functions.filter=function(v,S){return P.standardFunctionAsync(v,S,function(){var g=(0,K.Z)(function*(f,C,y){(0,E.y)(y,2,2,v,S);const A=y[1].createFunction(v),z=L(y[0],v,S),Z=[];for(const h of z){const T=yield A(h);let Q=null;Q=(0,p.y8)(Q)?yield T:T,!0===Q&&Z.push(h)}return Z});return function(f,C,y){return g.apply(this,arguments)}}())},P.functions.reduce=function(v,S){return P.standardFunctionAsync(v,S,(g,f,C)=>{(0,E.y)(C,2,3,v,S);const y=C[1].createFunction(v),A=L(C[0],v,S);let z=null;if(C.length>2){const Z=(0,E.A)(C[2],null);z=A.reduce(function(){var h=(0,K.Z)(function*(T,Q){let G=yield T;return void 0!==G&&G!==E.v||(G=null),y(G,Q)});return function(T,Q){return h.apply(this,arguments)}}(),Promise.resolve(Z))}else{if(0===A.length)return null;z=A.reduce(function(){var Z=(0,K.Z)(function*(h,T,Q){if(Q<=1)return y(h,T);let G=yield h;return void 0!==G&&G!==E.v||(G=null),y(G,T)});return function(h,T,Q){return Z.apply(this,arguments)}}())}return z.then(Z=>void 0!==Z&&Z!==E.v?Z:null)})},P.functions.map=function(v,S){return P.standardFunctionAsync(v,S,function(){var g=(0,K.Z)(function*(f,C,y){(0,E.y)(y,2,2,v,S);const A=y[1].createFunction(v),z=L(y[0],v,S),Z=[];for(const h of z){const T=yield A(h);let Q=null;Q=(0,p.y8)(Q)?yield T:T,Z.push(void 0!==Q&&Q!==E.v?Q:null)}return Z});return function(f,C,y){return g.apply(this,arguments)}}())})}},Symbol.toStringTag,{value:"Module"}))},47562:(Te,ge,j)=>{j.d(ge,{A:()=>he,B:()=>Be,C:()=>se,D:()=>lt,E:()=>Oe,F:()=>It,G:()=>wt,H:()=>Ft,I:()=>A,J:()=>ot,K:()=>vt,L:()=>Q,M:()=>pt,N:()=>me,O:()=>oe,P:()=>J,Q:()=>R,R:()=>z,S:()=>ee,T:()=>Qe,U:()=>Xe,V:()=>Le,W:()=>ie,X:()=>yt,Y:()=>st,Z:()=>gt,_:()=>ct,a:()=>pe,b:()=>ne,c:()=>Ae,d:()=>rt,e:()=>I,f:()=>de,g:()=>be,h:()=>bt,i:()=>G,j:()=>Re,k:()=>Me,l:()=>Dt,m:()=>ve,n:()=>He,o:()=>h,p:()=>T,q:()=>Ye,r:()=>Et,s:()=>Pe,t:()=>je,u:()=>Ue,v:()=>Z,w:()=>Ie,x:()=>Ze,y:()=>At,z:()=>ye});var K=j(15861),_=j(7652),V=j(98362),E=j(5371),p=j(26685),Y=j(91365),q=j(2004),P=j(21674),L=j(72854),N=j(72642),W=j(37118),w=j(55214),H=j(21837),te=j(62208),F=j(75327),k=j(25748),v=j(56683),S=j(77132),g=j(78778),f=j(25919);class C{constructor(O){this.value=O}}class y{constructor(O){this.value=O}}const A=y,z=C,Z={type:"VOID"},h={type:"BREAK"},T={type:"CONTINUE"};function Q(D,O,X){return""===O||null==O||O===X||O===X?D:D=D.split(O).join(X)}function G(D){return D instanceof _.Rm}function re(D){return D instanceof g.P}function de(D){return!!(Ae(D)||ne(D)||Me(D)||pe(D)||null===D||D===Z||"number"==typeof D)}function he(D,O){return void 0===D?O:D}function Be(D){return null==D?"":ve(D)||Ze(D)?"Array":Me(D)?"Date":Ae(D)?"String":pe(D)?"Boolean":ne(D)?"Number":"esri.arcade.Attachment"===D?.declaredClass?"Attachment":"esri.arcade.Portal"===D?.declaredClass?"Portal":"esri.arcade.Dictionary"===D?.declaredClass?"Dictionary":D instanceof g.P?"Module":Ie(D)?"Feature":D instanceof N.Z?"Point":D instanceof W.Z?"Polygon":D instanceof w.Z?"Polyline":D instanceof L.Z?"Multipoint":D instanceof q.Z?"Extent":G(D)?"Function":Qe(D)?"FeatureSet":Xe(D)?"FeatureSetCollection":D===Z?"":"number"==typeof D&&isNaN(D)?"Number":"Unrecognised Type"}function Ae(D){return"string"==typeof D||D instanceof String}function pe(D){return"boolean"==typeof D}function ne(D){return"number"==typeof D}function ye(D){return"number"==typeof D&&isFinite(D)&&Math.floor(D)===D}function ve(D){return D instanceof Array}function Ie(D){return"esri.arcade.Feature"===D?.arcadeDeclaredClass}function Qe(D){return"esri.arcade.featureset.support.FeatureSet"===D?.declaredRootClass}function Xe(D){return"esri.arcade.featureSetCollection"===D?.declaredRootClass}function Ze(D){return D instanceof V.Z}function Me(D){return D instanceof Y.iG}function ht(D){return null!=D&&"object"==typeof D}function Ge(D){return D instanceof Date}function At(D,O,X,ue,le){if(D.length<O||D.length>X)throw new f.aV(ue,f.rH.WrongNumberOfParameters,le)}function Oe(D){return D<0?-Math.round(-D):Math.round(D)}function pt(){let D=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,O=>{const X=(D+16*Math.random())%16|0;return D=Math.floor(D/16),("x"===O?X:3&X|8).toString(16)})}function Ne(D,O){return isNaN(D)||null==O||""===O?D.toString():(O=Q(O,"\u2030",""),O=Q(O,"\xa4",""),(0,F.WU)(D,{pattern:O}))}function qe(D,O){return null==O||""===O?D.toISOString(!0):D.toFormat(lt(O),{locale:(0,v.Kd)(),numberingSystem:"latn"})}function lt(D){D=D.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let O="";const X=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const ue of D.match(X)||[])switch(ue){case"D":O+="d";break;case"DD":O+="dd";break;case"DDD":O+="o";break;case"d":O+="c";break;case"ddd":O+="ccc";break;case"dddd":O+="cccc";break;case"M":O+="L";break;case"MM":O+="LL";break;case"MMM":O+="LLL";break;case"MMMM":O+="LLLL";break;case"YY":O+="yy";break;case"Y":case"YYYY":O+="yyyy";break;case"Q":O+="q";break;case"Z":O+="ZZ";break;case"ZZ":O+="ZZZ";break;case"S":O+="'S'";break;case"SS":O+="'SS'";break;case"SSS":O+="u";break;case"A":case"a":O+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":O+=ue;break;default:ue.length>=2&&"["===ue.slice(0,1)&&"]"===ue.slice(-1)?O+=`'${ue.slice(1,-1)}'`:O+=`'${ue}'`}return O}function Fe(D,O,X){switch(X){case">":return D>O;case"<":return D<O;case">=":return D>=O;case"<=":return D<=O}return!1}function Et(D,O,X){if(null===D){if(null===O||O===Z)return Fe(null,null,X);if(ne(O))return Fe(0,O,X);if(Ae(O)||pe(O))return Fe(0,be(O),X);if(Me(O))return Fe(0,O.toNumber(),X)}if(D===Z){if(null===O||O===Z)return Fe(null,null,X);if(ne(O))return Fe(0,O,X);if(Ae(O)||pe(O))return Fe(0,be(O),X);if(Me(O))return Fe(0,O.toNumber(),X)}else if(ne(D)){if(ne(O))return Fe(D,O,X);if(pe(O))return Fe(D,be(O),X);if(null===O||O===Z)return Fe(D,0,X);if(Ae(O))return Fe(D,be(O),X);if(Me(O))return Fe(D,O.toNumber(),X)}else if(Ae(D)){if(Ae(O))return Fe(Re(D),Re(O),X);if(Me(O))return Fe(be(D),O.toNumber(),X);if(ne(O))return Fe(be(D),O,X);if(null===O||O===Z)return Fe(be(D),0,X);if(pe(O))return Fe(be(D),be(O),X)}else if(Me(D)){if(Me(O))return Fe(D.toNumber(),O.toNumber(),X);if(null===O||O===Z)return Fe(D.toNumber(),0,X);if(ne(O))return Fe(D.toNumber(),O,X);if(pe(O)||Ae(O))return Fe(D.toNumber(),be(O),X)}else if(pe(D)){if(pe(O))return Fe(D,O,X);if(ne(O))return Fe(be(D),be(O),X);if(Me(O))return Fe(be(D),O.toNumber(),X);if(null===O||O===Z)return Fe(be(D),0,X);if(Ae(O))return Fe(be(D),be(O),X)}return!!Pe(D,O)&&("<="===X||">="===X)}function Pe(D,O){if(D===O||null===D&&O===Z||null===O&&D===Z)return!0;if(Me(D)&&Me(O))return D.equals(O);if(D instanceof E.Z||D instanceof p.Z)return D.equalityTest(O);if(D instanceof N.Z&&O instanceof N.Z){const X=D.cache._arcadeCacheId;if(null!=X)return X===O.cache._arcadeCacheId}return!!(ht(D)&&ht(O)&&(D._arcadeCacheId===O._arcadeCacheId&&null!=D._arcadeCacheId||D._underlyingGraphic===O._underlyingGraphic&&null!=D._underlyingGraphic))}function Re(D,O){if(Ae(D))return D;if(null===D)return"";if(ne(D))return Ne(D,O);if(pe(D))return D.toString();if(Me(D))return qe(D,O);if(D instanceof P.Z)return JSON.stringify(D.toJSON());if(ve(D)){const X=[];for(let ue=0;ue<D.length;ue++)X[ue]=at(D[ue]);return"["+X.join(",")+"]"}if(D instanceof V.Z){const X=[];for(let ue=0;ue<D.length();ue++)X[ue]=at(D.get(ue));return"["+X.join(",")+"]"}return null!==D&&"object"==typeof D&&void 0!==D.castToText?D.castToText():G(D)?"object, Function":D===Z?"":re(D)?"object, Module":""}function Le(D){const O=[];if(!ve(D))return null;if(D instanceof V.Z){for(let X=0;X<D.length();X++)O[X]=be(D.get(X));return O}for(let X=0;X<D.length;X++)O[X]=be(D[X]);return O}function je(D,O,X=!1){if(Ae(D))return D;if(null===D)return"";if(ne(D))return Ne(D,O);if(pe(D))return D.toString();if(Me(D))return qe(D,O);if(D instanceof P.Z)return D instanceof q.Z?'{"xmin":'+D.xmin.toString()+',"ymin":'+D.ymin.toString()+","+(D.hasZ?'"zmin":'+D.zmin.toString()+",":"")+(D.hasM?'"mmin":'+D.mmin.toString()+",":"")+'"xmax":'+D.xmax.toString()+',"ymax":'+D.ymax.toString()+","+(D.hasZ?'"zmax":'+D.zmax.toString()+",":"")+(D.hasM?'"mmax":'+D.mmax.toString()+",":"")+'"spatialReference":'+mt(D.spatialReference)+"}":mt(D.toJSON(),(ue,le)=>ue.key===le.key?0:"spatialReference"===ue.key?1:"spatialReference"===le.key||ue.key<le.key?-1:ue.key>le.key?1:0);if(ve(D)){const ue=[];for(let le=0;le<D.length;le++)ue[le]=at(D[le],X);return"["+ue.join(",")+"]"}if(D instanceof V.Z){const ue=[];for(let le=0;le<D.length();le++)ue[le]=at(D.get(le),X);return"["+ue.join(",")+"]"}return null!==D&&"object"==typeof D&&void 0!==D.castToText?D.castToText(X):G(D)?"object, Function":D===Z?"":re(D)?"object, Module":""}function at(D,O=!1){if(null===D)return"null";if(pe(D)||ne(D)||Ae(D))return JSON.stringify(D);if(D instanceof P.Z||D instanceof V.Z||D instanceof Array)return je(D,null,O);if(Me(D))return JSON.stringify(O?D.getTime():qe(D,""));if(null!==D&&"object"==typeof D){if(void 0!==D.castToText)return D.castToText(O)}else if(D===Z)return"null";return"null"}function be(D,O){return ne(D)?D:null===D||""===D?0:Me(D)?NaN:pe(D)?D?1:0:ve(D)||""===D||void 0===D?NaN:void 0!==O&&Ae(D)?(O=Q(O,"\u2030",""),O=Q(O,"\xa4",""),(0,F.Qc)(D,{pattern:O})):D===Z?0:Number(D)}function Dt(D,O){if(Me(D))return D;if(Ae(D)){const X=function Ct(D,O){const X=/ (\d\d)/,ue=(0,Y.Qn)(O);let le=H.ou.fromISO(D,{zone:ue});return le.isValid||X.test(D)&&(D=D.replace(X,"T$1"),le=H.ou.fromISO(D,{zone:O}),le.isValid)?le:null}(D,O);if(X)return Y.iG.dateTimeToArcadeDate(X)}return null}function bt(D){return pe(D)?D:Ae(D)?"true"===(D=D.toLowerCase()):!!ne(D)&&0!==D&&!isNaN(D)}function Ye(D,O){return(0,te.Wi)(D)?null:(null!=D.spatialReference||(D.spatialReference=O),D)}function It(D){if(null===D)return null;if(D instanceof N.Z)return"NaN"===D.x||null===D.x||isNaN(D.x)?null:D;if(D instanceof W.Z){if(0===D.rings.length)return null;for(const O of D.rings)if(O.length>0)return D;return null}if(D instanceof w.Z){if(0===D.paths.length)return null;for(const O of D.paths)if(O.length>0)return D;return null}return D instanceof L.Z?0===D.points.length?null:D:D instanceof q.Z?"NaN"===D.xmin||null===D.xmin||isNaN(D.xmin)?null:D:null}function gt(D,O){if(!D||!D.domain)return O;let X=null;if("string"===D.field.type||"esriFieldTypeString"===D.field.type)O=Re(O);else{if(null==O)return null;if(""===O)return O;O=be(O)}for(let ue=0;ue<D.domain.codedValues.length;ue++){const le=D.domain.codedValues[ue];le.code===O&&(X=le)}return null===X?O:X.name}function ct(D,O){if(!D||!D.domain)return O;let X=null;O=Re(O);for(let ue=0;ue<D.domain.codedValues.length;ue++){const le=D.domain.codedValues[ue];le.name===O&&(X=le)}return null===X?O:X.code}function st(D,O,X=null,ue=null){if(!O||!O.fields)return null;let le,we,ke=null;for(let _e=0;_e<O.fields.length;_e++){const ze=O.fields[_e];ze.name.toLowerCase()===D.toString().toLowerCase()&&(ke=ze)}if(null===ke)throw new f.aV(null,f.rH.FieldNotFound,null,{key:D});return null===ue&&X&&O.typeIdField&&(ue=X.hasField(O.typeIdField)?X.field(O.typeIdField):null),null!=ue&&O.types.some(_e=>_e.id===ue&&(le=_e.domains&&_e.domains[ke.name],le&&"inherited"===le.type&&(le=dt(ke.name,O),we=!0),!0)),we||le||(le=dt(D,O)),{field:ke,domain:le}}function dt(D,O){let X;return O.fields.some(ue=>(ue.name.toLowerCase()===D.toLowerCase()&&(X=ue.domain),!!X)),X}function mt(D,O){O||(O={}),"function"==typeof O&&(O={cmp:O});const X="boolean"==typeof O.cycles&&O.cycles,ue=O.cmp&&(le=O.cmp,function(ke){return function(_e,ze){return le({key:_e,value:ke[_e]},{key:ze,value:ke[ze]})}});var le;const we=[];return function ke(_e){if(_e&&_e.toJSON&&"function"==typeof _e.toJSON&&(_e=_e.toJSON()),void 0===_e)return;if("number"==typeof _e)return isFinite(_e)?""+_e:"null";if("object"!=typeof _e)return JSON.stringify(_e);let ze,tt;if(Array.isArray(_e)){for(tt="[",ze=0;ze<_e.length;ze++)ze&&(tt+=","),tt+=ke(_e[ze])||"null";return tt+"]"}if(null===_e)return"null";if(we.includes(_e)){if(X)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const Pt=we.push(_e)-1,Ut=Object.keys(_e).sort(ue&&ue(_e));for(tt="",ze=0;ze<Ut.length;ze++){const Ht=Ut[ze],Vt=ke(_e[Ht]);Vt&&(tt&&(tt+=","),tt+=JSON.stringify(Ht)+":"+Vt)}return we.splice(Pt,1),"{"+tt+"}"}(D)}function wt(D){if(null===D)return null;const O=[];for(const X of D)O.push(X&&X.arcadeDeclaredClass&&"esri.arcade.Feature"===X.arcadeDeclaredClass?X.geometry():X);return O}function et(D,O){if(!(O instanceof N.Z))throw new f.aV(null,f.rH.InvalidParameter,null);D.push(O.hasZ?O.hasM?[O.x,O.y,O.z,O.m]:[O.x,O.y,O.z]:[O.x,O.y])}function ot(D,O){if(ve(D)||Ze(D)){let X=!1,ue=!1,le=[],we=O;if(ve(D)){for(const ke of D)et(le,ke);le.length>0&&(we=D[0].spatialReference,X=D[0].hasZ,ue=D[0].hasM)}else if(D instanceof p.Z)le=D._elements,le.length>0&&(X=D._hasZ,ue=D._hasM,we=D.get(0).spatialReference);else{if(!Ze(D))throw new f.aV(null,f.rH.InvalidParameter,null);for(const ke of D.toArray())et(le,ke);le.length>0&&(we=D.get(0).spatialReference,X=!0===D.get(0).hasZ,ue=!0===D.get(0).hasM)}return 0===le.length?null:((0,k.bu)(le,ue,X)||(le=le.slice(0).reverse()),new W.Z({rings:[le],spatialReference:we,hasZ:X,hasM:ue}))}return D}function Ft(D,O){if(ve(D)||Ze(D)){let X=!1,ue=!1,le=[],we=O;if(ve(D)){for(const ke of D)et(le,ke);le.length>0&&(we=D[0].spatialReference,X=!0===D[0].hasZ,ue=!0===D[0].hasM)}else if(D instanceof p.Z)le=D._elements,le.length>0&&(X=D._hasZ,ue=D._hasM,we=D.get(0).spatialReference);else if(Ze(D)){for(const ke of D.toArray())et(le,ke);le.length>0&&(we=D.get(0).spatialReference,X=!0===D.get(0).hasZ,ue=!0===D.get(0).hasM)}return 0===le.length?null:new w.Z({paths:[le],spatialReference:we,hasZ:X,hasM:ue})}return D}function vt(D,O){if(ve(D)||Ze(D)){let X=!1,ue=!1,le=[],we=O;if(ve(D)){for(const ke of D)et(le,ke);le.length>0&&(we=D[0].spatialReference,X=!0===D[0].hasZ,ue=!0===D[0].hasM)}else if(D instanceof p.Z)le=D._elements,le.length>0&&(X=D._hasZ,ue=D._hasM,we=D.get(0).spatialReference);else if(Ze(D)){for(const ke of D.toArray())et(le,ke);le.length>0&&(we=D.get(0).spatialReference,X=!0===D.get(0).hasZ,ue=!0===D.get(0).hasM)}return 0===le.length?null:new L.Z({points:le,spatialReference:we,hasZ:X,hasM:ue})}return D}function yt(D,O=!1){const X=[];if(null===D)return X;if(!0===ve(D)){for(let ue=0;ue<D.length;ue++){const le=Re(D[ue]);""===le&&!0!==O||X.push(le)}return X}if(D instanceof V.Z){for(let ue=0;ue<D.length();ue++){const le=Re(D.get(ue));""===le&&!0!==O||X.push(le)}return X}if(de(D)){const ue=Re(D);return""===ue&&!0!==O||X.push(ue),X}return[]}let xe=0;function ie(D){return xe++,xe%100==0?(xe=0,new Promise(O=>{setTimeout(()=>{O(D)},0)})):D}function Ue(D,O,X){switch(X){case"&":return D&O;case"|":return D|O;case"^":return D^O;case"<<":return D<<O;case">>":return D>>O;case">>>":return D>>>O}}function rt(D,O=null){return null==D?null:pe(D)||ne(D)||Ae(D)?D:D instanceof P.Z?!0===O?.keepGeometryType?D:D.toJSON():D instanceof V.Z?D.toArray().map(X=>rt(X,O)):D instanceof Array?D.map(X=>rt(X,O)):Ge(D)?D:Me(D)?D.toJSDate():null!==D&&"object"==typeof D&&void 0!==D.castAsJson?D.castAsJson(O):null}function B(D,O,X,ue,le){return b.apply(this,arguments)}function b(){return(b=(0,K.Z)(function*(D,O,X,ue,le){const we=yield I(D,O,X);le[ue]=we})).apply(this,arguments)}function I(D){return U.apply(this,arguments)}function U(){return(U=(0,K.Z)(function*(D,O=null,X=null){if(D instanceof V.Z&&(D=D.toArray()),null==D)return null;if(de(D)||D instanceof P.Z||Ge(D)||Me(D))return rt(D,X);if(D instanceof Array){const ue=[],le=[];for(const we of D)null===we||de(we)||we instanceof P.Z||Ge(we)||Me(we)?le.push(rt(we,X)):(le.push(null),ue.push(B(we,O,X,le.length-1,le)));return ue.length>0&&(yield Promise.all(ue)),le}return null!==D&&"object"==typeof D&&void 0!==D.castAsJsonAsync?D.castAsJsonAsync(O,X):null})).apply(this,arguments)}function J(D,O,X){const ue=D.fullSchema();return null!==ue&&ue.fields?st(O,ue,D,X):null}function oe(D){const O=D.fullSchema();return null===O?null:O.fields&&O.typeIdField?{subtypeField:O.typeIdField,subtypes:O.types?O.types.map(X=>({name:X.name,code:X.id})):[]}:null}function R(D,O,X,ue){const le=D.fullSchema();if(null===le||!le.fields)return null;const we=st(O,le,D,ue);if(void 0===X)try{X=D.field(O)}catch{return null}return gt(we,X)}function ee(D,O,X,ue){const le=D.fullSchema();if(null===le||!le.fields)return null;if(void 0===X){try{X=D.field(O)}catch{return null}return X}return ct(st(O,le,D,ue),X)}function se(D){return D?.timeReference?.timeZone?D?.timeReference?.timeZone:"system"}function me(D){const O=D.fullSchema();if(null===O||!O.fields)return null;const X=[];for(const ue of O.fields)X.push((0,S.Sh)(ue));return{objectIdField:O.objectIdField,globalIdField:O.globalIdField,geometryType:void 0===S.q2[O.geometryType]?"":S.q2[O.geometryType],fields:X,datesInUnknownTimezone:!0===O.datesInUnknownTimezone,preferredTimeReference:O.preferredTimeReference||null,editFieldsInfo:O.editFieldsInfo||null,timeInfo:O.timeInfo||null,dateFieldsTimeReference:O.dateFieldsTimeReference||null}}const He=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:A,ImplicitResultE:y,ReturnResult:z,ReturnResultE:C,absRound:Oe,autoCastArrayOfPointsToMultiPoint:vt,autoCastArrayOfPointsToPolygon:ot,autoCastArrayOfPointsToPolyline:Ft,autoCastFeatureToGeometry:wt,binaryOperator:Ue,breakResult:h,castAsJson:rt,castAsJsonAsync:I,continueResult:T,defaultTimeZone:se,defaultUndefined:he,equalityTest:Pe,featureDomainCodeLookup:ee,featureDomainValueLookup:R,featureFullDomain:J,featureSchema:me,featureSubtypes:oe,fixNullGeometry:It,fixSpatialReference:Ye,formatDate:qe,formatNumber:Ne,generateUUID:pt,getDomain:st,getDomainCode:ct,getDomainValue:gt,getType:Be,greaterThanLessThan:Et,isArray:ve,isBoolean:pe,isDate:Me,isFeature:Ie,isFeatureSet:Qe,isFeatureSetCollection:Xe,isFunctionParameter:G,isImmutableArray:Ze,isInteger:ye,isJsDate:Ge,isModule:re,isNumber:ne,isObject:ht,isSimpleType:de,isString:Ae,multiReplace:Q,pcCheck:At,stableStringify:mt,standardiseDateFormat:lt,tick:ie,toBoolean:bt,toDate:Dt,toNumber:be,toNumberArray:Le,toString:Re,toStringArray:yt,toStringExplicit:je,voidOperation:Z},Symbol.toStringTag,{value:"Module"}))},4988:(Te,ge,j)=>{j.r(ge),j.d(ge,{Dictionary:()=>V.Z,arcade:()=>Or,arcadeFeature:()=>E.Z,convertFeatureLayerToFeatureSet:()=>ii,convertJsonToArcade:()=>si,convertMapToFeatureSetCollection:()=>ai,convertServiceUrlToWorkspace:()=>ri,createExecContext:()=>Kr,createFeature:()=>Jr,createFunction:()=>Wr,createSyntaxTree:()=>Bt,dependsOnView:()=>ei,enableFeatureSetOperations:()=>li,enableGeometryOperations:()=>ui,evalSyntaxTree:()=>Yr,executeAsyncFunction:()=>Xr,executeFunction:()=>Qr,extractFieldNames:()=>qr,getArcadeType:()=>zr,getViewInfo:()=>ni,hasGeometryFunctions:()=>mi,hasGeometryOperations:()=>Di,hasVariable:()=>ti,loadScriptDependencies:()=>oi,updateExecContext:()=>$r}),j(29132);var _=j(15861),V=j(6729),E=j(42275),p=j(47562),Y=j(19927),q=j(67525),P=j(84228),L=j(24499),N=j(63461),W=j(53840),w=j(97536),H=j(32576),te=j(10699),F=j(21674),k=j(65234),v=j(9288),S=j(78778),g=j(7652),f=j(25919);function A(l,u,c){try{return c(l,null,u.arguments)}catch(m){throw m}}function z(l,u){try{switch(u.type){case"EmptyStatement":return"lc.voidOperation";case"VariableDeclarator":return function Ze(l,u){let c=null===u.init?null:z(l,u.init);c===p.v&&(c=null);const m=u.id.name.toLowerCase();if(Ie(m),null!==l.localScope){if(void 0!==l.localScope[m])return"lscope['"+m+"']="+c+"; ";if(void 0!==l.localScope._SymbolsMap[m])return"lscope['"+l.localScope._SymbolsMap[m]+"']="+c+"; ";{const M=Re(l);return l.localScope._SymbolsMap[m]=M,l.mangleMap[m]=M,"lscope['"+M+"']="+c+"; "}}if(void 0!==l.globalScope[m])return"gscope['"+m+"']="+c+"; ";if(void 0!==l.globalScope._SymbolsMap[m])return"gscope['"+l.globalScope._SymbolsMap[m]+"']="+c+"; ";if(l.undeclaredGlobalsInFunctions.has(m)){const M=l.undeclaredGlobalsInFunctions.get(m).manglename;return l.globalScope._SymbolsMap[m]=M,l.mangleMap[m]=M,l.undeclaredGlobalsInFunctions.delete(m),"gscope[lang.setAssig('"+M+"', runtimeCtx)]="+c+"; "}const x=Re(l);return l.globalScope._SymbolsMap[m]=x,l.mangleMap[m]=x,"gscope['"+x+"']="+c+"; "}(l,u);case"VariableDeclaration":return function Xe(l,u){const c=[];for(let m=0;m<u.declarations.length;m++)c.push(z(l,u.declarations[m]));return c.join("\n")+" \n lastStatement=  lc.voidOperation; \n"}(l,u);case"BlockStatement":case"Program":return pe(l,u);case"FunctionDeclaration":return function Qe(l,u){const c=u.id.name.toLowerCase();Ie(c);let m="",x=!1;void 0!==l.globalScope[c]?m=c:void 0!==l.globalScope._SymbolsMap[c]?m=l.globalScope._SymbolsMap[c]:l.undeclaredGlobalsInFunctions.has(c)?(m=l.undeclaredGlobalsInFunctions.get(c).manglename,l.globalScope._SymbolsMap[c]=m,l.mangleMap[c]=m,l.undeclaredGlobalsInFunctions.delete(c),x=!0):(m=Re(l),l.globalScope._SymbolsMap[c]=m,l.mangleMap[c]=m);const M={isAsync:l.isAsync,console:l.console,exports:l.exports,undeclaredGlobalsInFunctions:l.undeclaredGlobalsInFunctions,customfunctions:l.customfunctions,moduleFactory:l.moduleFactory,moduleFactoryMap:l.moduleFactoryMap,libraryResolver:l.libraryResolver,lrucache:l.lrucache,interceptor:l.interceptor,services:l.services,symbols:l.symbols,mangleMap:l.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:l.depthCounter,globalScope:l.globalScope};let $="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement = lc.voidOperation; \n   var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";for(let ae=0;ae<u.params.length;ae++){const ce=u.params[ae].name.toLowerCase();Ie(ce);const fe=Re(l);M.localScope._SymbolsMap[ce]=fe,M.mangleMap[ce]=fe,$+="lscope['"+fe+"']=arguments["+ae.toString()+"];\n"}return!0===l.isAsync?($+="return lang.__awaiter(this, void 0, void 0, function* () {\n",$+=pe(M,u.body)+"\n return lastStatement; ",$+="});  }",$+=", runtimeCtx),"+u.params.length+")",$+="\n lastStatement = lc.voidOperation; \n"):($+=pe(M,u.body)+"\n return lastStatement; }, runtimeCtx),"+u.params.length+")",$+="\n lastStatement = lc.voidOperation; \n"),x?"gscope[lang.setAssig('"+m+"', runtimeCtx)]="+$:"gscope['"+m+"']="+$}(l,u);case"ImportDeclaration":return function ye(l,u){const c=u.specifiers[0].local.name.toLowerCase();Ie(c);const m=l.libraryResolver?.loadLibrary(c),x=Re(l);void 0===l.moduleFactory[m.uri]&&(l.moduleFactory[m.uri]=function Ft(l,u,c=!1){const m={isAsync:c,moduleFactory:u.moduleFactory,moduleFactoryMap:{},libraryResolver:new v.s(null,l.loadedModules),globalScope:Dt(u.vars,c?je:Pe,u.customfunctions),customfunctions:u.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:dt,lrucache:u.lrucache,timeReference:u.timeReference??null,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};let x=z(m,l);""===x&&(x="lc.voidOperation; ");let M="";M=c?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+x+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+x+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ";const $=m.moduleFactory,ae=m.moduleFactoryMap,ce=m.exports,fe={};for(const Se in ce)fe[Se]=void 0!==m.mangleMap[Se]?m.mangleMap[Se]:Se;const Ve={lc:p.n,lang:st,mangles:m.mangleMap,prepareModule:Se=>new ot(Se),prepare(Se,Ee){let We=Se.spatialReference;null==We&&(We=new k.Z({wkid:102100}));const nt=Ct(Se.vars,Se.customfunctions,Ee,Se.timeReference);return{localStack:[],isAsync:Ee,exports:ce,exportmangle:fe,gdefs:{},moduleFactory:$,moduleFactoryMap:ae,moduleSingletons:Se.moduleSingletons,mangleMap:this.mangles,spatialReference:We,globalScope:nt,abortSignal:null==Se.abortSignal?{aborted:!1}:Se.abortSignal,localScope:null,services:Se.services,console:Se.console?Se.console:dt,lrucache:Se.lrucache,timeReference:Se.timeReference??null,interceptor:Se.interceptor,symbols:{symbolCounter:0},depthCounter:Se.depthCounter}}};return new Function("context","spatialReference",M).bind(Ve)}(m.syntax,{interceptor:l.interceptor,services:l.services,moduleFactory:l.moduleFactory,lrucache:l.lrucache,timeReference:l.timeReference??null,libraryResolver:l.libraryResolver,customfunctions:l.customfunctions,vars:{}},l.isAsync)),l.moduleFactoryMap[x]=m.uri;let M="";if(M=l.isAsync?"(yield lang.loadModule('"+x+"', runtimeCtx) ); ":"lang.loadModule('"+x+"', runtimeCtx); ",void 0!==l.globalScope[c])return"gscope['"+c+"']="+M;if(void 0!==l.globalScope._SymbolsMap[c])return"gscope['"+l.globalScope._SymbolsMap[c]+"']="+M;let $="";return l.undeclaredGlobalsInFunctions.has(c)?($=l.undeclaredGlobalsInFunctions.get(c).manglename,l.undeclaredGlobalsInFunctions.delete(c)):$=Re(l),l.globalScope._SymbolsMap[c]=$,l.mangleMap[c]=$,"gscope[lang.setAssig('"+$+"', runtimeCtx)]="+M}(l,u);case"ExportNamedDeclaration":return function ve(l,u){const c=z(l,u.declaration);if("FunctionDeclaration"===u.declaration.type)l.exports[u.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===u.declaration.type)for(const m of u.declaration.declarations)l.exports[m.id.name.toLowerCase()]="variable";return c}(l,u);case"ReturnStatement":return function ne(l,u){return null===u.argument?"return lc.voidOperation":"return "+z(l,u.argument)}(l,u);case"IfStatement":return Ae(l,u);case"ExpressionStatement":return function he(l,u){return"AssignmentExpression"===u.expression.type?"lastStatement = lc.voidOperation; "+z(l,u.expression)+"; \n ":"lastStatement = "+z(l,u.expression)+"; "}(l,u);case"AssignmentExpression":return function de(l,u){const c=z(l,u.right);let m=null,x="";if("MemberExpression"===u.left.type)return m=z(l,u.left.object),!0===u.left.computed?x=z(l,u.left.property):(x="'"+u.left.property.name+"'",Ie(u.left.property.name)),"lang.assignmember("+m+","+x+",'"+u.operator+"',"+c+")";if(m=u.left.name.toLowerCase(),Ie(m),null!==l.localScope){if(void 0!==l.localScope[m])return"lscope['"+m+"']=lang.assign("+c+",'"+u.operator+"', lscope['"+m+"'])";if(void 0!==l.localScope._SymbolsMap[m])return"lscope['"+l.localScope._SymbolsMap[m]+"']=lang.assign("+c+",'"+u.operator+"', lscope['"+l.localScope._SymbolsMap[m]+"'])"}if(void 0!==l.globalScope[m])return"gscope['"+m+"']=lang.assign("+c+",'"+u.operator+"', gscope['"+m+"'])";if(void 0!==l.globalScope._SymbolsMap[m])return"gscope['"+l.globalScope._SymbolsMap[m]+"']=lang.assign("+c+",'"+u.operator+"', gscope['"+l.globalScope._SymbolsMap[m]+"'])";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(m))return"gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(m).manglename+"',runtimeCtx)]=lang.assign("+c+",'"+u.operator+"', gscope['"+l.undeclaredGlobalsInFunctions.get(m).manglename+"'])";const M={manglename:Re(l),node:u.argument};return l.undeclaredGlobalsInFunctions.set(m,M),"gscope[lang.chkAssig('"+M.manglename+"',runtimeCtx)]=lang.assign("+c+",'"+u.operator+"', gscope['"+M.manglename+"'])"}throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"UpdateExpression":return function G(l,u){let c=null,m="";if("MemberExpression"===u.argument.type)return c=z(l,u.argument.object),!0===u.argument.computed?m=z(l,u.argument.property):(m="'"+u.argument.property.name+"'",Ie(u.argument.property.name)),"lang.memberupdate("+c+","+m+",'"+u.operator+"',"+u.prefix+")";if(c=u.argument.name.toLowerCase(),Ie(c),null!==l.localScope){if(void 0!==l.localScope[c])return"lang.update(lscope, '"+c+"','"+u.operator+"',"+u.prefix+")";if(void 0!==l.localScope._SymbolsMap[c])return"lang.update(lscope, '"+l.localScope._SymbolsMap[c]+"','"+u.operator+"',"+u.prefix+")"}if(void 0!==l.globalScope[c])return"lang.update(gscope, '"+c+"','"+u.operator+"',"+u.prefix+")";if(void 0!==l.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+l.globalScope._SymbolsMap[c]+"','"+u.operator+"',"+u.prefix+")";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(c))return"lang.update(gscope,lang.chkAssig( '"+l.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx),'"+u.operator+"',"+u.prefix+")";const x={manglename:Re(l),node:u.argument};return l.undeclaredGlobalsInFunctions.set(c,x),"lang.update(gscope, lang.chkAssig('"+x.manglename+"',runtimeCtx),'"+u.operator+"',"+u.prefix+")"}throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"BreakStatement":return"break";case"ContinueStatement":return"continue";case"TemplateLiteral":return function At(l,u){try{const c=[];let m=0;for(const x of u.quasis)c.push(x.value?JSON.stringify(x.value.cooked):JSON.stringify("")),!1===x.tail&&(c.push(u.expressions[m]?"lang.castString(lang.aCheck("+z(l,u.expressions[m])+", 'TemplateLiteral'))":""),m++);return"(["+c.join(",")+"]).join('')"}catch(c){throw c}}(l,u);case"TemplateElement":return JSON.stringify(u.value?u.value.cooked:"");case"ForStatement":return function Q(l,u){let c="lastStatement = lc.voidOperation; \n";null!==u.init&&(c+=z(l,u.init)+"; ");const m=Le(l),x=Le(l);return c+="var "+m+" = true; ",c+="\n do { ",null!==u.update&&(c+=" if ("+m+"===false) {\n "+z(l,u.update)+"  \n}\n "+m+"=false; \n"),null!==u.test&&(c+="var "+x+" = "+z(l,u.test)+"; ",c+="if ("+x+"===false) { break; } else if ("+x+"!==true) { lang.error('"+f.rH.BooleanConditionRequired+"');   }\n"),c+=z(l,u.body),null!==u.update&&(c+="\n "+z(l,u.update)),c+="\n"+m+" = true; \n} while(true);  lastStatement = lc.voidOperation; ",c}(l,u);case"ForInStatement":return function T(l,u){const c=Le(l),m=Le(l),x=Le(l);let M="var "+c+" = "+z(l,u.right)+";\n";"VariableDeclaration"===u.left.type&&(M+=z(l,u.left));let $="VariableDeclaration"===u.left.type?u.left.declarations[0].id.name:u.left.name;$=$.toLowerCase(),Ie($);let ae="";null!==l.localScope&&(void 0!==l.localScope[$]?ae="lscope['"+$+"']":void 0!==l.localScope._SymbolsMap[$]&&(ae="lscope['"+l.localScope._SymbolsMap[$]+"']"));let ce="";if(""===ae)if(void 0!==l.globalScope[$])ae="gscope['"+$+"']";else if(void 0!==l.globalScope._SymbolsMap[$])ae="gscope['"+l.globalScope._SymbolsMap[$]+"']";else if(null!==l.localScope)if(l.undeclaredGlobalsInFunctions.has($))ae="gscope['"+l.undeclaredGlobalsInFunctions.get($).manglename+"']",ce=l.undeclaredGlobalsInFunctions.get($).manglename;else{const fe={manglename:Re(l),node:u.left};l.undeclaredGlobalsInFunctions.set($,fe),ae="gscope['"+fe.manglename+"']",ce=fe.manglename}return ce&&(M+="lang.chkAssig('"+ce+"',runtimeCtx); \n"),M+="if ("+c+"===null) {  lastStatement = lc.voidOperation; }\n ",M+="else if (lc.isArray("+c+") || lc.isString("+c+")) {",M+="var "+m+"="+c+".length; \n",M+="for(var "+x+"=0; "+x+"<"+m+"; "+x+"++) {\n",M+=ae+"="+x+";\n",M+=z(l,u.body),M+="\n}\n",M+=" lastStatement = lc.voidOperation; \n",M+=" \n}\n",M+="else if (lc.isImmutableArray("+c+")) {",M+="var "+m+"="+c+".length(); \n",M+="for(var "+x+"=0; "+x+"<"+m+"; "+x+"++) {\n",M+=ae+"="+x+";\n",M+=z(l,u.body),M+="\n}\n",M+=" lastStatement = lc.voidOperation; \n",M+=" \n}\n",M+="else if (( "+c+" instanceof lang.Dictionary) || ( "+c+" instanceof lang.Feature)) {",M+="var "+m+"="+c+".keys(); \n",M+="for(var "+x+"=0; "+x+"<"+m+".length; "+x+"++) {\n",M+=ae+"="+m+"["+x+"];\n",M+=z(l,u.body),M+="\n}\n",M+=" lastStatement = lc.voidOperation; \n",M+=" \n}\n",l.isAsync&&(M+="else if (lc.isFeatureSet("+c+")) {",M+="var "+m+"="+c+".iterator(runtimeCtx.abortSignal); \n",M+="for(var "+x+"=lang. graphicToFeature( yield "+m+".next(),"+c+", runtimeCtx); "+x+"!=null; "+x+"=lang. graphicToFeature( yield "+m+".next(),"+c+", runtimeCtx)) {\n",M+=ae+"="+x+";\n",M+=z(l,u.body),M+="\n}\n",M+=" lastStatement = lc.voidOperation; \n",M+=" \n}\n"),M+="else { lastStatement = lc.voidOperation; } \n",M}(l,u);case"WhileStatement":return function re(l,u){let c="lastStatement = lc.voidOperation; \n";const m=Le(l);return c+=`\n  var ${m} = true;\n    do {\n      ${m} = ${z(l,u.test)};\n      if (${m}==false) {\n        break;\n      }\n      if (${m}!==true) {\n        lang.error('${f.rH.BooleanConditionRequired}');\n      }\n      ${z(l,u.body)}\n    }\n    while (${m} !== false);\n    lastStatement = lc.voidOperation;\n  `,c}(l,u);case"Identifier":return function Ne(l,u){try{const c=u.name.toLowerCase();if(Ie(c),null!==l.localScope){if(void 0!==l.localScope[c])return"lscope['"+c+"']";if(void 0!==l.localScope._SymbolsMap[c])return"lscope['"+l.localScope._SymbolsMap[c]+"']"}if(void 0!==l.globalScope[c])return"gscope['"+c+"']";if(void 0!==l.globalScope._SymbolsMap[c])return"gscope['"+l.globalScope._SymbolsMap[c]+"']";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(c))return"gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx)]";const m={manglename:Re(l),node:u.argument};return l.undeclaredGlobalsInFunctions.set(c,m),"gscope[lang.chkAssig('"+m.manglename+"',runtimeCtx)]"}throw new f.OF(l,f.rH.InvalidIdentifier,u)}catch(c){throw c}}(l,u);case"MemberExpression":return function Me(l,u){try{let c;return!0===u.computed?c=z(l,u.property):(c="'"+u.property.name+"'",Ie(u.property.name)),"lang.member("+z(l,u.object)+","+c+")"}catch(c){throw c}}(l,u);case"Literal":return null==u.value?"null":JSON.stringify(u.value);case"CallExpression":return function qe(l,u){try{if("MemberExpression"===u.callee.type){let x;!0===u.callee.computed?x=z(l,u.callee.property):(x="'"+u.callee.property.name+"'",Ie(u.callee.property.name));let M="[";for(let $=0;$<u.arguments.length;$++)$>0&&(M+=", "),M+=z(l,u.arguments[$]);return M+="]",l.isAsync?"(yield lang.callModuleFunction("+z(l,u.callee.object)+","+M+","+x+",runtimeCtx))":"lang.callModuleFunction("+z(l,u.callee.object)+","+M+","+x+",runtimeCtx)"}if("Identifier"!==u.callee.type)throw new f.OF(l,f.rH.FuncionNotFound,u);const c=u.callee.name.toLowerCase();if("iif"===c)return function lt(l,u){try{if(3!==u.arguments.length)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);const c=Le(l);return`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${c} = ${z(l,u.arguments[0])};\n       \n        if (${c} === true) {\n          return  ${z(l,u.arguments[1])};\n        }\n        else if (${c} === false) {\n          return ${z(l,u.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${l.isAsync?"})}()))":"}()"}`}catch(c){throw c}}(l,u);if("when"===c)return function Fe(l,u){try{if(u.arguments.length<3)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);if(u.arguments.length%2==0)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);const c=Le(l);let m="var ";for(let x=0;x<u.arguments.length-1;x+=2)m+=`${c} = lang.mustBoolean(${z(l,u.arguments[x])}, runtimeCtx);\n      if (${c} === true ) {\n        return ${z(l,u.arguments[x+1])} \n      }\n`;return`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${m}\n        return ${z(l,u.arguments[u.arguments.length-1])}\n        ${l.isAsync?"})}()))":"}()"}`}catch(c){throw c}}(l,u);if("decode"===c)return function Et(l,u){try{if(u.arguments.length<2)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);if(2===u.arguments.length)return`(${z(l,u.arguments[1])})`;if((u.arguments.length-1)%2==0)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);const c=Le(l),m=Le(l);let x="var ";for(let M=1;M<u.arguments.length-1;M+=2)x+=`${m} = ${z(l,u.arguments[M])};\n      if (lang.binary(${m}, ${c}, "==") === true ) {\n        return ${z(l,u.arguments[M+1])} \n      }\n`;return`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${c} = ${z(l,u.arguments[0])};\n        ${x}\n        return ${z(l,u.arguments[u.arguments.length-1])}\n        ${l.isAsync?"})}()))":"}()"}`}catch(c){throw c}}(l,u);let m="";if(null!==l.localScope&&(void 0!==l.localScope[c]?m="lscope['"+c+"']":void 0!==l.localScope._SymbolsMap[c]&&(m="lscope['"+l.localScope._SymbolsMap[c]+"']")),""===m)if(void 0!==l.globalScope[c])m="gscope['"+c+"']";else if(void 0!==l.globalScope._SymbolsMap[c])m="gscope['"+l.globalScope._SymbolsMap[c]+"']";else if(null!==l.localScope)if(l.undeclaredGlobalsInFunctions.has(c))m="gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx)]";else{const x={manglename:Re(l),node:u.argument};l.undeclaredGlobalsInFunctions.set(c,x),m="gscope[lang.chkAssig('"+x.manglename+"',runtimeCtx)]"}if(""!==m){let x="[";for(let M=0;M<u.arguments.length;M++)M>0&&(x+=", "),x+=z(l,u.arguments[M]);return x+="]",l.isAsync?"(yield lang.callfunc("+m+","+x+",runtimeCtx) )":"lang.callfunc("+m+","+x+",runtimeCtx)"}throw new f.OF(l,f.rH.FuncionNotFound,u)}catch(c){throw c}}(l,u);case"UnaryExpression":return function ht(l,u){try{return"lang.unary("+z(l,u.argument)+",'"+u.operator+"')"}catch(c){throw c}}(l,u);case"BinaryExpression":return function Oe(l,u){try{return"lang.binary("+z(l,u.left)+","+z(l,u.right)+",'"+u.operator+"')"}catch(c){throw c}}(l,u);case"LogicalExpression":return function pt(l,u){try{if("AssignmentExpression"===u.left.type||"UpdateExpression"===u.left.type)throw new f.OF(l,f.rH.LogicalExpressionOnlyBoolean,u);if("AssignmentExpression"===u.right.type||"UpdateExpression"===u.right.type)throw new f.OF(l,f.rH.LogicalExpressionOnlyBoolean,u);if("&&"===u.operator||"||"===u.operator)return"(lang.logicalCheck("+z(l,u.left)+") "+u.operator+" lang.logicalCheck("+z(l,u.right)+"))";throw new f.OF(null,f.rH.LogicExpressionOrAnd,null)}catch(c){throw c}}(l,u);case"ArrayExpression":return function Ge(l,u){try{const c=[];for(let m=0;m<u.elements.length;m++)c.push("Literal"===u.elements[m].type?z(l,u.elements[m]):"lang.aCheck("+z(l,u.elements[m])+",'ArrayExpression')");return"["+c.join(",")+"]"}catch(c){throw c}}(l,u);case"ObjectExpression":return function Z(l,u){let c="lang.dictionary([";for(let m=0;m<u.properties.length;m++){const x=u.properties[m];Ie(x.key.name),m>0&&(c+=","),c+="lang.strCheck("+("Identifier"===x.key.type?"'"+x.key.name+"'":z(l,x.key))+",'ObjectExpression'),lang.aCheck("+z(l,x.value)+", 'ObjectExpression')"}return c+="])",c}(l,u);case"Property":return function h(l,u){throw new f.OF(l,f.rH.NeverReach,u)}(l,u);case"Array":throw new f.OF(l,f.rH.NeverReach,u);default:throw new f.OF(l,f.rH.Unrecognised,u)}}catch(c){throw c}}function Be(l,u){return"BlockStatement"===u.type?z(l,u):"ReturnStatement"===u.type||"BreakStatement"===u.type||"ContinueStatement"===u.type?z(l,u)+"; ":"UpdateExpression"===u.type?"lastStatement = "+z(l,u)+"; ":"ExpressionStatement"===u.type?z(l,u):"ObjectExpression"===u.type?"lastStatement = "+z(l,u)+"; ":z(l,u)+"; "}function Ae(l,u){if("AssignmentExpression"===u.test.type||"UpdateExpression"===u.test.type)throw new f.OF(l,f.rH.BooleanConditionRequired,u);return`if (lang.mustBoolean(${z(l,u.test)}, runtimeCtx) === true) {\n    ${Be(l,u.consequent)}\n  } `+(null!==u.alternate?"IfStatement"===u.alternate.type?" else "+Ae(l,u.alternate):` else {\n      ${Be(l,u.alternate)}\n    }\n`:" else {\n      lastStatement = lc.voidOperation;\n    }\n")}function pe(l,u){let c="";for(let m=0;m<u.body.length;m++)"EmptyStatement"!==u.body[m].type&&(c+="ReturnStatement"===u.body[m].type||"BreakStatement"===u.body[m].type||"ContinueStatement"===u.body[m].type?z(l,u.body[m])+"; \n":"UpdateExpression"===u.body[m].type||"ObjectExpression"===u.body[m].type?"lastStatement = "+z(l,u.body[m])+"; \n":z(l,u.body[m])+" \n");return c}function Ie(l){if("iif"===l)throw new f.kq;if("decode"===l)throw new f.kq;if("when"===l)throw new f.kq}const Pe={};function Re(l){return l.symbols.symbolCounter++,"_T"+l.symbols.symbolCounter.toString()}function Le(l){return l.symbols.symbolCounter++,"_Tvar"+l.symbols.symbolCounter.toString()}(0,P.r)(Pe,A),(0,H.r)(Pe,A),(0,W.r)(Pe,A),(0,L.r)(Pe,A),(0,w.r)(Pe,A),Pe.iif=function(l,u){try{return A(l,u,(c,m,x)=>{throw new f.aV(l,f.rH.Unrecognised,u)})}catch(c){throw c}},Pe.decode=function(l,u){try{return A(l,u,(c,m,x)=>{throw new f.aV(l,f.rH.Unrecognised,u)})}catch(c){throw c}},Pe.when=function(l,u){try{return A(l,u,(c,m,x)=>{throw new f.aV(l,f.rH.Unrecognised,u)})}catch(c){throw c}};const je={};for(const l in Pe)je[l]=new g.Bx(Pe[l]);(0,N.registerFunctions)(Pe,A);for(const l in Pe)Pe[l]=new g.Bx(Pe[l]);const at=function(){};at.prototype=Pe;const be=function(){};function Dt(l,u,c){const m={};l||(l={}),c||(c={}),m._SymbolsMap={},m.textformatting=1,m.infinity=1,m.pi=1;for(const x in u)m[x]=1;for(const x in c)m[x]=1;for(const x in l)m[x]=1;return m}function Ct(l,u,c,m){const x=c?new be:new at;l||(l={}),u||(u={});const M=new V.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});M.immutable=!1,x._SymbolsMap={textformatting:1,infinity:1,pi:1},x.textformatting=M,x.infinity=Number.POSITIVE_INFINITY,x.pi=Math.PI;for(const $ in u)x[$]=u[$],x._SymbolsMap[$]=1;for(const $ in l)x._SymbolsMap[$]=1,x[$]=l[$]&&"esri.Graphic"===l[$].declaredClass?E.Z.createFromGraphic(l[$],m??null):l[$];return x}function Ye(l,u){const c={mode:u,compiled:!0,functions:{},signatures:[],standardFunction:A,standardFunctionAsync:A,evaluateIdentifier:gt};for(let m=0;m<l.length;m++)l[m].registerFunctions(c);if("sync"===u){for(const m in c.functions)Pe[m]=new g.Bx(c.functions[m]),at.prototype[m]=Pe[m];for(let m=0;m<c.signatures.length;m++)(0,Y.gW)(c.signatures[m],"sync")}else{for(const m in c.functions)je[m]=new g.Bx(c.functions[m]),be.prototype[m]=je[m];for(let m=0;m<c.signatures.length;m++)(0,Y.gW)(c.signatures[m],"async")}}function gt(l,u){const c=u.name;if("_SymbolsMap"===c)throw new f.aV(l,f.rH.InvalidIdentifier,null);if(l.localStack.length>0){if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==l.localStack[l.localStack.length-1][c])return l.localStack[l.localStack.length-1][c];const x=l.mangleMap[c];if(void 0!==x&&void 0!==l.localStack[l.localStack.length-1][x])return l.localStack[l.localStack.length-1][x]}if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==l.globalScope[c]||1===l.globalScope._SymbolsMap[c])return l.globalScope[c];const m=l.mangleMap[c];return void 0!==m?l.globalScope[m]:void 0}be.prototype=je,Ye([q.A],"sync"),Ye([q.A],"async");let ct=0;const st={error(l){throw new f.aV(null,l,null)},__awaiter:(l,u,c,m)=>new Promise((x,M)=>{function $(fe){try{ce(m.next(fe))}catch(Ve){M(Ve)}}function ae(fe){try{ce(m.throw(fe))}catch(Ve){M(Ve)}}function ce(fe){fe.done?x(fe.value):fe.value&&fe.value.then?fe.value.then($,ae):(ct++,ct%100==0?setTimeout(()=>{ct=0,$(fe.value)},0):$(fe.value))}ce((m=m.apply(l,u||[])).next())}),functionDepthchecker:(l,u)=>function(){if(u.depthCounter.depth++,u.localStack.push([]),u.depthCounter.depth>64)throw new f.aV(null,f.rH.MaximumCallDepth,null);const c=l.apply(this,arguments);return(0,te.y8)(c)?c.then(m=>(u.depthCounter.depth--,u.localStack.length=u.localStack.length-1,m)):(u.depthCounter.depth--,u.localStack.length=u.localStack.length-1,c)},chkAssig(l,u){if(void 0===u.gdefs[l])throw new f.aV(u,f.rH.InvalidIdentifier,null);return l},mustBoolean(l,u){if(!0===l||!1===l)return l;throw new f.aV(u,f.rH.BooleanConditionRequired,null)},setAssig:(l,u)=>(u.gdefs[l]=1,l),castString:l=>(0,p.j)(l),aCheck(l,u){if((0,p.i)(l))throw new f.aV(null,"ArrayExpression"===u?f.rH.NoFunctionInArray:"ObjectExpression"===u?f.rH.NoFunctionInDictionary:f.rH.NoFunctionInTemplateLiteral,null);return l===p.v?null:l},Dictionary:V.Z,Feature:E.Z,UserDefinedCompiledFunction:class C extends g.Rm{constructor(u,c){super(),this.paramCount=c,this.fn=u}createFunction(u){return(...c)=>{if(c.length!==this.paramCount)throw new f.aV(u,f.rH.WrongNumberOfParameters,null);return this.fn(...c)}}call(u,c){return this.fn(...c.arguments)}marshalledCall(u,c,m,x){return x(u,c,(M,$,ae)=>{ae=ae.map(fe=>!(0,p.i)(fe)||fe instanceof g.Vg?fe:(0,g.aq)(fe,u,x));const ce=this.call(m,{arguments:ae});return(0,te.y8)(ce)?ce.then(fe=>(0,g.aq)(fe,m,x)):ce})}},dictionary(l){const u={},c=new Map;for(let x=0;x<l.length;x+=2){if((0,p.i)(l[x+1]))throw new f.aV(null,f.rH.NoFunctionInDictionary,null);if(!1===(0,p.c)(l[x]))throw new f.aV(null,f.rH.KeyMustBeString,null);let M=l[x].toString();const $=M.toLowerCase();c.has($)?M=c.get($):c.set($,M),u[M]=l[x+1]===p.v?null:l[x+1]}const m=new V.Z(u);return m.immutable=!1,m},strCheck(l){if(!1===(0,p.c)(l))throw new f.aV(null,f.rH.KeyMustBeString,null);return l},unary(l,u){if((0,p.a)(l)){if("!"===u)return!l;if("-"===u)return-1*(0,p.g)(l);if("+"===u)return 1*(0,p.g)(l);if("~"===u)return~(0,p.g)(l);throw new f.aV(null,f.rH.UnsupportedUnaryOperator,null)}if("-"===u)return-1*(0,p.g)(l);if("+"===u)return 1*(0,p.g)(l);if("~"===u)return~(0,p.g)(l);throw new f.aV(null,f.rH.UnsupportedUnaryOperator,null)},logicalCheck(l){if(!1===(0,p.a)(l))throw new f.aV(null,f.rH.LogicExpressionOrAnd,null);return l},logical(l,u,c){if((0,p.a)(l)&&(0,p.a)(u))switch(c){case"||":return l||u;case"&&":return l&&u;default:throw new f.aV(null,f.rH.LogicExpressionOrAnd,null)}throw new f.aV(null,f.rH.LogicExpressionOrAnd,null)},binary(l,u,c){switch(c){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,p.u)((0,p.g)(l),(0,p.g)(u),c);case"==":case"=":return(0,p.s)(l,u);case"!=":return!(0,p.s)(l,u);case"<":case">":case"<=":case">=":return(0,p.r)(l,u,c);case"+":return(0,p.c)(l)||(0,p.c)(u)?(0,p.j)(l)+(0,p.j)(u):(0,p.g)(l)+(0,p.g)(u);case"-":return(0,p.g)(l)-(0,p.g)(u);case"*":return(0,p.g)(l)*(0,p.g)(u);case"/":return(0,p.g)(l)/(0,p.g)(u);case"%":return(0,p.g)(l)%(0,p.g)(u);default:throw new f.aV(null,f.rH.UnsupportedOperator,null)}},assign(l,u,c){switch(u){case"=":return l===p.v?null:l;case"/=":return(0,p.g)(c)/(0,p.g)(l);case"*=":return(0,p.g)(c)*(0,p.g)(l);case"-=":return(0,p.g)(c)-(0,p.g)(l);case"+=":return(0,p.c)(c)||(0,p.c)(l)?(0,p.j)(c)+(0,p.j)(l):(0,p.g)(c)+(0,p.g)(l);case"%=":return(0,p.g)(c)%(0,p.g)(l);default:throw new f.aV(null,f.rH.UnsupportedOperator,null)}},update(l,u,c,m){const x=(0,p.g)(l[u]);return l[u]="++"===c?x+1:x-1,!1===m?x:"++"===c?x+1:x-1},graphicToFeature:(l,u,c)=>null===l?null:E.Z.createFromGraphicLikeObject(l.geometry,l.attributes,u,c.timeReference),memberupdate(l,u,c,m){let x;if((0,p.m)(l)){if(!(0,p.b)(u))throw new f.aV(null,f.rH.ArrayAccessorMustBeNumber,null);if(u<0&&(u=l.length+u),u<0||u>=l.length)throw new f.aV(null,f.rH.OutOfBounds,null);x=(0,p.g)(l[u]),l[u]="++"===c?x+1:x-1}else if(l instanceof V.Z){if(!1===(0,p.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0!==l.hasField(u))throw new f.aV(null,f.rH.FieldNotFound,null,{key:u});x=(0,p.g)(l.field(u)),l.setField(u,"++"===c?x+1:x-1)}else if((0,p.w)(l)){if(!1===(0,p.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0!==l.hasField(u))throw new f.aV(null,f.rH.FieldNotFound,null);x=(0,p.g)(l.field(u)),l.setField(u,"++"===c?x+1:x-1)}else{if((0,p.x)(l))throw new f.aV(null,f.rH.Immutable,null);if(!(l instanceof ot))throw new f.aV(null,f.rH.InvalidIdentifier,null);if(!1===(0,p.c)(u))throw new f.aV(null,f.rH.ModuleAccessorMustBeString,null);if(!0!==l.hasGlobal(u))throw new f.aV(null,f.rH.ModuleExportNotFound,null);x=(0,p.g)(l.global(u)),l.setGlobal(u,"++"===c?x+1:x-1)}return!1===m?x:"++"===c?x+1:x-1},assignmember(l,u,c,m){if((0,p.m)(l)){if(!(0,p.b)(u))throw new f.aV(null,f.rH.ArrayAccessorMustBeNumber,null);if(u<0&&(u=l.length+u),u<0||u>l.length)throw new f.aV(null,f.rH.OutOfBounds,null);if(u===l.length){if("="!==c)throw new f.aV(null,f.rH.OutOfBounds,null);l[u]=this.assign(m,c,l[u])}else l[u]=this.assign(m,c,l[u])}else if(l instanceof V.Z){if(!1===(0,p.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0===l.hasField(u))l.setField(u,this.assign(m,c,l.field(u)));else{if("="!==c)throw new f.aV(null,f.rH.FieldNotFound,null);l.setField(u,this.assign(m,c,null))}}else if((0,p.w)(l)){if(!1===(0,p.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0===l.hasField(u))l.setField(u,this.assign(m,c,l.field(u)));else{if("="!==c)throw new f.aV(null,f.rH.FieldNotFound,null);l.setField(u,this.assign(m,c,null))}}else{if((0,p.x)(l))throw new f.aV(null,f.rH.Immutable,null);if(!(l instanceof ot))throw new f.aV(null,f.rH.InvalidIdentifier,null);if(!1===(0,p.c)(u))throw new f.aV(null,f.rH.ModuleAccessorMustBeString,null);if(!l.hasGlobal(u))throw new f.aV(null,f.rH.ModuleExportNotFound,null);l.setGlobal(u,this.assign(m,c,l.global(u)))}},member(l,u){if(null===l)throw new f.aV(null,f.rH.MemberOfNull,null);if(l instanceof V.Z||(0,p.w)(l)){if((0,p.c)(u))return l.field(u);throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if(l instanceof F.Z){if((0,p.c)(u))return(0,L.Z)(l,u,null,null);throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if((0,p.m)(l)){if((0,p.b)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=l.length+u),u>=l.length||u<0)throw new f.aV(null,f.rH.OutOfBounds,null);return l[u]}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if((0,p.c)(l)){if((0,p.b)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=l.length+u),u>=l.length||u<0)throw new f.aV(null,f.rH.OutOfBounds,null);return l[u]}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if((0,p.x)(l)){if((0,p.b)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=l.length()+u),u>=l.length()||u<0)throw new f.aV(null,f.rH.OutOfBounds,null);return l.get(u)}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if(l instanceof ot){if((0,p.c)(u))return l.global(u);throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)},callfunc:(l,u,c)=>l.call(c,{arguments:u,preparsed:!0}),loadModule(l,u){const c=u.moduleFactoryMap[l];if(u.moduleSingletons[c])return u.moduleSingletons[c];const m=u.moduleFactory[c]({vars:{},moduleSingletons:u.moduleSingletons,depthCounter:u.depthCounter,console:u.console,abortSignal:u.abortSignal,isAsync:u.isAsync,services:u.services,lrucache:u.lrucache,timeReference:u.timeReference?u.timeReference:null,interceptor:u.interceptor},u.spatialReference);return u.moduleSingletons[c]=m,m},callModuleFunction(l,u,c,m){if(!(l instanceof ot))throw new f.aV(null,f.rH.FuncionNotFound,null);const x=l.global(c);if(!1===(0,p.i)(x))throw new f.aV(null,f.rH.CallNonFunction,null);return x.call(m,{preparsed:!0,arguments:u})}};function dt(l){console.log(l)}function mt(l,u,c=!1){null===u&&(u={vars:{},customfunctions:{}});let m=null;l.usesModules&&(m=new v.s(null,l.loadedModules));const x={isAsync:c,globalScope:Dt(u.vars,c?je:Pe,u.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:u.customfunctions,libraryResolver:m,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:dt,lrucache:u.lrucache,timeReference:u.timeReference??null,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};let M=z(x,l);""===M&&(M="lc.voidOperation; "),x.undeclaredGlobalsInFunctions.size>0&&x.undeclaredGlobalsInFunctions.forEach(Ee=>{throw new f.OF(u,f.rH.InvalidIdentifier,Ee.node)});let $="";$=c?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+M+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+M+"\n return lastStatement; } \n return this.postProcess(mainBody()); ";const ae=x.moduleFactory,ce=x.moduleFactoryMap,fe=x.exports,Ve={};for(const Ee in fe)Ve[Ee]=void 0!==x.mangleMap[Ee]?x.mangleMap[Ee]:Ee;const Se={lc:p.n,lang:st,mangles:x.mangleMap,postProcess(Ee){if(Ee instanceof p.R&&(Ee=Ee.value),Ee instanceof p.I&&(Ee=Ee.value),Ee===p.v&&(Ee=null),Ee===p.o)throw new f.aV(null,f.rH.IllegalResult,null);if(Ee===p.p)throw new f.aV(null,f.rH.IllegalResult,null);if((0,p.i)(Ee))throw new f.aV(null,f.rH.IllegalResult,null);return Ee},prepare(Ee,We){let nt=Ee.spatialReference;null==nt&&(nt=k.Z.WebMercator);const St=Ct(Ee.vars,Ee.customfunctions,We,Ee.timeReference);return{localStack:[],isAsync:We,moduleFactory:ae,moduleFactoryMap:ce,mangleMap:this.mangles,moduleSingletons:{},exports:fe,gdefs:{},exportmangle:Ve,spatialReference:nt,globalScope:St,abortSignal:null==Ee.abortSignal?{aborted:!1}:Ee.abortSignal,localScope:null,services:Ee.services,console:Ee.console?Ee.console:dt,lrucache:Ee.lrucache,timeReference:Ee.timeReference??null,interceptor:Ee.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return new Function("context","spatialReference",$).bind(Se)}function et(){return(et=(0,_.Z)(function*(){return Ye([yield j.e(8302).then(j.bind(j,38302))],"async"),!0})).apply(this,arguments)}class ot extends S.P{constructor(u){super(null),this.moduleContext=u}hasGlobal(u){return void 0===this.moduleContext.exports[u]&&(u=u.toLowerCase()),void 0!==this.moduleContext.exports[u]}setGlobal(u,c){const m=this.moduleContext.globalScope,x=u.toLowerCase();if((0,p.i)(c))throw new f.aV(null,f.rH.AssignModuleFunction,null);m[this.moduleContext.exportmangle[x]]=c}global(u){const c=this.moduleContext.globalScope;u=u.toLowerCase();const m=c[this.moduleContext.exportmangle[u]];if(void 0===m)throw new f.aV(null,f.rH.InvalidIdentifier,null);if((0,p.i)(m)&&!(m instanceof g.Vg)){const x=new g.Vg;return x.fn=m,x.parameterEvaluator=A,x.context=this.moduleContext,c[this.moduleContext.exportmangle[u]]=x,x}return m}}var xe,ie,l,vt=j(84792),yt=j(84687);(l=xe||(xe={})).Break="break",l.Continue="continue",l.Else="else",l.False="false",l.For="for",l.From="from",l.Function="function",l.If="if",l.Import="import",l.Export="export",l.In="in",l.Null="null",l.Return="return",l.True="true",l.Var="var",l.While="while",function(l){l.AssignmentExpression="AssignmentExpression",l.ArrayExpression="ArrayExpression",l.BlockComment="BlockComment",l.BlockStatement="BlockStatement",l.BinaryExpression="BinaryExpression",l.BreakStatement="BreakStatement",l.CallExpression="CallExpression",l.ContinueStatement="ContinueStatement",l.EmptyStatement="EmptyStatement",l.ExpressionStatement="ExpressionStatement",l.ExportNamedDeclaration="ExportNamedDeclaration",l.ExportSpecifier="ExportSpecifier",l.ForStatement="ForStatement",l.ForInStatement="ForInStatement",l.FunctionDeclaration="FunctionDeclaration",l.Identifier="Identifier",l.IfStatement="IfStatement",l.ImportDeclaration="ImportDeclaration",l.ImportDefaultSpecifier="ImportDefaultSpecifier",l.LineComment="LineComment",l.Literal="Literal",l.LogicalExpression="LogicalExpression",l.MemberExpression="MemberExpression",l.ObjectExpression="ObjectExpression",l.Program="Program",l.Property="Property",l.ReturnStatement="ReturnStatement",l.TemplateElement="TemplateElement",l.TemplateLiteral="TemplateLiteral",l.UnaryExpression="UnaryExpression",l.UpdateExpression="UpdateExpression",l.VariableDeclaration="VariableDeclaration",l.VariableDeclarator="VariableDeclarator",l.WhileStatement="WhileStatement"}(ie||(ie={}));const Ue=["++","--"],rt=["-","+","!","~"],B=["=","/=","*=","%=","+=","-="],b=["||","&&"],U={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10};var J;!function(l){l[l.Unknown=0]="Unknown",l[l.BooleanLiteral=1]="BooleanLiteral",l[l.EOF=2]="EOF",l[l.Identifier=3]="Identifier",l[l.Keyword=4]="Keyword",l[l.NullLiteral=5]="NullLiteral",l[l.NumericLiteral=6]="NumericLiteral",l[l.Punctuator=7]="Punctuator",l[l.StringLiteral=8]="StringLiteral",l[l.Template=10]="Template"}(J||(J={}));const oe=["Unknown","Boolean","<end>","Identifier","Keyword","Null","Numeric","Punctuator","String","RegularExpression","Template"];var R;!function(l){l.InvalidModuleUri="InvalidModuleUri",l.ForInOfLoopInitializer="ForInOfLoopInitializer",l.IdentiferExpected="IdentiferExpected",l.InvalidEscapedReservedWord="InvalidEscapedReservedWord",l.InvalidExpression="InvalidExpression",l.InvalidFunctionIdentifier="InvalidFunctionIdentifier",l.InvalidHexEscapeSequence="InvalidHexEscapeSequence",l.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment",l.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn",l.InvalidTemplateHead="InvalidTemplateHead",l.InvalidVariableAssignment="InvalidVariableAssignment",l.KeyMustBeString="KeyMustBeString",l.NoFunctionInsideBlock="NoFunctionInsideBlock",l.NoFunctionInsideFunction="NoFunctionInsideFunction",l.ModuleExportRootOnly="ModuleExportRootOnly",l.ModuleImportRootOnly="ModuleImportRootOnly",l.PunctuatorExpected="PunctuatorExpected",l.TemplateOctalLiteral="TemplateOctalLiteral",l.UnexpectedBoolean="UnexpectedBoolean",l.UnexpectedEndOfScript="UnexpectedEndOfScript",l.UnexpectedIdentifier="UnexpectedIdentifier",l.UnexpectedKeyword="UnexpectedKeyword",l.UnexpectedNull="UnexpectedNull",l.UnexpectedNumber="UnexpectedNumber",l.UnexpectedPunctuator="UnexpectedPunctuator",l.UnexpectedString="UnexpectedString",l.UnexpectedTemplate="UnexpectedTemplate",l.UnexpectedToken="UnexpectedToken"}(R||(R={}));const ee={[R.InvalidModuleUri]:"Module uri must be a text literal.",[R.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[R.IdentiferExpected]:"'${value}' is an invalid identifier.",[R.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[R.InvalidExpression]:"Invalid expression.",[R.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[R.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[R.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[R.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",[R.InvalidTemplateHead]:"Invalid template structure.",[R.InvalidVariableAssignment]:"Invalid variable assignment.",[R.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[R.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[R.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[R.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[R.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[R.PunctuatorExpected]:"'${value}' expected.",[R.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[R.UnexpectedBoolean]:"Unexpected boolean literal.",[R.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[R.UnexpectedIdentifier]:"Unexpected identifier.",[R.UnexpectedKeyword]:"Unexpected keyword.",[R.UnexpectedNull]:"Unexpected null literal.",[R.UnexpectedNumber]:"Unexpected number.",[R.UnexpectedPunctuator]:"Unexpected ponctuator.",[R.UnexpectedString]:"Unexpected text literal.",[R.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[R.UnexpectedToken]:"Unexpected token '${value}'."};class se extends Error{constructor({code:u,index:c,line:m,column:x,len:M=0,description:$,data:ae}){super(`${$??u}`),this.declaredRootClass="esri.arcade.lib.parsingerror",this.name="ParsingError",this.code=u,this.index=c,this.line=m,this.column=x,this.len=M,this.data=ae,this.description=$,this.range={start:{line:m,column:x-1},end:{line:m,column:x+M}},Error.captureStackTrace?.(this,se)}}function D(l){return l?.type===ie.BlockStatement}function O(l){return l?.type===ie.BlockComment}function le(l){return l?.type===ie.EmptyStatement}function jn(l){return l?.type===ie.VariableDeclarator}function Zt(l,u){return!!u&&u.loc.end.line===l.loc.start.line&&u.loc.end.column<=l.loc.start.column}function cn(l,u){return l.range[0]>=u.range[0]&&l.range[1]<=u.range[1]}class zn{constructor(){this.comments=[],this._nodeStack=[],this._newComments=[]}insertInnerComments(u){if(!D(u)||0!==u.body.length)return;const c=[];for(let m=this._newComments.length-1;m>=0;--m){const x=this._newComments[m];u.range[1]>=x.range[0]&&(c.unshift(x),this._newComments.splice(m,1))}c.length&&(u.innerComments=c)}attachTrailingComments(u){if(!u)return;const c=this._nodeStack[this._nodeStack.length-1];if(D(u)&&cn(c,u))for(let x=this._newComments.length-1;x>=0;--x){const M=this._newComments[x];cn(M,u)&&(c.trailingComments=[...c.trailingComments??[],M],this._newComments.splice(x,1))}let m=[];if(this._newComments.length>0)for(let x=this._newComments.length-1;x>=0;--x){const M=this._newComments[x];Zt(M,c)?(c.trailingComments=[...c.trailingComments??[],M],this._newComments.splice(x,1)):Zt(M,u)&&(m.unshift(M),this._newComments.splice(x,1))}c?.trailingComments&&Zt(c.trailingComments[0],u)&&(m=[...m,...c.trailingComments],delete c.trailingComments),m.length>0&&(u.trailingComments=m)}attachLeadingComments(u){if(!u)return;let c;for(;this._nodeStack.length>0;){const M=this._nodeStack[this._nodeStack.length-1];if(!(u.range[0]<=M.range[0]))break;c=M,this._nodeStack.pop()}const m=[],x=[];if(c){for(let M=(c.leadingComments?.length??0)-1;M>=0;--M){const $=c.leadingComments[M];u.range[0]>=$.range[1]?(m.unshift($),c.leadingComments.splice(M,1)):jn(u)&&!O($)&&(x.unshift($),c.leadingComments.splice(M,1))}return 0===c.leadingComments?.length&&delete c.leadingComments,m.length&&(u.leadingComments=m),void(x.length&&(u.trailingComments=[...x,...u.trailingComments??[]]))}for(let M=this._newComments.length-1;M>=0;--M){const $=this._newComments[M];u.range[0]>=$.range[0]&&(m.unshift($),this._newComments.splice(M,1))}m.length&&(u.leadingComments=m)}attachComments(u){if(function me(l){return l?.type===ie.Program}(u)&&u.body.length>0){const c=this._nodeStack[this._nodeStack.length-1];return c?(c.trailingComments=[...c.trailingComments??[],...this._newComments],this._newComments.length=0,void this._nodeStack.pop()):(u.trailingComments=[...this._newComments],void(this._newComments.length=0))}this.attachTrailingComments(u),this.attachLeadingComments(u),this.insertInnerComments(u),this._nodeStack.push(u)}collectComment(u){this.comments.push(u),this._newComments.push(u)}}function Gt(l,u){const c=ee[l];return u?c.replace(/\${(.*?)}/g,(m,x)=>u[x]?.toString()??""):c}class Wn{constructor(u=!1){this.tolerant=u,this.errors=[]}recordError(u){this.errors.push(u)}tolerate(u){if(!this.tolerant)throw u;this.recordError(u)}throwError(u){throw u.description=u.description??Gt(u.code,u.data),new se(u)}tolerateError(u){u.description=u.description??Gt(u.code,u.data);const c=new se(u);if(!this.tolerant)throw c;this.recordError(c)}}function dn(l,u){if(!l)throw new Error("ASSERT: "+u)}const fn={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Ce={fromCodePoint:l=>l<65536?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10))+String.fromCharCode(56320+(l-65536&1023)),isWhiteSpace:l=>32===l||9===l||11===l||12===l||160===l||l>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(l),isLineTerminator:l=>10===l||13===l||8232===l||8233===l,isIdentifierStart:l=>36===l||95===l||l>=65&&l<=90||l>=97&&l<=122||92===l||l>=128&&fn.NonAsciiIdentifierStart.test(Ce.fromCodePoint(l)),isIdentifierPart:l=>36===l||95===l||l>=65&&l<=90||l>=97&&l<=122||l>=48&&l<=57||92===l||l>=128&&fn.NonAsciiIdentifierPart.test(Ce.fromCodePoint(l)),isDecimalDigit:l=>l>=48&&l<=57,isHexDigit:l=>l>=48&&l<=57||l>=65&&l<=70||l>=97&&l<=102,isOctalDigit:l=>l>=48&&l<=55};function hn(l){return"0123456789abcdef".indexOf(l.toLowerCase())}function jt(l){return"01234567".indexOf(l)}const xt=[[],[],[]];Ue.forEach(l=>xt[l.length-1].push(l)),rt.forEach(l=>xt[l.length-1].push(l)),b.forEach(l=>xt[l.length-1].push(l)),B.forEach(l=>xt[l.length-1].push(l)),["|","&",">>","<<",">>>","^","==","!=","<","<=",">",">=","+","-","*","/","%"].forEach(l=>xt[l.length-1].push(l));class Kn{constructor(u,c){this.source=u,this.errorHandler=c,this._length=u.length,this.index=0,this.lineNumber=1,this.lineStart=0,this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(u){this.index=u.index,this.lineNumber=u.lineNumber,this.lineStart=u.lineStart,this.curlyStack=u.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(u=R.UnexpectedToken){this.errorHandler.throwError({code:u,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}tolerateUnexpectedToken(u=R.UnexpectedToken){this.errorHandler.tolerateError({code:u,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(u){const c=[],m=this.index-u,x={start:{line:this.lineNumber,column:this.index-this.lineStart-u},end:{line:0,column:0}};for(;!this.eof();){const M=this.source.charCodeAt(this.index);if(++this.index,Ce.isLineTerminator(M))return x&&(x.end={line:this.lineNumber,column:this.index-this.lineStart-1},c.push({multiLine:!1,start:m+u,end:this.index-1,range:[m,this.index-1],loc:x})),13===M&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,c}return x&&(x.end={line:this.lineNumber,column:this.index-this.lineStart},c.push({multiLine:!1,start:m+u,end:this.index,range:[m,this.index],loc:x})),c}skipMultiLineComment(){const u=[],c=this.index-2,m={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){const x=this.source.charCodeAt(this.index);if(Ce.isLineTerminator(x))13===x&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===x){if(47===this.source.charCodeAt(this.index+1))return this.index+=2,m&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},u.push({multiLine:!0,start:c+2,end:this.index-2,range:[c,this.index],loc:m})),u;++this.index}else++this.index}return m&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},u.push({multiLine:!0,start:c+2,end:this.index,range:[c,this.index],loc:m})),this.tolerateUnexpectedToken(),u}scanComments(){let u=[];for(;!this.eof();){let c=this.source.charCodeAt(this.index);if(Ce.isWhiteSpace(c))++this.index;else if(Ce.isLineTerminator(c))++this.index,13===c&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index;else{if(47!==c)break;if(c=this.source.charCodeAt(this.index+1),47===c){this.index+=2;const m=this.skipSingleLineComment(2);u=[...u,...m]}else{if(42!==c)break;{this.index+=2;const m=this.skipMultiLineComment();u=[...u,...m]}}}}return u}isKeyword(u){switch((u=u.toLowerCase()).length){case 2:return u===xe.If||u===xe.In;case 3:return u===xe.Var||u===xe.For;case 4:return u===xe.Else;case 5:return u===xe.Break||u===xe.While;case 6:return u===xe.Return||u===xe.Import||u===xe.Export;case 8:return u===xe.Function||u===xe.Continue;default:return!1}}codePointAt(u){let c=this.source.charCodeAt(u);if(c>=55296&&c<=56319){const m=this.source.charCodeAt(u+1);m>=56320&&m<=57343&&(c=1024*(c-55296)+m-56320+65536)}return c}scanHexEscape(u){const c="u"===u?4:2;let m=0;for(let x=0;x<c;++x){if(this.eof()||!Ce.isHexDigit(this.source.charCodeAt(this.index)))return null;m=16*m+hn(this.source[this.index++])}return String.fromCharCode(m)}scanUnicodeCodePointEscape(){let u=this.source[this.index],c=0;for("}"===u&&this.throwUnexpectedToken();!this.eof()&&(u=this.source[this.index++],Ce.isHexDigit(u.charCodeAt(0)));)c=16*c+hn(u);return(c>1114111||"}"!==u)&&this.throwUnexpectedToken(),Ce.fromCodePoint(c)}getIdentifier(){const u=this.index++;for(;!this.eof();){const c=this.source.charCodeAt(this.index);if(92===c)return this.index=u,this.getComplexIdentifier();if(c>=55296&&c<57343)return this.index=u,this.getComplexIdentifier();if(!Ce.isIdentifierPart(c))break;++this.index}return this.source.slice(u,this.index)}getComplexIdentifier(){let u,c=this.codePointAt(this.index),m=Ce.fromCodePoint(c);for(this.index+=m.length,92===c&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,u=this.scanUnicodeCodePointEscape()):(u=this.scanHexEscape("u"),null!==u&&"\\"!==u&&Ce.isIdentifierStart(u.charCodeAt(0))||this.throwUnexpectedToken()),m=u);!this.eof()&&(c=this.codePointAt(this.index),Ce.isIdentifierPart(c));)u=Ce.fromCodePoint(c),m+=u,this.index+=u.length,92===c&&(m=m.substring(0,m.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,u=this.scanUnicodeCodePointEscape()):(u=this.scanHexEscape("u"),null!==u&&"\\"!==u&&Ce.isIdentifierPart(u.charCodeAt(0))||this.throwUnexpectedToken()),m+=u);return m}octalToDecimal(u){let c="0"!==u,m=jt(u);return!this.eof()&&Ce.isOctalDigit(this.source.charCodeAt(this.index))&&(c=!0,m=8*m+jt(this.source[this.index++]),"0123".includes(u)&&!this.eof()&&Ce.isOctalDigit(this.source.charCodeAt(this.index))&&(m=8*m+jt(this.source[this.index++]))),{code:m,octal:c}}scanIdentifier(){let u;const c=this.index,m=92===this.source.charCodeAt(c)?this.getComplexIdentifier():this.getIdentifier();if(u=1===m.length?J.Identifier:this.isKeyword(m)?J.Keyword:m.toLowerCase()===xe.Null?J.NullLiteral:m.toLowerCase()===xe.True||m.toLowerCase()===xe.False?J.BooleanLiteral:J.Identifier,u!==J.Identifier&&c+m.length!==this.index){const x=this.index;this.index=c,this.tolerateUnexpectedToken(R.InvalidEscapedReservedWord),this.index=x}return{type:u,value:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}}scanPunctuator(){const u=this.index;let c=this.source[this.index];switch(c){case"(":case"{":"{"===c&&this.curlyStack.push("{"),++this.index;break;case".":case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;case"}":++this.index,this.curlyStack.pop();break;default:for(let m=xt.length;m>0;m--)if(c=this.source.substring(this.index,this.index+m),xt[m-1].includes(c)){this.index+=m;break}}return this.index===u&&this.throwUnexpectedToken(),{type:J.Punctuator,value:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanHexLiteral(u){let c="";for(;!this.eof()&&Ce.isHexDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];return 0===c.length&&this.throwUnexpectedToken(),Ce.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:J.NumericLiteral,value:parseInt("0x"+c,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanBinaryLiteral(u){let c="";for(;!this.eof();){const m=this.source[this.index];if("0"!==m&&"1"!==m)break;c+=this.source[this.index++]}if(0===c.length&&this.throwUnexpectedToken(),!this.eof()){const m=this.source.charCodeAt(this.index);(Ce.isIdentifierStart(m)||Ce.isDecimalDigit(m))&&this.throwUnexpectedToken()}return{type:J.NumericLiteral,value:parseInt(c,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanOctalLiteral(u,c){let m="",x=!1;for(Ce.isOctalDigit(u.charCodeAt(0))?(x=!0,m="0"+this.source[this.index++]):++this.index;!this.eof()&&Ce.isOctalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];return x||0!==m.length||this.throwUnexpectedToken(),(Ce.isIdentifierStart(this.source.charCodeAt(this.index))||Ce.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:J.NumericLiteral,value:parseInt(m,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}}scanNumericLiteral(){const u=this.index;let c=this.source[u];dn(Ce.isDecimalDigit(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");let m="";if("."!==c){if(m=this.source[this.index++],c=this.source[this.index],"0"===m){if("x"===c||"X"===c)return++this.index,this.scanHexLiteral(u);if("b"===c||"B"===c)return++this.index,this.scanBinaryLiteral(u);if("o"===c||"O"===c)return this.scanOctalLiteral(c,u)}for(;Ce.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];c=this.source[this.index]}if("."===c){for(m+=this.source[this.index++];Ce.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];c=this.source[this.index]}if("e"===c||"E"===c)if(m+=this.source[this.index++],c=this.source[this.index],"+"!==c&&"-"!==c||(m+=this.source[this.index++]),Ce.isDecimalDigit(this.source.charCodeAt(this.index)))for(;Ce.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];else this.throwUnexpectedToken();return Ce.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:J.NumericLiteral,value:parseFloat(m),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanStringLiteral(){const u=this.index;let c=this.source[u];dn("'"===c||'"'===c,"String literal must starts with a quote"),++this.index;let m=!1,x="";for(;!this.eof();){let M=this.source[this.index++];if(M===c){c="";break}if("\\"===M)if(M=this.source[this.index++],M&&Ce.isLineTerminator(M.charCodeAt(0)))++this.lineNumber,"\r"===M&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(M){case"u":if("{"===this.source[this.index])++this.index,x+=this.scanUnicodeCodePointEscape();else{const $=this.scanHexEscape(M);null===$&&this.throwUnexpectedToken(),x+=$}break;case"x":{const $=this.scanHexEscape(M);null===$&&this.throwUnexpectedToken(R.InvalidHexEscapeSequence),x+=$;break}case"n":x+="\n";break;case"r":x+="\r";break;case"t":x+="\t";break;case"b":x+="\b";break;case"f":x+="\f";break;case"v":x+="\v";break;case"8":case"9":x+=M,this.tolerateUnexpectedToken();break;default:if(M&&Ce.isOctalDigit(M.charCodeAt(0))){const $=this.octalToDecimal(M);m=$.octal||m,x+=String.fromCharCode($.code)}else x+=M}else{if(Ce.isLineTerminator(M.charCodeAt(0)))break;x+=M}}return""!==c&&(this.index=u,this.throwUnexpectedToken()),{type:J.StringLiteral,value:x,lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanTemplate(){let u="",c=!1;const m=this.index,x="`"===this.source[m];let M=!1,$=2;for(++this.index;!this.eof();){let ae=this.source[this.index++];if("`"===ae){$=1,M=!0,c=!0;break}if("$"!==ae)if("\\"!==ae)Ce.isLineTerminator(ae.charCodeAt(0))?(++this.lineNumber,"\r"===ae&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,u+="\n"):u+=ae;else if(ae=this.source[this.index++],Ce.isLineTerminator(ae.charCodeAt(0)))++this.lineNumber,"\r"===ae&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(ae){case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="\t";break;case"u":if("{"===this.source[this.index])++this.index,u+=this.scanUnicodeCodePointEscape();else{const ce=this.index,fe=this.scanHexEscape(ae);null!==fe?u+=fe:(this.index=ce,u+=ae)}break;case"x":{const ce=this.scanHexEscape(ae);null===ce&&this.throwUnexpectedToken(R.InvalidHexEscapeSequence),u+=ce;break}case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="\v";break;default:"0"===ae?(Ce.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(R.TemplateOctalLiteral),u+="\0"):Ce.isOctalDigit(ae.charCodeAt(0))?this.throwUnexpectedToken(R.TemplateOctalLiteral):u+=ae}else{if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,c=!0;break}u+=ae}}return c||this.throwUnexpectedToken(),x||this.curlyStack.pop(),{type:J.Template,value:this.source.slice(m+1,this.index-$),cooked:u,head:x,tail:M,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}}lex(){if(this.eof())return{type:J.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const u=this.source.charCodeAt(this.index);return Ce.isIdentifierStart(u)?this.scanIdentifier():40===u||41===u||59===u?this.scanPunctuator():39===u||34===u?this.scanStringLiteral():46===u?Ce.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():Ce.isDecimalDigit(u)?this.scanNumericLiteral():96===u||125===u&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():u>=55296&&u<57343&&Ce.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}}var Ke,Tt;function mn(l,u=0){let c=l.start-l.lineStart,m=l.lineNumber;return c<0&&(c+=u,m--),{index:l.start,line:m,column:c}}function pn(l){return[{index:l.range[0],...l.loc.start},{index:l.range[1],...l.loc.end}]}function Dn(l){return U[l]??0}(function(l){l[l.None=0]="None",l[l.Function=1]="Function",l[l.IfClause=2]="IfClause",l[l.ForLoop=4]="ForLoop",l[l.WhileLoop=8]="WhileLoop"})(Ke||(Ke={})),function(l){l[l.AsObject=0]="AsObject",l[l.Automatic=1]="Automatic"}(Tt||(Tt={}));class Jn{constructor(u,c={},m){this.delegate=m,this.hasLineTerminator=!1,this.options={tokens:"boolean"==typeof c.tokens&&c.tokens,comments:"boolean"==typeof c.comments&&c.comments,tolerant:"boolean"==typeof c.tolerant&&c.tolerant},this.options.comments&&(this.commentHandler=new zn),this.errorHandler=new Wn(this.options.tolerant),this.scanner=new Kn(u,this.errorHandler),this.context={isAssignmentTarget:!1,blockContext:Ke.None,curlyParsingType:Tt.AsObject},this.rawToken={type:J.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.endMarker={index:0,line:this.scanner.lineNumber,column:0},this.readNextRawToken(),this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(u,c,{validTypes:m,invalidTypes:x}){m?.some(M=>u.type===M)||x?.some(M=>u.type===M)&&this.throwError(R.InvalidExpression,c)}throwError(u,c,m=this.endMarker){const{index:x,line:M,column:$}=c;this.errorHandler.throwError({code:u,index:x,line:M,column:$+1,len:m.index-x-1})}tolerateError(u,c){throw new Error("######################################### !!!")}unexpectedTokenError(u={}){const{rawToken:c}=u;let m,{code:x,data:M}=u;if(c){if(!x)switch(c.type){case J.EOF:x=R.UnexpectedEndOfScript;break;case J.Identifier:x=R.UnexpectedIdentifier;break;case J.NumericLiteral:x=R.UnexpectedNumber;break;case J.StringLiteral:x=R.UnexpectedString;break;case J.Template:x=R.UnexpectedTemplate}m=c.value.toString()}else m="ILLEGAL";x=x??R.UnexpectedToken,M||(M={value:m});const $=Gt(x,M);if(c)return new se({code:x,index:c.start,line:c.lineNumber,column:c.start-c.lineStart+1,len:c.end-c.start-1,data:M,description:$});const{index:ae,line:ce}=this.endMarker;return new se({code:x,index:ae,line:ce,column:this.endMarker.column+1,data:M,description:$})}throwUnexpectedToken(u={}){throw u.rawToken=u.rawToken??this.rawToken,this.unexpectedTokenError(u)}collectComments(u){const{commentHandler:c}=this;c&&u.length&&u.forEach(m=>{const x={type:m.multiLine?ie.BlockComment:ie.LineComment,value:this.getSourceValue(m),range:m.range,loc:m.loc};c.collectComment(x)})}peekAhead(u){const m=this.scanner.saveState(),x=u.call(this,()=>(this.scanner.scanComments(),this.scanner.lex()));return this.scanner.restoreState(m),x}getSourceValue(u){return this.scanner.source.slice(u.start,u.end)}convertToToken(u){return{type:oe[u.type],value:this.getSourceValue(u),range:[u.start,u.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index,this.endMarker.line=this.scanner.lineNumber,this.endMarker.column=this.scanner.index-this.scanner.lineStart;const u=this.rawToken;this.collectComments(this.scanner.scanComments()),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart),this.rawToken=this.scanner.lex(),this.hasLineTerminator=u.lineNumber!==this.rawToken.lineNumber,this.options.tokens&&this.rawToken.type!==J.EOF&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(u){return{range:[u.index,this.endMarker.index],loc:{start:{line:u.line,column:u.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(u){return(this.delegate||this.commentHandler)&&(this.commentHandler?.attachComments(u),this.delegate?.(u)),u}expectPunctuator(u){const c=this.rawToken;this.matchPunctuator(u)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:c,code:R.PunctuatorExpected,data:{value:u}})}expectKeyword(u){this.rawToken.type!==J.Keyword||this.rawToken.value.toLowerCase()!==u?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}expectContextualKeyword(u){this.rawToken.type!==J.Identifier||this.rawToken.value.toLowerCase()!==u?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}matchKeyword(u){return this.rawToken.type===J.Keyword&&this.rawToken.value.toLowerCase()===u}matchContextualKeyword(u){return this.rawToken.type===J.Identifier&&this.rawToken.value===u}matchPunctuator(u){return this.rawToken.type===J.Punctuator&&this.rawToken.value===u}getMatchingPunctuator(u){if("string"==typeof u&&(u=u.split("")),this.rawToken.type===J.Punctuator&&u?.length)return u.find(this.matchPunctuator,this)}isolateCoverGrammar(u){const c=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;const m=u.call(this);return this.context.isAssignmentTarget=c,m}inheritCoverGrammar(u){const c=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;const m=u.call(this);return this.context.isAssignmentTarget=this.context.isAssignmentTarget&&c,m}withBlockContext(u,c){const m=this.context.blockContext;this.context.blockContext=this.context.blockContext|u;const x=this.context.curlyParsingType;this.context.curlyParsingType=Tt.Automatic;const M=c.call(this);return this.context.blockContext=m,this.context.curlyParsingType=x,M}consumeSemicolon(){if(this.matchPunctuator(";"))this.readNextRawToken();else if(!this.hasLineTerminator)return this.rawToken.type===J.EOF||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,void(this.endMarker.column=this.startMarker.column)):void this.throwUnexpectedToken({rawToken:this.rawToken})}parsePrimaryExpression(){const u=this.captureStartMarker(),c=this.rawToken;switch(c.type){case J.Identifier:return this.readNextRawToken(),this.finalize({type:ie.Identifier,name:c.value,...this.getItemLocation(u)});case J.NumericLiteral:case J.StringLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value,raw:this.getSourceValue(c),isString:"string"==typeof c.value,...this.getItemLocation(u)});case J.BooleanLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value.toLowerCase()===xe.True,raw:this.getSourceValue(c),isString:!1,...this.getItemLocation(u)});case J.NullLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:ie.Literal,value:null,raw:this.getSourceValue(c),isString:!1,...this.getItemLocation(u)});case J.Template:return this.parseTemplateLiteral();case J.Punctuator:switch(c.value){case"(":return this.inheritCoverGrammar(this.parseGroupExpression);case"[":return this.inheritCoverGrammar(this.parseArrayInitializer);case"{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case J.Keyword:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){const u=this.captureStartMarker();this.expectPunctuator("[");const c=[];for(;!this.matchPunctuator("]");){const m=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(R.InvalidExpression,m)):(c.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||this.expectPunctuator(","))}return this.expectPunctuator("]"),this.finalize({type:ie.ArrayExpression,elements:c,...this.getItemLocation(u)})}parseObjectPropertyKey(){const u=this.captureStartMarker(),c=this.rawToken;switch(c.type){case J.StringLiteral:return this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value,raw:this.getSourceValue(c),isString:!0,...this.getItemLocation(u)});case J.Identifier:case J.BooleanLiteral:case J.NullLiteral:case J.Keyword:return this.readNextRawToken(),this.finalize({type:ie.Identifier,name:c.value,...this.getItemLocation(u)});default:this.throwError(R.KeyMustBeString,u)}}parseObjectProperty(){const u=this.rawToken,c=this.captureStartMarker(),m=this.parseObjectPropertyKey();let x=!1,M=null;return this.matchPunctuator(":")?(this.readNextRawToken(),M=this.inheritCoverGrammar(this.parseAssignmentExpression)):u.type===J.Identifier?(x=!0,M=this.finalize({type:ie.Identifier,name:u.value,...this.getItemLocation(c)})):this.throwUnexpectedToken({rawToken:this.rawToken}),this.finalize({type:ie.Property,kind:"init",key:m,value:M,shorthand:x,...this.getItemLocation(c)})}parseObjectExpression(){const u=this.captureStartMarker();this.expectPunctuator("{");const c=[];for(;!this.matchPunctuator("}");)c.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");return this.expectPunctuator("}"),this.finalize({type:ie.ObjectExpression,properties:c,...this.getItemLocation(u)})}parseTemplateElement(u=!1){const c=this.rawToken;c.type!==J.Template&&this.throwUnexpectedToken({rawToken:c}),u&&!c.head&&this.throwUnexpectedToken({code:R.InvalidTemplateHead,rawToken:c});const m=this.captureStartMarker();this.readNextRawToken();const{value:x,cooked:M,tail:$}=c,ae=this.finalize({type:ie.TemplateElement,value:{raw:x,cooked:M},tail:$,...this.getItemLocation(m)});return ae.loc.start.column++,ae.loc.end.column=ae.loc.end.column-($?1:2),ae}parseTemplateLiteral(){const u=this.captureStartMarker(),c=[],m=[];let x=this.parseTemplateElement(!0);for(m.push(x);!x.tail;)c.push(this.parseExpression()),x=this.parseTemplateElement(),m.push(x);return this.finalize({type:ie.TemplateLiteral,quasis:m,expressions:c,...this.getItemLocation(u)})}parseGroupExpression(){this.expectPunctuator("(");const u=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.expectPunctuator(")"),u}parseArguments(){this.expectPunctuator("(");const u=[];if(!this.matchPunctuator(")"))for(;;){const c=this.isolateCoverGrammar(this.parseAssignmentExpression);if(u.push(c),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),u}parseMemberName(){const u=this.rawToken,c=this.captureStartMarker();return this.readNextRawToken(),u.type!==J.NullLiteral&&u.type!==J.Identifier&&u.type!==J.Keyword&&u.type!==J.BooleanLiteral&&this.throwUnexpectedToken({rawToken:u}),this.finalize({type:ie.Identifier,name:u.value,...this.getItemLocation(c)})}parseLeftHandSideExpression(){const u=this.captureStartMarker();let c=this.inheritCoverGrammar(this.parsePrimaryExpression);const m=this.captureStartMarker();let x;for(;x=this.getMatchingPunctuator("([.");)switch(x){case"(":{this.context.isAssignmentTarget=!1,c.type!==ie.Identifier&&c.type!==ie.MemberExpression&&this.throwError(R.IdentiferExpected,u,m);const M=this.parseArguments();c=this.finalize({type:ie.CallExpression,callee:c,arguments:M,...this.getItemLocation(u)});continue}case"[":{this.context.isAssignmentTarget=!0,this.expectPunctuator("[");const M=this.isolateCoverGrammar(this.parseExpression);this.expectPunctuator("]"),c=this.finalize({type:ie.MemberExpression,computed:!0,object:c,property:M,...this.getItemLocation(u)});continue}case".":{this.context.isAssignmentTarget=!0,this.expectPunctuator(".");const M=this.parseMemberName();c=this.finalize({type:ie.MemberExpression,computed:!1,object:c,property:M,...this.getItemLocation(u)});continue}}return c}parseUpdateExpression(){const u=this.captureStartMarker();let c=this.getMatchingPunctuator(Ue);if(c){this.readNextRawToken();const $=this.captureStartMarker(),ae=this.inheritCoverGrammar(this.parseUnaryExpression);return ae.type!==ie.Identifier&&ae.type!==ie.MemberExpression&&ae.type!==ie.CallExpression&&this.throwError(R.InvalidExpression,$),this.context.isAssignmentTarget||this.tolerateError(R.InvalidLeftHandSideInAssignment,u),this.context.isAssignmentTarget=!1,this.finalize({type:ie.UpdateExpression,operator:c,argument:ae,prefix:!0,...this.getItemLocation(u)})}const m=this.captureStartMarker(),x=this.inheritCoverGrammar(this.parseLeftHandSideExpression),M=this.captureStartMarker();return this.hasLineTerminator?x:(c=this.getMatchingPunctuator(Ue),c?(x.type!==ie.Identifier&&x.type!==ie.MemberExpression&&this.throwError(R.InvalidExpression,m,M),this.context.isAssignmentTarget||this.tolerateError(R.InvalidLeftHandSideInAssignment,u),this.readNextRawToken(),this.context.isAssignmentTarget=!1,this.finalize({type:ie.UpdateExpression,operator:c,argument:x,prefix:!1,...this.getItemLocation(u)})):x)}parseUnaryExpression(){const u=this.getMatchingPunctuator(rt);if(u){const c=this.captureStartMarker();this.readNextRawToken();const m=this.inheritCoverGrammar(this.parseUnaryExpression);return this.context.isAssignmentTarget=!1,this.finalize({type:ie.UnaryExpression,operator:u,argument:m,prefix:!0,...this.getItemLocation(c)})}return this.parseUpdateExpression()}parseBinaryExpression(){const u=this.rawToken;let c=this.inheritCoverGrammar(this.parseUnaryExpression);if(this.rawToken.type!==J.Punctuator)return c;const m=this.rawToken.value;let x=Dn(m);if(0===x)return c;this.readNextRawToken(),this.context.isAssignmentTarget=!1;const M=[u,this.rawToken];let $=c,ae=this.inheritCoverGrammar(this.parseUnaryExpression);const ce=[$,m,ae],fe=[x];for(;this.rawToken.type===J.Punctuator&&(x=Dn(this.rawToken.value))>0;){for(;ce.length>2&&x<=fe[fe.length-1];){ae=ce.pop();const Ee=ce.pop();fe.pop(),$=ce.pop(),M.pop();const We=M[M.length-1],nt=mn(We,We.lineStart);ce.push(this.finalize(this.createBinaryOrLogicalExpression(nt,Ee,$,ae)))}ce.push(this.rawToken.value),fe.push(x),M.push(this.rawToken),this.readNextRawToken(),ce.push(this.inheritCoverGrammar(this.parseUnaryExpression))}let Ve=ce.length-1;c=ce[Ve];let Se=M.pop();for(;Ve>1;){const Ee=M.pop();if(!Ee)break;const We=Se?.lineStart,nt=mn(Ee,We);c=this.finalize(this.createBinaryOrLogicalExpression(nt,ce[Ve-1],ce[Ve-2],c)),Ve-=2,Se=Ee}return c}createBinaryOrLogicalExpression(u,c,m,x){const M=b.includes(c)?ie.LogicalExpression:ie.BinaryExpression;return M===ie.BinaryExpression||(m.type!==ie.AssignmentExpression&&m.type!==ie.UpdateExpression||this.throwError(R.InvalidExpression,...pn(m)),x.type!==ie.AssignmentExpression&&x.type!==ie.UpdateExpression||this.throwError(R.InvalidExpression,...pn(m))),{type:M,operator:c,left:m,right:x,...this.getItemLocation(u)}}parseAssignmentExpression(){const u=this.captureStartMarker(),c=this.inheritCoverGrammar(this.parseBinaryExpression),m=this.captureStartMarker(),x=this.getMatchingPunctuator(B);if(!x)return c;c.type!==ie.Identifier&&c.type!==ie.MemberExpression&&this.throwError(R.InvalidExpression,u,m),this.context.isAssignmentTarget||this.tolerateError(R.InvalidLeftHandSideInAssignment,u),this.matchPunctuator("=")||(this.context.isAssignmentTarget=!1),this.readNextRawToken();const M=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize({type:ie.AssignmentExpression,left:c,operator:x,right:M,...this.getItemLocation(u)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression)}parseStatements(u){const c=[];for(;this.rawToken.type!==J.EOF&&!this.matchPunctuator(u);){const m=this.parseStatementListItem();le(m)||c.push(m)}return c}parseStatementListItem(){return this.context.isAssignmentTarget=!0,this.matchKeyword(xe.Function)?this.parseFunctionDeclaration():this.matchKeyword(xe.Export)?this.parseExportDeclaration():this.matchKeyword(xe.Import)?this.parseImportDeclaration():this.parseStatement()}parseBlock(){const u=this.captureStartMarker();this.expectPunctuator("{");const c=this.parseStatements("}");return this.expectPunctuator("}"),this.finalize({type:ie.BlockStatement,body:c,...this.getItemLocation(u)})}parseObjectStatement(){const u=this.captureStartMarker(),c=this.parseObjectExpression();return this.finalize({type:ie.ExpressionStatement,expression:c,...this.getItemLocation(u)})}parseBlockOrObjectStatement(){return this.context.curlyParsingType===Tt.AsObject||this.peekAhead(u=>{let c=u();return(c.type===J.Identifier||c.type===J.StringLiteral)&&(c=u(),c.type===J.Punctuator&&":"===c.value)})?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){const u=this.rawToken;if(u.type!==J.Identifier)return null;const c=this.captureStartMarker();return this.readNextRawToken(),this.finalize({type:ie.Identifier,name:u.value,...this.getItemLocation(c)})}parseVariableDeclarator(){const u=this.captureStartMarker(),c=this.parseIdentifier();c||this.throwUnexpectedToken({code:R.IdentiferExpected});let m=null;if(this.matchPunctuator("=")){this.readNextRawToken();const x=this.rawToken;try{m=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch{this.throwUnexpectedToken({rawToken:x,code:R.InvalidVariableAssignment})}}return this.finalize({type:ie.VariableDeclarator,id:c,init:m,...this.getItemLocation(u)})}parseVariableDeclarationList(){const u=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),u.push(this.parseVariableDeclarator());return u}parseVariableDeclaration(){const u=this.captureStartMarker();this.expectKeyword(xe.Var);const c=this.parseVariableDeclarationList();return this.consumeSemicolon(),this.finalize({type:ie.VariableDeclaration,declarations:c,kind:"var",...this.getItemLocation(u)})}parseEmptyStatement(){const u=this.captureStartMarker();return this.expectPunctuator(";"),this.finalize({type:ie.EmptyStatement,...this.getItemLocation(u)})}parseExpressionStatement(){const u=this.captureStartMarker(),c=this.parseExpression();return this.consumeSemicolon(),this.finalize({type:ie.ExpressionStatement,expression:c,...this.getItemLocation(u)})}parseIfClause(){return this.withBlockContext(Ke.IfClause,this.parseStatement)}parseIfStatement(){const u=this.captureStartMarker();this.expectKeyword(xe.If),this.expectPunctuator("(");const c=this.captureStartMarker(),m=this.parseExpression(),x=this.captureStartMarker();this.expectPunctuator(")"),m.type!==ie.AssignmentExpression&&m.type!==ie.UpdateExpression||this.throwError(R.InvalidExpression,c,x);const M=this.parseIfClause();let $=null;return this.matchKeyword(xe.Else)&&(this.readNextRawToken(),$=this.parseIfClause()),this.finalize({type:ie.IfStatement,test:m,consequent:M,alternate:$,...this.getItemLocation(u)})}parseWhileStatement(){const u=this.captureStartMarker();this.expectKeyword(xe.While),this.expectPunctuator("(");const c=this.captureStartMarker(),m=this.parseExpression(),x=this.captureStartMarker();this.expectPunctuator(")"),m.type!==ie.AssignmentExpression&&m.type!==ie.UpdateExpression||this.throwError(R.InvalidExpression,c,x);const M=this.withBlockContext(Ke.WhileLoop,this.parseStatement);return this.finalize({type:ie.WhileStatement,test:m,body:M,...this.getItemLocation(u)})}parseForStatement(){let u=null,c=null,m=null,x=null,M=null;const $=this.captureStartMarker();if(this.expectKeyword(xe.For),this.expectPunctuator("("),this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(xe.Var)){const ce=this.captureStartMarker();this.readNextRawToken();const fe=this.parseVariableDeclarationList();1===fe.length&&this.matchKeyword(xe.In)?(fe[0].init&&this.throwError(R.ForInOfLoopInitializer,ce),x=this.finalize({type:ie.VariableDeclaration,declarations:fe,kind:"var",...this.getItemLocation(ce)}),this.readNextRawToken(),M=this.parseExpression()):(this.matchKeyword(xe.In)&&this.throwError(R.InvalidLeftHandSideInForIn,ce),u=this.finalize({type:ie.VariableDeclaration,declarations:fe,kind:"var",...this.getItemLocation(ce)}),this.expectPunctuator(";"))}else{const ce=this.context.isAssignmentTarget,fe=this.captureStartMarker();u=this.inheritCoverGrammar(this.parseAssignmentExpression),this.matchKeyword(xe.In)?(this.context.isAssignmentTarget||this.tolerateError(R.InvalidLeftHandSideInForIn,fe),u.type!==ie.Identifier&&this.throwError(R.InvalidLeftHandSideInForIn,fe),this.readNextRawToken(),x=u,M=this.parseExpression(),u=null):(this.context.isAssignmentTarget=ce,this.expectPunctuator(";"))}x||(this.matchPunctuator(";")||(c=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(m=this.isolateCoverGrammar(this.parseExpression))),this.expectPunctuator(")");const ae=this.withBlockContext(Ke.ForLoop,()=>this.isolateCoverGrammar(this.parseStatement));return this.finalize(x&&M?{type:ie.ForInStatement,left:x,right:M,body:ae,...this.getItemLocation($)}:{type:ie.ForStatement,init:u,test:c,update:m,body:ae,...this.getItemLocation($)})}parseContinueStatement(){const u=this.captureStartMarker();return this.expectKeyword(xe.Continue),this.consumeSemicolon(),this.finalize({type:ie.ContinueStatement,...this.getItemLocation(u)})}parseBreakStatement(){const u=this.captureStartMarker();return this.expectKeyword(xe.Break),this.consumeSemicolon(),this.finalize({type:ie.BreakStatement,...this.getItemLocation(u)})}parseReturnStatement(){const u=this.captureStartMarker();this.expectKeyword(xe.Return);const c=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||this.rawToken.type===J.EOF)&&this.rawToken.type!==J.StringLiteral&&this.rawToken.type!==J.Template?null:this.parseExpression();return this.consumeSemicolon(),this.finalize({type:ie.ReturnStatement,argument:c,...this.getItemLocation(u)})}parseStatement(){switch(this.rawToken.type){case J.BooleanLiteral:case J.NullLiteral:case J.NumericLiteral:case J.StringLiteral:case J.Template:case J.Identifier:return this.parseExpressionStatement();case J.Punctuator:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case J.Keyword:switch(this.rawToken.value.toLowerCase()){case xe.Break:return this.parseBreakStatement();case xe.Continue:return this.parseContinueStatement();case xe.For:return this.parseForStatement();case xe.Function:return this.parseFunctionDeclaration();case xe.If:return this.parseIfStatement();case xe.Return:return this.parseReturnStatement();case xe.Var:return this.parseVariableDeclaration();case xe.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){const u=[];if(this.expectPunctuator("("),!this.matchPunctuator(")"))for(;this.rawToken.type!==J.EOF;){const c=this.parseIdentifier();if(c||this.throwUnexpectedToken({rawToken:this.rawToken,code:R.IdentiferExpected}),u.push(c),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),u}parseFunctionDeclaration(){(this.context.blockContext&Ke.Function)===Ke.Function&&this.throwUnexpectedToken({code:R.NoFunctionInsideFunction}),(this.context.blockContext&Ke.WhileLoop)!==Ke.WhileLoop&&(this.context.blockContext&Ke.IfClause)!==Ke.IfClause||this.throwUnexpectedToken({code:R.NoFunctionInsideBlock});const u=this.captureStartMarker();this.expectKeyword(xe.Function);const c=this.parseIdentifier();c||this.throwUnexpectedToken({code:R.InvalidFunctionIdentifier});const m=this.parseFormalParameters(),x=this.context.blockContext;this.context.blockContext=this.context.blockContext|Ke.Function;const M=this.parseBlock();return this.context.blockContext=x,this.finalize({type:ie.FunctionDeclaration,id:c,params:m,body:M,...this.getItemLocation(u)})}parseScript(){const u=this.captureStartMarker(),c=this.parseStatements(),m=this.finalize({type:ie.Program,body:c,...this.getItemLocation(u)});return this.options.tokens&&(m.tokens=this.tokens),this.options.tolerant&&(m.errors=this.errorHandler.errors),m}parseExportDeclaration(){this.context.blockContext!==Ke.None&&this.throwUnexpectedToken({code:R.ModuleExportRootOnly});let u=null;const c=this.captureStartMarker();return this.expectKeyword(xe.Export),this.matchKeyword(xe.Var)?u=this.parseVariableDeclaration():this.matchKeyword("function")?u=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:R.InvalidExpression}),this.finalize({type:ie.ExportNamedDeclaration,declaration:u,specifiers:[],source:null,...this.getItemLocation(c)})}parseModuleSpecifier(){const u=this.captureStartMarker(),c=this.rawToken;if(c.type===J.StringLiteral)return this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value,raw:this.getSourceValue(c),isString:!0,...this.getItemLocation(u)});this.throwError(R.InvalidModuleUri,u)}parseDefaultSpecifier(){const u=this.captureStartMarker(),c=this.parseIdentifier();return c||this.throwUnexpectedToken({code:R.IdentiferExpected}),this.finalize({type:ie.ImportDefaultSpecifier,local:c,...this.getItemLocation(u)})}parseImportDeclaration(){this.context.blockContext!==Ke.None&&this.throwUnexpectedToken({code:R.ModuleImportRootOnly});const u=this.captureStartMarker();this.expectKeyword(xe.Import);const c=this.parseDefaultSpecifier();this.expectContextualKeyword(xe.From);const m=this.parseModuleSpecifier();return this.finalize({type:ie.ImportDeclaration,specifiers:[c],source:m,...this.getItemLocation(u)})}}function kt(l,u=[]){const c=function $n(l,u,c){return new Jn(l,u,c).parseScript()}(l);if(null==c.body)throw new se({index:0,line:0,column:0,data:null,description:"",code:R.InvalidExpression});if(0===c.body.length)throw new se({index:0,line:0,column:0,data:null,description:"",code:R.InvalidExpression});if(0===c.body.length)throw new se({index:0,line:0,column:0,data:null,description:"",code:R.InvalidExpression});return c.loadedModules={},(0,Y.dN)(c,u),c}class Rt{constructor(u){const c=this;c._keys=[],c._values=[],c.length=0,u&&u.forEach(m=>{c.set(m[0],m[1])})}entries(){return[].slice.call(this.keys().map((u,c)=>[u,this._values[c]]))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(u){return this._keys.includes(u)}get(u){const c=this._keys.indexOf(u);return c>-1?this._values[c]:null}deepGet(u){if(!u||!u.length)return null;const c=(m,x)=>null==m?null:x.length?c(m instanceof Rt?m.get(x[0]):m[x[0]],x.slice(1)):m;return c(this.get(u[0]),u.slice(1))}set(u,c){const m=this,x=this._keys.indexOf(u);return x>-1?m._values[x]=c:(m._keys.push(u),m._values.push(c),m.length=m._values.length),this}sortedSet(u,c,m,x){const M=this,$=this._keys.length,ae=m||0,ce=void 0!==x?x:$-1;if(0===$)return M._keys.push(u),M._values.push(c),M;if(u===this._keys[ae])return this._values.splice(ae,0,c),this;if(u===this._keys[ce])return this._values.splice(ce,0,c),this;if(u>this._keys[ce])return this._keys.splice(ce+1,0,u),this._values.splice(ce+1,0,c),this;if(u<this._keys[ae])return this._values.splice(ae,0,c),this._keys.splice(ae,0,u),this;if(ae>=ce)return this;const fe=ae+Math.floor((ce-ae)/2);return u<this._keys[fe]?this.sortedSet(u,c,ae,fe-1):u>this._keys[fe]?this.sortedSet(u,c,fe+1,ce):this}size(){return this.length}clear(){const u=this;return u._keys.length=u.length=u._values.length=0,this}delete(u){const c=this,m=c._keys.indexOf(u);return m>-1&&(c._keys.splice(m,1),c._values.splice(m,1),c.length=c._keys.length,!0)}forEach(u){this._keys.forEach((c,m)=>{u(this._values[m],c,m)})}map(u){return this.keys().map((c,m)=>u(this._values[m],c,m))}filter(u){const c=this;return c._keys.forEach((m,x)=>{!1===u(c._values[x],m,x)&&c.delete(m)}),this}clone(){return new Rt(this.entries())}}class gn{constructor(u=20){this._maxEntries=u,this._values=new Rt}delete(u){this._values.has(u)&&this._values.delete(u)}get(u){let c=null;return this._values.has(u)&&(c=this._values.get(u),this._values.delete(u),this._values.set(u,c)),c}put(u,c){if(this._values.size()>=this._maxEntries){const m=this._values.keys()[0];this._values.delete(m)}this._values.set(u,c)}}class Je{constructor(u){this.portalUri=u}normalizeModuleUri(u){const c=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi,m=/(?<portalurl>.+)\/home\/item\.html\?id\=(?<itemid>.+)$/gi,x=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,M=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi,$=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(u.startsWith("portal+")){let ae=u.substring(7),ce="",fe=ae,Ve=!1;for(const We of[m,M,x]){const nt=We.exec(ae);if(null!==nt){const St=nt.groups;fe=St.itemid,ce=St.portalurl,Ve=!0;break}}if(!1===Ve){if(!c.test(ae))throw new f.Tu(f.TD.UnsupportedUriProtocol,{uri:u});fe=ae,ce=this.portalUri}fe.includes("/")&&(fe=fe.split("/")[0]),fe.includes("?")&&(fe=fe.split("?")[0]);let Se="current";const Ee=$.exec(fe);if(null!==Ee){const We=Ee.groups;fe=We.itemid,Se=We.versionstring}return ae=new yt.Z({url:ce}).restUrl+"/content/items/"+fe+"/resources/"+Se+".arc",{url:ae,scheme:"portal",uri:"PO:"+ae}}if(u.startsWith("mock")){if("mock"===u)return{url:"",scheme:"mock",data:'\n      export var hello = 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};const ae=u.replace("mock:","");if(void 0!==Je.mocks[ae])return{url:"",scheme:"mock",data:Je.mocks[ae],uri:u}}throw new f.Tu(f.TD.UnrecognisedUri,{uri:u})}fetchModule(u){var c=this;return(0,_.Z)(function*(){const m=Je.cachedModules.getFromCache(u.uri);if(m)return m;const x=c.fetchSource(u);Je.cachedModules.addToCache(u.uri,x);let M=null;try{M=yield x}catch($){throw Je.cachedModules.removeFromCache(u.uri),$}return M})()}fetchSource(u){return(0,_.Z)(function*(){if("portal"===u.scheme){const c=yield(0,vt.default)(u.url,{responseType:"text",query:{}});if(c.data)return kt(c.data,[])}if("mock"===u.scheme)return kt(u.data??"",[]);throw new f.Tu(f.TD.UnsupportedUriProtocol)})()}static create(u){return new Je(u)}static getDefault(){return this._default??(Je._default=Je._moduleResolverFactory())}static set moduleResolverClass(u){this._moduleResolverFactory=u,this._default=null}}Je.mocks={},Je.cachedModules=new class Yn{constructor(u=20){this._maxEntries=u,this._cache=new gn(this._maxEntries)}clear(){this._cache=new gn(this._maxEntries)}addToCache(u,c){this._cache.put(u,c)}removeFromCache(u){this._cache.delete(u)}getFromCache(u){return this._cache.get(u)}}(30),Je._default=null,Je._moduleResolverFactory=()=>{const l=yt.Z.getDefault();return new Je(l.url)};class Qn extends g.Rm{constructor(u,c){super(),this.definition=null,this.context=null,this.definition=u,this.context=c}createFunction(u){return(...c)=>{const m={spatialReference:this.context.spatialReference,console:this.context.console,timeReference:this.context.timeReference?this.context.timeReference:null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:u.depthCounter.depth+1},globalScope:this.context.globalScope};if(m.depthCounter.depth>64)throw new f.aV(u,f.rH.MaximumCallDepth,null);return zt(this.definition,m,c,null)}}call(u,c){return ut(u,c,(m,x,M)=>{const $={spatialReference:u.spatialReference,globalScope:u.globalScope,depthCounter:{depth:u.depthCounter.depth+1},libraryResolver:u.libraryResolver,exports:u.exports,timeReference:u.timeReference??null,console:u.console,lrucache:u.lrucache,interceptor:u.interceptor,localScope:{}};if($.depthCounter.depth>64)throw new f.aV(u,f.rH.MaximumCallDepth,c);return zt(this.definition,$,M,c)})}marshalledCall(u,c,m,x){return x(u,c,(M,$,ae)=>{const ce={spatialReference:u.spatialReference,globalScope:m.globalScope,depthCounter:{depth:u.depthCounter.depth+1},libraryResolver:u.libraryResolver,exports:u.exports,console:u.console,timeReference:u.timeReference??null,lrucache:u.lrucache,interceptor:u.interceptor,localScope:{}};return ae=ae.map(fe=>!(0,p.i)(fe)||fe instanceof g.Vg?fe:(0,g.aq)(fe,u,x)),(0,g.aq)(zt(this.definition,ce,ae,c),m,x)})}}class _t extends S.P{constructor(u){super(u)}global(u){const c=this.executingContext.globalScope[u.toLowerCase()];if(c.valueset||(c.value=De(this.executingContext,c.node),c.valueset=!0),(0,p.i)(c.value)&&!(c.value instanceof g.Vg)){const m=new g.Vg;m.fn=c.value,m.parameterEvaluator=ut,m.context=this.executingContext,c.value=m}return c.value}setGlobal(u,c){if((0,p.i)(c))throw new f.aV(null,f.rH.AssignModuleFunction,null);this.executingContext.globalScope[u.toLowerCase()]={value:c,valueset:!0,node:null}}hasGlobal(u){return void 0===this.executingContext.exports[u]&&(u=u.toLowerCase()),void 0!==this.executingContext.exports[u]}loadModule(u){let c=u.spatialReference;null==c&&(c=new k.Z({wkid:102100})),this.moduleScope=Cn({},u.customfunctions,u.timeReference),this.executingContext={spatialReference:c,globalScope:this.moduleScope,localScope:null,libraryResolver:new v.s(u.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},console:u.console?u.console:wn,timeReference:u.timeReference??null,lrucache:u.lrucache,interceptor:u.interceptor,depthCounter:{depth:1}},De(this.executingContext,this.source.syntax)}}function ut(l,u,c){try{return!0===u.preparsed?c(l,null,u.arguments):c(l,u,function yn(l,u){const c=[];for(let m=0;m<u.arguments.length;m++)c.push(De(l,u.arguments[m]));return c}(l,u))}catch(m){throw m}}function De(l,u){try{switch(u?.type){case"EmptyStatement":return p.v;case"VariableDeclarator":return function mr(l,u){let c=null===u.init?null:De(l,u.init);if(c===p.v&&(c=null),"Identifier"!==u.id.type)throw new f.aV(l,f.rH.InvalidIdentifier,u);const m=u.id.name.toLowerCase();return null!=l.localScope?l.localScope[m]={value:c,valueset:!0,node:u.init}:l.globalScope[m]={value:c,valueset:!0,node:u.init},p.v}(l,u);case"VariableDeclaration":return function hr(l,u){for(let c=0;c<u.declarations.length;c++)De(l,u.declarations[c]);return p.v}(l,u);case"ImportDeclaration":return function dr(l,u){const c=u.specifiers[0].local.name.toLowerCase(),m=l.libraryResolver.loadLibrary(c);let x=null;return l.libraryResolver._moduleSingletons?.has(m.uri)?x=l.libraryResolver._moduleSingletons.get(m.uri):(x=new _t(m),x.loadModule(l),l.libraryResolver._moduleSingletons?.set(m.uri,x)),l.globalScope[c]={value:x,valueset:!0,node:u},p.v}(l,u);case"ExportNamedDeclaration":return function fr(l,u){if(De(l,u.declaration),"FunctionDeclaration"===u.declaration.type)l.exports[u.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===u.declaration.type)for(const c of u.declaration.declarations)l.exports[c.id.name.toLowerCase()]="variable";return p.v}(l,u);case"BlockStatement":case"Program":return function ur(l,u){let c=p.v;for(let m=0;m<u.body.length;m++)if(c=De(l,u.body[m]),c instanceof p.R||c===p.o||c===p.p)return c;return c}(l,u);case"FunctionDeclaration":return function cr(l,u){const c=u.id.name.toLowerCase();return l.globalScope[c]={valueset:!0,node:null,value:new Qn(u,l)},p.v}(l,u);case"ReturnStatement":return function lr(l,u){if(null===u.argument)return new p.R(p.v);const c=De(l,u.argument);return new p.R(c)}(l,u);case"IfStatement":return function or(l,u){const c=De(l,u.test);if(!0===c)return De(l,u.consequent);if(!1===c)return null!==u.alternate?De(l,u.alternate):p.v;throw new f.aV(l,f.rH.BooleanConditionRequired,u)}(l,u);case"ExpressionStatement":return function sr(l,u){if("AssignmentExpression"===u.expression.type||"UpdateExpression"===u.expression.type)return De(l,u.expression);if("CallExpression"===u.expression.type){const c=De(l,u.expression);return c===p.v?p.v:new p.I(c)}{const c=De(l,u.expression);return c===p.v?p.v:new p.I(c)}}(l,u);case"AssignmentExpression":return function ar(l,u){let c=null,m="";if("MemberExpression"===u.left.type){if(c=De(l,u.left.object),!0===u.left.computed)m=De(l,u.left.property);else{if("Identifier"!==u.left.property.type)throw new f.aV(l,f.rH.InvalidIdentifier,u);m=u.left.property.name}const M=De(l,u.right);if((0,p.m)(c)){if(!(0,p.b)(m))throw new f.aV(l,f.rH.ArrayAccessorMustBeNumber,u);if(m<0&&(m=c.length+m),m<0||m>c.length)throw new f.aV(l,f.rH.OutOfBounds,u);if(m===c.length){if("="!==u.operator)throw new f.aV(l,f.rH.OutOfBounds,u);c[m]=ft(M,u.operator,c[m],u,l)}else c[m]=ft(M,u.operator,c[m],u,l)}else if(c instanceof V.Z){if(!1===(0,p.c)(m))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0===c.hasField(m))c.setField(m,ft(M,u.operator,c.field(m),u,l));else{if("="!==u.operator)throw new f.aV(l,f.rH.FieldNotFound,u,{key:m});c.setField(m,ft(M,u.operator,null,u,l))}}else if((0,p.w)(c)){if(!1===(0,p.c)(m))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0===c.hasField(m))c.setField(m,ft(M,u.operator,c.field(m),u,l));else{if("="!==u.operator)throw new f.aV(l,f.rH.FieldNotFound,u,{key:m});c.setField(m,ft(M,u.operator,null,u,l))}}else{if((0,p.x)(c))throw new f.aV(l,f.rH.Immutable,u);if(!(c instanceof _t))throw new f.aV(l,f.rH.InvalidIdentifier,u);if(!1===(0,p.c)(m))throw new f.aV(l,f.rH.ModuleAccessorMustBeString,u);if(!0!==c.hasGlobal(m))throw new f.aV(l,f.rH.ModuleExportNotFound,u);c.setGlobal(m,ft(M,u.operator,c.global(m),u,l))}return p.v}c=u.left.name.toLowerCase();const x=De(l,u.right);if(null!=l.localScope&&void 0!==l.localScope[c])return l.localScope[c]={value:ft(x,u.operator,l.localScope[c].value,u,l),valueset:!0,node:u.right},p.v;if(void 0!==l.globalScope[c])return l.globalScope[c]={value:ft(x,u.operator,l.globalScope[c].value,u,l),valueset:!0,node:u.right},p.v;throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"UpdateExpression":return function ir(l,u){let c,m=null,x="";if("MemberExpression"===u.argument.type){if(m=De(l,u.argument.object),!0===u.argument.computed?x=De(l,u.argument.property):"Identifier"===u.argument.property.type&&(x=u.argument.property.name),(0,p.m)(m)){if(!(0,p.b)(x))throw new f.aV(l,f.rH.ArrayAccessorMustBeNumber,u);if(x<0&&(x=m.length+x),x<0||x>=m.length)throw new f.aV(l,f.rH.OutOfBounds,u);c=(0,p.g)(m[x]),m[x]="++"===u.operator?c+1:c-1}else if(m instanceof V.Z){if(!1===(0,p.c)(x))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0!==m.hasField(x))throw new f.aV(l,f.rH.FieldNotFound,u);c=(0,p.g)(m.field(x)),m.setField(x,"++"===u.operator?c+1:c-1)}else if((0,p.w)(m)){if(!1===(0,p.c)(x))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0!==m.hasField(x))throw new f.aV(l,f.rH.FieldNotFound,u);c=(0,p.g)(m.field(x)),m.setField(x,"++"===u.operator?c+1:c-1)}else{if((0,p.x)(m))throw new f.aV(l,f.rH.Immutable,u);if(!(m instanceof _t))throw new f.aV(l,f.rH.InvalidParameter,u);if(!1===(0,p.c)(x))throw new f.aV(l,f.rH.ModuleAccessorMustBeString,u);if(!0!==m.hasGlobal(x))throw new f.aV(l,f.rH.ModuleExportNotFound,u);c=(0,p.g)(m.global(x)),m.setGlobal(x,"++"===u.operator?c+1:c-1)}return!1===u.prefix?c:"++"===u.operator?c+1:c-1}if(m="Identifier"===u.argument.type?u.argument.name.toLowerCase():"",!m)throw new f.aV(l,f.rH.InvalidIdentifier,u);if(null!=l.localScope&&void 0!==l.localScope[m])return c=(0,p.g)(l.localScope[m].value),l.localScope[m]={value:"++"===u.operator?c+1:c-1,valueset:!0,node:u},!1===u.prefix?c:"++"===u.operator?c+1:c-1;if(void 0!==l.globalScope[m])return c=(0,p.g)(l.globalScope[m].value),l.globalScope[m]={value:"++"===u.operator?c+1:c-1,valueset:!0,node:u},!1===u.prefix?c:"++"===u.operator?c+1:c-1;throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"BreakStatement":return p.o;case"ContinueStatement":return p.p;case"TemplateElement":return function Ar(l,u){return u.value?u.value.cooked:""}(0,u);case"TemplateLiteral":return function Cr(l,u){let c="",m=0;for(const x of u.quasis)c+=x.value?x.value.cooked:"",!1===x.tail&&(c+=u.expressions[m]?(0,p.j)(Er(De(l,u.expressions[m]),l,u)):"",m++);return c}(l,u);case"ForStatement":return function tr(l,u){null!==u.init&&De(l,u.init);const c={testResult:!0,lastAction:p.v};do{rr(l,u,c)}while(!0===c.testResult);return c.lastAction instanceof p.R?c.lastAction:p.v}(l,u);case"ForInStatement":return function er(l,u){const c=De(l,u.right);"VariableDeclaration"===u.left.type&&De(l,u.left);let m=null,x="";if("VariableDeclaration"===u.left.type){const M=u.left.declarations[0].id;"Identifier"===M.type&&(x=M.name)}else"Identifier"===u.left.type&&(x=u.left.name);if(!x)throw new f.aV(l,f.rH.InvalidIdentifier,u);if(x=x.toLowerCase(),null!=l.localScope&&void 0!==l.localScope[x]&&(m=l.localScope[x]),null===m&&void 0!==l.globalScope[x]&&(m=l.globalScope[x]),null===m)throw new f.aV(l,f.rH.InvalidIdentifier,u);if((0,p.m)(c)||(0,p.c)(c)){const M=c.length;for(let $=0;$<M;$++){m.value=$;const ae=De(l,u.body);if(ae===p.o)break;if(ae instanceof p.R)return ae}return p.v}if((0,p.x)(c)){for(let M=0;M<c.length();M++){m.value=M;const $=De(l,u.body);if($===p.o)break;if($ instanceof p.R)return $}return p.v}if(!(c instanceof V.Z||(0,p.w)(c)))return p.v;{const M=c.keys();for(let $=0;$<M.length;$++){m.value=M[$];const ae=De(l,u.body);if(ae===p.o)break;if(ae instanceof p.R)return ae}}}(l,u);case"WhileStatement":return function nr(l,u){const c={testResult:!0,lastAction:p.v};if(c.testResult=De(l,u.test),!1===c.testResult)return p.v;if(!0!==c.testResult)throw new f.aV(l,f.rH.BooleanConditionRequired,u);for(;!0===c.testResult&&(c.lastAction=De(l,u.body),c.lastAction!==p.o)&&!(c.lastAction instanceof p.R);)if(c.testResult=De(l,u.test),!0!==c.testResult&&!1!==c.testResult)throw new f.aV(l,f.rH.BooleanConditionRequired,u);return c.lastAction instanceof p.R?c.lastAction:p.v}(l,u);case"Identifier":return xn(l,u);case"MemberExpression":return function pr(l,u){try{const c=De(l,u.object);if(null===c)throw new f.aV(l,f.rH.MemberOfNull,u);if(!1===u.computed){if("Identifier"===u.property.type){if(c instanceof V.Z||(0,p.w)(c))return c.field(u.property.name);if(c instanceof F.Z)return(0,L.Z)(c,u.property.name,u,l);if(c instanceof _t){if(!c.hasGlobal(u.property.name))throw new f.aV(l,f.rH.InvalidIdentifier,u);return c.global(u.property.name)}}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}{let m=De(l,u.property);if(c instanceof V.Z||(0,p.w)(c)){if((0,p.c)(m))return c.field(m);throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if(c instanceof _t){if((0,p.c)(m))return c.global(m);throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if(c instanceof F.Z){if((0,p.c)(m))return(0,L.Z)(c,m,u,l);throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if((0,p.m)(c)){if((0,p.b)(m)&&isFinite(m)&&Math.floor(m)===m){if(m<0&&(m=c.length+m),m>=c.length||m<0)throw new f.aV(l,f.rH.OutOfBounds,u);return c[m]}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if((0,p.c)(c)){if((0,p.b)(m)&&isFinite(m)&&Math.floor(m)===m){if(m<0&&(m=c.length+m),m>=c.length||m<0)throw new f.aV(l,f.rH.OutOfBounds,u);return c[m]}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if((0,p.x)(c)){if((0,p.b)(m)&&isFinite(m)&&Math.floor(m)===m){if(m<0&&(m=c.length()+m),m>=c.length()||m<0)throw new f.aV(l,f.rH.OutOfBounds,u);return c.get(m)}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}}catch(c){throw c}}(l,u);case"Literal":return u.value;case"CallExpression":return function wr(l,u){try{if("MemberExpression"===u.callee.type){const c=De(l,u.callee.object);if(!(c instanceof _t))throw new f.aV(l,f.rH.FuncionNotFound,u);const m=!1===u.callee.computed?u.callee.property.name:De(l,u.callee.property);if(!c.hasGlobal(m))throw new f.aV(l,f.rH.FuncionNotFound,u);const x=c.global(m);if(!(0,p.i)(x))throw new f.aV(l,f.rH.CallNonFunction,u);return x.call(l,u)}if("Identifier"!==u.callee.type)throw new f.aV(l,f.rH.FuncionNotFound,u);if(null!=l.localScope&&void 0!==l.localScope[u.callee.name.toLowerCase()]){const c=l.localScope[u.callee.name.toLowerCase()];if((0,p.i)(c.value))return c.value.call(l,u);throw new f.aV(l,f.rH.CallNonFunction,u)}if(void 0!==l.globalScope[u.callee.name.toLowerCase()]){const c=l.globalScope[u.callee.name.toLowerCase()];if((0,p.i)(c.value))return c.value.call(l,u);throw new f.aV(l,f.rH.CallNonFunction,u)}throw new f.aV(l,f.rH.FuncionNotFound,u)}catch(c){throw c}}(l,u);case"UnaryExpression":return function Dr(l,u){try{const c=De(l,u.argument);if((0,p.a)(c)){if("!"===u.operator)return!c;if("-"===u.operator)return-1*(0,p.g)(c);if("+"===u.operator)return 1*(0,p.g)(c);if("~"===u.operator)return~(0,p.g)(c);throw new f.aV(l,f.rH.UnsupportedUnaryOperator,u)}if("~"===u.operator)return~(0,p.g)(c);if("-"===u.operator)return-1*(0,p.g)(c);if("+"===u.operator)return 1*(0,p.g)(c);throw new f.aV(l,f.rH.UnsupportedUnaryOperator,u)}catch(c){throw c}}(l,u);case"BinaryExpression":return function yr(l,u){try{const c=[De(l,u.left),De(l,u.right)],m=c[0],x=c[1];switch(u.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,p.u)((0,p.g)(m),(0,p.g)(x),u.operator);case"==":return(0,p.s)(m,x);case"!=":return!(0,p.s)(m,x);case"<":case">":case"<=":case">=":return(0,p.r)(m,x,u.operator);case"+":return(0,p.c)(m)||(0,p.c)(x)?(0,p.j)(m)+(0,p.j)(x):(0,p.g)(m)+(0,p.g)(x);case"-":return(0,p.g)(m)-(0,p.g)(x);case"*":return(0,p.g)(m)*(0,p.g)(x);case"/":return(0,p.g)(m)/(0,p.g)(x);case"%":return(0,p.g)(m)%(0,p.g)(x);default:throw new f.aV(l,f.rH.UnsupportedOperator,u)}}catch(c){throw c}}(l,u);case"LogicalExpression":return function xr(l,u){try{const c=De(l,u.left);if((0,p.a)(c))switch(u.operator){case"||":if(!0===c)return c;{const m=De(l,u.right);if((0,p.a)(m))return m;throw new f.aV(l,f.rH.LogicExpressionOrAnd,u)}case"&&":if(!1===c)return c;{const m=De(l,u.right);if((0,p.a)(m))return m;throw new f.aV(l,f.rH.LogicExpressionOrAnd,u)}default:throw new f.aV(l,f.rH.LogicExpressionOrAnd,u)}throw new f.aV(l,f.rH.LogicalExpressionOnlyBoolean,u)}catch(c){throw c}}(l,u);case"ArrayExpression":return function gr(l,u){try{const c=[];for(let m=0;m<u.elements.length;m++){const x=De(l,u.elements[m]);if((0,p.i)(x))throw new f.aV(l,f.rH.NoFunctionInArray,u);c.push(x===p.v?null:x)}return c}catch(c){throw c}}(l,u);case"ObjectExpression":return function Xn(l,u){const c={},m=new Map;for(let M=0;M<u.properties.length;M++){const $=De(l,u.properties[M]);if((0,p.i)($.value))throw new f.aV(l,f.rH.NoFunctionInDictionary,u);if(!1===(0,p.c)($.key))throw new f.aV(l,f.rH.KeyMustBeString,u);let ae=$.key.toString();const ce=ae.toLowerCase();m.has(ce)?ae=m.get(ce):m.set(ce,ae),c[ae]=$.value===p.v?null:$.value}const x=new V.Z(c);return x.immutable=!1,x}(l,u);case"Property":return function qn(l,u){return{key:"Identifier"===u.key.type?u.key.name:De(l,u.key),value:De(l,u.value)}}(l,u);default:throw new f.aV(l,f.rH.Unrecognised,u)}}catch(c){throw(0,f.VO)(l,u,c)}}function rr(l,u,c){if(null!==u.test){if(c.testResult=De(l,u.test),!1===c.testResult)return;if(!0!==c.testResult)throw new f.aV(l,f.rH.BooleanConditionRequired,u)}c.lastAction=De(l,u.body),c.lastAction!==p.o?c.lastAction instanceof p.R?c.testResult=!1:null!==u.update&&De(l,u.update):c.testResult=!1}function ft(l,u,c,m,x){switch(u){case"=":return l===p.v?null:l;case"/=":return(0,p.g)(c)/(0,p.g)(l);case"*=":return(0,p.g)(c)*(0,p.g)(l);case"-=":return(0,p.g)(c)-(0,p.g)(l);case"+=":return(0,p.c)(c)||(0,p.c)(l)?(0,p.j)(c)+(0,p.j)(l):(0,p.g)(c)+(0,p.g)(l);case"%=":return(0,p.g)(c)%(0,p.g)(l);default:throw new f.aV(x,f.rH.UnsupportedOperator,m)}}function Er(l,u,c){if((0,p.i)(l))throw new f.aV(u,f.rH.NoFunctionInTemplateLiteral,c);return l}function xn(l,u){let c;try{const m=u.name.toLowerCase();if(null!=l.localScope&&void 0!==l.localScope[m])return c=l.localScope[m],!0===c.valueset||(c.value=De(l,c.node),c.valueset=!0),c.value;if(void 0!==l.globalScope[m])return c=l.globalScope[m],!0===c.valueset||(c.value=De(l,c.node),c.valueset=!0),c.value;throw new f.aV(l,f.rH.InvalidIdentifier,u)}catch(m){throw m}}const $e={};function An(l,u,c,m){try{const x=De(l,u.arguments[c]);if((0,p.s)(x,m))return De(l,u.arguments[c+1]);{const M=u.arguments.length-c;return 1===M?De(l,u.arguments[c]):2===M?null:3===M?De(l,u.arguments[c+2]):An(l,u,c+2,m)}}catch(x){throw x}}function En(l,u,c,m){try{if(!0===m)return De(l,u.arguments[c+1]);if(u.arguments.length-c==3)return De(l,u.arguments[c+2]);{const x=De(l,u.arguments[c+2]);if(!1===(0,p.a)(x))throw new f.aV(l,f.rH.BooleanConditionRequired,u.arguments[c+2]);return En(l,u,c+2,x)}}catch(x){throw x}}function zt(l,u,c,m){try{const x=l.body;if(c.length!==l.params.length)throw new f.aV(u,f.rH.WrongNumberOfParameters,m);if(null!=u.localScope)for(let $=0;$<c.length;$++)u.localScope[l.params[$].name.toLowerCase()]={value:c[$],valueset:!0,node:null};const M=De(u,x);if(M instanceof p.R)return M.value;if(M===p.o)throw new f.aV(u,f.rH.UnexpectedToken,m);if(M===p.p)throw new f.aV(u,f.rH.UnexpectedToken,m);return M instanceof p.I?M.value:M}catch(x){throw x}}(0,P.r)($e,ut),(0,H.r)($e,ut),(0,W.r)($e,ut),(0,L.r)($e,ut),(0,w.r)($e,ut),(0,N.registerFunctions)($e,ut),$e.iif=function(l,u){try{(0,p.y)(null===u.arguments?[]:u.arguments,3,3,l,u);const c=De(l,u.arguments[0]);if(!1===(0,p.a)(c))throw new f.aV(l,f.rH.BooleanConditionRequired,u);return De(l,!0===c?u.arguments[1]:u.arguments[2])}catch(c){throw c}},$e.decode=function(l,u){try{if(u.arguments.length<2)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);if(2===u.arguments.length)return De(l,u.arguments[1]);if((u.arguments.length-1)%2==0)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);return An(l,u,1,De(l,u.arguments[0]))}catch(c){throw c}},$e.when=function(l,u){try{if(u.arguments.length<3)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);if(u.arguments.length%2==0)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);const c=De(l,u.arguments[0]);if(!1===(0,p.a)(c))throw new f.aV(l,f.rH.BooleanConditionRequired,u.arguments[0]);return En(l,u,0,c)}catch(c){throw c}};for(const l in $e)$e[l]={value:new g.Bx($e[l]),valueset:!0,node:null};const Mt=function(){};function Cn(l,u,c){const m=new Mt;l||(l={}),u||(u={});const x=new V.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});x.immutable=!1,m.textformatting={value:x,valueset:!0,node:null};for(const M in u)m[M]={value:new g.Bx(u[M]),native:!0,valueset:!0,node:null};for(const M in l)m[M]=l[M]&&"esri.Graphic"===l[M].declaredClass?{value:E.Z.createFromGraphic(l[M],c),valueset:!0,node:null}:{value:l[M],valueset:!0,node:null};return m}function wn(l){console.log(l)}function Fn(l){const u={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:ut,evaluateIdentifier:xn};for(let c=0;c<l.length;c++)l[c].registerFunctions(u);for(const c in u.functions)$e[c]={value:new g.Bx(u.functions[c]),valueset:!0,node:null},Mt.prototype[c]=$e[c];for(let c=0;c<u.signatures.length;c++)(0,Y.gW)(u.signatures[c],"sync")}function Wt(l,u){let c=u.spatialReference;null==c&&(c=new k.Z({wkid:102100}));let m=null;l.usesModules&&(m=new v.s(new Map,l.loadedModules));const x={spatialReference:c,globalScope:Cn(u.vars,u.customfunctions,u.timeReference),localScope:null,exports:{},libraryResolver:m,console:u.console?u.console:wn,timeReference:u.timeReference??null,lrucache:u.lrucache,interceptor:u.interceptor,depthCounter:{depth:1}};let M=De(x,l);if(M instanceof p.R&&(M=M.value),M instanceof p.I&&(M=M.value),M===p.v&&(M=null),M===p.o)throw new f.aV(x,f.rH.IllegalResult,null);if(M===p.p)throw new f.aV(x,f.rH.IllegalResult,null);if((0,p.i)(M))throw new f.aV(x,f.rH.IllegalResult,null);return M}Mt.prototype=$e,Mt.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},Mt.prototype.pi={value:Math.PI,valueset:!0,node:null},Fn([q.A]);var vn=j(8314),Fr=j(62208);const vr=["feature","angle","bearing","centroid","envelopeintersects","extent","geometry","isselfintersecting","ringisclockwise"],Sr=!0;let _n=!1,Sn=!1,it=null,Kt=[];function bn(l,u){if(!0===u.useAsync||!0===l.isAsync)return function br(l,u){if(null===it)throw new f.aV(null,f.rH.AsyncNotEnabled,null);if((0,vn.Z)("esri-csp-restrictions")||!1===Sr)return function(c){return it.executeScript(l,c)};try{return mt(l,u,!0)}catch(c){if("esri.arcade.arcadeuncompilableerror"===c.declaredRootClass)return function(m){return it.executeScript(l,m)};throw c}}(l,u);if((0,vn.Z)("esri-csp-restrictions"))return function(c){return Wt(l,c)};try{return mt(l,u)}catch(c){if("esri.arcade.arcadeuncompilableerror"===c.declaredRootClass)return function(m){return Wt(l,m)};throw c}}function Jt(l,u=[]){return kt(l,u)}function $t(l,u){if(!0===u.useAsync||!0===l.isAsync){if(null===it)throw new f.aV(null,f.rH.AsyncNotEnabled,null);return it.executeScript(l,u)}return Wt(l,u)}function Ot(l,u){return(0,Y.bV)(l,u)}function In(l){return(0,Y.Kq)(l)}function Lt(l,u=[]){return void 0===l.usesGeometry&&(0,Y.dN)(l,u),!0===l.usesGeometry}let Yt=null;function Qt(){return Yt||(Yt=Tn(),Yt)}function Tn(){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,_.Z)(function*(){const[l,u]=yield Promise.all([Promise.all([j.e(4918),j.e(4766)]).then(j.bind(j,44766)),Promise.resolve().then(j.bind(j,63461))]);return Sn=!0,u.setGeometryEngine(l),!0}),Xt.apply(this,arguments)}let qt=null;function en(){return null!==qt||(qt=Mn()),qt}function Mn(){return tn.apply(this,arguments)}function tn(){return tn=(0,_.Z)(function*(){yield function wt(){return et.apply(this,arguments)}(),it=yield Promise.all([j.e(8302),j.e(5039)]).then(j.bind(j,35039));for(const l of Kt)it.extend(l),Ye(l,"async");return Kt=null,!0}),tn.apply(this,arguments)}function Bn(){return _n}function Pn(){return!!it}function kn(){return Sn}let nn=null;function rn(){return nn||(nn=Rn(),nn)}function Rn(){return an.apply(this,arguments)}function an(){return an=(0,_.Z)(function*(){yield en();const[l,u,c,m,x]=yield Promise.all([Promise.all([j.e(410),j.e(3482),j.e(5171)]).then(j.bind(j,85171)),Promise.all([j.e(410),j.e(3482),j.e(5171),j.e(2480)]).then(j.bind(j,82480)),Promise.all([j.e(410),j.e(3482),j.e(5978)]).then(j.bind(j,55978)),Promise.all([j.e(410),j.e(2543)]).then(j.bind(j,2543)),j.e(4198).then(j.bind(j,34198))]);return Hn=l,it.extend([u,c,m,x]),Ye([u,c,m,x],"async"),_n=!0,!0}),an.apply(this,arguments)}function On(l,u=[]){return void 0===l.usesFeatureSet&&(0,Y.dN)(l,u),!0===l.usesFeatureSet}function Ln(l,u){return sn.apply(this,arguments)}function sn(){return sn=(0,_.Z)(function*(l,u,c=[],m=!1,x=null){return on(new Set,l,u,c,m,x)}),sn.apply(this,arguments)}function on(l,u,c){return un.apply(this,arguments)}function un(){return un=(0,_.Z)(function*(l,u,c,m=[],x=!1,M=null){const $="string"==typeof u?Jt(u):u,ae=[];return $&&(!1===kn()&&(Lt($)||x)&&ae.push(Qt()),!1===Pn()&&(!0===$.isAsync||c)&&ae.push(en()),!1===Bn()&&(On($)||function kr(l,u){if(u){for(const c of u)if(Ot(l,c))return!0;return!1}return!1}($,m))&&ae.push(rn())),ae.length&&(yield Promise.all(ae)),yield Nn(l,$,M,c,x),!0}),un.apply(this,arguments)}function Nn(l,u){return ln.apply(this,arguments)}function ln(){return ln=(0,_.Z)(function*(l,u,c=null,m=!1,x=!1){const M=(0,Y.x5)(u);null===c&&M.length>0&&(c=Je.getDefault()),u.loadedModules={};for(const $ of M){(0,Fr.O3)(c);const ae=c.normalizeModuleUri($.source);if(l.has(ae.uri))throw new f.aV(null,f.rH.CircularModules,null);l.add(ae.uri);const ce=yield c.fetchModule(ae);yield on(l,ce,m,[],x,c),l.delete(ae.uri),ce.isAsync&&(u.isAsync=!0),ce.usesFeatureSet&&(u.usesFeatureSet=!0),ce.usesGeometry&&(u.usesGeometry=!0),u.loadedModules[$.libname]={uri:ae.uri,script:ce}}}),ln.apply(this,arguments)}function Un(l){if(Lt(l))return!0;const u=(0,Y.Vf)(l);let c=!1;for(let m=0;m<u.length;m++)if(vr.includes(u[m])){c=!0;break}return c}let Hn=null;function Nt(){return Hn}const Or=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:on,compileScript:bn,enableAsyncSupport:en,enableAsyncSupportImpl:Mn,enableFeatureSetSupport:rn,enableFeatureSetSupportImpl:Rn,enableGeometrySupport:Qt,enableGeometrySupportImpl:Tn,executeScript:$t,extend:function Ir(l){Fn(l),Ye(l,"sync"),null===it?Kt.push(l):(Ye(l,"async"),it.extend(l))},extractExpectedFieldLiterals:In,extractFieldLiterals:function Br(l,u=!1){return void 0===u&&(u=!1),(0,Y.mb)(l)},featureSetUtils:Nt,isAsyncEnabled:Pn,isFeatureSetSupportEnabled:Bn,isGeometryEnabled:kn,loadDependentModules:Nn,loadScriptDependencies:Ln,parseAndExecuteScript:function Tr(l,u,c=[]){return $t(kt(l,c),u)},parseScript:Jt,referencesFunction:function Mr(l,u){return(0,Y.w8)(l,u)},referencesMember:Ot,scriptIsAsync:function Pr(l,u=[]){return void 0===l.isAsync&&(0,Y.dN)(l,u),!0===l.isAsync},scriptTouchesGeometry:Un,scriptUsesFeatureSet:On,scriptUsesGeometryEngine:Lt,scriptUsesModules:function Rr(l,u=[]){return void 0===l.usesModules&&(0,Y.dN)(l,u),!0===l.usesModules}},Symbol.toStringTag,{value:"Module"}));var Lr=j(58817),Vn=j(86971),Nr=j(72642),Ur=j(37118),Hr=j(55214),Vr=j(72854),Zr=j(2004);const Zn=/^\$(feature|aggregatedFeatures)\./i,Gr={vars:{$feature:"any",$view:"any"},spatialReference:null};function jr(l){return l.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function zr(l){return null==l?null:(0,p.m)(l)||(0,p.x)(l)?"array":(0,p.k)(l)?"date":(0,p.c)(l)?"text":(0,p.a)(l)?"boolean":(0,p.b)(l)?"number":l instanceof V.Z?"dictionary":(0,p.w)(l)?"feature":l instanceof Nr.Z?"point":l instanceof Ur.Z?"polygon":l instanceof Hr.Z?"polyline":l instanceof Vr.Z?"multipoint":l instanceof Zr.Z?"extent":(0,p.T)(l)?"featureSet":(0,p.U)(l)?"featureSetCollection":null}function Bt(l){if(!l)return null;try{return Jt(l)}catch{}return null}function Wr(l,u){const c="string"==typeof l?Bt(l):l;if(!c)return null;try{return bn(c,u=u||(0,Lr.d9)(Gr))}catch{}return null}function Kr(l,u){return{vars:{$feature:null==l?new E.Z:E.Z.createFromGraphic(l,null),$view:u&&u.view},spatialReference:u&&u.sr}}function Jr(l,u,c){return E.Z.createFromGraphicLikeObject(u,l,c,null)}function $r(l,u){null!=l.vars&&(l.vars.$feature=u)}function Yr(l,u){let c;try{c=$t(l,u)}catch{c=null}return c}function Qr(l,u){let c;try{c=l?l(u):null}catch{c=null}return c}function Xr(l,u){try{return l?l(u):Promise.resolve(null)}catch{return Promise.resolve(null)}}function qr(l,u){if(!l)return[];const c="string"==typeof l?Bt(l):l;if(!c)return[];const m=In(c);let x=new Array;m.forEach($=>{Zn.test($)&&($=$.replace(Zn,""),x.push($))});const M=x.filter($=>$.includes("*"));return x=x.filter($=>!M.includes($)),u&&M.forEach($=>{const ae=new RegExp(`^${$.split(/\*+/).map(jr).join(".*")}$`,"i");u.forEach(ce=>ae.test(ce)?x.push(ce):null)}),[...new Set(x.sort())]}function ei(l){return Ot(l,"$view")}function ti(l,u){return!!l&&Ot(l,u)}function ni(l){if(l&&(null!=l.spatialReference||null!=l.scale&&null!=l.viewingMode))return{view:l.viewingMode&&null!=l.scale?new V.Z({viewingMode:l.viewingMode,scale:l.scale}):null,sr:l.spatialReference}}function ri({url:l,spatialReference:u,lrucache:c,interceptor:m}){const x=Nt();return x?x.createFeatureSetCollectionFromService(l,u,c,m):null}function ii({layer:l,spatialReference:u,outFields:c,returnGeometry:m,lrucache:x,interceptor:M}){if(null===l)return null;const $=Nt();return $?$.constructFeatureSet(l,u,c,m??!0,x,M):null}function ai(l){if(null===l?.map)return null;const u=Nt();return u?u.createFeatureSetCollectionFromMap(l.map,l.spatialReference,l.lrucache,l.interceptor):null}function si(l,u){return V.Z.convertJsonToArcade(l,u)}function oi(l,u,c=[]){return Ln(l,u,c)}function ui(){return Qt()}function li(){return rn()}function Gn(l,u){if(!l)return!1;if("string"==typeof l)return u(l);const c=l;if(function ci(l){return"simple"===l.type||"class-breaks"===l.type||"unique-value"===l.type||"dot-density"===l.type||"dictionary"===l.type||"pie-chart"===l.type}(c)){if("dot-density"===c.type){const M=c.attributes?.some($=>u($.valueExpression));if(M)return M}const m=c.visualVariables,x=!!m&&m.some(M=>{let $=u(M.valueExpression);return"size"===M.type&&((0,Vn.iY)(M.minSize)&&($=$||u(M.minSize.valueExpression)),(0,Vn.iY)(M.maxSize)&&($=$||u(M.maxSize.valueExpression))),$});return!(!("valueExpression"in c)||!u(c.valueExpression))||x}if(function di(l){return"esri.layers.support.LabelClass"===l.declaredClass}(c)){const m=c.labelExpressionInfo&&c.labelExpressionInfo.expression;return!(!m||!u(m))||!1}return!!function fi(l){return"esri.PopupTemplate"===l.declaredClass}(c)&&(!!c.expressionInfos&&c.expressionInfos.some(m=>u(m.expression))||Array.isArray(c.content)&&c.content.some(m=>"expression"===m.type&&u(m.expressionInfo?.expression)))}function hi(l){const u=Bt(l);return!!u&&Un(u)}function mi(l){return Gn(l,hi)}function pi(l){const u=Bt(l);return!!u&&Lt(u)}function Di(l){return Gn(l,pi)}}}]);