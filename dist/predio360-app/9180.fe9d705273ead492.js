"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[9180,5611],{77044:(b,f,e)=>{e.d(f,{Y:()=>C});var y=e(62208);function g(s,n){return s?n?4:3:n?3:2}function C(s,n,c,r,_){if((0,y.Wi)(n)||!n.lengths.length)return null;const o="upperLeft"===_?.originPosition?-1:1;s.lengths.length&&(s.lengths.length=0),s.coords.length&&(s.coords.length=0);const i=s.coords,h=[],E=c?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:M,coords:T}=n,L=g(c,r);let A=0;for(const u of M){const I=R(E,T,A,u,c,r,o);I&&h.push(I),A+=u*L}if(h.sort((u,I)=>{let P=o*u[2]-o*I[2];return 0===P&&c&&(P=u[4]-I[4]),P}),h.length){let u=6*h[0][2];i[0]=h[0][0]/u,i[1]=h[0][1]/u,c&&(u=6*h[0][4],i[2]=0!==u?h[0][3]/u:0),(i[0]<E[0]||i[0]>E[1]||i[1]<E[2]||i[1]>E[3]||c&&(i[2]<E[4]||i[2]>E[5]))&&(i.length=0)}if(!i.length){const u=n.lengths[0]?function v(s,n,c,r,_){const o=g(r,_);let i=n,h=n+o,E=0,M=0,T=0,L=0;for(let A=0,u=c-1;A<u;A++,i+=o,h+=o){const I=s[i],P=s[i+1],U=s[i+2],B=s[h],t=s[h+1],a=s[h+2],p=r?d(I,P,U,B,t,a):l(I,P,B,t);if(p)if(E+=p,r){const m=O(I,P,U,B,t,a);M+=p*m[0],T+=p*m[1],L+=p*m[2]}else{const m=D(I,P,B,t);M+=p*m[0],T+=p*m[1]}}return E>0?r?[M/E,T/E,L/E]:[M/E,T/E]:c>0?r?[s[n],s[n+1],s[n+2]]:[s[n],s[n+1]]:null}(T,0,M[0],c,r):null;if(!u)return null;i[0]=u[0],i[1]=u[1],c&&u.length>2&&(i[2]=u[2])}return s}function R(s,n,c,r,_,o,i=1){const h=g(_,o);let E=c,M=c+h,T=0,L=0,A=0,u=0,I=0;for(let U=0,B=r-1;U<B;U++,E+=h,M+=h){const t=n[E],a=n[E+1],p=n[E+2],m=n[M],W=n[M+1],S=n[M+2];let j=t*W-m*a;u+=j,T+=(t+m)*j,L+=(a+W)*j,_&&(j=t*S-m*p,A+=(p+S)*j,I+=j),t<s[0]&&(s[0]=t),t>s[1]&&(s[1]=t),a<s[2]&&(s[2]=a),a>s[3]&&(s[3]=a),_&&(p<s[4]&&(s[4]=p),p>s[5]&&(s[5]=p))}if(u*i>0&&(u*=-1),I*i>0&&(I*=-1),!u)return null;const P=[T,L,.5*u];return _&&(P[3]=A,P[4]=.5*I),P}function l(s,n,c,r){const _=c-s,o=r-n;return Math.sqrt(_*_+o*o)}function d(s,n,c,r,_,o){const i=r-s,h=_-n,E=o-c;return Math.sqrt(i*i+h*h+E*E)}function D(s,n,c,r){return[s+.5*(c-s),n+.5*(r-n)]}function O(s,n,c,r,_,o){return[s+.5*(r-s),n+.5*(_-n),c+.5*(o-c)]}},19702:(b,f,e)=>{e.d(f,{A:()=>n});var y=e(15861),g=e(17626),C=e(54024),R=e(10699),v=e(32917),l=e(77712),O=(e(90912),e(85931),e(76898)),s=e(36947);const n=c=>{let r=class extends c{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(_){super.postscript(_),(0,s.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var _=this;return(0,y.Z)(function*(){const o=new AbortController,i=o.signal;_.handles.add((0,C.kB)(()=>o.abort())),yield(0,v.N1)(()=>_.view.defaultsFromMap?.heightModelInfoReady,i),(0,R.k_)(i);const h=(0,s.Wt)(_.layer,_.view.heightModelInfo,_.supportsHeightUnitConversion);if(h)throw h})()}canResume(){const _=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!_||!_.minScale||!_.maxScale||_.minScale>=_.maxScale)}getSuspendInfo(){const _=super.getSuspendInfo(),o=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return o&&o.minScale&&o.maxScale&&o.minScale<o.maxScale&&(_.outsideScaleRange=!0),_}};return(0,g._)([(0,l.Cb)()],r.prototype,"view",void 0),(0,g._)([(0,l.Cb)()],r.prototype,"slicePlaneEnabled",void 0),r=(0,g._)([(0,O.j)("esri.views.3d.layers.LayerView3D")],r),r}},62124:(b,f,e)=>{e.r(f),e.d(f,{default:()=>B});var y=e(15861),g=e(17626),C=e(46160),R=e(46882),v=e(62208),l=e(32917),d=e(77712),s=(e(90912),e(85931),e(76898)),n=e(99683),c=e(58924),r=e(53753),_=e(719),o=e(17718),i=e(29739),h=e(69583),E=e(19702),M=e(32400),T=e(89765),L=e(36967),A=e(23147),u=e(45611);let P=class extends((0,E.A)(u.Z)){constructor(){super(...arguments),this.type="route-3d",this.loadedGraphics=new L.g,this._byObjectID=new Map,this.slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set("processor",new M.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.updatingHandles.addOnCollectionChange(()=>this._routeItems,t=>this._routeItemsChanged(t),l.nn),this.addResolvingPromise((0,T.E)(this).then(t=>this.fullExtentInLocalViewSpatialReference=t)),this.handles.add((0,l.gx)(()=>this.view?.basemapTerrain?.ready,()=>()=>this.notifyChange("updating"),{once:!0}))}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("processor",(0,v.SC)(this.processor)),this._get("_routeItems")?.destroy()}get _routeItems(){return new R.Z({getCollections:()=>[this.layer.pointBarriers,this.layer.polygonBarriers,this.layer.polylineBarriers,this.layer.stops,this.layer.directionLines,this.layer.directionPoints,(0,v.pC)(this.layer.routeInfo)?new C.Z([this.layer.routeInfo]):null]})}_routeItemsChanged(t){if(t.removed.length){this.loadedGraphics.removeMany(t.removed.map(a=>{const p=this._byObjectID.get(a);return this._byObjectID.delete(a),p}));for(const a of t.removed)this.handles.remove(a)}if(t.added.length){this.loadedGraphics.addMany(t.added.map(a=>{const p=a.toGraphic();return this._byObjectID.set(a,p),p}));for(const a of t.added)this.handles.add([(0,l.YP)(()=>a.geometry,(p,m)=>{this._updateGraphic(a,"geometry",p,m)}),(0,l.YP)(()=>a.symbol,(p,m)=>{this._updateGraphic(a,"symbol",p,m)})],a)}}get legendEnabled(){return this.canResume()&&!this.processor?.frustumVisibilitySuspended}getSuspendInfo(){const t=super.getSuspendInfo();return t.outsideScaleRange=this.processor?.scaleVisibilitySuspended??!1,t.outsideOfView=this.processor?.frustumVisibilitySuspended??!1,t}fetchPopupFeatures(t,a){return(0,y.Z)(function*(){return(0,v.Wg)(a)?.clientGraphics??[]})()}getHit(t){return this.processor.getHit(t)}whenGraphicBounds(t,a){return this.processor.whenGraphicBounds(t,a)}computeAttachmentOrigin(t,a){return this.processor?.computeAttachmentOrigin(t,a)}getSymbolLayerSize(t,a){return this.processor.getSymbolLayerSize(t,a)}queryGraphics(){var t=this;return(0,y.Z)(function*(){return new C.Z(t.loadedGraphics.toArray())})()}maskOccludee(t){return this.processor.maskOccludee(t)}highlight(t){return function I(t){return t instanceof n.Z||t instanceof c.Z||t instanceof r.Z||t instanceof _.Z||t instanceof o.Z||t instanceof i.Z||t instanceof h.Z}(t)&&(t=this._byObjectID.get(t)),this.processor.highlight(t)}get updatePolicy(){return this.processor?.graphicsCore.effectiveUpdatePolicy||A.j.SYNC}canResume(){return super.canResume()&&!this.processor?.scaleVisibilitySuspended}isUpdating(){return!(!this.processor?.updating&&this.view?.basemapTerrain?.ready)}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.processor?.elevationAlignment.updating??!1,visibilityFrustum:!this.processor?.frustumVisibilitySuspended}}_updateGraphic(t,a,p,m){const W=this._byObjectID.get(t);W[a]=p,U.graphic=W,U.property=a,U.oldValue=m,U.newValue=p,this.processor?.graphicsCore.graphicUpdateHandler(U)}};(0,g._)([(0,d.Cb)()],P.prototype,"_routeItems",null),(0,g._)([(0,d.Cb)()],P.prototype,"loadedGraphics",void 0),(0,g._)([(0,d.Cb)({readOnly:!0})],P.prototype,"legendEnabled",null),(0,g._)([(0,d.Cb)()],P.prototype,"layer",void 0),(0,g._)([(0,d.Cb)({readOnly:!0})],P.prototype,"processor",void 0),(0,g._)([(0,d.Cb)({type:Boolean})],P.prototype,"slicePlaneEnabled",void 0),P=(0,g._)([(0,s.j)("esri.views.3d.layers.RouteLayerView3D")],P);const U={graphic:null,property:null,oldValue:null,newValue:null},B=P},89765:(b,f,e)=>{e.d(f,{E:()=>R});var y=e(62208),g=e(46367),C=e(35082);function R(v){const l=v.view.spatialReference,d=v.layer.fullExtent,D=(0,y.pC)(d)&&d.spatialReference;if((0,y.Wi)(d)||!D)return Promise.resolve(null);if(D.equals(l))return Promise.resolve(d.clone());const O=(0,g.iV)(d,l);return(0,y.pC)(O)?Promise.resolve(O):v.view.state.isLocal?(0,C.projectGeometry)(d,l,v.layer.portalItem).then(s=>!v.destroyed&&s?s:null).catch(()=>null):Promise.resolve(null)}},36967:(b,f,e)=>{e.d(f,{g:()=>R});var y=e(61885),g=e(73234),C=e(28862);class R extends y.Z{constructor(){super(...arguments),this._set=new Set}clear(){if(this._set.size>0){const l=this.toArray();this._set.clear(),this.emit("after-changes",{type:g.y.REMOVE}),this.emit("change",{added:[],removed:l})}}get length(){return this._set.size}addMany(l){if(0!==l.length){for(const d of l)this._set.add(d);this.emit("after-changes",{type:g.y.ADD}),this.emit("change",{added:l,removed:[]})}}remove(l){this._set.delete(l)&&(this.emit("after-changes",{type:g.y.REMOVE}),this.emit("change",{added:[],removed:[l]}))}removeMany(l){const d=[];for(const D of l)this._set.delete(D)&&d.push(D);d.length>0&&(this.emit("after-changes",{type:g.y.REMOVE}),this.emit("change",{added:[],removed:d}))}toArray(){return[...this._set]}find(l){let d;return(0,C.f)(this._set,D=>!!l(D)&&(d=D,!0)),d}forEach(l){this._set.forEach(d=>l(d))}}},45611:(b,f,e)=>{e.d(f,{Z:()=>_});var y=e(17626),g=e(14517),C=e(61885),R=e(80542),v=e(61996),l=e(63290),d=e(62208),D=e(60330),O=e(77712),c=(e(90912),e(85931),e(76898));let r=class extends((0,R.p)((0,v.IG)((0,D.v)(C.Z.EventedMixin(g.Z))))){constructor(o){super(o),this.layer=null,this.parent=null}initialize(){this.when().catch(o=>{if("layerview:create-error"!==o.name){const i=this.layer&&this.layer.id||"no id",h=this.layer&&this.layer.title||"no title";l.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${h}', id: '${i}')`,o)}})}get fullOpacity(){return(0,d.Pt)(this.get("layer.opacity"),1)*(0,d.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(o){this._overrideIfSome("visible",o)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const o=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(o.viewNotReady=!0),this.layer&&this.layer.loaded||(o.layerNotLoaded=!0),this.visible||(o.layerInvisible=!0),o}isUpdating(){return!1}};(0,y._)([(0,O.Cb)()],r.prototype,"fullOpacity",null),(0,y._)([(0,O.Cb)()],r.prototype,"layer",void 0),(0,y._)([(0,O.Cb)()],r.prototype,"parent",void 0),(0,y._)([(0,O.Cb)({readOnly:!0})],r.prototype,"suspended",null),(0,y._)([(0,O.Cb)({readOnly:!0})],r.prototype,"suspendInfo",null),(0,y._)([(0,O.Cb)({readOnly:!0})],r.prototype,"legendEnabled",null),(0,y._)([(0,O.Cb)({type:Boolean,readOnly:!0})],r.prototype,"updating",null),(0,y._)([(0,O.Cb)({readOnly:!0})],r.prototype,"updatingProgress",null),(0,y._)([(0,O.Cb)()],r.prototype,"visible",null),(0,y._)([(0,O.Cb)()],r.prototype,"view",void 0),r=(0,y._)([(0,c.j)("esri.views.layers.LayerView")],r);const _=r}}]);