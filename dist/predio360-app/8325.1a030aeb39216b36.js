"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[8325,5611],{19702:(D,y,e)=>{e.d(y,{A:()=>O});var i=e(15861),l=e(17626),u=e(54024),h=e(10699),o=e(32917),E=e(77712),r=(e(90912),e(85931),e(76898)),P=e(36947);const O=p=>{let t=class extends p{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(a){super.postscript(a),(0,P.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var a=this;return(0,i.Z)(function*(){const s=new AbortController,n=s.signal;a.handles.add((0,u.kB)(()=>s.abort())),yield(0,o.N1)(()=>a.view.defaultsFromMap?.heightModelInfoReady,n),(0,h.k_)(n);const _=(0,P.Wt)(a.layer,a.view.heightModelInfo,a.supportsHeightUnitConversion);if(_)throw _})()}canResume(){const a=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!a||!a.minScale||!a.maxScale||a.minScale>=a.maxScale)}getSuspendInfo(){const a=super.getSuspendInfo(),s=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return s&&s.minScale&&s.maxScale&&s.minScale<s.maxScale&&(a.outsideScaleRange=!0),a}};return(0,l._)([(0,E.Cb)()],t.prototype,"view",void 0),(0,l._)([(0,E.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,l._)([(0,r.j)("esri.views.3d.layers.LayerView3D")],t),t}},68325:(D,y,e)=>{e.r(y),e.d(y,{default:()=>a});var i=e(15861),l=e(17626),u=e(59213),h=e(26584),o=e(62208),E=e(10699),c=e(32917),d=e(77712),r=e(76898),P=e(19702),O=e(45611);const p="analysis-view-handles";let t=class extends((0,P.A)(O.Z)){constructor(s){super(s),this.type="line-of-sight-3d",this._analysisModule=null}initialize(){this.handles.add((0,c.YP)(()=>this.layer.analysis,s=>{this._destroyAnalysisView(),(0,o.pC)(s)&&this._createAnalysisView(s)},c.tX),p)}destroy(){this.handles.remove(p),this._destroyAnalysisView()}whenAnalysisView(){var s=this;return(0,i.Z)(function*(){if((0,o.pC)(s.analysisView))return s.analysisView;if((0,o.pC)(s._createAnalysisViewTask))return s._createAnalysisViewTask.promise;throw new h.Z("layerview:no-analysisview-for-analysis","The analysis has not been set on the LineOfSightLayer of this layer view")})()}isUpdating(){return(0,o.pC)(this._createAnalysisViewTask)||(0,o.pC)(this.analysisView)&&this.analysisView.updating}_createAnalysisView(s){var n=this;const _=(0,u.vr)(function(){var M=(0,i.Z)(function*(v){return n.analysisView=yield n._createAnalysisViewPromise(s,v),n._createAnalysisViewTask===_&&(n._createAnalysisViewTask=null),n.analysisView});return function(v){return M.apply(this,arguments)}}());this._createAnalysisViewTask=_}_destroyAnalysisView(){this.analysisView=(0,o.SC)(this.analysisView),this._createAnalysisViewTask=(0,o.IM)(this._createAnalysisViewTask)}_createAnalysisViewPromise(s,n){var _=this;return(0,i.Z)(function*(){let M=_._analysisModule;if((0,o.Wi)(M)){const C=yield _._loadAnalysisModule();_._analysisModule=C,M=C}const v=new M.default({analysis:s,view:_.view,parent:_});if(yield v.when(),(0,E.Hc)(n))throw v.destroy(),new h.Z("layerview:no-analysisview-for-analysis","The analysis has not been added to the LineOfSightLayer of this layer view",{analysis:s});return v})()}_loadAnalysisModule(){return Promise.all([e.e(125),e.e(3792),e.e(8592),e.e(4309)]).then(e.bind(e,72816))}};(0,l._)([(0,d.Cb)()],t.prototype,"type",void 0),(0,l._)([(0,d.Cb)()],t.prototype,"layer",void 0),(0,l._)([(0,d.Cb)()],t.prototype,"analysisView",void 0),(0,l._)([(0,d.Cb)()],t.prototype,"_createAnalysisViewTask",void 0),t=(0,l._)([(0,r.j)("esri.views.3d.layers.LineOfSightLayerView3D")],t);const a=t},45611:(D,y,e)=>{e.d(y,{Z:()=>a});var i=e(17626),l=e(14517),u=e(61885),h=e(80542),o=e(61996),E=e(63290),c=e(62208),d=e(60330),r=e(77712),p=(e(90912),e(85931),e(76898));let t=class extends((0,h.p)((0,o.IG)((0,d.v)(u.Z.EventedMixin(l.Z))))){constructor(s){super(s),this.layer=null,this.parent=null}initialize(){this.when().catch(s=>{if("layerview:create-error"!==s.name){const n=this.layer&&this.layer.id||"no id",_=this.layer&&this.layer.title||"no title";E.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${_}', id: '${n}')`,s)}})}get fullOpacity(){return(0,c.Pt)(this.get("layer.opacity"),1)*(0,c.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(s){this._overrideIfSome("visible",s)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const s=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(s.viewNotReady=!0),this.layer&&this.layer.loaded||(s.layerNotLoaded=!0),this.visible||(s.layerInvisible=!0),s}isUpdating(){return!1}};(0,i._)([(0,r.Cb)()],t.prototype,"fullOpacity",null),(0,i._)([(0,r.Cb)()],t.prototype,"layer",void 0),(0,i._)([(0,r.Cb)()],t.prototype,"parent",void 0),(0,i._)([(0,r.Cb)({readOnly:!0})],t.prototype,"suspended",null),(0,i._)([(0,r.Cb)({readOnly:!0})],t.prototype,"suspendInfo",null),(0,i._)([(0,r.Cb)({readOnly:!0})],t.prototype,"legendEnabled",null),(0,i._)([(0,r.Cb)({type:Boolean,readOnly:!0})],t.prototype,"updating",null),(0,i._)([(0,r.Cb)({readOnly:!0})],t.prototype,"updatingProgress",null),(0,i._)([(0,r.Cb)()],t.prototype,"visible",null),(0,i._)([(0,r.Cb)()],t.prototype,"view",void 0),t=(0,i._)([(0,p.j)("esri.views.layers.LayerView")],t);const a=t}}]);