"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[73,587],{52489:(B,g,t)=>{t.d(g,{D:()=>d});var u=t(22558);function d(P){P?.writtenProperties&&P.writtenProperties.forEach(({target:l,propName:m,newOrigin:_})=>{(0,u.l)(l)&&_&&l.originOf(m)!==_&&l.updateOrigin(m,_)})}},22558:(B,g,t)=>{function u(d){return d&&"getAtOrigin"in d&&"originOf"in d}t.d(g,{l:()=>u})},83369:(B,g,t)=>{t.r(g),t.d(g,{save:()=>i,saveAs:()=>c});var u=t(15861),d=t(82674),P=t(88755),l=t(37281),m=t(20677);const _="Media Layer",f="media-layer-save",D="media-layer-save-as",E=["media-layer:unsupported-source"];function p(a){return{isValid:"media"===a.type,errorMessage:"Layer.type should be 'media'"}}function v(a){return(0,P.Y)(a,"portal-item",!0)}function I(a){return a.layerJSON}function x(a,e){return o.apply(this,arguments)}function o(){return(o=(0,u.Z)(function*(a,e){const{title:r,fullExtent:n}=a;e.title||=r,e.extent=n?yield(0,l.$o)(n):null,(0,l.ck)(e,l.hz.METADATA)})).apply(this,arguments)}function i(a,e){return h.apply(this,arguments)}function h(){return(h=(0,u.Z)(function*(a,e){return(0,d.a1)({layer:a,itemType:_,validateLayer:p,createJSONContext:r=>v(r),createItemData:I,errorNamePrefix:f,supplementalUnsupportedErrors:E,saveResources:(r,n)=>(0,m.H)(a.resourceReferences,n)},e)})).apply(this,arguments)}function c(a,e,r){return U.apply(this,arguments)}function U(){return(U=(0,u.Z)(function*(a,e,r){return(0,d.po)({layer:a,itemType:_,validateLayer:p,createJSONContext:n=>v(n),createItemData:I,errorNamePrefix:D,supplementalUnsupportedErrors:E,newItem:e,setItemProperties:x,saveResources:(n,y)=>(0,m.H)(a.resourceReferences,y)},r)})).apply(this,arguments)}},88755:(B,g,t)=>{t.d(g,{Y:()=>l,h:()=>P});var u=t(21726),d=t(31099);function P(_,f){return{...m(_,f),readResourcePaths:[]}}function l(_,f,D){const E=(0,u.mN)(_.itemUrl);return{...m(_,f),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:E?{rootPath:E.path,writtenUrls:[]}:null,resources:D?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function m(_,f){return{origin:f,url:(0,u.mN)(_.itemUrl),portal:_.portal||d.Z.getDefault(),portalItem:_}}},10587:(B,g,t)=>{t.r(g),t.d(g,{addOrUpdateResources:()=>f,contentToBlob:()=>h,fetchResources:()=>m,getSiblingOfSameType:()=>U,getSiblingOfSameTypeI:()=>a,removeAllResources:()=>v,removeResource:()=>E,splitPrefixFileNameAndExtension:()=>o});var u=t(15861),d=t(84792),P=t(26584),l=t(21726);function m(e){return _.apply(this,arguments)}function _(){return(_=(0,u.Z)(function*(e,r={},n){yield e.load(n);const y=(0,l.v_)(e.itemUrl,"resources"),{start:R=1,num:s=10,sortOrder:O="asc",sortField:S="resource"}=r,T={query:{start:R,num:s,sortOrder:O,sortField:S,token:e.apiKey},signal:n?.signal},M=yield e.portal.request(y,T);return{total:M.total,nextStart:M.nextStart,resources:M.resources.map(({created:j,size:A,resource:C})=>({created:new Date(j),size:A,resource:e.resourceFromPath(C)}))}})).apply(this,arguments)}function f(e,r,n,y){return D.apply(this,arguments)}function D(){return(D=(0,u.Z)(function*(e,r,n,y){const R=new Map;for(const{resource:O,content:S,compress:T,access:M}of r){if(!O.hasPath())throw new P.Z(`portal-item-resource-${n}:invalid-path`,"Resource does not have a valid path");const[j,A]=x(O.path),C=`${j}/${T??""}/${M??""}`;R.has(C)||R.set(C,{prefix:j,compress:T,access:M,files:[]}),R.get(C).files.push({fileName:A,content:S})}yield e.load(y);const s=(0,l.v_)(e.userItemUrl,"add"===n?"addResources":"updateResources");for(const{prefix:O,compress:S,access:T,files:M}of R.values())for(let A=0;A<M.length;A+=25){const C=M.slice(A,A+25),b=new FormData;O&&"."!==O&&b.append("resourcesPrefix",O),S&&b.append("compress","true"),T&&b.append("access",T);let K=0;for(const{fileName:L,content:w}of C)b.append("file"+ ++K,w,L);b.append("f","json"),yield e.portal.request(s,{method:"post",body:b,signal:y?.signal})}})).apply(this,arguments)}function E(e,r,n){return p.apply(this,arguments)}function p(){return(p=(0,u.Z)(function*(e,r,n){if(!r.hasPath())throw new P.Z("portal-item-resources-remove:invalid-path","Resource does not have a valid path");yield e.load(n);const y=(0,l.v_)(e.userItemUrl,"removeResources");yield e.portal.request(y,{method:"post",query:{resource:r.path},signal:n?.signal}),r.portalItem=null})).apply(this,arguments)}function v(e,r){return I.apply(this,arguments)}function I(){return(I=(0,u.Z)(function*(e,r){yield e.load(r);const n=(0,l.v_)(e.userItemUrl,"removeResources");return e.portal.request(n,{method:"post",query:{deleteAll:!0},signal:r?.signal})})).apply(this,arguments)}function x(e){const r=e.lastIndexOf("/");return-1===r?[".",e]:[e.slice(0,r),e.slice(r+1)]}function o(e){const[r,n]=function i(e){const r=(0,l.Ml)(e);return null==r?[e,""]:[e.slice(0,e.length-r.length-1),`.${r}`]}(e),[y,R]=x(r);return[y,R,n]}function h(e){return c.apply(this,arguments)}function c(){return(c=(0,u.Z)(function*(e){return"blob"===e.type?e.blob:"json"===e.type?new Blob([e.jsonString],{type:"application/json"}):(yield(0,d.Z)(e.url,{responseType:"blob"})).data})).apply(this,arguments)}function U(e,r){if(!e.hasPath())return null;const[n,,y]=o(e.path);return e.portalItem.resourceFromPath((0,l.v_)(n,r+y))}function a(e,r){if(!e.hasPath())return null;const[n,,y]=o(e.path);return e.portalItem.resourceFromPath((0,l.v_)(n,r+y))}},20677:(B,g,t)=>{t.d(g,{H:()=>_,b:()=>D});var u=t(15861),d=t(26584),P=t(10699),l=t(35948),m=t(10587);function _(o,i,h){return f.apply(this,arguments)}function f(){return(f=(0,u.Z)(function*(o,i,h){const c=yield p(o,i,h);yield I(c,i,h)})).apply(this,arguments)}function D(o,i,h,c,U){return E.apply(this,arguments)}function E(){return(E=(0,u.Z)(function*(o,i,h,c,U){const a=yield p(h,c,U);yield o.update({data:i}),yield I(a,c,U)})).apply(this,arguments)}function p(o,i,h){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)(function*(o,i,h){if(!i?.resources)return;const c=i.portalItem===o.portalItem?new Set(o.paths):new Set;o.paths.length=0,o.portalItem=i.portalItem;const U=new Set(i.resources.toKeep.map(s=>s.resource.path)),a=new Set,e=[];U.forEach(s=>{c.delete(s),o.paths.push(s)});const r=[],n=[],y=[];for(const s of i.resources.toUpdate)if(c.delete(s.resource.path),U.has(s.resource.path)||a.has(s.resource.path)){const{resource:O,content:S,finish:T}=s,M=(0,m.getSiblingOfSameTypeI)(O,(0,l.DO)());o.paths.push(M.path),r.push({resource:M,content:yield(0,m.contentToBlob)(S),compress:s.compress}),T&&y.push(()=>T(M))}else{o.paths.push(s.resource.path),n.push({resource:s.resource,content:yield(0,m.contentToBlob)(s.content),compress:s.compress});const O=s.finish;O&&y.push(()=>O(s.resource)),a.add(s.resource.path)}for(const s of i.resources.toAdd)if(o.paths.push(s.resource.path),c.has(s.resource.path))c.delete(s.resource.path);else{r.push({resource:s.resource,content:yield(0,m.contentToBlob)(s.content),compress:s.compress});const O=s.finish;O&&y.push(()=>O(s.resource))}if(r.length||n.length){const{addOrUpdateResources:s}=yield Promise.resolve().then(t.bind(t,10587));yield s(i.portalItem,r,"add",h),yield s(i.portalItem,n,"update",h)}if(y.forEach(s=>s()),0===e.length)return c;const R=yield(0,P.UO)(e);if((0,P.k_)(h),R.length>0)throw new d.Z("save:resources","Failed to save one or more resources",{errors:R});return c})).apply(this,arguments)}function I(o,i,h){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)(function*(o,i,h){if(!o||!i.portalItem)return;const c=[];for(const U of o){const a=i.portalItem.resourceFromPath(U);c.push(a.portalItem.removeResource(a,h))}yield(0,P.as)(c)})).apply(this,arguments)}},53675:(B,g,t)=>{t.d(g,{w:()=>l});var u=t(59318),d=t(26584),P=t(12680);function l(m){if(u.Z.apiKey&&(0,P.r)(m.portal.url))throw new d.Z("save-api-key-utils:api-key-not-supported",`Saving is not supported on ${m.portal.url} when using an api key`)}},71404:(B,g,t)=>{t.d(g,{P:()=>P,z:()=>_});var u=t(15861),d=t(26584);function P(f){return l.apply(this,arguments)}function l(){return(l=(0,u.Z)(function*(f){const D=[];for(const E of f.allLayers)if("beforeSave"in E&&"function"==typeof E.beforeSave){const p=E.beforeSave();p&&D.push(p)}yield Promise.allSettled(D)})).apply(this,arguments)}const m=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function _(f,D,E){let p=(f.messages??[]).filter(({type:v})=>"error"===v).map(({name:v,message:I,details:x})=>new d.Z(v,I,x));if(f.blockedRelativeUrls&&(p=p.concat(f.blockedRelativeUrls.map(v=>new d.Z("url:unsupported",`Relative url '${v}' is not supported`)))),E){const{ignoreUnsupported:v,supplementalUnsupportedErrors:I=[],requiredPropertyChecksDisabled:x}=E;v&&(p=p.filter(({name:o})=>!(m.has(o)||I.includes(o)))),x&&(p=p.filter(o=>"web-document-write:property-required"!==o.name))}if(p.length>0)throw new d.Z(D.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:p})}}}]);