"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[426,5611],{90301:(B,E,t)=>{t.d(E,{JZ:()=>D,RL:()=>C,eY:()=>f});var s=t(15861),y=t(10699),n=t(86274),v=t(2753),i=t(86416),l=t(57477),P=t(14403),h=t(67969),x=t(18952),M=t(31548);function D(r){return r&&"render"in r}function C(r){const e=document.createElement("canvas");return e.width=r.width,e.height=r.height,r.render(e.getContext("2d")),e}class f extends l.s{constructor(e=null,a=!1){super(),this.blendFunction="standard",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this._texture=null,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=a,this.source=e,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),null!=this._uploadStatus&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){null==e&&null==this._source||(this._source=e,this.invalidateTexture(),this.requestRender())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e)}setSourceAsync(e,a){var o=this;return(0,s.Z)(function*(){null!=o._uploadStatus&&o._uploadStatus.controller.abort();const c=new AbortController,g=(0,y.hh)();return(0,y.$F)(a,()=>c.abort()),(0,y.$F)(c,m=>g.reject(m)),o._uploadStatus={controller:c,resolver:g},o.source=e,g.promise})()}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width))}updateTransitionProperties(e,a){e>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(e,a)}setTransform(e){const a=(0,n.yR)(this.transforms.displayViewScreenMat3),[o,c]=e.toScreenNoRotation([0,0],[this.x,this.y]),g=this.resolution/this.pixelRatio/e.resolution,m=g*this.width,A=g*this.height,O=Math.PI*this.rotation/180;(0,n.Iu)(a,a,(0,i.al)(o,c)),(0,n.Iu)(a,a,(0,i.al)(m/2,A/2)),(0,n.U1)(a,a,-O),(0,n.Iu)(a,a,(0,i.al)(-m/2,-A/2)),(0,n.ex)(a,a,(0,i.al)(m,A)),(0,n.Jp)(this.transforms.displayViewScreenMat3,e.displayViewMat3,a)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind(e,a){this._texture&&e.bindTexture(this._texture,a)}updateTexture({context:e,painter:a}){var o=this;return(0,s.Z)(function*(){if(!o._textureInvalidated)return;if(o._textureInvalidated=!1,o._texture||(o._texture=o._createTexture(e)),!o.source)return void o._texture.setData(null);o._texture.resize(o._sourceWidth,o._sourceHeight);const c=function _(r){return D(r)?r instanceof P.Z?r.getRenderedRasterPixels()?.renderedRasterPixels:C(r):r}(o.source);try{if(null!=o._uploadStatus){const{controller:g,resolver:m}=o._uploadStatus,A={signal:g.signal},{width:O,height:u}=o,d=o._texture;yield a.textureUploadManager.enqueueTextureUpdate({data:c,texture:d,width:O,height:u},A),m.resolve(),o._uploadStatus=null}else o._texture.setData(c);o.ready()}catch(g){(0,y.H9)(g)}})()}onDetach(){this.destroy()}_createTransforms(){return{displayViewScreenMat3:(0,v.Ue)()}}_createTexture(e){const a=this.immutable,o=new M.X;return o.internalFormat=a?h.lP.RGBA8:h.VI.RGBA,o.wrapMode=h.e8.CLAMP_TO_EDGE,o.isImmutable=a,o.width=this._sourceWidth,o.height=this._sourceHeight,new x.x(e,o)}}},14403:(B,E,t)=>{t.d(E,{Z:()=>s});class s{constructor(n,v,i){this.pixelBlock=n,this.extent=v,this.originalPixelBlock=i}get width(){return null!=this.pixelBlock?this.pixelBlock.width:0}get height(){return null!=this.pixelBlock?this.pixelBlock.height:0}render(n){const v=this.pixelBlock;if(null==v)return;const i=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??v});if(null==i.pixelBlock)return;i.pixelBlock.maskIsAlpha&&(i.pixelBlock.premultiplyAlpha=!0);const l=i.pixelBlock.getAsRGBA(),P=n.createImageData(i.pixelBlock.width,i.pixelBlock.height);P.data.set(l),n.putImageData(P,0,0)}getRenderedRasterPixels(){const n=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return null==n.pixelBlock?null:(n.pixelBlock.maskIsAlpha&&(n.pixelBlock.premultiplyAlpha=!0),{width:n.pixelBlock.width,height:n.pixelBlock.height,renderedRasterPixels:new Uint8Array(n.pixelBlock.getAsRGBA().buffer)})}}},56800:(B,E,t)=>{t.d(E,{y:()=>A});var r,s=t(17626),y=t(46160),n=t(89726),v=t(26584),i=t(32917),l=t(77712),M=(t(8314),t(63290),t(4619),t(76898)),D=t(83137),C=t(1011),_=t(38093),f=t(90135);let e=r=class extends f.Z{constructor(O){super(O),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new r({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,s._)([(0,l.Cb)({type:[Number,String],json:{write:!0}})],e.prototype,"left",void 0),(0,s._)([(0,l.Cb)({type:[Number,String],json:{write:!0}})],e.prototype,"right",void 0),(0,s._)([(0,l.Cb)({type:[Number,String],json:{write:!0}})],e.prototype,"top",void 0),(0,s._)([(0,l.Cb)({type:[Number,String],json:{write:!0}})],e.prototype,"bottom",void 0),e=r=(0,s._)([(0,M.j)("esri.views.layers.support.ClipRect")],e);const a=e;var o=t(74835);let c=class extends f.Z{constructor(O){super(O),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,s._)([(0,l.Cb)({type:[[[Number]]],json:{write:!0}})],c.prototype,"path",void 0),c=(0,s._)([(0,M.j)("esri.views.layers.support.Path")],c);const m=y.Z.ofType({key:"type",base:null,typeMap:{rect:a,path:c,geometry:o.Z}}),A=O=>{let u=class extends O{constructor(){super(...arguments),this.attached=!1,this.clips=new m,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this.visibleAtCurrentScale=!1,this.highlightOptions=null}initialize(){this.view?.spatialReference&&(this.view?.spatialReferenceLocked??1)&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new v.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new C.W),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,i.YP)(()=>this.suspended,p=>{this.container&&(this.container.visible=!p)},i.tX),(0,i.YP)(()=>this.updateSuspended,p=>{this.view&&!p&&this.updateRequested&&this.view.requestUpdate()},i.tX),(0,i.YP)(()=>this.layer?.opacity??1,p=>{this.container&&(this.container.opacity=p)},i.tX),(0,i.YP)(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",p=>{this.container&&(this.container.blendMode=p)},i.tX),(0,i.YP)(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,p=>{this.container&&(this.container.effect=p)},i.tX),(0,i.YP)(()=>this.highlightOptions,p=>this.container.highlightOptions=p,i.tX),(0,i.on)(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},i.tX),(0,i.YP)(()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}),({scale:p})=>{const I=null!=p&&this.isVisibleAtScale(p);I!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",I)},i.tX)],"constructor"),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then(p=>{p===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){const d=this.view?.spatialReference;return null==d||this.supportsSpatialReference(d)}get updateSuspended(){return this.suspended}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this._updatingHandles?.updating)}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}isVisibleAtScale(d){const R=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!R)return!0;const{minScale:p,maxScale:I}=R;return(0,D.o2)(d,p,I)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(d){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",d),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(d))):this.updateRequested=!1}hitTest(d,R){return Promise.resolve(null)}supportsSpatialReference(d){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const d=super.getSuspendInfo(),R=!this.spatialReferenceSupported,p=this.visibleAtCurrentScale;return R&&(d.spatialReferenceNotSupported=R),p&&(d.outsideScaleRange=p),d}addAttachHandles(d){this.addHandles(d,"attach")}};return(0,s._)([(0,l.Cb)()],u.prototype,"attached",void 0),(0,s._)([(0,l.Cb)({type:m,set(d){const R=(0,n.Z)(d,this._get("clips"),m);this._set("clips",R)}})],u.prototype,"clips",void 0),(0,s._)([(0,l.Cb)()],u.prototype,"container",void 0),(0,s._)([(0,l.Cb)()],u.prototype,"moving",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],u.prototype,"spatialReferenceSupported",null),(0,s._)([(0,l.Cb)({readOnly:!0})],u.prototype,"updateParameters",void 0),(0,s._)([(0,l.Cb)()],u.prototype,"updateRequested",void 0),(0,s._)([(0,l.Cb)()],u.prototype,"updateSuspended",null),(0,s._)([(0,l.Cb)()],u.prototype,"updating",null),(0,s._)([(0,l.Cb)()],u.prototype,"view",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],u.prototype,"visibleAtCurrentScale",void 0),(0,s._)([(0,l.Cb)({type:_.Z})],u.prototype,"highlightOptions",void 0),u=(0,s._)([(0,M.j)("esri.views.2d.layers.LayerView2D")],u),u}},45611:(B,E,t)=>{t.d(E,{Z:()=>f});var s=t(17626),y=t(83761),n=t(61885),v=t(61996),i=t(63290),l=t(62208),P=t(60330),h=t(77712),D=(t(8314),t(4619),t(76898)),C=t(11426);let _=class extends((0,v.IG)((0,P.v)(n.Z.EventedMixin(y.Z)))){constructor(r){super(r),this._updatingHandles=new C.R,this.layer=null,this.parent=null}initialize(){this.when().catch(r=>{if("layerview:create-error"!==r.name){const e=this.layer&&this.layer.id||"no id",a=this.layer?.title||"no title";i.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${a}', id: '${e}')`,r)}})}destroy(){this._updatingHandles=(0,l.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(r){this._overrideIfSome("visible",r)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const r=this.parent?.suspended?this.parent.suspendInfo:{};return this.view?.ready||(r.viewNotReady=!0),this.layer&&this.layer.loaded||(r.layerNotLoaded=!0),this.visible||(r.layerInvisible=!0),r}isUpdating(){return!1}};(0,s._)([(0,h.Cb)()],_.prototype,"fullOpacity",null),(0,s._)([(0,h.Cb)()],_.prototype,"layer",void 0),(0,s._)([(0,h.Cb)()],_.prototype,"parent",void 0),(0,s._)([(0,h.Cb)({readOnly:!0})],_.prototype,"suspended",null),(0,s._)([(0,h.Cb)({readOnly:!0})],_.prototype,"suspendInfo",null),(0,s._)([(0,h.Cb)({readOnly:!0})],_.prototype,"legendEnabled",null),(0,s._)([(0,h.Cb)({type:Boolean,readOnly:!0})],_.prototype,"updating",null),(0,s._)([(0,h.Cb)({readOnly:!0})],_.prototype,"updatingProgress",null),(0,s._)([(0,h.Cb)()],_.prototype,"visible",null),(0,s._)([(0,h.Cb)()],_.prototype,"view",void 0),_=(0,s._)([(0,D.j)("esri.views.layers.LayerView")],_);const f=_},90135:(B,E,t)=>{t.d(E,{Z:()=>x});var s=t(17626),y=t(86810),n=t(77712),P=(t(8314),t(63290),t(4619),t(76898));let h=class extends y.wq{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,s._)([(0,n.Cb)({readOnly:!0})],h.prototype,"version",null),h=(0,s._)([(0,P.j)("esri.views.layers.support.ClipArea")],h);const x=h},74835:(B,E,t)=>{t.d(E,{Z:()=>e});var _,s=t(17626),n=(t(29132),t(77712)),P=(t(8314),t(63290),t(4619),t(76898)),h=t(21674),x=t(91179),M=t(90135),D=t(2004),C=t(37118);const f={base:h.Z,key:"type",typeMap:{extent:D.Z,polygon:C.Z}};let r=_=class extends M.Z{constructor(a){super(a),this.type="geometry",this.geometry=null}clone(){return new _({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,s._)([(0,n.Cb)({types:f,json:{read:x.im,write:!0}})],r.prototype,"geometry",void 0),r=_=(0,s._)([(0,P.j)("esri.views.layers.support.Geometry")],r);const e=r}}]);