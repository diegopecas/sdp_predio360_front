"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[9697,5611],{91241:(U,g,e)=>{e.r(g),e.d(g,{default:()=>L});var o=e(15861),y=e(17626),v=e(26584),u=e(62208),O=e(32917),D=e(77712),i=(e(90912),e(85931),e(76898)),c=e(19702),_=e(50916),h=e(31498),s=e(12374),a=e(45611),r=e(94421),l=e(94672),f=e(31637);let M=class extends((0,s.Z)((0,r.Z)((0,_.r)((0,c.A)(a.Z))))){constructor(){super(...arguments),this.type="imagery-tile-3d",this.isAlignedMapTile=!0}initialize(){this.layer.increaseRasterJobHandlerUsage(),null==this.fullExtent&&this.addResolvingPromise(Promise.reject(new v.Z("layerview:spatial-reference-incompatible","The layer extent cannot be projected to the view's spatial reference",{layer:this.layer})));const p=(0,O.N1)(()=>this.view?.basemapTerrain?.tilingSchemeLocked).then(()=>{const m=this.view.basemapTerrain.tilingScheme,I=this.layer.tileInfo,R=["png","png24","png32","jpg","mixed"].includes(I.format)&&m.compatibleWith(I);this.isAlignedMapTile=R;const P=R?I:m.toTileInfo();this.tileInfo=P,this.updatingHandles.add(()=>[this.layer.renderer,this.layer.interpolation,this.layer.bandIds,this.layer.multidimensionalDefinition,this.layer.multidimensionalSubset,this.layer.rasterFunction,this.timeExtent],()=>this.refresh())});this.addResolvingPromise(p)}destroy(){this.layer.decreaseRasterJobHandlerUsage(),this.view=null}get _blankTile(){const p=document.createElement("canvas"),m=p.getContext("2d"),[I,R]=this.tileInfo.size;return p.width=I,p.height=R,m.clearRect(0,0,I,R),m.getImageData(0,0,I,R)}get imageFormatIsOpaque(){return"jpg"===this.layer.tileInfo.format}get hasMixedImageFormats(){return"mixed"===this.layer.tileInfo.format}get dataLevelRange(){const m=this.layer.tileInfo.lods;return this.levelRangeFromScaleRange(this.tileInfo.lods[0].scale,m[m.length-1].scale)}_getfullExtent(){return this.projectFullExtent(this.view.basemapTerrain&&(0,u.pC)(this.view.basemapTerrain.spatialReference)?this.view.basemapTerrain.spatialReference:this.view.spatialReference)}fetchTile(p,m,I,R){var P=this;return(0,o.Z)(function*(){const j=P.tileInfo,b=P._canSymbolizeInWebGL(),A={tileInfo:j,requestRawData:b,signal:(0,u.Wg)(R.signal),timeExtent:P.timeExtent,requestAsImageElement:P.isAlignedMapTile},C=yield P.layer.fetchTile(p,m,I,A);if(C instanceof HTMLImageElement)return C;let W=C&&C.pixelBlock;if((0,u.Wi)(W)||!b&&(W=yield P.layer.applyRenderer(C),(0,u.Wi)(W)))return P._blankTile;const T=new h.H([p,m,I],W,j.size[0],j.size[1]);return b?(T.symbolizerRenderer=P.layer.symbolizer.rendererJSON,T.symbolizerParameters=P.layer.symbolizer.generateWebGLParameters(P._getSymbolizerOptions(p)),T.transformGrid=C.transformGrid):T.isRendereredSource=!0,T.interpolation=P.layer.interpolation,T.bandIds=P.layer.bandIds,T})()}_getSymbolizerOptions(p){const m=this.tileInfo.lodAt(p).resolution;return{pixelBlock:null,isGCS:this.view.basemapTerrain&&(0,u.pC)(this.view.basemapTerrain.spatialReference)?this.view.basemapTerrain.spatialReference.isGeographic:this.view.spatialReference.isGeographic,resolution:{x:m,y:m},bandIds:this.layer.bandIds}}ensureSymbolizerParameters(p){this._canSymbolizeInWebGL()&&JSON.stringify(p.symbolizerRenderer)!==JSON.stringify(this.layer.symbolizer.rendererJSON)&&(p.symbolizerParameters=this.layer.symbolizer.generateWebGLParameters(this._getSymbolizerOptions(p.lij[0])))}createFetchPopupFeaturesQueryGeometry(p,m){return(0,l.K)(p,m,this.view)}refresh(){this.emit("data-changed")}doRefresh(){var p=this;return(0,o.Z)(function*(){p.suspended||p.emit("data-changed")})()}_canSymbolizeInWebGL(){return(0,f.hc)("3d").supportsTextureFloat&&this.layer.symbolizer.canRenderInWebGL}};(0,y._)([(0,D.Cb)({readOnly:!0})],M.prototype,"_blankTile",null),(0,y._)([(0,D.Cb)({readOnly:!0})],M.prototype,"imageFormatIsOpaque",null),(0,y._)([(0,D.Cb)({readOnly:!0})],M.prototype,"hasMixedImageFormats",null),(0,y._)([(0,D.Cb)({readOnly:!0})],M.prototype,"dataLevelRange",null),M=(0,y._)([(0,i.j)("esri.views.3d.layers.ImageryTileLayerView3D")],M);const L=M},19702:(U,g,e)=>{e.d(g,{A:()=>_});var o=e(15861),y=e(17626),v=e(54024),u=e(10699),O=e(32917),D=e(77712),i=(e(90912),e(85931),e(76898)),c=e(36947);const _=h=>{let s=class extends h{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(a){super.postscript(a),(0,c.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var a=this;return(0,o.Z)(function*(){const r=new AbortController,l=r.signal;a.handles.add((0,v.kB)(()=>r.abort())),yield(0,O.N1)(()=>a.view.defaultsFromMap?.heightModelInfoReady,l),(0,u.k_)(l);const f=(0,c.Wt)(a.layer,a.view.heightModelInfo,a.supportsHeightUnitConversion);if(f)throw f})()}canResume(){const a=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!a||!a.minScale||!a.maxScale||a.minScale>=a.maxScale)}getSuspendInfo(){const a=super.getSuspendInfo(),r=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return r&&r.minScale&&r.maxScale&&r.minScale<r.maxScale&&(a.outsideScaleRange=!0),a}};return(0,y._)([(0,D.Cb)()],s.prototype,"view",void 0),(0,y._)([(0,D.Cb)()],s.prototype,"slicePlaneEnabled",void 0),s=(0,y._)([(0,i.j)("esri.views.3d.layers.LayerView3D")],s),s}},45611:(U,g,e)=>{e.d(g,{Z:()=>a});var o=e(17626),y=e(14517),v=e(61885),u=e(80542),O=e(61996),D=e(63290),d=e(62208),E=e(60330),i=e(77712),h=(e(90912),e(85931),e(76898));let s=class extends((0,u.p)((0,O.IG)((0,E.v)(v.Z.EventedMixin(y.Z))))){constructor(r){super(r),this.layer=null,this.parent=null}initialize(){this.when().catch(r=>{if("layerview:create-error"!==r.name){const l=this.layer&&this.layer.id||"no id",f=this.layer&&this.layer.title||"no title";D.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${f}', id: '${l}')`,r)}})}get fullOpacity(){return(0,d.Pt)(this.get("layer.opacity"),1)*(0,d.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this.updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(r){this._overrideIfSome("visible",r)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const r=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(r.viewNotReady=!0),this.layer&&this.layer.loaded||(r.layerNotLoaded=!0),this.visible||(r.layerInvisible=!0),r}isUpdating(){return!1}};(0,o._)([(0,i.Cb)()],s.prototype,"fullOpacity",null),(0,o._)([(0,i.Cb)()],s.prototype,"layer",void 0),(0,o._)([(0,i.Cb)()],s.prototype,"parent",void 0),(0,o._)([(0,i.Cb)({readOnly:!0})],s.prototype,"suspended",null),(0,o._)([(0,i.Cb)({readOnly:!0})],s.prototype,"suspendInfo",null),(0,o._)([(0,i.Cb)({readOnly:!0})],s.prototype,"legendEnabled",null),(0,o._)([(0,i.Cb)({type:Boolean,readOnly:!0})],s.prototype,"updating",null),(0,o._)([(0,i.Cb)({readOnly:!0})],s.prototype,"updatingProgress",null),(0,o._)([(0,i.Cb)()],s.prototype,"visible",null),(0,o._)([(0,i.Cb)()],s.prototype,"view",void 0),s=(0,o._)([(0,h.j)("esri.views.layers.LayerView")],s);const a=s},94421:(U,g,e)=>{e.d(g,{Z:()=>i});var o=e(17626),y=e(63290),v=e(10699),u=e(32917),O=e(77712),E=(e(90912),e(85931),e(76898));const i=c=>{let _=class extends c{initialize(){this.handles.add((0,u.on)(()=>this.layer,"refresh",h=>{this.doRefresh(h.dataChanged).catch(s=>{(0,v.D_)(s)||y.Z.getLogger(this.declaredClass).error(s)})}),"RefreshableLayerView")}};return(0,o._)([(0,O.Cb)()],_.prototype,"layer",void 0),_=(0,o._)([(0,E.j)("esri.layers.mixins.RefreshableLayerView")],_),_}},10023:(U,g,e)=>{e.d(g,{V:()=>D,e:()=>u});var o=e(15861),y=e(62208),v=e(36630);function u(d){return O.apply(this,arguments)}function O(){return(O=(0,o.Z)(function*(d,E=d.popupTemplate){if((0,y.Wi)(E))return[];const i=yield E.getRequiredFields(d.fieldsIndex),{lastEditInfoEnabled:c}=E,{objectIdField:_,typeIdField:h,globalIdField:s,relationships:a}=d;if(i.includes("*"))return["*"];const r=c?yield(0,v.CH)(d):[],l=(0,v.Q0)(d.fieldsIndex,[...i,...r]);return h&&l.push(h),l&&_&&d.fieldsIndex?.has(_)&&!l.includes(_)&&l.push(_),l&&s&&d.fieldsIndex?.has(s)&&!l.includes(s)&&l.push(s),a&&a.forEach(f=>{const{keyField:M}=f;l&&M&&d.fieldsIndex?.has(M)&&!l.includes(M)&&l.push(M)}),l})).apply(this,arguments)}function D(d,E){return d.popupTemplate?d.popupTemplate:(0,y.pC)(E)&&E.defaultPopupTemplateEnabled&&(0,y.pC)(d.defaultPopupTemplate)?d.defaultPopupTemplate:null}},94672:(U,g,e)=>{e.d(g,{K:()=>O}),e(29132);var y=e(62208),v=e(16730),u=e(2004);function O(E,i,c,_=new u.Z){let h=0;if("2d"===c.type)h=i*(c.resolution??0);else if("3d"===c.type){const M=c.overlayPixelSizeInMapUnits(E),L=c.basemapSpatialReference;h=(0,y.pC)(L)&&!L.equals(c.spatialReference)?(0,v.c9)(L)/(0,v.c9)(c.spatialReference):i*M}const s=E.x-h,a=E.y-h,r=E.x+h,l=E.y+h,{spatialReference:f}=c;return _.xmin=Math.min(s,r),_.ymin=Math.min(a,l),_.xmax=Math.max(s,r),_.ymax=Math.max(a,l),_.spatialReference=f,_}new u.Z}}]);