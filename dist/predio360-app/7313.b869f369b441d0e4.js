"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[7313],{27313:(G,D,a)=>{a.r(D),a.d(D,{previewCIMSymbol:()=>B});var d=a(15861),u=a(23841),p=a(35909),w=a(57068),U=a(2648),L=a(80991),f=a(71131),R=a(34057);const c=new w.CIMSymbolRasterizer(null),m=(0,u.Wz)(f.b_.size),b=(0,u.Wz)(f.b_.maxSize),I=(0,u.Wz)(f.b_.lineWidth),S=1;function g(){return g=(0,d.Z)(function*(i,e,s){const l=e?.size;let t=null!=l&&"object"==typeof l&&"width"in l?l.width:l,r=null!=l&&"object"==typeof l&&"height"in l?l.height:l;if(null==t||null==r)if("esriGeometryPolygon"===s)t=m,r=m;else{const n=yield function j(i,e,s){return M.apply(this,arguments)}(i,e,s);n&&(t=n.width,r=n.height),"esriGeometryPolyline"===s&&(t=I),t=null!=t&&isFinite(t)?Math.min(t,b):m,r=null!=r&&isFinite(r)?Math.max(Math.min(r,b),S):m}return"legend"===e.style&&"esriGeometryPolyline"===s&&(t=I),{width:t,height:r}}),g.apply(this,arguments)}function M(){return(M=(0,d.Z)(function*(i,e,s){const{feature:l,fieldMap:t,viewParams:r}=e.cimOptions||e,n=yield U.E.resolveSymbolOverrides(i.data,l,null,t,s,null,r);if(!n)return null;(i=i.clone()).data={type:"CIMSymbolReference",symbol:n},i.data.primitiveOverrides=void 0;const o=[];return p.B$.fetchResources(n,c.resourceManager,o),p.B$.fetchFonts(n,c.resourceManager,o),o.length>0&&(yield Promise.all(o)),p.B$.getEnvelope(n,null,c.resourceManager)})).apply(this,arguments)}function B(i){return E.apply(this,arguments)}function E(){return E=(0,d.Z)(function*(i,e={}){const{node:s,opacity:l,symbolConfig:t}=e,r=null!=t&&"object"==typeof t&&"isSquareFill"in t&&t.isSquareFill,n=e.cimOptions||e,o=n.geometryType||(0,L.JW)(i?.data?.symbol),P=yield function W(i,e,s){return g.apply(this,arguments)}(i,e,o),{feature:T,fieldMap:x}=n,z=r||"esriGeometryPolygon"!==o?"preview":"legend",v=yield c.rasterizeCIMSymbolAsync(i,T,P,z,x,o,null,n.viewParams,n.allowScalingUp);if(!v)return null;const{width:A,height:K}=v,h=document.createElement("canvas");h.width=A,h.height=K,h.getContext("2d").putImageData(v,0,0);const O=(0,u.F2)(P.width),C=(0,u.F2)(P.height),_=new Image(O,C);_.src=h.toDataURL(),_.ariaLabel=e.ariaLabel??null,_.alt=e.ariaLabel??"",null!=l&&(_.style.opacity=`${l}`);let y=_;return null!=e.effectView&&(y=(0,R.wh)([[{shape:{type:"image",x:0,y:0,width:O,height:C,src:_.src},fill:null,stroke:null,offset:[0,0]}]],[O,C],{effectView:e.effectView,ariaLabel:e.ariaLabel})),s&&y&&s.appendChild(y),y}),E.apply(this,arguments)}}}]);