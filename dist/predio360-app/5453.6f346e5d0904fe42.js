"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[5453],{15453:(it,ge,c)=>{c.d(ge,{Z:()=>Yt});var N=c(15861),A=c(17626),ve=c(55538),$=c(26584),oe=c(47996),M=c(63290),ye=c(60330),z=c(10699),se=c(32917),S=c(77712),ie=(c(8314),c(4619),c(76898)),y=c(29302),fe=c(2004),Ae=c(21674),U=c(72642),Se=c(37118),F=c(89586),G=c(61751);const x="Expected location to be a Point instance";class Y extends $.Z{constructor(){super("invalid-input:location",x)}}var K=c(57517),we=c(28036),P=c(99746),Q=c(92529),E=c(17727),at=c(85334),be=c(5548),ae=c(60853);let Oe=null;function Ie(e){if(0===e.length)return be.bM;const t=(0,be.Ue)([Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY]);return(0,be.G1)(t,e),t}function Le(e,t){const[r,n,o,s,i,l]=Ie(e);return new fe.Z({xmin:r,ymin:n,zmin:o,xmax:s,ymax:i,zmax:l,spatialReference:t})}var Z=c(79800),T=c(43668),Ze=c(92545);const le="esri.geometry.support.meshUtils.centerAt";const Ne=(0,y.Ue)(),De=(0,y.Ue)(),mt=(0,y.Ue)();var ze=c(21726);function Re(){return Re=(0,N.Z)(function*(e,t,r){const{source:n}=t,{loadGLTFMesh:o}=yield(0,z.Hl)(c.e(9851).then(c.bind(c,69851)),r),s=yield function vt(e,t){return Me.apply(this,arguments)}(n,r);(0,z.k_)(r);const i=o(new U.Z({x:0,y:0,z:0,spatialReference:e.spatialReference}),s.url,{resolveFile:gt(s),signal:r?.signal,expectedType:s.type});i.then(()=>s.dispose(),()=>s.dispose());const{vertexAttributes:l,components:u}=yield i;e.vertexAttributes=l,e.components=u}),Re.apply(this,arguments)}function gt(e){const t=(0,ze.Yd)(e.url);return r=>{const n=(0,ze.PF)(r,t,t),o=n?n.replace(/^ *\.\//,""):null;return(o?e.files.get(o):null)??r}}function Me(){return Me=(0,N.Z)(function*(e,t){if(Array.isArray(e)){if(!e.length)throw new $.Z("mesh-load-external:missing-assets","There must be at least one file to load");return e[0]instanceof File?function xt(e){return Ke(e.map(t=>({name:t.name,mimeType:t.type,source:Be(t)})))}(e):function At(e,t){return Fe.apply(this,arguments)}(e,t)}return Be(e)}),Me.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*(e,t){const{parts:r,assetMimeType:n,assetName:o}=e;if(1===r.length)return new X(r[0].partUrl);const s=yield e.toBlob(t);return(0,z.k_)(t),X.fromBlob(s,Ve(o,n))})).apply(this,arguments)}function Be(e){return X.fromBlob(e,Ve(e.name,e.type))}function Fe(){return Fe=(0,N.Z)(function*(e,t){const r=yield(0,z.OT)(e.map(function(){var n=(0,N.Z)(function*(o){const s=yield function yt(e,t){return Ue.apply(this,arguments)}(o);return(0,z.k_)(t),{name:o.assetName,mimeType:o.assetMimeType,source:s}});return function(o){return n.apply(this,arguments)}}()));if((0,z.Hc)(t))throw r.forEach(n=>n.source.dispose()),(0,z.zE)();return Ke(r)}),Fe.apply(this,arguments)}const $e=/^model\/gltf\+json$/,Ge=/^model\/gltf-binary$/,Pe=/\.gltf$/i,St=/\.glb$/i;function Ke(e){const t=new Map;let r,n=null;for(const{name:o,mimeType:s,source:i}of e)null===n&&($e.test(s)||Pe.test(o)?(n=i.url,r="gltf"):(Ge.test(s)||St.test(o))&&(n=i.url,r="glb")),t.set(o,i.url),i.files.forEach((l,u)=>t.set(u,l));if(null==n)throw new $.Z("mesh-load-external:missing-files","Missing files to load external mesh source");return new X(n,()=>e.forEach(({source:o})=>o.dispose()),t,r)}class X{constructor(t,r=(()=>{}),n=new Map,o){this.url=t,this.dispose=r,this.files=n,this.type=o}static fromBlob(t,r){const n=URL.createObjectURL(t);return new X(n,()=>URL.revokeObjectURL(n),void 0,r)}}function Ve(e,t){return $e.test(t)||Pe.test(e)?"gltf":Ge.test(t)||Pe.test(e)?"glb":void 0}var wt=c(79608),bt=c(46160),pe=c(96603);let V=class extends wt.j{constructor(){super(),this.externalSources=new bt.Z,this._explicitDisplaySource=null,this.addHandles((0,se.on)(()=>this.externalSources,"after-remove",({item:e})=>{e===this._explicitDisplaySource&&(this._explicitDisplaySource=null)},{sync:!0,onListenerRemove:()=>this._explicitDisplaySource=null}))}get displaySource(){return this._explicitDisplaySource??this._implicitDisplaySource}set displaySource(e){if(null!=e&&!(0,pe.NZ)(e))throw new Error("Cannot use this source for display: it is not in a supported format.");this._explicitDisplaySource=e,e&&this.externalSources.every(t=>!(0,pe.fV)(t,e))&&this.externalSources.add(e)}clearSources(){this.externalSources.removeAll()}getExternalSourcesOnService(e){return this.externalSources.items.filter(t=>(0,pe.JG)(t,e))}get _implicitDisplaySource(){return this.externalSources.find(pe.NZ)}};(0,A._)([(0,S.Cb)()],V.prototype,"externalSources",void 0),(0,A._)([(0,S.Cb)()],V.prototype,"displaySource",null),(0,A._)([(0,S.Cb)()],V.prototype,"_implicitDisplaySource",null),(0,A._)([(0,S.Cb)()],V.prototype,"_explicitDisplaySource",void 0),V=(0,A._)([(0,ie.j)("esri.geometry.support.meshUtils.Metadata")],V);var He=c(32884);const ce={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function he(e,t,r){e.isPlane||function jt(e){for(let t=0;t<e.position.length;t+=3)e.position[t+2]+=.5}(e),function Tt(e,t){if(null!=t){H[0]=t[0],H[4]=t[1],H[8]=t[2];for(let r=0;r<e.position.length;r+=3){for(let n=0;n<3;n++)w[n]=e.position[r+n];(0,Z.t)(w,w,H);for(let n=0;n<3;n++)e.position[r+n]=w[n]}if(t[0]!==t[1]||t[1]!==t[2]){H[0]=1/t[0],H[4]=1/t[1],H[8]=1/t[2];for(let r=0;r<e.normal.length;r+=3){for(let n=0;n<3;n++)w[n]=e.normal[r+n];(0,Z.t)(w,w,H),(0,Z.n)(w,w);for(let n=0;n<3;n++)e.normal[r+n]=w[n]}}}}(e,function Et(e,t,r){const n=(0,ae.getUnitScale)(t,r);if(null==e&&1===n)return null;if(null==e)return[n,n,n];if("number"==typeof e){const o=e*n;return[o,o,o]}return[null!=e.width?e.width*n:n,null!=e.depth?e.depth*n:n,null!=e.height?e.height*n:n]}(r?.size,r?.unit,t.spatialReference));const{vertexAttributes:n,vertexSpace:o,transform:s}=(0,ae.georeferenceByTransform)(e,t,{vertexSpace:r?.vertexSpace,geographic:r?.geographic});return{vertexAttributes:new Q.Q({...n,uv:e.uv}),vertexSpace:o,transform:s,components:[new G.Z({faces:e.faces,material:r?.material||null})],spatialReference:t.spatialReference}}const Ct={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},Ot={south:0,east:1,north:2,west:3,up:4,down:5},w=(0,y.Ue)(),H=(0,He.Ue)();var It=c(86274),C=c(52113),me=c(74741),Lt=c(32056),We=c(42722),je=c(81863),Ye=c(93146),O=c(65231);function Qe(e,t,{vertexSpace:r,spatialReference:n}){if("georeferenced"===r.type){const a=e;if(!(0,T.K)(t,a,n))return!1;const{origin:f}=r;return(0,Z.f)(e,a,f),!0}const o=(0,je.rS)(n),s=e;if(!(0,T.K)(t,s,o))return!1;const{origin:i}=r,l=Je;if(!(0,Ye.B)(n,i,l,o))return!1;const u=(0,C.U_)(Je,l);return null!=u&&((0,Z.e)(e,s,u),!0)}const Je=(0,me.Ue)(),Ee="esri.geometry.support.meshUtils.rotate";function ee(e,t,r,n=y.AG){if(null!=e){(0,C.Us)(de,(0,F.WH)(t),(0,F.ZZ)(t));for(let o=0;o<e.length;o+=r){for(let s=0;s<3;s++)te[s]=e[o+s]-n[s];(0,Z.e)(te,te,de);for(let s=0;s<3;s++)e[o+s]=te[s]+n[s]}}}const te=(0,y.Ue)(),Xe=(0,me.Ue)(),ke=(0,F.Ue)(),de=(0,me.Ue)(),qe=(0,He.Ue)(),_e=(0,y.Ue)(),et=(0,We.Ue)(),Te="esri.geometry.support.meshUtils.scale";function tt(e,t,r=y.AG){if(e)for(let n=0;n<e.length;n+=3){for(let o=0;o<3;o++)ne[o]=e[n+o]-r[o];(0,Z.h)(ne,ne,t);for(let o=0;o<3;o++)e[n+o]=ne[o]+r[o]}}const ne=(0,y.Ue)(),Ht=(0,y.Ue)(),nt=(0,me.Ue)(),rt=(0,y.Ue)();var I;const ot="esri.geometry.Mesh";function B(){return M.Z.getLogger(ot)}const Wt={base:null,key:"type",defaultKeyValue:"georeferenced",typeMap:{georeferenced:K.Z,local:we.Z}};let b=I=class extends(oe.Z.LoadableMixin((0,ye.v)(Ae.Z))){constructor(e){super(e),this.components=null,this.vertexSpace=new K.Z,this.transform=null,this.metadata=new V,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new Q.Q,this.type="mesh"}initialize(){(0===this.metadata.externalSources.length||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when(()=>{this.addHandles((0,se.YP)(()=>({vertexAttributes:this.vertexAttributes,components:this.components?.map(e=>e.clone())}),()=>this._clearSources(),{once:!0,sync:!0}))})}get hasExtent(){return this.loaded?this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0):null!=this.metadata.displaySource?.extent}get _transformedExtent(){const{components:e,spatialReference:t,vertexAttributes:r,vertexSpace:n}=this,o=r.position;if(0===o.length||e&&0===e.length)return new fe.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t});if((0,E.zZ)(n)){const{_untransformedBounds:s,transform:i}=this;return function lt([e,t,r,n,o,s],i,l,u){Oe??=new Float64Array(24);const a=Oe;return a[0]=e,a[1]=t,a[2]=r,a[3]=e,a[4]=o,a[5]=r,a[6]=n,a[7]=o,a[8]=r,a[9]=n,a[10]=t,a[11]=r,a[12]=e,a[13]=t,a[14]=s,a[15]=e,a[16]=o,a[17]=s,a[18]=n,a[19]=o,a[20]=s,a[21]=n,a[22]=t,a[23]=s,(0,ae.project)({positions:a,transform:i,vertexSpace:l,inSpatialReference:u,outSpatialReference:u,outPositions:a}),Le(a,u)}(s,i,n,t)}return Le(o,t)}get _untransformedBounds(){return Ie(this.vertexAttributes.position)}get anchor(){const e=(0,E.rU)(this.vertexSpace,this.spatialReference);if(null!=e)return e;const{center:t,zmin:r}=this._transformedExtent;return new U.Z({x:t.x,y:t.y,z:r,spatialReference:this.spatialReference})}get origin(){return(0,E.rU)(this.vertexSpace,this.spatialReference)??this._transformedExtent.center}get extent(){return this.loaded||null==this.metadata?.displaySource?.extent?this._transformedExtent:this.metadata.displaySource.extent.clone()}addComponent(e){this._checkIfLoaded("addComponent()")&&(this.components||(this.components=[]),this.components.push(G.Z.from(e)),this.notifyChange("components"))}removeComponent(e){if(this._checkIfLoaded("removeComponent()")){if(this.components){const t=this.components.indexOf(e);if(-1!==t)return this.components.splice(t,1),void this.notifyChange("components")}B().error("removeComponent()","Provided component is not part of the list of components")}}rotate(e,t,r,n){return(0,F.qw)(e,t,r,st),function Nt(e,t,r){if(!e.vertexAttributes?.position||0===t[3])return;const{spatialReference:n,vertexSpace:o}=e,s=r?.origin??e.anchor,i=r?.geographic,l=(0,Ze.qr)(Ee,o,n,i);(0,E.QK)(e)?function Dt(e,t,r){e.transform??=new P.Z;const{vertexSpace:n,transform:o,spatialReference:s}=e,[i,l,u]=n.origin,a=new U.Z({x:i,y:l,z:u,spatialReference:s}),f=te;if(a.equals(r))(0,Z.s)(f,0,0,0);else if(!Qe(f,r,e))return void M.Z.getLogger(Ee).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh (wkid:${s.wkid}) ${n.type} vertex space. Projection may be possible after calling projection.load().`);(0,Lt.yY)(et,(0,F.ZZ)(t),(0,F.WH)(t));const g=(0,C.PS)(Xe,et,y.AG,y.hq,f),{localMatrix:d}=o,m=(0,C.Jp)(Xe,g,d);o.scale=(0,C.Q$)((0,y.Ue)(),m),(0,C.bA)(m,m,(0,Z.i)(te,o.scale)),o.rotation=(0,F.q_)(m),o.translation=(0,C.i0)((0,y.Ue)(),m)}(e,t,s):l?function zt(e,t,r){const n=e.spatialReference,o=(0,je.rS)(n),s=_e;(0,T.K)(r,s,o)||(0,T.K)(e.origin,s,o);const i=e.vertexAttributes.position,l=e.vertexAttributes.normal,u=e.vertexAttributes.tangent,a=new Float64Array(i.length),f=null!=l?new Float32Array(l.length):null,g=null!=u?new Float32Array(u.length):null;(0,Ye.B)(o,s,de,o),(0,It.xO)(qe,de);const d=ke;(0,Z.t)((0,F.ZZ)(ke),(0,F.ZZ)(t),qe),d[3]=t[3],(0,O.XO)(i,n,a),null!=l&&null!=f&&(0,O.Iz)(l,i,a,n,f),null!=u&&null!=g&&(0,O.wi)(u,i,a,n,g),ee(a,d,3,s),(0,O.To)(a,i,n),null!=l&&null!=f&&(ee(f,d,3),(0,O.Yk)(f,i,a,n,l)),null!=u&&null!=g&&(ee(g,d,4),(0,O.M2)(g,i,a,n,u)),e.vertexAttributesChanged()}(e,t,s):function Bt(e,t,r){const n=_e;if(!(0,T.K)(r,n,e.spatialReference)){const o=e.origin;n[0]=o.x,n[1]=o.y,n[2]=o.z,M.Z.getLogger(Ee).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}ee(e.vertexAttributes.position,t,3,n),ee(e.vertexAttributes.normal,t,3),ee(e.vertexAttributes.tangent,t,4),e.vertexAttributesChanged()}(e,t,s)}(this,st,n),this}offset(e,t,r){if(!this._checkIfLoaded("offset()"))return this;const{vertexSpace:n,vertexAttributes:o}=this,s=o?.position;if(!s)return this;if((0,E.zZ)(n)){const[i,l,u]=n.origin;n.origin=(0,y.al)(i+e,l+t,u+r)}else{for(let i=0;i<s.length;i+=3)s[i]+=e,s[i+1]+=t,s[i+2]+=r;this.vertexAttributesChanged()}return this}scale(e,t){return this._checkIfLoaded("scale()")?(function $t(e,t,r){if(!e.vertexAttributes?.position)return;const{vertexSpace:n,spatialReference:o}=e,s=r?.origin??e.anchor,i=r?.geographic,l=(0,Ze.qr)(Te,n,o,i);(0,E.QK)(e)?function Gt(e,t,r){e.transform??=new P.Z;const{vertexSpace:n,transform:o,spatialReference:s}=e,[i,l,u]=n.origin,a=new U.Z({x:i,y:l,z:u,spatialReference:s}),f=ne;if(a.equals(r))(0,Z.s)(f,0,0,0);else if(!Qe(f,r,e))return void M.Z.getLogger(Te).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh (wkid:${s.wkid}) ${n.type} vertex space. Projection may be possible after calling projection.load().`);const g=(0,Z.s)(Ht,t,t,t),d=(0,C.PS)(nt,We.Wd,y.AG,g,f),{localMatrix:m}=o,R=(0,C.Jp)(nt,d,m);o.scale=(0,C.Q$)((0,y.Ue)(),R),(0,C.bA)(R,R,(0,Z.i)(ne,o.scale)),o.rotation=(0,F.q_)(R),o.translation=(0,C.i0)((0,y.Ue)(),R)}(e,t,s):l?function Kt(e,t,r){const n=e.spatialReference,o=(0,je.rS)(n),s=rt;(0,T.K)(r,s,o)||(0,T.K)(e.origin,s,o);const i=e.vertexAttributes.position,l=e.vertexAttributes.normal,u=e.vertexAttributes.tangent,a=new Float64Array(i.length),f=null!=l?new Float32Array(l.length):null,g=null!=u?new Float32Array(u.length):null;(0,O.XO)(i,n,a),null!=l&&null!=f&&(0,O.Iz)(l,i,a,n,f),null!=u&&null!=g&&(0,O.wi)(u,i,a,n,g),tt(a,t,s),(0,O.To)(a,i,n),null!=l&&null!=f&&(0,O.Yk)(f,i,a,n,l),null!=u&&null!=g&&(0,O.M2)(g,i,a,n,u),e.vertexAttributesChanged()}(e,t,s):function Vt(e,t,r){const n=rt;if(!(0,T.K)(r,n,e.spatialReference)){const o=e.origin;n[0]=o.x,n[1]=o.y,n[2]=o.z,M.Z.getLogger(Te).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}tt(e.vertexAttributes.position,t,n),e.vertexAttributesChanged()}(e,t,s)}(this,e,t),this):this}centerAt(e,t){return this._checkIfLoaded("centerAt()")?(function ct(e,t,r){if(!e.vertexAttributes?.position)return;const{vertexSpace:n}=e,o=r?.origin??e.anchor,s=r?.geographic,i=(0,Ze.qr)(le,n,o.spatialReference,s);(0,E.zZ)(n)?function ut(e,t,r){const{vertexSpace:n}=e;if(!(0,E.zZ)(n))return;const o=De,s=Ne;if(!(0,T.K)(t,s,e.spatialReference))return void M.Z.getLogger(le).error(`Failed to project centerAt location (wkid:${t.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`);if(!(0,T.K)(r,o,e.spatialReference)){const l=e.origin;o[0]=l.x,o[1]=l.y,o[2]=l.z,M.Z.getLogger(le).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}const i=(0,Z.f)(mt,s,o);n.origin=(0,Z.g)((0,y.Ue)(),n.origin,i)}(e,t,o):i?function ft(e,t,r){const n=(0,ae.ungeoreferenceGlobal)(e.vertexAttributes,r),{position:o,normal:s,tangent:i}=(0,ae.georeferenceGlobal)(n,t,!1);e.vertexAttributes.position=o,e.vertexAttributes.normal=s,e.vertexAttributes.tangent=i,e.vertexAttributesChanged()}(e,t,o):function pt(e,t,r){const n=De,o=Ne;if((0,T.K)(t,o,e.spatialReference)){if(!(0,T.K)(r,n,e.spatialReference)){const s=e.origin;n[0]=s.x,n[1]=s.y,n[2]=s.z,M.Z.getLogger(le).error(`Failed to project specified origin (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(function ht(e,t,r){if(e)for(let n=0;n<e.length;n+=3)for(let o=0;o<3;o++)e[n+o]+=t[o]-r[o]})(e.vertexAttributes.position,o,n),e.vertexAttributesChanged()}else M.Z.getLogger(le).error(`Failed to project centerAt location (wkid:${t.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}(e,t,o)}(this,e,t),this):this}load(e){const{metadata:{displaySource:t}}=this;return t&&this.addResolvingPromise(function dt(e,t,r){return Re.apply(this,arguments)}(this,t,e)),Promise.resolve(this)}addExternalSources(e){this.metadata.externalSources.addMany(e)}updateDisplaySource(e){this.metadata.displaySource=e}clone(){return this.cloneWithVertexSpace(this.vertexSpace.clone())}cloneWithVertexSpace(e){let t=null;if(this.components){const n=new Map,o=new Map;t=this.components.map(s=>s.cloneWithDeduplication(n,o))}const r={components:t,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),vertexSpace:e,transform:this.transform?.clone()??null,metadata:this.metadata.clone()};return new I(r)}cloneShallow(){return new I({components:this.components,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes,vertexSpace:this.vertexSpace.clone(),transform:this.transform,metadata:this.metadata})}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}toBinaryGLTF(e){var t=this;return(0,N.Z)(function*(){const r=Promise.all([c.e(8592),c.e(4367)]).then(c.bind(c,54367)),n=t.load(),o=yield Promise.all([r,n]),{toBinaryGLTF:s}=o[0];return s(t,e)})()}get memoryUsage(){let e=0;if(e+=this.vertexAttributes.memoryUsage,null!=this.components)for(const t of this.components)e+=t.memoryUsage;return e}_clearSources(){this.metadata.clearSources()}_checkIfLoaded(e){return!!this.loaded||(B().error(e,"Mesh must be loaded before applying operations"),!1)}static createBox(e,t){if(!(e instanceof U.Z))return B().error(".createBox()",x),null;const r=new I(he(function Zt(){const{faceDescriptions:e,faceVertexOffsets:t,uvScales:r}=Ct,n=4*e.length,o=new Float64Array(3*n),s=new Float32Array(3*n),i=new Float32Array(2*n),l=new Uint32Array(2*e.length*3);let u=0,a=0,f=0,g=0;for(let d=0;d<e.length;d++){const m=e[d],R=u/3;for(const L of t)l[g++]=R+L;const ue=m.corners;for(let L=0;L<4;L++){const J=ue[L];let j=0;i[f++]=.25*r[L][0]+m.uvOrigin[0],i[f++]=m.uvOrigin[1]-.25*r[L][1];for(let D=0;D<3;D++)0!==m.axis[D]?(o[u++]=.5*m.axis[D],s[a++]=m.axis[D]):(o[u++]=.5*J[j++],s[a++]=0)}}return{position:o,normal:s,uv:i,faces:l}}(),e,t));return t?.imageFace&&"all"!==t.imageFace?function Rt(e,t){const r=e.components[0],n=r.faces,o=Ot[t],s=6*o,i=new Array(6),l=new Array(n.length-6);let u=0,a=0;for(let f=0;f<n.length;f++)f>=s&&f<s+6?i[u++]=n[f]:l[a++]=n[f];if(null!=e.vertexAttributes.uv){const f=new Float32Array(e.vertexAttributes.uv),g=4*o*2,d=[0,1,1,1,1,0,0,0];for(let m=0;m<d.length;m++)f[g+m]=d[m];e.vertexAttributes.uv=f}return e.components=[new G.Z({faces:i,material:r.material}),new G.Z({faces:l})],e}(r,t.imageFace):r}static createSphere(e,t){return e instanceof U.Z?new I(he(function Mt(e=0){const t=Math.round(8*2**e),r=2*t,n=(t-1)*(r+1)+2*r,o=new Float64Array(3*n),s=new Float32Array(3*n),i=new Float32Array(2*n),l=new Uint32Array((t-1)*r*2*3);let u=0,a=0,f=0,g=0;for(let d=0;d<=t;d++){const m=d/t*Math.PI+.5*Math.PI,R=Math.cos(m),ue=Math.sin(m);w[2]=ue;const L=0===d||d===t,J=L?r-1:r;for(let j=0;j<=J;j++){const D=j/J*2*Math.PI;w[0]=-Math.sin(D)*R,w[1]=Math.cos(D)*R;for(let W=0;W<3;W++)o[u]=.5*w[W],s[u]=w[W],++u;i[a++]=(j+(L?.5:0))/r,i[a++]=d/t,0!==d&&j!==r&&(d!==t&&(l[f++]=g,l[f++]=g+1,l[f++]=g-r),1!==d&&(l[f++]=g,l[f++]=g-r,l[f++]=g-r-1)),g++}}return{position:o,normal:s,uv:i,faces:l}}(t?.densificationFactor||0),e,t)):(B().error(".createSphere()",x),null)}static createCylinder(e,t){return e instanceof U.Z?new I(he(function Ut(e=0){const r=Math.round(16*2**e),n=4*(r+1)+2*r,o=new Float64Array(3*n),s=new Float32Array(3*n),i=new Float32Array(2*n),l=new Uint32Array(4*r*3);let u=0,a=0,f=0,g=0,d=0;for(let m=0;m<=5;m++){const R=0===m||5===m,ue=m<=1||m>=4,L=2===m||4===m,J=R?r-1:r;for(let j=0;j<=J;j++){const D=j/J*2*Math.PI,W=R?0:.5;w[0]=W*Math.sin(D),w[1]=W*-Math.cos(D),w[2]=m<=2?.5:-.5;for(let re=0;re<3;re++)o[u++]=w[re],s[a++]=ue?2===re?m<=1?1:-1:0:2===re?0:w[re]/W;i[f++]=(j+(R?.5:0))/r,i[f++]=m<=1?1*m/3:m<=3?1*(m-2)/3+1/3:1*(m-4)/3+2/3,L||0===m||j===r||(5!==m&&(l[g++]=d,l[g++]=d+1,l[g++]=d-r),1!==m&&(l[g++]=d,l[g++]=d-r,l[g++]=d-r-1)),d++}}return{position:o,normal:s,uv:i,faces:l}}(t?.densificationFactor||0),e,t)):(B().error(".createCylinder()",x),null)}static createPlane(e,t){if(!(e instanceof U.Z))return B().error(".createPlane()",x),null;const r=t?.facing??"up",n=function Ft(e,t){const r="number"==typeof t?t:null!=t?t.width:1,n="number"==typeof t?t:null!=t?t.height:1;switch(e){case"up":case"down":return{width:r,depth:n};case"north":case"south":return{width:r,height:n};case"east":case"west":return{depth:r,height:n}}}(r,t?.size);return new I(he(function Pt(e){const t=ce.facingAxisOrderSwap[e],r=ce.position,n=ce.normal,o=new Float64Array(r.length),s=new Float32Array(n.length);let i=0;for(let l=0;l<4;l++){const u=i;for(let a=0;a<3;a++){const f=t[a],g=Math.abs(f)-1,d=f>=0?1:-1;o[i]=r[u+g]*d,s[i]=n[u+g]*d,i++}}return{position:o,normal:s,uv:new Float32Array(ce.uv),faces:new Uint32Array(ce.faces),isPlane:!0}}(r),e,{...t,size:n}))}static createFromPolygon(e,t){if(!(e instanceof Se.Z))return B().error(".createFromPolygon()","Expected polygon to be a Polygon instance"),null;const r=(0,at.bT)(e);return new I({vertexAttributes:new Q.Q({position:r.position}),components:[new G.Z({faces:r.faces,shading:"flat",material:t?.material??null})],spatialReference:e.spatialReference,vertexSpace:new K.Z})}static createFromGLTF(e,t,r){return(0,N.Z)(function*(){if(!(e instanceof U.Z)){const o=new Y;throw B().error(".createfromGLTF()",o.message),o}const{loadGLTFMesh:n}=yield(0,z.Hl)(c.e(9851).then(c.bind(c,69851)),r);return new I(yield n(e,t,r))})()}static createFromFiles(e,t,r){return(0,N.Z)(function*(){if((0,ve.XV)(B(),"`Mesh.createFromFiles` is deprecated in favor of 'SceneLayer.convertMesh'",{replacement:"SceneLayer.convertMesh",version:"4.29"}),!(e instanceof U.Z)){const o=new Y;throw(o=>{B().error(".createFromFiles()",o.message)})(o),o}if(!r?.layer)throw new $.Z("invalid:no-layer","SceneLayer required for file to mesh conversion.");return r.layer.convertMesh(t,{location:e,...r})})()}static createWithExternalSource(e,t,r){const n=r?.extent??null,{x:o,y:s,z:i,spatialReference:l}=e,u=r?.transform?.clone()??new P.Z,a=(0,y.al)(o,s,i??0),f=(0,E.yD)(r?.vertexSpace??(0,E.dd)(l),a),g={source:t,extent:n},d=new V;return d.externalSources.push(g),new I({metadata:d,transform:u,vertexSpace:f,spatialReference:l})}static createIncomplete(e,t){const{x:r,y:n,z:o,spatialReference:s}=e,i=t?.transform?.clone()??new P.Z,l=(0,y.al)(r,n,o??0),u=(0,E.yD)(t?.vertexSpace??(0,E.dd)(s),l),a=new I({transform:i,vertexSpace:u,spatialReference:s});return a.addResolvingPromise(Promise.reject(new $.Z("mesh-incomplete","Mesh resources are not complete"))),a}};(0,A._)([(0,S.Cb)({type:[G.Z],json:{write:!0}})],b.prototype,"components",void 0),(0,A._)([(0,S.Cb)({nonNullable:!0,types:Wt,constructOnly:!0,json:{write:!0}})],b.prototype,"vertexSpace",void 0),(0,A._)([(0,S.Cb)({type:P.Z,json:{write:!0}})],b.prototype,"transform",void 0),(0,A._)([(0,S.Cb)({constructOnly:!0})],b.prototype,"metadata",void 0),(0,A._)([(0,S.Cb)()],b.prototype,"hasExtent",null),(0,A._)([(0,S.Cb)()],b.prototype,"_transformedExtent",null),(0,A._)([(0,S.Cb)()],b.prototype,"_untransformedBounds",null),(0,A._)([(0,S.Cb)()],b.prototype,"anchor",null),(0,A._)([(0,S.Cb)()],b.prototype,"origin",null),(0,A._)([(0,S.Cb)({readOnly:!0,json:{read:!1}})],b.prototype,"extent",null),(0,A._)([(0,S.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],b.prototype,"hasZ",void 0),(0,A._)([(0,S.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],b.prototype,"hasM",void 0),(0,A._)([(0,S.Cb)({type:Q.Q,nonNullable:!0,json:{write:!0}})],b.prototype,"vertexAttributes",void 0),b=I=(0,A._)([(0,ie.j)(ot)],b);const st=(0,F.Ue)(),Yt=b},96603:(it,ge,c)=>{c.d(ge,{CP:()=>M,JG:()=>y,LL:()=>ye,NZ:()=>z,fV:()=>fe,vj:()=>Se,yT:()=>G,zE:()=>F});var N=c(15861),A=c(84792),ve=c(85931),$=c(10699),oe=c(35391);class M{constructor(p,v,x){this.assetName=p,this.assetMimeType=v,this.parts=x}equals(p){return this===p||this.assetName===p.assetName&&this.assetMimeType===p.assetMimeType&&(0,ve.fS)(this.parts,p.parts,(v,x)=>v.equals(x))}isOnService(p){return this.parts.every(v=>v.isOnService(p))}makeHash(){let p="";for(const v of this.parts)p+=v.partHash;return p}toBlob(p){var v=this;return(0,N.Z)(function*(){const{parts:x}=v;if(1===x.length)return x[0].toBlob(p);const Y=yield Promise.all(x.map(K=>K.toBlob(p)));return(0,$.k_)(p),new Blob(Y)})()}}class ye{constructor(p,v){this.partUrl=p,this.partHash=v}equals(p){return this===p||this.partUrl===p.partUrl&&this.partHash===p.partHash}isOnService(p){return this.partUrl.startsWith(`${p.path}/assets/`)}toBlob(p){var v=this;return(0,N.Z)(function*(){const{data:x}=yield(0,A.Z)(v.partUrl,{responseType:"blob"});return(0,$.k_)(p),x})()}}function z(h){return function Ce(h){return!!h&&(Array.isArray(h)?h.some(ie):ie(h))}(h?.source)}function se(h){return!!Array.isArray(h)&&h.every(p=>p instanceof M)}const S=/^(model\/gltf\+json)|(model\/gltf-binary)$/,xe=/\.(gltf|glb)/i;function ie(h){if(h instanceof File){const{type:p,name:v}=h;return S.test(p)||xe.test(v)}return S.test(h.assetMimeType)||xe.test(h.assetName)}function y(h,p){if(!h)return!1;const{source:v}=h;return function Ae(h,p){return Array.isArray(h)?h.length>0&&h.every(x=>U(x,p)):U(h,p)}(v,p)}function fe(h,p){if(h===p)return!0;const{source:v}=h,{source:x}=p;if(v===x)return!0;if(se(v)&&se(x)){if(v.length!==x.length)return!1;const Y=(P,Q)=>P.assetName<Q.assetName?-1:P.assetName>Q.assetName?1:0,K=[...v].sort(Y),we=[...x].sort(Y);for(let P=0;P<K.length;++P)if(!K[P].equals(we[P]))return!1;return!0}return!1}function U(h,p){return h instanceof M&&h.isOnService(p)}function Se(h,p){return h instanceof File?(0,oe.dm)(h,p):(0,oe.S0)(h.assetMimeType,p)??(0,oe.Ow)(h.assetName,p)}function F(h){return Array.isArray(h)?h:[h]}function G(h){return!!h.original}}}]);