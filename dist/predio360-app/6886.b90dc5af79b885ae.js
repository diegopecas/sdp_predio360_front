"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[6886,5611],{26886:(f,_,s)=>{s.r(_),s.d(_,{default:()=>V});var i=s(15861),l=s(17626),D=s(59213),M=s(26584),p=s(62208),h=s(10699),P=s(32917),t=s(77712),O=s(76898),C=s(19702),E=s(46160);s(8314),s(63290),s(4619);const e=r=>{let o=class extends r{constructor(...n){super(...n),this.layer=null}get interactive(){return null!=this.analysisView&&this.analysisView.interactive}set interactive(n){null!=this.analysisView&&(this.analysisView.interactive=n)}get results(){return null!=this.analysisView?this.analysisView.results:new E.Z}get selectedDimension(){return null!=this.analysisView?this.analysisView.selectedDimension:null}set selectedDimension(n){null!=this.analysisView&&(this.analysisView.selectedDimension=n)}createLengthDimensions(n){var u=this;return(0,i.Z)(function*(){if(null==u.analysisView)throw(0,h.zE)();yield u.analysisView.createLengthDimensions(n)})()}};return(0,l._)([(0,t.Cb)()],o.prototype,"layer",void 0),(0,l._)([(0,t.Cb)()],o.prototype,"interactive",null),(0,l._)([(0,t.Cb)({readOnly:!0})],o.prototype,"results",null),(0,l._)([(0,t.Cb)()],o.prototype,"selectedDimension",null),o=(0,l._)([(0,O.j)("esri.views.layers.DimensionLayerView")],o),o};var d=s(45611);const c="analysis-view-handles";let y=class extends((0,C.A)(e(d.Z))){constructor(r){super(r),this.type="dimension-3d",this._analysisModule=null}initialize(){this.addHandles((0,P.YP)(()=>this.layer.source,r=>{this._destroyAnalysisView(),null!=r&&this._createAnalysisView(r)},P.tX),c)}destroy(){this.removeHandles(c),this._destroyAnalysisView()}isUpdating(){return null!=this._createAnalysisViewTask||null!=this.analysisView&&this.analysisView.updating}whenAnalysisView(){var r=this;return(0,i.Z)(function*(){if(null!=r.analysisView)return r.analysisView;if(null!=r._createAnalysisViewTask)return r._createAnalysisViewTask.promise;throw new M.Z("layerview:no-analysisview-for-analysis","The analysis has not been set on the DimensionLayer of this layer view")})()}_createAnalysisView(r){var o=this;const n=(0,D.vr)(function(){var u=(0,i.Z)(function*(g){return o.analysisView=yield o._createAnalysisViewPromise(r,g),o._createAnalysisViewTask===n&&(o._createAnalysisViewTask=null),o.analysisView});return function(g){return u.apply(this,arguments)}}());this.addResolvingPromise(n.promise),this._createAnalysisViewTask=n}_destroyAnalysisView(){this.analysisView=(0,p.SC)(this.analysisView),this._createAnalysisViewTask=(0,p.IM)(this._createAnalysisViewTask)}_createAnalysisViewPromise(r,o){var n=this;return(0,i.Z)(function*(){let u=n._analysisModule;if(null==u){const A=yield n._loadAnalysisModule();n._analysisModule=A,u=A}const g=new u.default({analysis:r,view:n.view,parent:n});if(yield g.when(),(0,h.Hc)(o))throw g.destroy(),(0,h.zE)();return g})()}_loadAnalysisModule(){return Promise.all([s.e(4918),s.e(5881),s.e(4353),s.e(3792),s.e(1329),s.e(4407),s.e(8592),s.e(1471)]).then(s.bind(s,21471))}};(0,l._)([(0,t.Cb)()],y.prototype,"type",void 0),(0,l._)([(0,t.Cb)()],y.prototype,"analysisView",void 0),(0,l._)([(0,t.Cb)()],y.prototype,"_createAnalysisViewTask",void 0),y=(0,l._)([(0,O.j)("esri.views.3d.layers.DimensionLayerView3D")],y);const V=y},19702:(f,_,s)=>{s.d(_,{A:()=>m});var i=s(15861),l=s(17626),D=s(54024),M=s(10699),p=s(32917),h=s(77712),C=(s(8314),s(63290),s(4619),s(76898)),E=s(36947);const m=a=>{let v=class extends a{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),(0,E.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var e=this;return(0,i.Z)(function*(){const d=new AbortController,c=d.signal;e.addHandles((0,D.kB)(()=>d.abort())),yield(0,p.N1)(()=>e.view.defaultsFromMap?.heightModelInfoReady,c),(0,M.k_)(c);const y=(0,E.Wt)(e.layer,e.view.heightModelInfo,e.supportsHeightUnitConversion);if(y)throw y})()}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e?.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),d=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return d&&d.minScale&&d.maxScale&&d.minScale<d.maxScale&&(e.outsideScaleRange=!0),e}};return(0,l._)([(0,h.Cb)()],v.prototype,"view",void 0),(0,l._)([(0,h.Cb)()],v.prototype,"slicePlaneEnabled",void 0),v=(0,l._)([(0,C.j)("esri.views.3d.layers.LayerView3D")],v),v}},45611:(f,_,s)=>{s.d(_,{Z:()=>v});var i=s(17626),l=s(83761),D=s(61885),M=s(61996),p=s(63290),h=s(62208),P=s(60330),t=s(77712),E=(s(8314),s(4619),s(76898)),m=s(11426);let a=class extends((0,M.IG)((0,P.v)(D.Z.EventedMixin(l.Z)))){constructor(e){super(e),this._updatingHandles=new m.R,this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){const d=this.layer&&this.layer.id||"no id",c=this.layer?.title||"no title";p.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${c}', id: '${d}')`,e)}})}destroy(){this._updatingHandles=(0,h.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{};return this.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,i._)([(0,t.Cb)()],a.prototype,"fullOpacity",null),(0,i._)([(0,t.Cb)()],a.prototype,"layer",void 0),(0,i._)([(0,t.Cb)()],a.prototype,"parent",void 0),(0,i._)([(0,t.Cb)({readOnly:!0})],a.prototype,"suspended",null),(0,i._)([(0,t.Cb)({readOnly:!0})],a.prototype,"suspendInfo",null),(0,i._)([(0,t.Cb)({readOnly:!0})],a.prototype,"legendEnabled",null),(0,i._)([(0,t.Cb)({type:Boolean,readOnly:!0})],a.prototype,"updating",null),(0,i._)([(0,t.Cb)({readOnly:!0})],a.prototype,"updatingProgress",null),(0,i._)([(0,t.Cb)()],a.prototype,"visible",null),(0,i._)([(0,t.Cb)()],a.prototype,"view",void 0),a=(0,i._)([(0,E.j)("esri.views.layers.LayerView")],a);const v=a}}]);