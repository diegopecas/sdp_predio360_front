"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[1011],{1011:(D,y,h)=>{h.d(y,{W:()=>a});var C=h(2753),M=h(52884),c=h(57477),I=h(38321);class a extends c.s{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this._children=[],this._effectView=null,this._highlightOptions=null,this._highlightGradient=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get children(){return this._children}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach(s=>s.clips=e)}get computedEffects(){return this._effectView?.effects??null}get effect(){return this._effectView?.effect??""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new M.AM),this._effectView.effect=e,this.requestRender())}get highlightOptions(){return this._highlightOptions}set highlightOptions(e){if(!e)return this._highlightOptions=null,void(this._highlightGradient&&(this._highlightGradient.destroy(),this._highlightGradient=null,this.requestRender()));this._highlightOptions&&this._highlightOptions.equals(e)||(this._highlightOptions=e,this._highlightGradient=(0,I.GK)(this._highlightGradient,e),this.requestRender())}get hasBlending(){return!!this.blendMode}get hasHighlight(){return this.children.some(e=>e.hasHighlight)}get hasLabels(){return this.children.some(e=>e.hasLabels)}get requiresDedicatedFBO(){return this.children.some(e=>"blendMode"in e&&e.blendMode&&"normal"!==e.blendMode)}updateTransitionProperties(e,s){super.updateTransitionProperties(e,s),this._effectView&&(this._effectView.transitionStep(e,s),this._effectView.transitioning&&this.requestRender())}doRender(e){const s=this.createRenderParams(e),{painter:p}=s;p.beforeRenderLayer(s,this._clips?.length?255:0,this.computedOpacity),this.renderChildren(s),p.afterRenderLayer(s,this.computedOpacity)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,s=this.children.length){if(!e||this.contains(e))return e;this._needsSort=!0;const p=e.parent;return p&&p!==this&&p.removeChild(e),s>=this.children.length?this.children.push(e):this.children.splice(s,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}endTransitions(){super.endTransitions(),this._effectView&&(this._effectView.endTransitions(),this.requestRender())}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const s=this.children.splice(e,1)[0];return this._childrenSet.delete(s),this!==this.stage&&(s.clips=null),s.stage=null,s.parent=null,s}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}beforeRender(e){super.beforeRender(e);for(const s of this.children)s.beforeRender(e)}afterRender(e){super.afterRender(e);for(const s of this.children)s.afterRender(e)}_createTransforms(){return{displayViewScreenMat3:(0,C.Ue)()}}onAttach(){super.onAttach();const e=this.stage;for(const s of this.children)s.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const s of this.children)s.processRender(e)}createRenderParams(e){return{...e,requireFBO:this.requiresDedicatedFBO,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition,highlightGradient:this._highlightGradient||e.highlightGradient}}}},72571:(D,y,h)=>{h.d(y,{EC:()=>c,Oo:()=>a,ck:()=>I});var C=h(91558),M=h(38093);const c={selection:u=>new M.Z({color:new C.Z([u.color.r/2,u.color.g/2,u.color.b/2,u.color.a])}),highlight:u=>u,popup:u=>new M.Z({color:new C.Z([u.color.g,u.color.b,u.color.r,u.color.a])})};function I(u){if(!u)return 0;let e=1;for(const s in c){if(s===u)break;e<<=1}return e}const a=Object.keys(c)},11690:(D,y,h)=>{h.d(y,{Fo:()=>a,bM:()=>M,dl:()=>c,iq:()=>I,pW:()=>C});const C=1,M=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=256,a={outlineWidth:1.3,outerHaloWidth:.4,innerHaloWidth:.4,outlinePosition:0}},39406:(D,y,h)=>{var C,M,c,I,a,u,e,s,p,t;h.d(y,{CU:()=>c,Un:()=>a,Xq:()=>e,gl:()=>s,jx:()=>M,mH:()=>p}),(t=C||(C={}))[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT",t[t.LABEL=4]="LABEL",function(t){t[t.NONE=0]="NONE",t[t.MAP=1]="MAP",t[t.LABEL=2]="LABEL",t[t.LABEL_ALPHA=4]="LABEL_ALPHA",t[t.HITTEST=8]="HITTEST",t[t.HIGHLIGHT=16]="HIGHLIGHT",t[t.CLIP=32]="CLIP",t[t.DEBUG=64]="DEBUG",t[t.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(M||(M={})),function(t){t[t.SIZE=0]="SIZE",t[t.COLOR=1]="COLOR",t[t.OPACITY=2]="OPACITY",t[t.ROTATION=3]="ROTATION"}(c||(c={})),function(t){t[t.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",t[t.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",t[t.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",t[t.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(I||(I={})),function(t){t[t.SPRITE=0]="SPRITE",t[t.GLYPH=1]="GLYPH"}(a||(a={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.SIMPLE=1]="SIMPLE",t[t.DOT_DENSITY=2]="DOT_DENSITY",t[t.OUTLINE_FILL=3]="OUTLINE_FILL",t[t.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",t[t.HEATMAP=5]="HEATMAP",t[t.PIE_CHART=6]="PIE_CHART"}(u||(u={})),function(t){t[t.All=0]="All",t[t.Highlight=1]="Highlight",t[t.InsideEffect=2]="InsideEffect",t[t.OutsideEffect=3]="OutsideEffect"}(e||(e={})),function(t){t[t.BATCHING=0]="BATCHING",t[t.STRICT_ORDER=1]="STRICT_ORDER",t[t.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(s||(s={})),function(t){t[t.FILL=0]="FILL",t[t.LINE=1]="LINE",t[t.MARKER=2]="MARKER",t[t.TEXT=3]="TEXT"}(p||(p={}))},80020:(D,y,h)=>{h.d(y,{H6:()=>N,VF:()=>w,il:()=>t,l5:()=>x,rO:()=>W,vY:()=>G,wb:()=>U,yF:()=>p});var C=h(8314),M=h(16730),c=h(39351),I=h(39406),a=h(67969);const u={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:r=>r.stencilRef,compare:a.wb.EQUAL,mask:255,op:{fail:a.xS.KEEP,zFail:a.xS.KEEP,zPass:a.xS.REPLACE}}}},e={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},s={...u,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function p({pixelRatio:r,state:_,displayLevel:n,requiredLevel:i},o){const l=1/2**(n-o.key.level),E=1/2**(i-o.key.level);return{displayMat3:Array.from(_.displayMat3),displayViewMat3:Array.from(_.displayViewMat3),displayViewScreenMat3:Array.from(o.transforms.displayViewScreenMat3),viewMat3:Array.from(_.viewMat3),tileMat3:Array.from(o.transforms.tileMat3),displayZoomFactor:l,requiredZoomFactor:E,tileOffset:[o.x,o.y],currentScale:_.scale,currentZoom:n,metersPerSRUnit:(0,M.c9)(_.spatialReference),rotation:_.rotation,pixelRatio:r}}function t(r){return"highlight"===r.passOptions?.type}function w(r){return"hittest"===r.passOptions?.type}function H(r){if(!w(r))return null;const{position:_}=r.passOptions,n=r.pixelRatio,i=(0,C.Z)("esri-mobile");return{position:_,distance:(0,C.Z)(i?"hittest-2d-mobile-tolerance":"hittest-2d-desktop-tolerance")*n,smallSymbolDistance:(0,C.Z)(i?"hittest-2d-mobile-tolerance":"hittest-2d-small-symbol-tolerance")*n,smallSymbolSizeThreshold:(0,C.Z)("hittest-2d-small-symbol-tolerance-threshold")}}function T(r){if(!t(r))return null;const{activeReasons:_,highlightAll:n}=r.passOptions;return{activeReasons:_,highlightAll:n?1:0}}function G(r,_,n){const i={};for(const o in n)i[o]=n[o]instanceof Function?n[o](r,_):n[o];return i}function x(r,_){const{attributeView:n,context:i}=r;return{storage:n.getUniforms(i),view:p(r,_),hittestRequest:H(r),highlight:T(r)}}function W(r){return{inside:r.selection===I.Xq.InsideEffect,outside:r.selection===I.Xq.OutsideEffect}}function N(r){return w(r)?e:t(r)&&"clear"===r.passOptions.stepType?s:u}function U(r){const{row:_,col:n}=r.key,i=n*c.i9,o=_*c.i9;return{tileOffsetFromLocalOrigin:[i%c.ad,o%c.ad],maxIntsToLocalOrigin:[Math.floor(i/c.ad),Math.floor(o/c.ad)]}}},38321:(D,y,h)=>{h.d(y,{JV:()=>U,GK:()=>r,P9:()=>_});var C=h(2076),M=h(63290),c=h(72571),I=h(39351),a=h(11690),u=h(67969),e=h(18952),s=h(31548);const p=()=>M.Z.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient"),w=[0,0,0,0];class H{constructor(){this.type="single",this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:a.Fo.outlinePosition,outlineWidth:a.Fo.outlineWidth,innerHaloWidth:a.Fo.innerHaloWidth,outerHaloWidth:a.Fo.outerHaloWidth},this._shadeTexChanged=!0,this._texelData=new Uint8Array(4*a.iq),this._minMaxDistance=[0,0]}setHighlightOptions(i){const o=this._convertedHighlightOptions;!function t(n,i){i.fillColor[0]=n.color.r/255,i.fillColor[1]=n.color.g/255,i.fillColor[2]=n.color.b/255,i.fillColor[3]=n.color.a,n.haloColor?(i.outlineColor[0]=n.haloColor.r/255,i.outlineColor[1]=n.haloColor.g/255,i.outlineColor[2]=n.haloColor.b/255,i.outlineColor[3]=n.haloColor.a):(i.outlineColor[0]=i.fillColor[0],i.outlineColor[1]=i.fillColor[1],i.outlineColor[2]=i.fillColor[2],i.outlineColor[3]=i.fillColor[3]),i.fillColor[3]*=n.fillOpacity,i.outlineColor[3]*=n.haloOpacity,i.fillColor[0]*=i.fillColor[3],i.fillColor[1]*=i.fillColor[3],i.fillColor[2]*=i.fillColor[3],i.outlineColor[0]*=i.outlineColor[3],i.outlineColor[1]*=i.outlineColor[3],i.outlineColor[2]*=i.outlineColor[3],i.outlineWidth=a.Fo.outlineWidth,i.outerHaloWidth=a.Fo.outerHaloWidth,i.innerHaloWidth=a.Fo.innerHaloWidth,i.outlinePosition=a.Fo.outlinePosition}(i,o);const l=o.outlinePosition-o.outlineWidth/2-o.outerHaloWidth,E=o.outlinePosition-o.outlineWidth/2,m=o.outlinePosition+o.outlineWidth/2,O=o.outlinePosition+o.outlineWidth/2+o.innerHaloWidth,g=Math.sqrt(Math.PI/2)*a.pW,f=Math.abs(l)>g?Math.round(10*(Math.abs(l)-g))/10:0,L=Math.abs(O)>g?Math.round(10*(Math.abs(O)-g))/10:0;let R;f&&!L?p().error("The outer rim of the highlight is "+f+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!f&&L?p().error("The inner rim of the highlight is "+L+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):f&&L&&p().error("The highlight is "+Math.max(f,L)+"px away from the edge of the feature; consider reducing some width values.");const d=[void 0,void 0,void 0,void 0];function P(A,b,v){d[0]=(1-v)*A[0]+v*b[0],d[1]=(1-v)*A[1]+v*b[1],d[2]=(1-v)*A[2]+v*b[2],d[3]=(1-v)*A[3]+v*b[3]}const{_texelData:S}=this;for(let A=0;A<a.iq;++A)R=l+A/(a.iq-1)*(O-l),R<l?(d[0]=0,d[1]=0,d[2]=0,d[3]=0):R<E?P(w,o.outlineColor,(R-l)/(E-l)):R<m?[d[0],d[1],d[2],d[3]]=o.outlineColor:R<O?P(o.outlineColor,o.fillColor,(R-m)/(O-m)):[d[0],d[1],d[2],d[3]]=o.fillColor,S[4*A]=255*d[0],S[4*A+1]=255*d[1],S[4*A+2]=255*d[2],S[4*A+3]=255*d[3];this._minMaxDistance[0]=l,this._minMaxDistance[1]=O,this._shadeTexChanged=!0}applyHighlightOptions(i,o){if(!this._shadeTex){const l=new s.X;l.wrapMode=u.e8.CLAMP_TO_EDGE,l.width=a.iq,l.height=1,this._shadeTex=new e.x(i,l)}this._shadeTexChanged&&(this._shadeTex.updateData(0,0,0,a.iq,1,this._texelData),this._shadeTexChanged=!1),i.bindTexture(this._shadeTex,I.Sf),o.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<c.Oo.length)-1,activeGradient:this}]}}class T{constructor(){this.type="multi";const i={};for(const o in c.EC)i[o]=new H;this.gradients=i}setHighlightOptions(i){for(const o in c.EC){const l=c.EC[o](i);this.gradients[o].setHighlightOptions(l)}}applyHighlightOptions(i,o,l){this.gradients[l].applyHighlightOptions(i,o)}destroy(){for(const i in c.EC)this.gradients[i].destroy()}getReasonsWithGradients(){let i=1;const o=[];for(const l in this.gradients)o.push({activeReasons:i,activeGradient:this.gradients[l]}),i<<=1;return o}}var G=h(80020);function U(n){const{bandCount:i,attributeTable:o,colormap:l,pixelType:E}=n.raster.rasterInfo;return 1===i&&(null!=o||null!=l||"u8"===E||"s8"===E)}function r(n,i){return"single"===n?.type&&i.multiHighlightEnabled&&(n.destroy(),n=null),"multi"!==n?.type||i.multiHighlightEnabled||(n.destroy(),n=null),n||(n=i.multiHighlightEnabled?new T:new H),n.setHighlightOptions(i),n}function _(n,i,o){const{painter:l,highlightGradient:E}=n,{highlight:m}=l.effects;if(!E)return;const O=n.passOptions,g=E.getReasonsWithGradients();for(let f=0;f<g.length;f++){const L={...n,passOptions:{type:"highlight",activeGradient:g[f].activeGradient,activeReasons:g[f].activeReasons,stepType:"burn",highlightAll:i}};if(m.bind(L),o(L),f<g.length-1){let d=0;for(let P=f+1;P<g.length;P++)d|=g[P].activeReasons;o({...n,passOptions:{type:"highlight",activeGradient:g[f].activeGradient,activeReasons:d,stepType:"clear",highlightAll:i}})}const R={...n,passOptions:{type:"highlight",activeGradient:g[f].activeGradient,activeReasons:g[f].activeReasons,stepType:"draw",highlightAll:i}};l.setPipelineState((0,G.H6)(n)),l.updatePipelineState(n.context),m.draw(R),m.unbind()}n.passOptions=O}new C.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"})}}]);