"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[7728],{36592:(Z,A,u)=>{u.d(A,{Q:()=>P});var T=u(85931),j=u(62208),b=u(77029),B=u(14259);class P{constructor(e=9,t){this._compareMinX=D,this._compareMinY=m,this._toBBox=s=>s,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),S.prune(),Y.prune(),F.prune(),X.prune()}all(e){this._all(this._data,e)}search(e,t){let s=this._data;const r=this._toBBox;if(v(e,s))for(S.clear();s;){for(let i=0,o=s.children.length;i<o;i++){const a=s.children[i],c=s.leaf?r(a):a;v(e,c)&&(s.leaf?t(a):p(e,c)?this._all(a,t):S.push(a))}s=S.pop()}}collides(e){let t=this._data;const s=this._toBBox;if(!v(e,t))return!1;for(S.clear();t;){for(let r=0,i=t.children.length;r<i;r++){const o=t.children[r],a=t.leaf?s(o):o;if(v(e,a)){if(t.leaf||p(e,a))return!0;S.push(o)}}t=S.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let s=0,r=e.length;s<r;s++)this.insert(e[s]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){const s=this._data;this._data=t,t=s}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new _([]),this}remove(e){if(!e)return this;let t,s=this._data,r=null,i=0,o=!1;const a=this._toBBox(e);for(F.clear(),X.clear();s||F.length>0;){if(s||(s=(0,j.j0)(F.pop()),r=F.data[F.length-1],i=X.pop()??0,o=!0),s.leaf&&(t=(0,T.cq)(s.children,e,s.children.length,s.indexHint),-1!==t))return s.children.splice(t,1),F.push(s),this._condense(F),this;o||s.leaf||!p(s,a)?r?(i++,s=r.children[i],o=!1):s=null:(F.push(s),X.push(i),i=0,r=s,s=s.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_all(e,t){let s=e;for(Y.clear();s;){if(!0===s.leaf)for(const r of s.children)t(r);else Y.pushArray(s.children);s=Y.pop()??null}}_build(e,t,s,r){const i=s-t+1;let o=this._maxEntries;if(i<=o){const l=new _(e.slice(t,s+1));return x(l,this._toBBox),l}r||(r=Math.ceil(Math.log(i)/Math.log(o)),o=Math.ceil(i/o**(r-1)));const a=new E([]);a.height=r;const c=Math.ceil(i/o),y=c*Math.ceil(Math.sqrt(o));R(e,t,s,y,this._compareMinX);for(let l=t;l<=s;l+=y){const I=Math.min(l+y-1,s);R(e,l,I,c,this._compareMinY);for(let U=l;U<=I;U+=c){const w=Math.min(U+c-1,I);a.children.push(this._build(e,U,w,r-1))}}return x(a,this._toBBox),a}_chooseSubtree(e,t,s,r){for(;r.push(t),!0!==t.leaf&&r.length-1!==s;){let i,o=1/0,a=1/0;for(let c=0,y=t.children.length;c<y;c++){const l=t.children[c],I=f(l),U=L(e,l)-I;U<a?(a=U,o=I<o?I:o,i=l):U===a&&I<o&&(o=I,i=l)}t=i||t.children[0]}return t}_insert(e,t,s){const i=s?e:(0,this._toBBox)(e);F.clear();const o=this._chooseSubtree(i,this._data,t,F);for(o.children.push(e),C(o,i);t>=0&&F.data[t].children.length>this._maxEntries;)this._split(F,t),t--;this._adjustParentBBoxes(i,F,t)}_split(e,t){const s=e.data[t],r=s.children.length,i=this._minEntries;this._chooseSplitAxis(s,i,r);const o=this._chooseSplitIndex(s,i,r);if(!o)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const a=s.children.splice(o,s.children.length-o),c=s.leaf?new _(a):new E(a);c.height=s.height,x(s,this._toBBox),x(c,this._toBBox),t?e.data[t-1].children.push(c):this._splitRoot(s,c)}_splitRoot(e,t){this._data=new E([e,t]),this._data.height=e.height+1,x(this._data,this._toBBox)}_chooseSplitIndex(e,t,s){let r,i,o;r=i=1/0;for(let a=t;a<=s-t;a++){const c=O(e,0,a,this._toBBox),y=O(e,a,s,this._toBBox),l=h(c,y),I=f(c)+f(y);l<r?(r=l,o=a,i=I<i?I:i):l===r&&I<i&&(i=I,o=a)}return o}_chooseSplitAxis(e,t,s){const r=e.leaf?this._compareMinX:D,i=e.leaf?this._compareMinY:m;this._allDistMargin(e,t,s,r)<this._allDistMargin(e,t,s,i)&&e.children.sort(r)}_allDistMargin(e,t,s,r){e.children.sort(r);const i=this._toBBox,o=O(e,0,t,i),a=O(e,s-t,s,i);let c=g(o)+g(a);for(let y=t;y<s-t;y++){const l=e.children[y];C(o,e.leaf?i(l):l),c+=g(o)}for(let y=s-t-1;y>=t;y--){const l=e.children[y];C(a,e.leaf?i(l):l),c+=g(a)}return c}_adjustParentBBoxes(e,t,s){for(let r=s;r>=0;r--)C(t.data[r],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const s=e.data[t];if(0===s.children.length)if(t>0){const r=e.data[t-1],i=r.children;i.splice((0,T.cq)(i,s,i.length,r.indexHint),1)}else this.clear();else x(s,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function x(n,e){O(n,0,n.children.length,e,n)}function O(n,e,t,s,r){r||(r=new _([])),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let i,o=e;o<t;o++)i=n.children[o],C(r,n.leaf?s(i):i);return r}function C(n,e){n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY)}function D(n,e){return n.minX-e.minX}function m(n,e){return n.minY-e.minY}function f(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function g(n){return n.maxX-n.minX+(n.maxY-n.minY)}function L(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function h(n,e){const t=Math.max(n.minX,e.minX),s=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),i=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,i-s)}function p(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function v(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function R(n,e,t,s,r){const i=[e,t];for(;i.length;){const o=(0,j.j0)(i.pop()),a=(0,j.j0)(i.pop());if(o-a<=s)continue;const c=a+Math.ceil((o-a)/s/2)*s;(0,B.q)(n,c,a,o,r),i.push(a,c,c,o)}}const S=new b.Z,Y=new b.Z,F=new b.Z,X=new b.Z({deallocator:void 0});class W{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class d extends W{constructor(){super(...arguments),this.height=1,this.indexHint=new T.SO}}class _ extends d{constructor(e){super(),this.children=e,this.leaf=!0}}class E extends d{constructor(e){super(),this.children=e,this.leaf=!1}}},61256:(Z,A,u)=>{u.d(A,{H:()=>C});var T=u(8314),j=u(36592),b=u(65401);const P={minX:0,minY:0,maxX:0,maxY:0};class C{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new j.Q(9,(0,T.Z)("esri-csp-restrictions")?m=>({minX:m[0],minY:m[1],maxX:m[2],maxY:m[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const m=new Array(this._idByBounds.size);let f=0;this._idByBounds.forEach((g,L)=>{m[f++]=L}),this._indexInvalid=!1,this._index.clear(),this._index.load(m)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(m=>this._idByBounds.has(m))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const m=(0,b.cS)();for(const f of this._boundsById.values())f&&(m[0]=Math.min(f[0],m[0]),m[1]=Math.min(f[1],m[1]),m[2]=Math.max(f[2],m[2]),m[3]=Math.max(f[3],m[3]));return m}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(m){const f=this._boundsById.get(m);this._boundsById.delete(m),f&&(this._idByBounds.delete(f),this._indexInvalid||this._index.remove(f))}forEachInBounds(m,f){this._loadIndex(),function O(D,m,f){(function x(D){P.minX=D[0],P.minY=D[1],P.maxX=D[2],P.maxY=D[3]})(m),D.search(P,f)}(this._index,m,g=>f(this._idByBounds.get(g)))}get(m){return this._boundsById.get(m)}has(m){return this._boundsById.has(m)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(m,f){if(!this._indexInvalid){const g=this._boundsById.get(m);g&&(this._index.remove(g),this._idByBounds.delete(g))}this._boundsById.set(m,f),f&&(this._idByBounds.set(f,m),this._indexInvalid||(this._boundsToLoad.push(f),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},3579:(Z,A,u)=>{u.d(A,{Z:()=>g});var T=u(26584),j=u(61885),b=u(63290),B=u(62208),P=u(5548),x=u(65401),O=u(82054),C=u(61256),D=u(92794),m=u(6185);const f=(0,P.Ue)();class g{constructor(h){this.geometryInfo=h,this._boundsStore=new C.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new j.Z,this.featureAdapter=D.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let h=0;return this._featuresById.forEach(p=>{(0,B.pC)(p.geometry)&&p.geometry.coords&&(h+=p.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:h/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(h){if((0,B.Wi)(this.fullBounds))return null;const[p,v,R,S]=this.fullBounds;return{xmin:p,ymin:v,xmax:R,ymax:S,spatialReference:(0,m.S2)(h)}}add(h){this._add(h),this._emitChanged()}addMany(h){for(const p of h)this._add(p);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(h){const p=this._featuresById.get(h);return p?(this._remove(p),this._emitChanged(),p):null}removeManyById(h){this._boundsStore.invalidateIndex();for(const p of h){const v=this._featuresById.get(p);v&&this._remove(v)}this._emitChanged()}forEachBounds(h,p){for(const v of h){const R=this._boundsStore.get(v.objectId);R&&p((0,P.JR)(f,R))}}getFeature(h){return this._featuresById.get(h)}has(h){return this._featuresById.has(h)}forEach(h){this._featuresById.forEach(p=>h(p))}forEachInBounds(h,p){this._boundsStore.forEachInBounds(h,v=>{p(this._featuresById.get(v))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let h=!1;this._featuresById.forEach((p,v)=>{this._markedIds.has(v)||(h=!0,this._remove(p))}),this._markedIds.clear(),h&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(h){if(!h)return;const p=h.objectId;if(null==p)return void b.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new T.Z("featurestore:invalid-feature","feature id is missing",{feature:h}));const v=this._featuresById.get(p);let R;if(this._markedIds.add(p),v?(h.displayId=v.displayId,R=this._boundsStore.get(p),this._boundsStore.delete(p)):(0,B.pC)(this.onFeatureAdd)&&this.onFeatureAdd(h),(0,B.Wi)(h.geometry)||!h.geometry.coords||!h.geometry.coords.length)return this._boundsStore.set(p,null),void this._featuresById.set(p,h);R=(0,O.$)((0,B.pC)(R)?R:(0,x.Ue)(),h.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),(0,B.pC)(R)&&this._boundsStore.set(p,R),this._featuresById.set(p,h)}_remove(h){(0,B.pC)(this.onFeatureRemove)&&this.onFeatureRemove(h);const p=h.objectId;return this._markedIds.delete(p),this._boundsStore.delete(p),this._featuresById.delete(p),h}}},92794:(Z,A,u)=>{u.d(A,{n:()=>P});var T=u(62208),j=u(77044),b=u(66385),B=u(88071);const P={getObjectId:x=>x.objectId,getAttributes:x=>x.attributes,getAttribute:(x,O)=>x.attributes[O],cloneWithGeometry:(x,O)=>new b.u_(O,x.attributes,null,x.objectId),getGeometry:x=>x.geometry,getCentroid:(x,O)=>((0,T.Wi)(x.centroid)&&(x.centroid=(0,j.Y)(new B.Z,x.geometry,O.hasZ,O.hasM)),x.centroid)}},7728:(Z,A,u)=>{u.r(A),u.d(A,{default:()=>X});var T=u(15861),j=u(26584),b=u(62208),B=u(91179),P=u(37053),x=u(82054),O=u(1476),C=u(3579),D=u(82959),m=u(58175),f=u(56554),g=u(35775),L=u(60466),h=u(85),p=u(36630);const v=P.Zn,R={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:P.Zn},S={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function F(W){return(0,B.wp)(W)?null!=W.m:!!W.hasM}class X{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}load(d){var _=this;return(0,T.Z)(function*(){const E=[],{features:n}=d,e=_._inferLayerProperties(n,d.fields),t=d.fields||[],s=null!=d.hasM?d.hasM:!!e.hasM,r=null!=d.hasZ?d.hasZ:!!e.hasZ,i=!d.spatialReference&&!e.spatialReference,o=i?v:d.spatialReference||e.spatialReference,a=i?R:null,c=d.geometryType||e.geometryType;let l=d.objectIdField||e.objectIdField,I=d.timeInfo;if(c&&(i&&E.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!c))throw new j.Z("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!l)throw new j.Z("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");if(e.objectIdField&&l!==e.objectIdField&&(E.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${l}" doesn't match the field name "${e.objectIdField}", found in the provided fields`}),l=e.objectIdField),l&&!e.objectIdField){let M=null;t.some(K=>K.name===l&&(M=K,!0))?(M.type="esriFieldTypeOID",M.editable=!1,M.nullable=!1):t.unshift({alias:l,name:l,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const M of t){if(null==M.name&&(M.name=M.alias),null==M.alias&&(M.alias=M.name),!M.name)throw new j.Z("feature-layer:invalid-field-name","field name is missing",{field:M});if(M.name===l&&(M.type="esriFieldTypeOID"),!h.v.jsonValues.includes(M.type))throw new j.Z("feature-layer:invalid-field-type",`invalid type for field "${M.name}"`,{field:M})}const U={};for(const M of t)if("esriFieldTypeOID"!==M.type&&"esriFieldTypeGlobalID"!==M.type){const K=(0,p.os)(M);void 0!==K&&(U[M.name]=K)}if(_._fieldsIndex=new L.Z(t),_._createDefaultAttributes=(0,f.Dm)(U,l),I){if(I.startTimeField){const M=_._fieldsIndex.get(I.startTimeField);M?(I.startTimeField=M.name,M.type="esriFieldTypeDate"):I.startTimeField=null}if(I.endTimeField){const M=_._fieldsIndex.get(I.endTimeField);M?(I.endTimeField=M.name,M.type="esriFieldTypeDate"):I.endTimeField=null}if(I.trackIdField){const M=_._fieldsIndex.get(I.trackIdField);M?I.trackIdField=M.name:(I.trackIdField=null,E.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:I}}))}I.startTimeField||I.endTimeField||(E.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:I}}),I=null)}const w={warnings:E,featureErrors:[],layerDefinition:{...S,drawingInfo:(0,f.bU)(c),templates:(0,f.Hq)(U),extent:a,geometryType:c,objectIdField:l,fields:t,hasZ:r,hasM:s,timeInfo:I},assignedObjectIds:{}};if(_._queryEngine=new m.q({fields:t,geometryType:c,hasM:s,hasZ:r,objectIdField:l,spatialReference:o,featureStore:new C.Z({geometryType:c,hasM:s,hasZ:r}),timeInfo:I,cacheSpatialQueries:!0}),!n||!n.length)return _._nextObjectId=O.X,w;const Q=(0,O.S)(l,n);return _._nextObjectId=Q+1,yield(0,D._W)(n,o),_._loadInitialFeatures(w,n)})()}applyEdits(d){var _=this;return(0,T.Z)(function*(){const{spatialReference:E,geometryType:n}=_._queryEngine;return yield Promise.all([(0,g.b)(E,n),(0,D._W)(d.adds,E),(0,D._W)(d.updates,E)]),_._applyEdits(d)})()}queryFeatures(d,_={}){return this._queryEngine.executeQuery(d,_.signal)}queryFeatureCount(d,_={}){return this._queryEngine.executeQueryForCount(d,_.signal)}queryObjectIds(d,_={}){return this._queryEngine.executeQueryForIds(d,_.signal)}queryExtent(d,_={}){return this._queryEngine.executeQueryForExtent(d,_.signal)}querySnapping(d,_={}){return this._queryEngine.executeQueryForSnapping(d,_.signal)}_inferLayerProperties(d,_){let E,n,e=null,t=null,s=null;for(const r of d){const i=r.geometry;if(!(0,b.Wi)(i)&&(e||(e=(0,B.Ji)(i)),t||(t=i.spatialReference),null==E&&(E=(0,B.wp)(W=i)?null!=W.z:!!W.hasZ),null==n&&(n=F(i)),e&&t&&null!=E&&null!=n))break}var W;if(_&&_.length){let r=null;_.some(i=>{const o="esriFieldTypeOID"===i.type,a=!i.type&&i.name&&"objectid"===i.name.toLowerCase();return r=i,o||a})&&(s=r.name)}return{geometryType:e,spatialReference:t,objectIdField:s,hasM:n,hasZ:E}}_loadInitialFeatures(d,_){var E=this;return(0,T.Z)(function*(){const{geometryType:n,hasM:e,hasZ:t,objectIdField:s,spatialReference:r,featureStore:i}=E._queryEngine,o=[];for(const y of _){if(null!=y.uid&&(d.assignedObjectIds[y.uid]=-1),y.geometry&&n!==(0,B.Ji)(y.geometry)){d.featureErrors.push((0,g.av)("Incorrect geometry type."));continue}const l=E._createDefaultAttributes(),I=(0,g.O0)(E._fieldsIndex,l,y.attributes,!0,d.warnings);I?d.featureErrors.push(I):(E._assignObjectId(l,y.attributes,!0),y.attributes=l,null!=y.uid&&(d.assignedObjectIds[y.uid]=y.attributes[s]),(0,b.pC)(y.geometry)&&(y.geometry=(0,D.iV)(y.geometry,y.geometry.spatialReference,r)),o.push(y))}i.addMany((0,x.Yn)([],o,n,t,e,s));const{fullExtent:a,timeExtent:c}=yield E._queryEngine.fetchRecomputedExtents();if(d.layerDefinition.extent=a,c){const{start:y,end:l}=c;d.layerDefinition.timeInfo.timeExtent=[y,l]}return d})()}_applyEdits(d){var _=this;return(0,T.Z)(function*(){const{adds:E,updates:n,deletes:e}=d,t={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(E&&E.length&&_._applyAddEdits(t,E),n&&n.length&&_._applyUpdateEdits(t,n),e&&e.length){for(const i of e)t.deleteResults.push((0,g.d1)(i));_._queryEngine.featureStore.removeManyById(e)}const{fullExtent:s,timeExtent:r}=yield _._queryEngine.fetchRecomputedExtents();return{extent:s,timeExtent:r,featureEditResults:t}})()}_applyAddEdits(d,_){const{addResults:E}=d,{geometryType:n,hasM:e,hasZ:t,objectIdField:s,spatialReference:r,featureStore:i}=this._queryEngine,o=[];for(const a of _){if(a.geometry&&n!==(0,B.Ji)(a.geometry)){E.push((0,g.av)("Incorrect geometry type."));continue}const c=this._createDefaultAttributes(),y=(0,g.O0)(this._fieldsIndex,c,a.attributes);if(y)E.push(y);else{if(this._assignObjectId(c,a.attributes),a.attributes=c,null!=a.uid&&(d.uidToObjectId[a.uid]=a.attributes[s]),(0,b.pC)(a.geometry)){const l=a.geometry.spatialReference??r;a.geometry=(0,D.iV)((0,g.og)(a.geometry,l),l,r)}o.push(a),E.push((0,g.d1)(a.attributes[s]))}}i.addMany((0,x.Yn)([],o,n,t,e,s))}_applyUpdateEdits({updateResults:d},_){const{geometryType:E,hasM:n,hasZ:e,objectIdField:t,spatialReference:s,featureStore:r}=this._queryEngine;for(const i of _){const{attributes:o,geometry:a}=i,c=o&&o[t];if(null==c){d.push((0,g.av)(`Identifier field ${t} missing`));continue}if(!r.has(c)){d.push((0,g.av)(`Feature with object id ${c} missing`));continue}const y=(0,x.EI)(r.getFeature(c),E,e,n);if((0,b.pC)(a)){if(E!==(0,B.Ji)(a)){d.push((0,g.av)("Incorrect geometry type."));continue}const l=a.spatialReference??s;y.geometry=(0,D.iV)((0,g.og)(a,l),l,s)}if(o){const l=(0,g.O0)(this._fieldsIndex,y.attributes,o);if(l){d.push(l);continue}}r.add((0,x.XA)(y,E,e,n,t)),d.push((0,g.d1)(c))}}_assignObjectId(d,_,E=!1){const n=this._queryEngine.objectIdField;d[n]=E&&_&&isFinite(_[n])?_[n]:this._nextObjectId++}}},56554:(Z,A,u)=>{u.d(A,{Dm:()=>C,Hq:()=>D,MS:()=>m,bU:()=>P});var T=u(8314),j=u(58817),b=u(87757),B=u(24837);function P(f){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===f||"esriGeometryMultipoint"===f?B.I4:"esriGeometryPolyline"===f?B.ET:B.lF}}}const x=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let O=1;function C(f,g){if((0,T.Z)("esri-csp-restrictions"))return()=>({[g]:null,...f});try{let L=`this.${g} = null;`;for(const p in f)L+=`this${x.test(p)?`.${p}`:`["${p}"]`} = ${JSON.stringify(f[p])};`;const h=new Function(`\n      return class AttributesClass$${O++} {\n        constructor() {\n          ${L};\n        }\n      }\n    `)();return()=>new h}catch{return()=>({[g]:null,...f})}}function D(f={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,j.d9)(f)}}]}function m(f,g){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:f},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:g,supportsDelete:g,supportsEditing:g,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:g,supportsExceedsLimitStatistics:!0},query:b.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:g,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}}}]);