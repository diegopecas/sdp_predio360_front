"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[5023],{7508:(z,C,f)=>{function S(){return new Float32Array(4)}function x(_){const P=new Float32Array(4);return P[0]=_[0],P[1]=_[1],P[2]=_[2],P[3]=_[3],P}function i(_,P,L,T){const D=new Float32Array(4);return D[0]=_,D[1]=P,D[2]=L,D[3]=T,D}function O(){return S()}function A(){return i(1,1,1,1)}function E(){return i(1,0,0,0)}function v(){return i(0,1,0,0)}function M(){return i(0,0,1,0)}function n(){return i(0,0,0,1)}f.d(C,{al:()=>i,d9:()=>x});const a=O(),e=A(),l=E(),r=v(),t=M(),y=n();Object.freeze(Object.defineProperty({__proto__:null,ONES:e,UNIT_W:y,UNIT_X:l,UNIT_Y:r,UNIT_Z:t,ZEROS:a,clone:x,create:S,createView:function c(_,P){return new Float32Array(_,P,4)},fromValues:i,ones:A,unitW:n,unitX:E,unitY:v,unitZ:M,zeros:O},Symbol.toStringTag,{value:"Module"}))},43289:(z,C,f)=>{f.d(C,{k3:()=>E,s5:()=>A}),Math;const x=256/360,i=1/Math.LN2;function A(n){return function c(n,a){return(n%=a)>=0?n:n+a}(n*x,256)}function E(n){return Math.log(n)*i}},62856:(z,C,f)=>{f.d(C,{Z:()=>S});class S{constructor(){this.name=this.constructor.name||"UnnamedBrush",this.brushEffect=null}prepareState(i,c){}draw(i,c,O){}drawMany(i,c,O){for(const A of c)A.visible&&this.draw(i,A,O)}}},66420:(z,C,f)=>{f.d(C,{J:()=>M});var S=f(21286),x=f(2753),i=f(7508),c=f(39351),O=f(62856),A=f(83994),E=f(67969),v=f(49353);class M extends O.Z{constructor(){super(...arguments),this._color=(0,i.al)(1,0,0,1),this._patternMatrix=(0,x.Ue)(),this._programOptions={id:!1,pattern:!1}}dispose(){this._vao&&(this._vao.dispose(),this._vao=null)}drawMany(a,e){const{context:l,painter:r,requestRender:t,allowDelayedRender:y}=a;this._loadWGLResources(a);const d=a.displayLevel,_=a.styleLayer,P=_.backgroundMaterial,L=r.vectorTilesMaterialManager,T=_.getPaintValue("background-color",d),D=_.getPaintValue("background-opacity",d),w=_.getPaintValue("background-pattern",d),p=void 0!==w,V=1|window.devicePixelRatio,s=a.spriteMosaic;let h,U;const I=V>c.Vo?2:1,N=this._programOptions;N.pattern=p;const u=L.getMaterialProgram(l,P,N);if(!y||null==t||u.compiled){if(l.bindVAO(this._vao),l.useProgram(u),p){const g=s.getMosaicItemPosition(w,!0);if(null!=g){const{tl:o,br:R,page:m}=g;h=R[0]-o[0],U=R[1]-o[1];const W=s.getPageSize(m);null!=W&&(s.bind(l,E.cw.LINEAR,m,c.dD),u.setUniform4f("u_tlbr",o[0],o[1],R[0],R[1]),u.setUniform2fv("u_mosaicSize",W),u.setUniform1i("u_texture",c.dD))}u.setUniform1f("u_opacity",D)}else{const g=T[3]*D;this._color[0]=g*T[0],this._color[1]=g*T[1],this._color[2]=g*T[2],this._color[3]=g,u.setUniform4fv("u_color",this._color)}u.setUniform1f("u_depth",_.z||0);for(const g of e){if(u.setUniform1f("u_coord_range",g.rangeX),u.setUniformMatrix3fv("u_dvsMat3",g.transforms.displayViewScreenMat3),p){const o=Math.max(2**(Math.round(d)-g.key.level),1),R=I*g.width*o,m=R/(0,S.fp)(h),W=R/(0,S.fp)(U);this._patternMatrix[0]=m,this._patternMatrix[4]=W,u.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)}l.setStencilFunction(E.wb.EQUAL,0,255),l.drawArrays(E.MX.TRIANGLE_STRIP,0,4)}}else t()}_loadWGLResources(a){if(this._vao)return;const{context:e,styleLayer:l}=a,r=l.backgroundMaterial,t=new Int8Array([0,0,1,0,0,1,1,1]),y=A.f.createVertex(e,E.l1.STATIC_DRAW,t),d=new v.U(e,r.getAttributeLocations(),r.getLayoutInfo(),{geometry:y});this._vao=d}}},68109:(z,C,f)=>{f.d(C,{j:()=>c});var S=f(1268),x=f(62856),i=f(67969);class c extends x.Z{constructor(){super(...arguments),this._programOptions={id:!1}}dispose(){}drawMany(A,E){const{context:v,displayLevel:M,requiredLevel:n,state:a,painter:e,spriteMosaic:l,styleLayerUID:r,requestRender:t,allowDelayedRender:y}=A;if(!E.some(s=>s.layerData.get(r)?.circleIndexCount??!1))return;const d=A.styleLayer,_=d.circleMaterial,P=e.vectorTilesMaterialManager,T=d.getPaintValue("circle-translate",M),D=d.getPaintValue("circle-translate-anchor",M),p=P.getMaterialProgram(v,_,this._programOptions);if(y&&null!=t&&!p.compiled)return void t();v.useProgram(p),p.setUniformMatrix3fv("u_displayMat3",D===S.fD.VIEWPORT?a.displayMat3:a.displayViewMat3),p.setUniform2fv("u_circleTranslation",T),p.setUniform1f("u_depth",d.z),p.setUniform1f("u_antialiasingWidth",1.2);let V=-1;for(const s of E){if(!s.layerData.has(r))continue;s.key.level!==V&&(V=s.key.level,_.setDataUniforms(p,M,d,V,l));const h=s.layerData.get(r);if(!h.circleIndexCount)continue;h.prepareForRendering(v);const U=h.vao;null!=U&&(v.bindVAO(U),p.setUniformMatrix3fv("u_dvsMat3",s.transforms.displayViewScreenMat3),n!==s.key.level?v.setStencilFunction(i.wb.EQUAL,s.stencilRef,255):v.setStencilFunction(i.wb.GREATER,255,255),v.drawElements(i.MX.TRIANGLES,h.circleIndexCount,i.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*h.circleIndexStart),s.triangleCount+=h.circleIndexCount/3)}}}},11099:(z,C,f)=>{f.d(C,{R:()=>A});var S=f(1268),x=f(39351),i=f(62856),c=f(67969);const O=1/65536;class A extends i.Z{constructor(){super(...arguments),this._fillProgramOptions={id:!1,pattern:!1},this._outlineProgramOptions={id:!1}}dispose(){}drawMany(v,M){const{displayLevel:n,renderPass:a,spriteMosaic:e,styleLayerUID:l}=v;let r=!1;for(const s of M)if(s.layerData.has(l)){const h=s.layerData.get(l);if(h.fillIndexCount>0||h.outlineIndexCount>0){r=!0;break}}if(!r)return;const t=v.styleLayer,y=t.getPaintProperty("fill-pattern"),d=void 0!==y,_=d&&y.isDataDriven;let P;if(d&&!_){const s=y.getValue(n);P=e.getMosaicItemPosition(s,!0)}const L=!d&&t.getPaintValue("fill-antialias",n);let T=!0,D=1;if(!d){const s=t.getPaintProperty("fill-color"),h=t.getPaintProperty("fill-opacity");if(!s?.isDataDriven&&!h?.isDataDriven){const U=t.getPaintValue("fill-color",n);D=t.getPaintValue("fill-opacity",n)*U[3],D>=1&&(T=!1)}}if(T&&"opaque"===a)return;const w=t.getPaintValue("fill-translate",n),p=t.getPaintValue("fill-translate-anchor",n);(T||"translucent"!==a)&&this._drawFill(v,l,t,M,w,p,d,P,_),L&&"opaque"!==a&&!(!t.hasDataDrivenOutlineColor&&t.outlineUsesFillColor&&D<1)&&this._drawOutline(v,l,t,M,w,p)}_drawFill(v,M,n,a,e,l,r,t,y){if(r&&!y&&null==t)return;const{context:d,displayLevel:_,state:P,painter:L,pixelRatio:T,spriteMosaic:D,requestRender:w,allowDelayedRender:p}=v,V=n.fillMaterial,s=L.vectorTilesMaterialManager,h=T>x.Vo?2:1,U=this._fillProgramOptions;U.pattern=r;const I=s.getMaterialProgram(d,V,U);if(p&&null!=w&&!I.compiled)return void w();if(d.useProgram(I),null!=t){const{page:u}=t,g=D.getPageSize(u);null!=g&&(D.bind(d,c.cw.LINEAR,u,x.dD),I.setUniform2fv("u_mosaicSize",g),I.setUniform1i("u_texture",x.dD))}I.setUniformMatrix3fv("u_displayMat3",l===S.fD.VIEWPORT?P.displayMat3:P.displayViewMat3),I.setUniform2fv("u_fillTranslation",e),I.setUniform1f("u_depth",n.z+O);let N=-1;for(const u of a){if(!u.layerData.has(M))continue;u.key.level!==N&&(N=u.key.level,V.setDataUniforms(I,_,n,N,D));const g=u.layerData.get(M);if(!g.fillIndexCount)continue;g.prepareForRendering(d);const o=g.fillVAO;if(null!=o){if(d.bindVAO(o),I.setUniformMatrix3fv("u_dvsMat3",u.transforms.displayViewScreenMat3),d.setStencilFunction(c.wb.EQUAL,u.stencilRef,255),r){const R=Math.max(2**(Math.round(_)-u.key.level),1);I.setUniform1f("u_patternFactor",u.rangeX/(h*u.width*R))}if(y){const R=g.patternMap;if(!R)continue;for(const[m,W]of R){const F=D.getPageSize(m);null!=F&&(D.bind(d,c.cw.LINEAR,m,x.dD),I.setUniform2fv("u_mosaicSize",F),I.setUniform1i("u_texture",x.dD),d.drawElements(c.MX.TRIANGLES,W[1],c.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*W[0]))}}else d.drawElements(c.MX.TRIANGLES,g.fillIndexCount,c.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*g.fillIndexStart);u.triangleCount+=g.fillIndexCount/3}}}_drawOutline(v,M,n,a,e,l){const{context:r,displayLevel:t,state:y,painter:d,pixelRatio:_,spriteMosaic:P,requestRender:L,allowDelayedRender:T}=v,D=n.outlineMaterial,p=.75/_,s=d.vectorTilesMaterialManager.getMaterialProgram(r,D,this._outlineProgramOptions);if(T&&null!=L&&!s.compiled)return void L();r.useProgram(s),s.setUniformMatrix3fv("u_displayMat3",l===S.fD.VIEWPORT?y.displayMat3:y.displayViewMat3),s.setUniform2fv("u_fillTranslation",e),s.setUniform1f("u_depth",n.z+O),s.setUniform1f("u_outline_width",p);let h=-1;for(const U of a){if(!U.layerData.has(M))continue;U.key.level!==h&&(h=U.key.level,D.setDataUniforms(s,t,n,h,P));const I=U.layerData.get(M);if(I.prepareForRendering(r),!I.outlineIndexCount)continue;const N=I.outlineVAO;null!=N&&(r.bindVAO(N),s.setUniformMatrix3fv("u_dvsMat3",U.transforms.displayViewScreenMat3),r.setStencilFunction(c.wb.EQUAL,U.stencilRef,255),r.drawElements(c.MX.TRIANGLES,I.outlineIndexCount,c.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*I.outlineIndexStart),U.triangleCount+=I.outlineIndexCount/3)}}}},69172:(z,C,f)=>{f.d(C,{z:()=>O});var S=f(1268),x=f(39351),i=f(62856),c=f(67969);class O extends i.Z{constructor(){super(...arguments),this._programOptions={id:!1,pattern:!1,sdf:!1}}dispose(){}drawMany(E,v){const{context:M,displayLevel:n,state:a,painter:e,pixelRatio:l,spriteMosaic:r,styleLayerUID:t,requestRender:y,allowDelayedRender:d}=E;if(!v.some(o=>o.layerData.get(t)?.lineIndexCount??!1))return;const _=E.styleLayer,P=_.lineMaterial,L=e.vectorTilesMaterialManager,T=_.getPaintValue("line-translate",n),D=_.getPaintValue("line-translate-anchor",n),w=_.getPaintProperty("line-pattern"),p=void 0!==w,V=p&&w.isDataDriven;let s,h;if(p&&!V){const o=w.getValue(n);s=r.getMosaicItemPosition(o)}let U=!1;if(!p){const o=_.getPaintProperty("line-dasharray");if(h=void 0!==o,U=h&&o.isDataDriven,h&&!U){const R=o.getValue(n),m=_.getDashKey(R,_.getLayoutValue("line-cap",n));s=r.getMosaicItemPosition(m)}}const I=1/l,N=this._programOptions;N.pattern=p,N.sdf=h;const u=L.getMaterialProgram(M,P,N);if(d&&null!=y&&!u.compiled)return void y();if(M.useProgram(u),u.setUniformMatrix3fv("u_displayViewMat3",a.displayViewMat3),u.setUniformMatrix3fv("u_displayMat3",D===S.fD.VIEWPORT?a.displayMat3:a.displayViewMat3),u.setUniform2fv("u_lineTranslation",T),u.setUniform1f("u_depth",_.z),u.setUniform1f("u_antialiasing",I),s&&null!=s){const{page:o}=s,R=r.getPageSize(o);null!=R&&(r.bind(M,c.cw.LINEAR,o,x.dD),u.setUniform2fv("u_mosaicSize",R),u.setUniform1i("u_texture",x.dD))}let g=-1;for(const o of v){if(!o.layerData.has(t))continue;o.key.level!==g&&(g=o.key.level,P.setDataUniforms(u,n,_,g,r)),u.setUniform1f("u_zoomFactor",2**(n-g)/l);const m=o.layerData.get(t);if(!m.lineIndexCount)continue;m.prepareForRendering(M);const W=m.vao;if(null!=W){if(M.bindVAO(W),u.setUniformMatrix3fv("u_dvsMat3",o.transforms.displayViewScreenMat3),M.setStencilFunction(c.wb.EQUAL,o.stencilRef,255),V||U){const F=m.patternMap;if(!F)continue;for(const[j,G]of F){const k=r.getPageSize(j);null!=k&&(r.bind(M,c.cw.LINEAR,j,x.dD),u.setUniform2fv("u_mosaicSize",k),u.setUniform1i("u_texture",x.dD),M.drawElements(c.MX.TRIANGLES,G[1],c.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*G[0]))}}else M.drawElements(c.MX.TRIANGLES,m.lineIndexCount,c.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*m.lineIndexStart);o.triangleCount+=m.lineIndexCount/3}}}}},86406:(z,C,f)=>{f.d(C,{e:()=>M});var S=f(86416),x=f(47132),i=f(1268),c=f(39351),O=f(43289),A=f(62856),E=f(67969);class M extends A.Z{constructor(){super(...arguments),this._iconProgramOptions={id:!1,sdf:!1},this._sdfProgramOptions={id:!1},this._spritesTextureSize=(0,S.Ue)()}dispose(){}drawMany(a,e){const l=a.styleLayer;this._drawIcons(a,l,e),this._drawText(a,l,e)}_drawIcons(a,e,l){const{context:r,displayLevel:t,painter:y,spriteMosaic:d,state:_,styleLayerUID:P,requestRender:L,allowDelayedRender:T}=a,D=e.iconMaterial,w=y.vectorTilesMaterialManager;let p,V=!1;for(const m of l)if(m.layerData.has(P)&&(p=m.layerData.get(P),p.iconPerPageElementsMap.size>0)){V=!0;break}if(!V)return;const s=e.getPaintValue("icon-translate",t),h=e.getPaintValue("icon-translate-anchor",t);let U=e.getLayoutValue("icon-rotation-alignment",t);U===i.aF.AUTO&&(U=e.getLayoutValue("symbol-placement",t)===i.R.POINT?i.aF.VIEWPORT:i.aF.MAP);const I=U===i.aF.MAP,N=e.getLayoutValue("icon-keep-upright",t)&&I,g=this._iconProgramOptions;g.sdf=p.isIconSDF;const o=w.getMaterialProgram(r,D,g);if(T&&null!=L&&!o.compiled)return void L();r.useProgram(o),o.setUniformMatrix3fv("u_displayViewMat3",U===i.aF.MAP?_.displayViewMat3:_.displayMat3),o.setUniformMatrix3fv("u_displayMat3",h===i.fD.VIEWPORT?_.displayMat3:_.displayViewMat3),o.setUniform2fv("u_iconTranslation",s),o.setUniform1f("u_depth",e.z),o.setUniform1f("u_mapRotation",(0,O.s5)(_.rotation)),o.setUniform1f("u_keepUpright",N?1:0),o.setUniform1f("u_level",10*t),o.setUniform1i("u_texture",c.dD),o.setUniform1f("u_fadeDuration",x.v7/1e3);let R=-1;for(const m of l){if(!m.layerData.has(P)||(m.key.level!==R&&(R=m.key.level,D.setDataUniforms(o,t,e,R,d)),p=m.layerData.get(P),0===p.iconPerPageElementsMap.size))continue;p.prepareForRendering(r),p.updateOpacityInfo();const W=p.iconVAO;if(null!=W){r.bindVAO(W),o.setUniformMatrix3fv("u_dvsMat3",m.transforms.displayViewScreenMat3),o.setUniform1f("u_time",(performance.now()-p.lastOpacityUpdate)/1e3);for(const[F,j]of p.iconPerPageElementsMap)this._renderIconRange(a,o,j,F,m)}}}_renderIconRange(a,e,l,r,t){const{context:y,spriteMosaic:d}=a;this._spritesTextureSize[0]=d.getWidth(r)/4,this._spritesTextureSize[1]=d.getHeight(r)/4,e.setUniform2fv("u_mosaicSize",this._spritesTextureSize),d.bind(y,E.cw.LINEAR,r,c.dD),this._setStencilState(a,t),y.drawElements(E.MX.TRIANGLES,l[1],E.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*l[0]),t.triangleCount+=l[1]/3}_drawText(a,e,l){const{context:r,displayLevel:t,glyphMosaic:y,painter:d,pixelRatio:_,spriteMosaic:P,state:L,styleLayerUID:T,requestRender:D,allowDelayedRender:w}=a,p=e.textMaterial,V=d.vectorTilesMaterialManager;let s,h=!1;for(const B of l)if(B.layerData.has(T)&&(s=B.layerData.get(T),s.glyphPerPageElementsMap.size>0)){h=!0;break}if(!h)return;const U=e.getPaintProperty("text-opacity");if(U&&!U.isDataDriven&&0===U.getValue(t))return;const I=e.getPaintProperty("text-color"),N=!I||I.isDataDriven||I.getValue(t)[3]>0,u=e.getPaintProperty("text-halo-width"),g=e.getPaintProperty("text-halo-color"),o=(!u||u.isDataDriven||u.getValue(t)>0)&&(!g||g.isDataDriven||g.getValue(t)[3]>0);if(!N&&!o)return;let m=e.getLayoutValue("text-rotation-alignment",t);m===i.aF.AUTO&&(m=e.getLayoutValue("symbol-placement",t)===i.R.POINT?i.aF.VIEWPORT:i.aF.MAP);const W=m===i.aF.MAP,F=e.getLayoutValue("text-keep-upright",t)&&W,j=.8*3/_;this._glyphTextureSize||(this._glyphTextureSize=(0,S.al)(y.width/4,y.height/4));const G=e.getPaintValue("text-translate",t),k=e.getPaintValue("text-translate-anchor",t),b=V.getMaterialProgram(r,p,this._sdfProgramOptions);if(w&&null!=D&&!b.compiled)return void D();r.useProgram(b),b.setUniformMatrix3fv("u_displayViewMat3",m===i.aF.MAP?L.displayViewMat3:L.displayMat3),b.setUniformMatrix3fv("u_displayMat3",k===i.fD.VIEWPORT?L.displayMat3:L.displayViewMat3),b.setUniform2fv("u_textTranslation",G),b.setUniform1f("u_depth",e.z+152587890625e-16),b.setUniform2fv("u_mosaicSize",this._glyphTextureSize),b.setUniform1f("u_mapRotation",(0,O.s5)(L.rotation)),b.setUniform1f("u_keepUpright",F?1:0),b.setUniform1f("u_level",10*t),b.setUniform1i("u_texture",c._E),b.setUniform1f("u_antialiasingWidth",j),b.setUniform1f("u_fadeDuration",x.v7/1e3);let K=-1;for(const B of l){if(!B.layerData.has(T)||(B.key.level!==K&&(K=B.key.level,p.setDataUniforms(b,t,e,K,P)),s=B.layerData.get(T),0===s.glyphPerPageElementsMap.size))continue;s.prepareForRendering(r),s.updateOpacityInfo();const X=s.textVAO;if(null==X)continue;r.bindVAO(X),b.setUniformMatrix3fv("u_dvsMat3",B.transforms.displayViewScreenMat3),this._setStencilState(a,B);const Z=(performance.now()-s.lastOpacityUpdate)/1e3;b.setUniform1f("u_time",Z),s.glyphPerPageElementsMap.forEach((Q,H)=>{this._renderGlyphRange(r,Q,H,y,b,o,N,B)})}}_renderGlyphRange(a,e,l,r,t,y,d,_){r.bind(a,E.cw.LINEAR,l,c._E),y&&(t.setUniform1f("u_halo",1),a.drawElements(E.MX.TRIANGLES,e[1],E.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*e[0]),_.triangleCount+=e[1]/3),d&&(t.setUniform1f("u_halo",0),a.drawElements(E.MX.TRIANGLES,e[1],E.g.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*e[0]),_.triangleCount+=e[1]/3)}_setStencilState(a,e){const{context:l,is3D:r,stencilSymbols:t}=a;if(l.setStencilTestEnabled(!0),t)return l.setStencilWriteMask(255),void l.setStencilFunction(E.wb.ALWAYS,e.stencilRef,255);l.setStencilWriteMask(0),r?l.setStencilFunction(E.wb.EQUAL,e.stencilRef,255):l.setStencilFunction(E.wb.GREATER,255,255)}}},7423:(z,C,f)=>{f.d(C,{B:()=>S});class S{constructor(i){this._readFile=i}resolveIncludes(i){return this._resolve(i)}_resolve(i,c=new Map){if(c.has(i))return c.get(i);const O=this._read(i);if(!O)throw new Error(`cannot find shader file ${i}`);const A=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let E=A.exec(O);const v=[];for(;null!=E;)v.push({path:E[1],start:E.index,length:E[0].length}),E=A.exec(O);let M=0,n="";return v.forEach(a=>{n+=O.slice(M,a.start),n+=c.has(a.path)?"":this._resolve(a.path,c),M=a.start+a.length}),n+=O.slice(M),c.set(i,n),n}_read(i){return this._readFile(i)}}}}]);