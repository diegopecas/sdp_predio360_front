"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[3722],{13160:(H,F,d)=>{var _,I,c;d.d(F,{E9:()=>M,I6:()=>J,Vl:()=>_,bN:()=>Q}),(c=_||(_={}))[c.Unknown=0]="Unknown",c[c.Point=1]="Point",c[c.LineString=2]="LineString",c[c.Polygon=3]="Polygon";class M{constructor(i,r){this.x=i,this.y=r}clone(){return new M(this.x,this.y)}equals(i,r){return i===this.x&&r===this.y}isEqual(i){return i.x===this.x&&i.y===this.y}setCoords(i,r){this.x=i,this.y=r}normalize(){const i=this.x,r=this.y,l=Math.sqrt(i*i+r*r);this.x/=l,this.y/=l}rightPerpendicular(){const i=this.x;this.x=this.y,this.y=-i}move(i,r){this.x+=i,this.y+=r}assign(i){this.x=i.x,this.y=i.y}assignAdd(i,r){this.x=i.x+r.x,this.y=i.y+r.y}assignSub(i,r){this.x=i.x-r.x,this.y=i.y-r.y}rotate(i,r){const l=this.x,p=this.y;this.x=l*i-p*r,this.y=l*r+p*i}scale(i){this.x*=i,this.y*=i}length(){const i=this.x,r=this.y;return Math.sqrt(i*i+r*r)}static distance(i,r){const l=r.x-i.x,p=r.y-i.y;return Math.sqrt(l*l+p*p)}static add(i,r){return new M(i.x+r.x,i.y+r.y)}static sub(i,r){return new M(i.x-r.x,i.y-r.y)}}class L{constructor(i,r,l){this.ratio=i,this.x=r,this.y=l}}class Q{constructor(i,r,l,p=8,a=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=p,this._pixelMargin=a,this._tileSize=512*p,this._dz=i,this._yPos=r,this._xPos=l}setPixelMargin(i){i!==this._pixelMargin&&(this._pixelMargin=i,this.setExtent(this._extent))}setExtent(i){this._extent=i,this._finalRatio=this._tileSize/i*(1<<this._dz);let r=this._pixelRatio*this._pixelMargin;r/=this._finalRatio;const l=i>>this._dz;r>l&&(r=l),this._margin=r,this._xmin=l*this._xPos-r,this._ymin=l*this._yPos-r,this._xmax=this._xmin+l+2*r,this._ymax=this._ymin+l+2*r}reset(i){this._type=i,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(i,r){this._pushLine(),this._prevIsIn=this._isIn(i,r),this._moveTo(i,r,this._prevIsIn),this._prevPt=new M(i,r),this._firstPt=new M(i,r),this._dist=0}lineTo(i,r){const l=this._isIn(i,r),p=new M(i,r),a=M.distance(this._prevPt,p);let u,f,x,v,j,B,R,C;if(l)this._prevIsIn?this._lineTo(i,r,!0):(u=this._prevPt,f=p,x=this._intersect(f,u),this._start=this._dist+a*(1-this._r),this._lineTo(x.x,x.y,!0),this._lineTo(f.x,f.y,!0));else if(this._prevIsIn)f=this._prevPt,u=p,x=this._intersect(f,u),this._lineTo(x.x,x.y,!0),this._lineTo(u.x,u.y,!1);else{const m=this._prevPt,g=p;if(m.x<=this._xmin&&g.x<=this._xmin||m.x>=this._xmax&&g.x>=this._xmax||m.y<=this._ymin&&g.y<=this._ymin||m.y>=this._ymax&&g.y>=this._ymax)this._lineTo(g.x,g.y,!1);else{const b=[];if((m.x<this._xmin&&g.x>this._xmin||m.x>this._xmin&&g.x<this._xmin)&&(v=(this._xmin-m.x)/(g.x-m.x),C=m.y+v*(g.y-m.y),C<=this._ymin?B=!1:C>=this._ymax?B=!0:b.push(new L(v,this._xmin,C))),(m.x<this._xmax&&g.x>this._xmax||m.x>this._xmax&&g.x<this._xmax)&&(v=(this._xmax-m.x)/(g.x-m.x),C=m.y+v*(g.y-m.y),C<=this._ymin?B=!1:C>=this._ymax?B=!0:b.push(new L(v,this._xmax,C))),(m.y<this._ymin&&g.y>this._ymin||m.y>this._ymin&&g.y<this._ymin)&&(v=(this._ymin-m.y)/(g.y-m.y),R=m.x+v*(g.x-m.x),R<=this._xmin?j=!1:R>=this._xmax?j=!0:b.push(new L(v,R,this._ymin))),(m.y<this._ymax&&g.y>this._ymax||m.y>this._ymax&&g.y<this._ymax)&&(v=(this._ymax-m.y)/(g.y-m.y),R=m.x+v*(g.x-m.x),R<=this._xmin?j=!1:R>=this._xmax?j=!0:b.push(new L(v,R,this._ymax))),0===b.length)this._lineTo(j?this._xmax:this._xmin,B?this._ymax:this._ymin,!0);else if(b.length>1&&b[0].ratio>b[1].ratio)this._start=this._dist+a*b[1].ratio,this._lineTo(b[1].x,b[1].y,!0),this._lineTo(b[0].x,b[0].y,!0);else{this._start=this._dist+a*b[0].ratio;for(let U=0;U<b.length;U++)this._lineTo(b[U].x,b[U].y,!0)}this._lineTo(g.x,g.y,!1)}}this._dist+=a,this._prevIsIn=l,this._prevPt=p}close(){if(this._line.length>2){const i=this._firstPt,r=this._prevPt;i.x===r.x&&i.y===r.y||this.lineTo(i.x,i.y);const l=this._line;let p=l.length;for(;p>=4&&(l[0].x===l[1].x&&l[0].x===l[p-2].x||l[0].y===l[1].y&&l[0].y===l[p-2].y);)l.pop(),l[0].x=l[p-2].x,l[0].y=l[p-2].y,--p}}result(i=!0){return this._pushLine(),0===this._lines.length?null:(this._type===_.Polygon&&i&&O.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==_.LineString)throw new Error("Only valid for lines");this._pushLine();const i=this._lines,r=i.length;if(0===r)return null;const l=[];for(let p=0;p<r;p++)l.push({line:i[p],start:this._starts[p]||0});return l}_isIn(i,r){return i>=this._xmin&&i<=this._xmax&&r>=this._ymin&&r<=this._ymax}_intersect(i,r){let l,p,a;if(r.x>=this._xmin&&r.x<=this._xmax)p=r.y<=this._ymin?this._ymin:this._ymax,a=(p-i.y)/(r.y-i.y),l=i.x+a*(r.x-i.x);else if(r.y>=this._ymin&&r.y<=this._ymax)l=r.x<=this._xmin?this._xmin:this._xmax,a=(l-i.x)/(r.x-i.x),p=i.y+a*(r.y-i.y);else{p=r.y<=this._ymin?this._ymin:this._ymax,l=r.x<=this._xmin?this._xmin:this._xmax;const u=(l-i.x)/(r.x-i.x),f=(p-i.y)/(r.y-i.y);u<f?(a=u,p=i.y+u*(r.y-i.y)):(a=f,l=i.x+f*(r.x-i.x))}return this._r=a,new M(l,p)}_pushLine(){this._line&&(this._type===_.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===_.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===_.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(i,r,l){this._type!==_.Polygon?l&&(i=Math.round((i-(this._xmin+this._margin))*this._finalRatio),r=Math.round((r-(this._ymin+this._margin))*this._finalRatio),this._line.push(new M(i,r))):(l||(i<this._xmin&&(i=this._xmin),i>this._xmax&&(i=this._xmax),r<this._ymin&&(r=this._ymin),r>this._ymax&&(r=this._ymax)),i=Math.round((i-(this._xmin+this._margin))*this._finalRatio),r=Math.round((r-(this._ymin+this._margin))*this._finalRatio),this._line.push(new M(i,r)),this._isH=!1,this._isV=!1)}_lineTo(i,r,l){let p,a;if(this._type!==_.Polygon)if(l){if(i=Math.round((i-(this._xmin+this._margin))*this._finalRatio),r=Math.round((r-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(p=this._line[this._line.length-1],p.equals(i,r)))return;this._line.push(new M(i,r))}else this._line&&this._line.length>0&&this._pushLine();else if(l||(i<this._xmin&&(i=this._xmin),i>this._xmax&&(i=this._xmax),r<this._ymin&&(r=this._ymin),r>this._ymax&&(r=this._ymax)),i=Math.round((i-(this._xmin+this._margin))*this._finalRatio),r=Math.round((r-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){p=this._line[this._line.length-1];const u=p.x===i,f=p.y===r;if(u&&f)return;this._isH&&u||this._isV&&f?(p.x=i,p.y=r,a=this._line[this._line.length-2],a.x===i&&a.y===r?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(a=this._line[this._line.length-2],this._isH=a.x===i,this._isV=a.y===r)):(this._isH=a.x===i,this._isV=a.y===r)):(this._line.push(new M(i,r)),this._isH=u,this._isV=f)}else this._line.push(new M(i,r))}}class J{setExtent(i){this._ratio=4096===i?1:4096/i}get validateTessellation(){return this._ratio<1}reset(i){this._lines=[],this._line=null}moveTo(i,r){this._line&&this._lines.push(this._line),this._line=[];const l=this._ratio;this._line.push(new M(i*l,r*l))}lineTo(i,r){const l=this._ratio;this._line.push(new M(i*l,r*l))}close(){const i=this._line;i&&!i[0].isEqual(i[i.length-1])&&i.push(i[0])}result(){return this._line&&this._lines.push(this._line),0===this._lines.length?null:this._lines}}!function(c){c[c.sideLeft=0]="sideLeft",c[c.sideRight=1]="sideRight",c[c.sideTop=2]="sideTop",c[c.sideBottom=3]="sideBottom"}(I||(I={}));class O{static simplify(i,r,l){if(!l)return;const p=-r,a=i+r,u=-r,f=i+r,x=[],v=[],j=l.length;for(let R=0;R<j;++R){const C=l[R];if(!C||C.length<2)continue;let m,g=C[0];const b=C.length;for(let U=1;U<b;++U)m=C[U],g.x===m.x&&(g.x<=p&&(g.y>m.y?(x.push(R),x.push(U),x.push(I.sideLeft),x.push(-1)):(v.push(R),v.push(U),v.push(I.sideLeft),v.push(-1))),g.x>=a&&(g.y<m.y?(x.push(R),x.push(U),x.push(I.sideRight),x.push(-1)):(v.push(R),v.push(U),v.push(I.sideRight),v.push(-1)))),g.y===m.y&&(g.y<=u&&(g.x<m.x?(x.push(R),x.push(U),x.push(I.sideTop),x.push(-1)):(v.push(R),v.push(U),v.push(I.sideTop),v.push(-1))),g.y>=f&&(g.x>m.x?(x.push(R),x.push(U),x.push(I.sideBottom),x.push(-1)):(v.push(R),v.push(U),v.push(I.sideBottom),v.push(-1)))),g=m}if(0===x.length||0===v.length)return;O.fillParent(l,v,x),O.fillParent(l,x,v);const B=[];O.calcDeltas(B,v,x),O.calcDeltas(B,x,v),O.addDeltas(B,l)}static fillParent(i,r,l){const p=l.length,a=r.length;for(let u=0;u<a;u+=4){const f=r[u],x=r[u+1],v=r[u+2],j=i[f][x-1],B=i[f][x];let R=8092,C=-1;for(let m=0;m<p;m+=4){if(l[m+2]!==v)continue;const g=l[m],b=l[m+1],U=i[g][b-1],z=i[g][b];switch(v){case I.sideLeft:case I.sideRight:if(Z(j.y,U.y,z.y)&&Z(B.y,U.y,z.y)){const K=Math.abs(z.y-U.y);K<R&&(R=K,C=m)}break;case I.sideTop:case I.sideBottom:if(Z(j.x,U.x,z.x)&&Z(B.x,U.x,z.x)){const K=Math.abs(z.x-U.x);K<R&&(R=K,C=m)}}}r[u+3]=C}}static calcDeltas(i,r,l){const p=r.length;for(let a=0;a<p;a+=4){const f=O.calcDelta(a,r,l,[]);i.push(r[a]),i.push(r[a+1]),i.push(r[a+2]),i.push(f)}}static calcDelta(i,r,l,p){const a=r[i+3];if(-1===a)return 0;const u=p.length;return u>1&&p[u-2]===a?0:(p.push(a),O.calcDelta(a,l,r,p)+1)}static addDeltas(i,r){const l=i.length;let p=0;for(let a=0;a<l;a+=4){const u=i[a+3];u>p&&(p=u)}for(let a=0;a<l;a+=4){const u=r[i[a]],f=i[a+1],x=p-i[a+3];switch(i[a+2]){case I.sideLeft:u[f-1].x-=x,u[f].x-=x,1===f&&(u[u.length-1].x-=x),f===u.length-1&&(u[0].x-=x);break;case I.sideRight:u[f-1].x+=x,u[f].x+=x,1===f&&(u[u.length-1].x+=x),f===u.length-1&&(u[0].x+=x);break;case I.sideTop:u[f-1].y-=x,u[f].y-=x,1===f&&(u[u.length-1].y-=x),f===u.length-1&&(u[0].y-=x);break;case I.sideBottom:u[f-1].y+=x,u[f].y+=x,1===f&&(u[u.length-1].y+=x),f===u.length-1&&(u[0].y+=x)}}}}const Z=(c,i,r)=>c>=i&&c<=r||c>=r&&c<=i},10193:(H,F,d)=>{d.r(F),d.d(F,{default:()=>Zt});var w=d(15861),_=d(17626),I=d(84792),M=d(59213),L=d(26584),Q=d(58817),J=d(62208),O=d(99959),Z=d(10699),c=d(21726),i=d(77712),l=(d(90912),d(68653)),p=d(76898),a=d(99433),u=d(2004),f=d(65234),x=d(44917),v=d(50085),j=d(5143),B=d(65088),R=d(552),C=d(50107),m=d(49286),g=d(6647),b=d(99555);let U=null;var K=d(63290),rt=d(55713);class lt{constructor(e,s){this._spriteSource=e,this._maxTextureSize=s,this.devicePixelRatio=1,this._spriteImageFormat="png",this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded","url"===e.type&&e.spriteFormat&&(this._spriteImageFormat=e.spriteFormat),e.pixelRatio&&(this.devicePixelRatio=e.pixelRatio),this.baseURL=e.spriteUrl}get spriteNames(){const e=[];for(const s in this._spritesData)e.push(s);return e.sort(),e}getSpriteInfo(e){return this._spritesData?this._spritesData[e]:null}load(e){var s=this;return(0,w.Z)(function*(){if(s.baseURL){s.loadStatus="loading";try{yield s._loadSprites(e),s.loadStatus="loaded"}catch{s.loadStatus="failed"}}else s.loadStatus="failed"})()}_loadSprites(e){var s=this;return(0,w.Z)(function*(){s._isRetina=s.devicePixelRatio>1.15;const{width:n,height:h,data:o,json:y}=yield s._getSpriteData(s._spriteSource,e),S=Object.keys(y);if(!S||0===S.length||!o)return s._spritesData=s.image=null,void(s.width=s.height=0);s._spritesData=y,s.width=n,s.height=h;const A=Math.max(s._maxTextureSize,4096);if(n>A||h>A){const D=`Sprite resource for style ${s.baseURL} is bigger than the maximum allowed of ${A} pixels}`;throw K.Z.getLogger("esri.layers.support.SpriteSource").error(D),new L.Z("SpriteSource",D)}let T;for(let D=0;D<o.length;D+=4)T=o[D+3]/255,o[D]=o[D]*T,o[D+1]=o[D+1]*T,o[D+2]=o[D+2]*T;s.image=o})()}_getSpriteData(e,s){var n=this;return(0,w.Z)(function*(){if("image"===e.type){let E,N;if(n.devicePixelRatio<1.15){if(!e.spriteSource1x)throw new L.Z("SpriteSource","no image data provided for low resolution sprites!");E=e.spriteSource1x.image,N=e.spriteSource1x.json}else{if(!e.spriteSource2x)throw new L.Z("SpriteSource","no image data provided for high resolution sprites!");E=e.spriteSource2x.image,N=e.spriteSource2x.json}return"width"in E&&"height"in E&&"data"in E&&((0,rt.eP)(E.data)||(0,rt.KZ)(E.data))?{width:E.width,height:E.height,data:new Uint8Array(E.data),json:N}:{...ot(E),json:N}}const h=(0,c.mN)(n.baseURL),o=h.query?"?"+(0,c.B7)(h.query):"",y=n._isRetina?"@2x":"",S=`${h.path}${y}.${n._spriteImageFormat}${o}`,A=`${h.path}${y}.json${o}`,[T,D]=yield Promise.all([(0,I.default)(A,s),(0,I.default)(S,{responseType:"image",...s})]);return{...ot(D.data),json:T.data}})()}}function ot(t){const e=document.createElement("canvas"),s=e.getContext("2d");e.width=t.width,e.height=t.height,s.drawImage(t,0,0,t.width,t.height);const n=s.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8Array(n.data)}}var X=d(2584),at=d(59318),xt=d(51026),mt=d(28930),ht=d(58098);class ft{constructor(e){this.url=e}fetchTileIndex(){var e=this;return(0,w.Z)(function*(){return e._tileIndexPromise||(e._tileIndexPromise=(0,I.default)(e.url).then(s=>s.data.index)),e._tileIndexPromise})()}dataKey(e,s){var n=this;return(0,w.Z)(function*(){const h=yield n.fetchTileIndex();return(0,Z.k_)(s),n._getIndexedDataKey(h,e)})()}_getIndexedDataKey(e,s){const n=[s];if(s.level<0||s.row<0||s.col<0||s.row>>s.level>0||s.col>>s.level>0)return null;let h=s;for(;0!==h.level;)h=new ht.Z(h.level-1,h.row>>1,h.col>>1,h.world),n.push(h);let o,y,S=e,A=n.pop();if(1===S)return A;for(;n.length;)if(o=n.pop(),y=(1&o.col)+((1&o.row)<<1),S){if(0===S[y]){A=null;break}if(1===S[y]){A=o;break}A=o,S=S[y]}return A}}class _t{constructor(e,s){this._tilemap=e,this._tileIndexUrl=s}fetchTileIndex(e){var s=this;return(0,w.Z)(function*(){return s._tileIndexPromise||(s._tileIndexPromise=(0,I.default)(s._tileIndexUrl,{query:{...e?.query}}).then(n=>n.data.index)),s._tileIndexPromise})()}dataKey(e,s){const{level:n,row:h,col:o}=e,y=new ht.Z(e);return this._tilemap.fetchAvailabilityUpsample(n,h,o,y,s).then(()=>(y.world=e.world,y)).catch(S=>{if((0,Z.D_)(S))throw S;return null})}}var gt=d(88159);class vt{constructor(e){this._tileUrl=e,this._promise=null,this._abortController=null,this._abortOptions=[]}getData(e){null===this._promise&&(this._abortController=new AbortController,this._promise=this._makeRequest(this._tileUrl,this._abortController.signal));const s=this._abortOptions;return s.push(e),(0,Z.fu)(e,()=>{s.every(n=>(0,Z.Hc)(n))&&this._abortController.abort()}),this._promise.then(n=>(0,Q.d9)(n))}_makeRequest(e,s){return(0,w.Z)(function*(){const{data:n}=yield(0,I.default)(e,{responseType:"array-buffer",signal:s});return n})()}}const k=new Map;class Tt{constructor(e,s,n){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.name=e,this.sourceUrl=s;const h=(0,c.mN)(this.sourceUrl),o=(0,Q.d9)(n),y=o.tiles;if(h)for(let N=0;N<y.length;N++){const V=(0,c.mN)(y[N]);V&&((0,c.YP)(V.path)||(V.path=(0,c.v_)(h.path,V.path)),y[N]=(0,c.fl)(V.path,{...h.query,...V.query}))}this.tileServers=y;const S=n.capabilities&&n.capabilities.split(",").map(N=>N.toLowerCase().trim()),A=!0===n?.exportTilesAllowed,T=!0===S?.includes("tilemap"),D=A&&n.hasOwnProperty("maxExportTilesCount")?n.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:A,supportsTileMap:T},exportTiles:A?{maxExportTilesCount:+D}:null},this.tileInfo=(0,xt.d)(o.tileInfo,o,null,{ignoreMinMaxLOD:!0});const E=n.tileMap?(0,c.fl)((0,c.v_)(h.path,n.tileMap),h.query??{}):null;T?(this.type="vector-tile",this.tilemap=new _t(new mt.y({layer:{parsedUrl:h,tileInfo:this.tileInfo,type:"vector-tile",tileServers:this.tileServers}}),E)):E&&(this.tilemap=new ft(E)),this.fullExtent=u.Z.fromJSON(n.fullExtent)}destroy(){}getRefKey(e,s){var n=this;return(0,w.Z)(function*(){return(yield n.tilemap?.dataKey(e,s))??e})()}requestTile(e,s,n,h){return function St(t,e,s,n,h){return function At(t,e){return(0,gt.s1)(k,t,()=>new vt(t)).getData(e).then(s=>(k.delete(t),s)).catch(s=>{throw k.delete(t),s})}(t.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,s.toString()).replace(/\{x\}/gi,n.toString()),h)}(this.tileServers[s%this.tileServers.length],e,s,n,h)}isCompatibleWith(e){const s=this.tileInfo,n=e.tileInfo;if(!s.spatialReference.equals(n.spatialReference)||!s.origin.equals(n.origin)||Math.round(s.dpi)!==Math.round(n.dpi))return!1;const h=s.lods,o=n.lods,y=Math.min(h.length,o.length);for(let S=0;S<y;S++){const A=h[S],T=o[S];if(A.level!==T.level||Math.round(A.scale)!==Math.round(T.scale))return!1}return!0}}const q=at.Z.defaults&&at.Z.defaults.io.corsEnabledServers;function tt(){return(tt=(0,w.Z)(function*(t,e){const s={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[n,h]="string"==typeof t?[t,null]:[null,t.jsonUrl];yield G(s,"esri",t,h,e);const o={layerDefinition:s.validatedSource,url:n,serviceUrl:s.sourceUrl,style:s.style,styleUrl:s.styleUrl,spriteUrl:s.style.sprite&&$(s.styleBase,s.style.sprite),spriteFormat:s.spriteFormat,glyphsUrl:s.style.glyphs&&$(s.styleBase,s.style.glyphs),sourceNameToSource:s.sourceNameToSource,primarySourceName:s.primarySourceName};return W(o.spriteUrl),W(o.glyphsUrl),o})).apply(this,arguments)}function W(t){if(!t)return;const e=(0,c.P$)(t);q&&!q.includes(e)&&q.push(e)}function $(...t){let e;for(const s of t)null!=s&&((0,c.oC)(s)?e&&(e=e.split("://")[0]+":"+s.trim()):e=(0,c.YP)(s)?s:(0,c.v_)(e,s));return e?(0,c.Qj)(e):void 0}function G(t,e,s,n,h){return et.apply(this,arguments)}function et(){return et=(0,w.Z)(function*(t,e,s,n,h){let o,y,S;if((0,Z.k_)(h),"string"==typeof s){const T=(0,c.Fv)(s);W(T),S=yield(0,I.default)(T,{...h,responseType:"json",query:{f:"json",...h?.query}}),S.ssl&&(o&&(o=o.replace(/^http:/i,"https:")),y&&(y=y.replace(/^http:/i,"https:"))),o=T,y=T}else null!=s&&(S={data:s},o=s.jsonUrl||null,y=n);const A=S?.data;if(ut(A))return t.styleUrl=o||null,function Rt(t,e,s,n){return it.apply(this,arguments)}(t,A,y,h);if(function Ut(t){return!ut(t)}(A))return t.sourceUrl?yt(t,A,y,!1,e,h):(t.sourceUrl=o||null,yt(t,A,y,!0,e,h));throw new Error("You must specify the URL or the JSON for a service or for a style.")}),et.apply(this,arguments)}function ut(t){return!!t?.sources}function it(){return(it=(0,w.Z)(function*(t,e,s,n){const h=s?(0,c.Yd)(s):(0,c.L)();t.styleBase=h,t.style=e,t.styleUrl&&W(t.styleUrl),e["sprite-format"]&&"webp"===e["sprite-format"].toLowerCase()&&(t.spriteFormat="webp");const o=[];if(e.sources&&e.sources.esri){const y=e.sources.esri;y.url?yield G(t,"esri",$(h,y.url),void 0,n):o.push(G(t,"esri",y,h,n))}for(const y of Object.keys(e.sources))"esri"!==y&&"vector"===e.sources[y].type&&(e.sources[y].url?o.push(G(t,y,$(h,e.sources[y].url),void 0,n)):e.sources[y].tiles&&o.push(G(t,y,e.sources[y],h,n)));yield Promise.all(o)})).apply(this,arguments)}function yt(t,e,s,n,h,o){return st.apply(this,arguments)}function st(){return(st=(0,w.Z)(function*(t,e,s,n,h,o){const y=s?(0,c.Qj)(s)+"/":(0,c.L)(),S=function Pt(t,e){if(t.hasOwnProperty("tileInfo"))return t;const s={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}};let h=78271.51696400007,o=295828763.7957775;const y=[],S=t.hasOwnProperty("minzoom")?+t.minzoom:0,A=t.hasOwnProperty("maxzoom")?+t.maxzoom:22;for(let T=0;T<=A;T++)T>=S&&y.push({level:T,scale:o,resolution:h}),h/=2,o/=2;for(const T of t.tiles??[])W($(e,T));return{capabilities:"TilesOnly",initialExtent:s,fullExtent:s,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:y,spatialReference:{wkid:102100}}}}(e,y),A=new Tt(h,(0,c.fl)(y,o?.query??{}),S);if(!n&&t.primarySourceName in t.sourceNameToSource){const T=t.sourceNameToSource[t.primarySourceName];if(!T.isCompatibleWith(A))return;null!=A.fullExtent&&(null!=T.fullExtent?T.fullExtent.union(A.fullExtent):T.fullExtent=A.fullExtent.clone()),T.tileInfo&&A.tileInfo&&T.tileInfo.lods.length<A.tileInfo.lods.length&&(T.tileInfo=A.tileInfo)}if(n?(t.sourceBase=y,t.source=e,t.validatedSource=S,t.primarySourceName=h,t.sourceUrl&&W(t.sourceUrl)):W(y),t.sourceNameToSource[h]=A,!t.style){if(null==e.defaultStyles)throw new Error;return"string"==typeof e.defaultStyles?G(t,"",$(y,e.defaultStyles,"root.json"),void 0,o):G(t,"",e.defaultStyles,$(y,"root.json"),o)}})).apply(this,arguments)}var wt=d(88755),bt=d(24433),Mt=d(29840),Lt=d(72642),Ct=d(72258);const Y=1e-6;function Dt(t,e){if(t===e)return!0;if(null==t&&null!=e||null!=t&&null==e||null==t||null==e||!t.spatialReference.equals(e.spatialReference)||t.dpi!==e.dpi)return!1;const s=t.origin,n=e.origin;if(Math.abs(s.x-n.x)>=Y||Math.abs(s.y-n.y)>=Y)return!1;let h,o;t.lods[0].scale>e.lods[0].scale?(h=t,o=e):(o=t,h=e);for(let y=h.lods[0].scale;y>=o.lods[o.lods.length-1].scale-Y;y/=2)if(Math.abs(y-o.lods[0].scale)<Y)return!0;return!1}function Et(t,e){if(t===e)return t;if(null==t&&null!=e)return e;if(null!=t&&null==e)return t;if(null==t||null==e)return null;const s=t.size[0],n=t.format,h=t.dpi,o=new Lt.Z({x:t.origin.x,y:t.origin.y}),y=t.spatialReference,S=t.lods[0].scale>e.lods[0].scale?t.lods[0]:e.lods[0],E=(t.lods[t.lods.length-1].scale<=e.lods[e.lods.length-1].scale?t.lods[t.lods.length-1]:e.lods[e.lods.length-1]).scale,N=[];let V=S.scale,ct=S.resolution,dt=0;for(;V>E;)N.push(new Ct.Z({level:dt,resolution:ct,scale:V})),dt++,V/=2,ct/=2;return new X.Z({size:[s,s],dpi:h,format:n||"pbf",origin:o,lods:N,spatialReference:y})}var Ot=d(78364),pt=d(31637);let P=class extends((0,R.h)((0,b.M)((0,j.Z)((0,B.Y)((0,m.q)((0,g.I)((0,C.N)((0,v.V)((0,O.R)(x.Z)))))))))){constructor(...t){super(...t),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null,this.showCollisionBoxes="none",this.path=null}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}destroy(){if(this.sourceNameToSource)for(const t of Object.values(this.sourceNameToSource))t?.destroy();this._spriteSourceMap.clear()}prefetchResources(t){var e=this;return(0,w.Z)(function*(){yield e.loadSpriteSource(globalThis.devicePixelRatio||1,t)})()}load(t){var e=this;const s=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},t).catch(Z.r9).then((0,w.Z)(function*(){if(!e.portalItem||!e.portalItem.id)return;const n=`${e.portalItem.itemUrl}/resources/styles/root.json`;(yield(0,I.default)(n,{...t,query:{f:"json",...e.customParameters,token:e.apiKey}})).data&&e.read({url:n},(0,wt.h)(e.portalItem))})).catch(Z.r9).then(()=>this._loadStyle(t));return this.addResolvingPromise(s),Promise.resolve(this)}get attributionDataUrl(){const t=this.currentStyleInfo,e=t&&t.serviceUrl&&(0,c.mN)(t.serviceUrl);if(!e)return null;const s=this._getDefaultAttribution(e.path);return s?(0,c.fl)(s,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const t=this.primarySource;return t?t.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get parsedUrl(){return this.serviceUrl?(0,c.mN)(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo?.spatialReference??null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(t,e){t&&(0,c.oC)(t)&&(t=`https:${t}`);const s=(0,J.Wg)((0,bt.a)(t));e.styleUrl=(0,Mt.e)(t,s)}get tileInfo(){const t=[];for(const s in this.sourceNameToSource)t.push(this.sourceNameToSource[s]);let e=this.primarySource?.tileInfo||new X.Z;if(t.length>1)for(let s=0;s<t.length;s++)Dt(e,t[s].tileInfo)&&(e=Et(e,t[s].tileInfo));return e}readVersion(t,e){return e.version?parseFloat(e.version):parseFloat(e.currentVersion)}loadSpriteSource(t=1,e){var s=this;return(0,w.Z)(function*(){if(!s._spriteSourceMap.has(t)){const n=(0,pt.hc)("2d").maxTextureSize,h=s.currentStyleInfo?.spriteUrl?(0,c.fl)(s.currentStyleInfo.spriteUrl,{...s.customParameters,token:s.apiKey}):null,o=new lt({type:"url",spriteUrl:h,pixelRatio:t,spriteFormat:s.currentStyleInfo?.spriteFormat},n);yield o.load(e),s._spriteSourceMap.set(t,o)}return s._spriteSourceMap.get(t)})()}setSpriteSource(t,e){var s=this;return(0,w.Z)(function*(){if(!t)return null;const n=(0,pt.hc)("2d").maxTextureSize,h=t.spriteUrl,o=h?(0,c.fl)(h,{...s.customParameters,token:s.apiKey}):null;if(!o&&"url"===t.type)return null;const y=new lt(t,n);try{yield y.load(e);const S=t.pixelRatio||1;return s._spriteSourceMap.clear(),s._spriteSourceMap.set(S,y),o&&s.currentStyleInfo&&(s.currentStyleInfo.spriteUrl=o),s.emit("spriteSource-change",{spriteSource:y}),y}catch(S){(0,Z.r9)(S)}return null})()}loadStyle(t,e){var s=this;return(0,w.Z)(function*(){const n=t||s.style||s.url;return s._loadingTask&&"string"==typeof n&&s.url===n||(s._loadingTask?.abort(),s._loadingTask=(0,M.vr)(h=>(s._spriteSourceMap.clear(),s._getSourceAndStyle(n,{signal:h})),e)),s._loadingTask.promise})()}getStyleLayerId(t){return this.styleRepository.getStyleLayerId(t)}getStyleLayerIndex(t){return this.styleRepository.getStyleLayerIndex(t)}getPaintProperties(t){return(0,Q.d9)(this.styleRepository.getPaintProperties(t))}setPaintProperties(t,e){const s=this.styleRepository.isPainterDataDriven(t);this.styleRepository.setPaintProperties(t,e);const n=this.styleRepository.isPainterDataDriven(t);this.emit("paint-change",{layer:t,paint:e,isDataDriven:s||n})}getStyleLayer(t){return(0,Q.d9)(this.styleRepository.getStyleLayer(t))}setStyleLayer(t,e){this.styleRepository.setStyleLayer(t,e),this.emit("style-layer-change",{layer:t,index:e})}deleteStyleLayer(t){this.styleRepository.deleteStyleLayer(t),this.emit("delete-style-layer",{layer:t})}getLayoutProperties(t){return(0,Q.d9)(this.styleRepository.getLayoutProperties(t))}setLayoutProperties(t,e){this.styleRepository.setLayoutProperties(t,e),this.emit("layout-change",{layer:t,layout:e})}setStyleLayerVisibility(t,e){this.styleRepository.setStyleLayerVisibility(t,e),this.emit("style-layer-visibility-change",{layer:t,visibility:e})}getStyleLayerVisibility(t){return this.styleRepository.getStyleLayerVisibility(t)}write(t,e){return e?.origin&&!this.styleUrl?(e.messages&&e.messages.push(new L.Z("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(t,e)}getTileUrl(t,e,s){return null}_getSourceAndStyle(t,e){var s=this;return(0,w.Z)(function*(){if(!t)throw new Error("invalid style!");const n=yield function It(t,e){return tt.apply(this,arguments)}(t,{...e,query:{...s.customParameters,token:s.apiKey}});"webp"===n.spriteFormat&&((yield function z(t){if(U)return U;const e={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return U=new Promise(s=>{const n=new Image;n.onload=()=>{n.onload=n.onerror=null,s(n.width>0&&n.height>0)},n.onerror=()=>{n.onload=n.onerror=null,s(!1)},n.src="data:image/webp;base64,"+e[t]}),U}("lossy"))||(n.spriteFormat="png")),s._set("currentStyleInfo",{...n}),"string"==typeof t?(s.url=t,s.style=null):(s.url=null,s.style=t),s._set("sourceNameToSource",n.sourceNameToSource),s._set("primarySource",n.sourceNameToSource[n.primarySourceName]),s._set("styleRepository",new Ot.Z(n.style)),s.read(n.layerDefinition,{origin:"service"}),s.emit("load-style")})()}_getDefaultAttribution(t){const e=t.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),s=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!e)return;const n=e[2]&&e[2].toLowerCase();if(!n)return;const h=e[1]||"";for(const o of s)if(o.toLowerCase().includes(n))return(0,c.Fv)(`//static.arcgis.com/attribution/Vector${h}/${o}`)}_loadStyle(t){var e=this;return(0,w.Z)(function*(){return e._loadingTask?.promise??e.loadStyle(null,t)})()}};(0,_._)([(0,i.Cb)({readOnly:!0})],P.prototype,"attributionDataUrl",null),(0,_._)([(0,i.Cb)({type:["show","hide"]})],P.prototype,"listMode",void 0),(0,_._)([(0,i.Cb)({json:{read:!0,write:!0}})],P.prototype,"blendMode",void 0),(0,_._)([(0,i.Cb)({readOnly:!0,json:{read:!1}})],P.prototype,"capabilities",null),(0,_._)([(0,i.Cb)({readOnly:!0})],P.prototype,"currentStyleInfo",void 0),(0,_._)([(0,i.Cb)({json:{read:!1},readOnly:!0,type:u.Z})],P.prototype,"fullExtent",null),(0,_._)([(0,i.Cb)()],P.prototype,"style",void 0),(0,_._)([(0,i.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],P.prototype,"isReference",void 0),(0,_._)([(0,i.Cb)({type:["VectorTileLayer"]})],P.prototype,"operationalLayerType",void 0),(0,_._)([(0,i.Cb)({readOnly:!0})],P.prototype,"parsedUrl",null),(0,_._)([(0,i.Cb)({readOnly:!0})],P.prototype,"serviceUrl",null),(0,_._)([(0,i.Cb)({type:f.Z,readOnly:!0})],P.prototype,"spatialReference",null),(0,_._)([(0,i.Cb)({readOnly:!0})],P.prototype,"styleRepository",void 0),(0,_._)([(0,i.Cb)({readOnly:!0})],P.prototype,"sourceNameToSource",void 0),(0,_._)([(0,i.Cb)({readOnly:!0})],P.prototype,"primarySource",void 0),(0,_._)([(0,i.Cb)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],P.prototype,"styleUrl",null),(0,_._)([(0,a.c)(["portal-item","web-document"],"styleUrl")],P.prototype,"writeStyleUrl",null),(0,_._)([(0,i.Cb)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:X.Z})],P.prototype,"tileInfo",null),(0,_._)([(0,i.Cb)({json:{read:!1},readOnly:!0,value:"vector-tile"})],P.prototype,"type",void 0),(0,_._)([(0,i.Cb)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],P.prototype,"url",void 0),(0,_._)([(0,i.Cb)({readOnly:!0})],P.prototype,"version",void 0),(0,_._)([(0,l.r)("version",["version","currentVersion"])],P.prototype,"readVersion",null),(0,_._)([(0,i.Cb)({type:String})],P.prototype,"showCollisionBoxes",void 0),(0,_._)([(0,i.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],P.prototype,"path",void 0),P=(0,_._)([(0,p.j)("esri.layers.VectorTileLayer")],P);const Zt=P},88755:(H,F,d)=>{d.d(F,{Y:()=>M,h:()=>I});var w=d(21726),_=d(84687);function I(L){return{origin:"portal-item",url:(0,w.mN)(L.itemUrl),portal:L.portal||_.Z.getDefault(),portalItem:L,readResourcePaths:[]}}function M(L){return{origin:"portal-item",messages:[],writtenProperties:[],url:L.itemUrl?(0,w.mN)(L.itemUrl):null,portal:L.portal||_.Z.getDefault(),portalItem:L}}},86575:(H,F,d)=>{d.d(F,{B1:()=>w,DQ:()=>O,DT:()=>Q,JJ:()=>_,Or:()=>Z,_U:()=>I,k3:()=>i,sX:()=>l});const w=Number.POSITIVE_INFINITY,_=Math.PI,I=2*_,M=128/_,Q=_/180,J=1/Math.LN2;function O(a,u){return(a%=u)>=0?a:a+u}function Z(a){return O(a*M,256)}function i(a){return Math.log(a)*J}function l(a,u,f){return a*(1-f)+u*f}}}]);