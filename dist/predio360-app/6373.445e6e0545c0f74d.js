"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[6373,5611],{19702:(g,c,e)=>{e.d(c,{A:()=>v});var i=e(15861),a=e(17626),M=e(54024),p=e(10699),u=e(32917),d=e(77712),P=(e(8314),e(63290),e(4619),e(76898)),E=e(36947);const v=r=>{let h=class extends r{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(t){super.postscript(t),(0,E.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var t=this;return(0,i.Z)(function*(){const n=new AbortController,_=n.signal;t.addHandles((0,M.kB)(()=>n.abort())),yield(0,u.N1)(()=>t.view.defaultsFromMap?.heightModelInfoReady,_),(0,p.k_)(_);const s=(0,E.Wt)(t.layer,t.view.heightModelInfo,t.supportsHeightUnitConversion);if(s)throw s})()}canResume(){const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!t?.minScale||!t.maxScale||t.minScale>=t.maxScale)}getSuspendInfo(){const t=super.getSuspendInfo(),n=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return n&&n.minScale&&n.maxScale&&n.minScale<n.maxScale&&(t.outsideScaleRange=!0),t}};return(0,a._)([(0,d.Cb)()],h.prototype,"view",void 0),(0,a._)([(0,d.Cb)()],h.prototype,"slicePlaneEnabled",void 0),h=(0,a._)([(0,P.j)("esri.views.3d.layers.LayerView3D")],h),h}},6373:(g,c,e)=>{e.r(c),e.d(c,{default:()=>n});var i=e(15861),a=e(17626),M=e(46160),p=e(63290),u=e(32917),d=e(77712),y=(e(8314),e(4619),e(76898)),P=e(72469),E=e(19702),v=e(50916),r=e(45611),h=e(94421);let t=class extends((0,h.Z)((0,v.r)((0,E.A)(r.Z)))){constructor(){super(...arguments),this.type="wmts-3d"}initialize(){this._getCompatibleTileInfoMatrixSet(s=>this._getTileInfoSupportError(s.tileInfo,s.fullExtent));const _=(0,u.N1)(()=>this.view?.basemapTerrain?.tilingSchemeLocked).then(()=>{const s=this._getCompatibleTileInfoMatrixSet(l=>this._getTileInfoError(l.tileInfo,l.fullExtent));null!=s&&(null!==s.id&&this.layer.activeLayer.tileMatrixSetId!==s.id&&(this.layer.activeLayer.tileMatrixSetId=s.id),s.tileInfo&&(this.tileInfo=s.tileInfo),this.layer.fullExtent=s.fullExtent)});this.addResolvingPromise(_),this.when(()=>this._postInitialize())}get hasMixedImageFormats(){return!0}refresh(){this.emit("data-changed")}canResume(){if(!super.canResume())return!1;const _=this.layer.activeLayer.tileMatrixSet;return null!=_&&!this._getTileInfoError(_.tileInfo,_.fullExtent)}doRefresh(){var _=this;return(0,i.Z)(function*(){_.suspended||_.emit("data-changed")})()}_postInitialize(){this._updatingHandles.add(()=>this.layer?.activeLayer?.styleId,()=>this.refresh()),this._updatingHandles.add(()=>this.layer?.activeLayer,_=>{const s=this._getCompatibleTileInfoMatrixSet(l=>this._getTileInfoError(l.tileInfo,l.fullExtent),!0);s&&null!=s.id&&_.tileMatrixSetId!==s.id&&(this.layer.activeLayer.tileMatrixSetId=s.id),this.notifyChange("suspended"),this.canResume()&&this.refresh()})}_getCompatibleTileInfoMatrixSet(_,s=!1){const l=(0,P.mt)(this.layer);if(null!=l){if(M.Z.isCollection(l))return l.find(C=>{const D=_(C);return null!=D&&(s?p.Z.getLogger(this).error("The selected tile matrix set is not compatible with the view",D):this.addResolvingPromise(Promise.reject(D))),null==D});const I=_(l);return null!=I&&(s?p.Z.getLogger(this).error("The selected tile matrix set is not compatible with the view",I):this.addResolvingPromise(Promise.reject(I))),l}return null}_getTileInfoError(_,s){return this._getTileInfoSupportError(_,s)||this._getTileInfoCompatibilityError(_,this.view.basemapTerrain.tilingScheme)}};(0,a._)([(0,d.Cb)({readOnly:!0})],t.prototype,"hasMixedImageFormats",null),(0,a._)([(0,d.Cb)()],t.prototype,"layer",void 0),(0,a._)([(0,d.Cb)()],t.prototype,"suspended",void 0),(0,a._)([(0,d.Cb)()],t.prototype,"tileInfo",void 0),t=(0,a._)([(0,y.j)("esri.views.3d.layers.WMTSLayerView3d")],t);const n=t},45611:(g,c,e)=>{e.d(c,{Z:()=>h});var i=e(17626),a=e(83761),M=e(61885),p=e(61996),u=e(63290),d=e(62208),O=e(60330),o=e(77712),E=(e(8314),e(4619),e(76898)),v=e(11426);let r=class extends((0,p.IG)((0,O.v)(M.Z.EventedMixin(a.Z)))){constructor(t){super(t),this._updatingHandles=new v.R,this.layer=null,this.parent=null}initialize(){this.when().catch(t=>{if("layerview:create-error"!==t.name){const n=this.layer&&this.layer.id||"no id",_=this.layer?.title||"no title";u.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${_}', id: '${n}')`,t)}})}destroy(){this._updatingHandles=(0,d.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(t){this._overrideIfSome("visible",t)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const t=this.parent?.suspended?this.parent.suspendInfo:{};return this.view?.ready||(t.viewNotReady=!0),this.layer&&this.layer.loaded||(t.layerNotLoaded=!0),this.visible||(t.layerInvisible=!0),t}isUpdating(){return!1}};(0,i._)([(0,o.Cb)()],r.prototype,"fullOpacity",null),(0,i._)([(0,o.Cb)()],r.prototype,"layer",void 0),(0,i._)([(0,o.Cb)()],r.prototype,"parent",void 0),(0,i._)([(0,o.Cb)({readOnly:!0})],r.prototype,"suspended",null),(0,i._)([(0,o.Cb)({readOnly:!0})],r.prototype,"suspendInfo",null),(0,i._)([(0,o.Cb)({readOnly:!0})],r.prototype,"legendEnabled",null),(0,i._)([(0,o.Cb)({type:Boolean,readOnly:!0})],r.prototype,"updating",null),(0,i._)([(0,o.Cb)({readOnly:!0})],r.prototype,"updatingProgress",null),(0,i._)([(0,o.Cb)()],r.prototype,"visible",null),(0,i._)([(0,o.Cb)()],r.prototype,"view",void 0),r=(0,i._)([(0,E.j)("esri.views.layers.LayerView")],r);const h=r},94421:(g,c,e)=>{e.d(c,{Z:()=>y});var i=e(17626),a=e(63290),M=e(10699),p=e(32917),o=(e(8314),e(4619),e(26584),e(76898));const y=P=>{let E=class extends P{initialize(){this.addHandles((0,p.on)(()=>this.layer,"refresh",v=>{this.doRefresh(v.dataChanged).catch(r=>{(0,M.D_)(r)||a.Z.getLogger(this).error(r)})}),"RefreshableLayerView")}};return E=(0,i._)([(0,o.j)("esri.layers.mixins.RefreshableLayerView")],E),E}}}]);