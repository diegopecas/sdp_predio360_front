"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[7728],{95324:(X,Z,_)=>{function U(u){return null!=v(u)||null!=b(u)}function P(u){return R.test(u)}function A(u){return v(u)??b(u)}function b(u){const a=new Date(u);return function j(u,a){if(Number.isNaN(u.getTime()))return!1;let I=!0;if(F&&/\d+\W*$/.test(a)){const T=a.match(/[a-zA-Z]{2,}/);if(T){let l=!1,h=0;for(;!l&&h<=T.length;)l=!C.test(T[h]),h++;I=!l}}return I}(a,u)?Number.isNaN(a.getTime())?null:a.getTime()-6e4*a.getTimezoneOffset():null}function v(u){const a=R.exec(u);if(!a?.groups)return null;const I=a.groups,T=+I.year,l=+I.month-1,h=+I.day,B=+(I.hours??"0"),D=+(I.minutes??"0"),S=+(I.seconds??"0");if(B>23||D>59||S>59)return null;const y=I.ms??"0",O=y?+y.padEnd(3,"0").substring(0,3):0;let L;return L=I.isUTC||!I.offsetSign?Date.UTC(T,l,h,B,D,S,O):6e4*("+"===I.offsetSign?-1:1)*(60*+I.offsetHours+ +I.offsetMinutes)+Date.UTC(T,l,h,B,D,S,O),Number.isNaN(L)?null:L}_.d(Z,{mu:()=>P,of:()=>U,sG:()=>A});const R=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,C=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,F=!Number.isNaN(new Date("technology 10").getTime())},36592:(X,Z,_)=>{_.d(Z,{Q:()=>b});var U=_(85931),P=_(77029),A=_(14259);class b{constructor(e=9,t){this._compareMinX=C,this._compareMinY=F,this._toBBox=s=>s,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),D.prune(),S.prune(),y.prune(),O.prune()}all(e){this._all(this._data,e)}search(e,t){let s=this._data;const i=this._toBBox;if(h(e,s))for(D.clear();s;){for(let r=0,o=s.children.length;r<o;r++){const f=s.children[r],E=s.leaf?i(f):f;h(e,E)&&(s.leaf?t(f):l(e,E)?this._all(f,t):D.push(f))}s=D.pop()}}collides(e){let t=this._data;const s=this._toBBox;if(!h(e,t))return!1;for(D.clear();t;){for(let i=0,r=t.children.length;i<r;i++){const o=t.children[i],f=t.leaf?s(o):o;if(h(e,f)){if(t.leaf||l(e,f))return!0;D.push(o)}}t=D.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let s=0,i=e.length;s<i;s++)this.insert(e[s]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){const s=this._data;this._data=t,t=s}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new d([]),this}remove(e){if(!e)return this;let t,s=this._data,i=null,r=0,o=!1;const f=this._toBBox(e);for(y.clear(),O.clear();s||y.length>0;){if(s||(s=y.pop(),i=y.data[y.length-1],r=O.pop()??0,o=!0),s.leaf&&(t=(0,U.cq)(s.children,e,s.children.length,s.indexHint),-1!==t))return s.children.splice(t,1),y.push(s),this._condense(y),this;o||s.leaf||!l(s,f)?i?(r++,s=i.children[r],o=!1):s=null:(y.push(s),O.push(r),r=0,i=s,s=s.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_all(e,t){let s=e;for(S.clear();s;){if(!0===s.leaf)for(const i of s.children)t(i);else S.pushArray(s.children);s=S.pop()??null}}_build(e,t,s,i){const r=s-t+1;let o=this._maxEntries;if(r<=o){const M=new d(e.slice(t,s+1));return v(M,this._toBBox),M}i||(i=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/o**(i-1)));const f=new m([]);f.height=i;const E=Math.ceil(r/o),g=E*Math.ceil(Math.sqrt(o));B(e,t,s,g,this._compareMinX);for(let M=t;M<=s;M+=g){const c=Math.min(M+g-1,s);B(e,M,c,E,this._compareMinY);for(let p=M;p<=c;p+=E){const W=Math.min(p+E-1,c);f.children.push(this._build(e,p,W,i-1))}}return v(f,this._toBBox),f}_chooseSubtree(e,t,s,i){for(;i.push(t),!0!==t.leaf&&i.length-1!==s;){let r,o=1/0,f=1/0;for(let E=0,g=t.children.length;E<g;E++){const M=t.children[E],c=u(M),p=I(e,M)-c;p<f?(f=p,o=c<o?c:o,r=M):p===f&&c<o&&(o=c,r=M)}t=r||t.children[0]}return t}_insert(e,t,s){const r=s?e:(0,this._toBBox)(e);y.clear();const o=this._chooseSubtree(r,this._data,t,y);for(o.children.push(e),j(o,r);t>=0&&y.data[t].children.length>this._maxEntries;)this._split(y,t),t--;this._adjustParentBBoxes(r,y,t)}_split(e,t){const s=e.data[t],i=s.children.length,r=this._minEntries;this._chooseSplitAxis(s,r,i);const o=this._chooseSplitIndex(s,r,i);if(!o)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const f=s.children.splice(o,s.children.length-o),E=s.leaf?new d(f):new m(f);E.height=s.height,v(s,this._toBBox),v(E,this._toBBox),t?e.data[t-1].children.push(E):this._splitRoot(s,E)}_splitRoot(e,t){this._data=new m([e,t]),this._data.height=e.height+1,v(this._data,this._toBBox)}_chooseSplitIndex(e,t,s){let i,r,o;i=r=1/0;for(let f=t;f<=s-t;f++){const E=R(e,0,f,this._toBBox),g=R(e,f,s,this._toBBox),M=T(E,g),c=u(E)+u(g);M<i?(i=M,o=f,r=c<r?c:r):M===i&&c<r&&(r=c,o=f)}return o}_chooseSplitAxis(e,t,s){const i=e.leaf?this._compareMinX:C,r=e.leaf?this._compareMinY:F;this._allDistMargin(e,t,s,i)<this._allDistMargin(e,t,s,r)&&e.children.sort(i)}_allDistMargin(e,t,s,i){e.children.sort(i);const r=this._toBBox,o=R(e,0,t,r),f=R(e,s-t,s,r);let E=a(o)+a(f);for(let g=t;g<s-t;g++){const M=e.children[g];j(o,e.leaf?r(M):M),E+=a(o)}for(let g=s-t-1;g>=t;g--){const M=e.children[g];j(f,e.leaf?r(M):M),E+=a(f)}return E}_adjustParentBBoxes(e,t,s){for(let i=s;i>=0;i--)j(t.data[i],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const s=e.data[t];if(0===s.children.length)if(t>0){const i=e.data[t-1],r=i.children;r.splice((0,U.cq)(r,s,r.length,i.indexHint),1)}else this.clear();else v(s,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function v(n,e){R(n,0,n.children.length,e,n)}function R(n,e,t,s,i){i||(i=new d([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let r,o=e;o<t;o++)r=n.children[o],j(i,n.leaf?s(r):r);return i}function j(n,e){n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY)}function C(n,e){return n.minX-e.minX}function F(n,e){return n.minY-e.minY}function u(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function a(n){return n.maxX-n.minX+(n.maxY-n.minY)}function I(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function T(n,e){const t=Math.max(n.minX,e.minX),s=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),r=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,r-s)}function l(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function h(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function B(n,e,t,s,i){const r=[e,t];for(;r.length;){const o=r.pop(),f=r.pop();if(o-f<=s)continue;const E=f+Math.ceil((o-f)/s/2)*s;(0,A.q)(n,E,f,o,i),r.push(f,E,E,o)}}const D=new P.Z,S=new P.Z,y=new P.Z,O=new P.Z({deallocator:void 0});class L{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class Y extends L{constructor(){super(...arguments),this.height=1,this.indexHint=new U.SO}}class d extends Y{constructor(e){super(),this.children=e,this.leaf=!0}}class m extends Y{constructor(e){super(),this.children=e,this.leaf=!1}}},61256:(X,Z,_)=>{_.d(Z,{H:()=>C});var U=_(8314),P=_(36592),A=_(65401);const v={minX:0,minY:0,maxX:0,maxY:0};class C{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new P.Q(9,(0,U.Z)("esri-csp-restrictions")?u=>({minX:u[0],minY:u[1],maxX:u[2],maxY:u[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const u=new Array(this._idByBounds.size);let a=0;this._idByBounds.forEach((I,T)=>{u[a++]=T}),this._indexInvalid=!1,this._index.clear(),this._index.load(u)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(u=>this._idByBounds.has(u))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const u=(0,A.cS)();for(const a of this._boundsById.values())a&&(u[0]=Math.min(a[0],u[0]),u[1]=Math.min(a[1],u[1]),u[2]=Math.max(a[2],u[2]),u[3]=Math.max(a[3],u[3]));return u}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(u){const a=this._boundsById.get(u);this._boundsById.delete(u),a&&(this._idByBounds.delete(a),this._indexInvalid||this._index.remove(a))}forEachInBounds(u,a){this._loadIndex(),function j(F,u,a){(function R(F){v.minX=F[0],v.minY=F[1],v.maxX=F[2],v.maxY=F[3]})(u),F.search(v,a)}(this._index,u,I=>a(this._idByBounds.get(I)))}get(u){return this._boundsById.get(u)}has(u){return this._boundsById.has(u)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(u,a){if(!this._indexInvalid){const I=this._boundsById.get(u);I&&(this._index.remove(I),this._idByBounds.delete(I))}this._boundsById.set(u,a),a&&(this._idByBounds.set(a,u),this._indexInvalid||(this._boundsToLoad.push(a),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},3579:(X,Z,_)=>{_.d(Z,{Z:()=>I});var U=_(85931),P=_(26584),A=_(61885),b=_(63290),v=_(5548),R=_(65401),j=_(82054),C=_(61256),F=_(16983),u=_(92794);const a=(0,v.Ue)();class I{constructor(l){this.geometryInfo=l,this._boundsStore=new C.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new A.Z,this.featureAdapter=u.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let l=0;return this._featuresById.forEach(h=>{null!=h.geometry&&h.geometry.coords&&(l+=h.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:l/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(l){if(null==this.fullBounds)return null;const[h,B,D,S]=this.fullBounds;return{xmin:h,ymin:B,xmax:D,ymax:S,spatialReference:(0,F.S2)(l)}}add(l){this._add(l),this._emitChanged()}addMany(l){for(const h of l)this._add(h);this._emitChanged()}upsertMany(l){const h=l.map(B=>this._upsert(B));return this._emitChanged(),h.filter(U.pC)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(l){const h=this._featuresById.get(l);return h?(this._remove(h),this._emitChanged(),h):null}removeManyById(l){this._boundsStore.invalidateIndex();for(const h of l){const B=this._featuresById.get(h);B&&this._remove(B)}this._emitChanged()}forEachBounds(l,h){for(const B of l){const D=this._boundsStore.get(B.objectId);D&&h((0,v.JR)(a,D))}}getFeature(l){return this._featuresById.get(l)}has(l){return this._featuresById.has(l)}forEach(l){this._featuresById.forEach(h=>l(h))}forEachInBounds(l,h){this._boundsStore.forEachInBounds(l,B=>{h(this._featuresById.get(B))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let l=!1;this._featuresById.forEach((h,B)=>{this._markedIds.has(B)||(l=!0,this._remove(h))}),this._markedIds.clear(),l&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(l){if(!l)return;const h=l.objectId;if(null==h)return void b.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new P.Z("featurestore:invalid-feature","feature id is missing",{feature:l}));const B=this._featuresById.get(h);let D;if(this._markedIds.add(h),B?(l.displayId=B.displayId,D=this._boundsStore.get(h),this._boundsStore.delete(h)):null!=this.onFeatureAdd&&this.onFeatureAdd(l),!l.geometry?.coords?.length)return this._boundsStore.set(h,null),void this._featuresById.set(h,l);D=(0,j.$)(D??(0,R.Ue)(),l.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=D&&this._boundsStore.set(h,D),this._featuresById.set(h,l)}_upsert(l){const h=l?.objectId;if(null==h)return b.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new P.Z("featurestore:invalid-feature","feature id is missing",{feature:l})),null;const B=this._featuresById.get(h);if(!B)return this._add(l),l;this._markedIds.add(h);const{geometry:D,attributes:S}=l;for(const y in S)B.attributes[y]=S[y];return D&&(B.geometry=D,this._boundsStore.set(h,(0,j.$)((0,R.Ue)(),D,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),B}_remove(l){null!=this.onFeatureRemove&&this.onFeatureRemove(l);const h=l.objectId;return this._markedIds.delete(h),this._boundsStore.delete(h),this._featuresById.delete(h),l}}},7728:(X,Z,_)=>{_.r(Z),_.d(Z,{default:()=>L});var U=_(15861),P=_(26584),A=_(91179),b=_(37053),v=_(82054),R=_(1476),j=_(3579),C=_(82959),F=_(73771),u=_(56554),a=_(35775),I=_(60466),T=_(85),l=_(90194),h=_(28302);const B=b.YU,D={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:b.YU},S={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function O(Y){return(0,A.wp)(Y)?null!=Y.m:!!Y.hasM}class L{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._createDefaultAttributes=null}load(d){var m=this;return(0,U.Z)(function*(){const n=[],{features:e}=d,t=m._inferLayerProperties(e,d.fields),s=d.fields||[],i=null!=d.hasM?d.hasM:!!t.hasM,r=null!=d.hasZ?d.hasZ:!!t.hasZ,o=!d.spatialReference&&!t.spatialReference,f=o?B:d.spatialReference||t.spatialReference,E=o?D:null,g=d.geometryType||t.geometryType,M=!g;let c=d.objectIdField||t.objectIdField,p=d.timeInfo;const W=new I.Z(s);if(!M&&(o&&n.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!g))throw new P.Z("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!c)throw new P.Z("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");if(t.objectIdField&&c!==t.objectIdField&&(n.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${c}" doesn't match the field name "${t.objectIdField}", found in the provided fields`}),c=t.objectIdField),c&&!t.objectIdField){const x=W.get(c);x?(c=x.name,x.type="esriFieldTypeOID",x.editable=!1,x.nullable=!1):s.unshift({alias:c,name:c,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const x of s){if(null==x.name&&(x.name=x.alias),null==x.alias&&(x.alias=x.name),!x.name)throw new P.Z("feature-layer:invalid-field-name","field name is missing",{field:x});if(x.name===c&&(x.type="esriFieldTypeOID"),!T.v.jsonValues.includes(x.type))throw new P.Z("feature-layer:invalid-field-type",`invalid type for field "${x.name}"`,{field:x});null==x.length&&(x.length=(0,l.ZR)(x))}const K={};for(const x of s)if("esriFieldTypeOID"!==x.type&&"esriFieldTypeGlobalID"!==x.type){const $=(0,l.os)(x);void 0!==$&&(K[x.name]=$)}if(p){if(p.startTimeField){const x=W.get(p.startTimeField);x?(p.startTimeField=x.name,x.type="esriFieldTypeDate"):p.startTimeField=null}if(p.endTimeField){const x=W.get(p.endTimeField);x?(p.endTimeField=x.name,x.type="esriFieldTypeDate"):p.endTimeField=null}if(p.trackIdField){const x=W.get(p.trackIdField);x?p.trackIdField=x.name:(p.trackIdField=null,n.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:p}}))}p.startTimeField||p.endTimeField||(n.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:p}}),p=null)}const w=W.dateFields.length?{timeZoneIANA:d.dateFieldsTimeZone??h.pt}:null;m._createDefaultAttributes=(0,u.Dm)(K,c);const Q={warnings:n,featureErrors:[],layerDefinition:{...S,drawingInfo:(0,u.bU)(g),templates:(0,u.Hq)(K),extent:E,geometryType:g,objectIdField:c,fields:s,hasZ:r,hasM:i,timeInfo:p,dateFieldsTimeReference:w},assignedObjectIds:{}};if(m._queryEngine=new F.q({fieldsIndex:I.Z.fromLayerJSON({fields:s,timeInfo:p,dateFieldsTimeReference:w}),geometryType:g,hasM:i,hasZ:r,objectIdField:c,spatialReference:f,featureStore:new j.Z({geometryType:g,hasM:i,hasZ:r}),timeInfo:p,cacheSpatialQueries:!0}),!e?.length)return m._nextObjectId=R.X,Q;const N=(0,R.S)(c,e);return m._nextObjectId=N+1,yield(0,C._W)(e,f),m._loadInitialFeatures(Q,e)})()}applyEdits(d){var m=this;return(0,U.Z)(function*(){const{spatialReference:n,geometryType:e}=m._queryEngine;return yield Promise.all([(0,a.b)(n,e),(0,C._W)(d.adds,n),(0,C._W)(d.updates,n)]),m._applyEdits(d)})()}queryFeatures(d,m={}){return this._queryEngine.executeQuery(d,m.signal)}queryFeatureCount(d,m={}){return this._queryEngine.executeQueryForCount(d,m.signal)}queryObjectIds(d,m={}){return this._queryEngine.executeQueryForIds(d,m.signal)}queryExtent(d,m={}){return this._queryEngine.executeQueryForExtent(d,m.signal)}querySnapping(d,m={}){return this._queryEngine.executeQueryForSnapping(d,m.signal)}_inferLayerProperties(d,m){let n,e,t=null,s=null,i=null;for(const r of d){const o=r.geometry;if(null!=o&&(t||(t=(0,A.Ji)(o)),s||(s=o.spatialReference),null==n&&(n=(0,A.wp)(Y=o)?null!=Y.z:!!Y.hasZ),null==e&&(e=O(o)),t&&s&&null!=n&&null!=e))break}var Y;if(m&&m.length){let r=null;m.some(o=>{const f="esriFieldTypeOID"===o.type,E=!o.type&&o.name&&"objectid"===o.name.toLowerCase();return r=o,f||E})&&(i=r.name)}return{geometryType:t,spatialReference:s,objectIdField:i,hasM:e,hasZ:n}}_loadInitialFeatures(d,m){var n=this;return(0,U.Z)(function*(){const{geometryType:e,hasM:t,hasZ:s,objectIdField:i,spatialReference:r,featureStore:o,fieldsIndex:f}=n._queryEngine,E=[];for(const c of m){if(null!=c.uid&&(d.assignedObjectIds[c.uid]=-1),c.geometry&&e!==(0,A.Ji)(c.geometry)){d.featureErrors.push((0,a.av)("Incorrect geometry type."));continue}const p=n._createDefaultAttributes(),W=(0,a.O0)(f,p,c.attributes,!0);W?d.featureErrors.push(W):(n._assignObjectId(p,c.attributes,!0),c.attributes=p,null!=c.uid&&(d.assignedObjectIds[c.uid]=c.attributes[i]),null!=c.geometry&&(c.geometry=(0,C.iV)(c.geometry,c.geometry.spatialReference,r)),E.push(c))}o.addMany((0,v.Yn)([],E,e,s,t,i));const{fullExtent:g,timeExtent:M}=yield n._queryEngine.fetchRecomputedExtents();if(d.layerDefinition.extent=g,M){const{start:c,end:p}=M;d.layerDefinition.timeInfo.timeExtent=[c,p]}return d})()}_applyEdits(d){var m=this;return(0,U.Z)(function*(){const{adds:n,updates:e,deletes:t}=d,s={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(n?.length&&m._applyAddEdits(s,n),e?.length&&m._applyUpdateEdits(s,e),t?.length){for(const o of t)s.deleteResults.push((0,a.d1)(o));m._queryEngine.featureStore.removeManyById(t)}const{fullExtent:i,timeExtent:r}=yield m._queryEngine.fetchRecomputedExtents();return{extent:i,timeExtent:r,featureEditResults:s}})()}_applyAddEdits(d,m){const{addResults:n}=d,{geometryType:e,hasM:t,hasZ:s,objectIdField:i,spatialReference:r,featureStore:o,fieldsIndex:f}=this._queryEngine,E=[];for(const g of m){if(g.geometry&&e!==(0,A.Ji)(g.geometry)){n.push((0,a.av)("Incorrect geometry type."));continue}const M=this._createDefaultAttributes(),c=(0,a.O0)(f,M,g.attributes);if(c)n.push(c);else{if(this._assignObjectId(M,g.attributes),g.attributes=M,null!=g.uid&&(d.uidToObjectId[g.uid]=g.attributes[i]),null!=g.geometry){const p=g.geometry.spatialReference??r;g.geometry=(0,C.iV)((0,a.og)(g.geometry,p),p,r)}E.push(g),n.push((0,a.d1)(g.attributes[i]))}}o.addMany((0,v.Yn)([],E,e,s,t,i))}_applyUpdateEdits({updateResults:d},m){const{geometryType:n,hasM:e,hasZ:t,objectIdField:s,spatialReference:i,featureStore:r,fieldsIndex:o}=this._queryEngine;for(const f of m){const{attributes:E,geometry:g}=f,M=E?.[s];if(null==M){d.push((0,a.av)(`Identifier field ${s} missing`));continue}if(!r.has(M)){d.push((0,a.av)(`Feature with object id ${M} missing`));continue}const c=(0,v.EI)(r.getFeature(M),n,t,e);if(null!=g){if(n!==(0,A.Ji)(g)){d.push((0,a.av)("Incorrect geometry type."));continue}const p=g.spatialReference??i;c.geometry=(0,C.iV)((0,a.og)(g,p),p,i)}if(E){const p=(0,a.O0)(o,c.attributes,E);if(p){d.push(p);continue}}r.add((0,v.XA)(c,n,t,e,s)),d.push((0,a.d1)(M))}}_assignObjectId(d,m,n=!1){const e=this._queryEngine.objectIdField;d[e]=n&&m&&isFinite(m[e])?m[e]:this._nextObjectId++}}},56554:(X,Z,_)=>{_.d(Z,{Dm:()=>C,Hq:()=>F,MS:()=>u,bU:()=>v});var U=_(8314),P=_(58817),A=_(87757),b=_(24837);function v(a){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?b.I4:"esriGeometryPolyline"===a?b.ET:b.lF}}}const R=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let j=1;function C(a,I){if((0,U.Z)("esri-csp-restrictions"))return()=>({[I]:null,...a});try{let T=`this.${I} = null;`;for(const h in a)T+=`this${R.test(h)?`.${h}`:`["${h}"]`} = ${JSON.stringify(a[h])};`;const l=new Function(`\n      return class AttributesClass$${j++} {\n        constructor() {\n          ${T};\n        }\n      }\n    `)();return()=>new l}catch{return()=>({[I]:null,...a})}}function F(a={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,P.d9)(a)}}]}function u(a,I){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:a},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:I,supportsDelete:I,supportsEditing:I,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:I,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:A.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:I,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},35775:(X,Z,_)=>{_.d(Z,{O0:()=>a,av:()=>j,b:()=>D,d1:()=>F,og:()=>l});var U=_(15861),P=_(95324),A=_(37053),b=_(90194);class v{constructor(){this.code=null,this.description=null}}class R{constructor(O){this.error=new v,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=O}}function j(y){return new R(y)}class C{constructor(O){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=O}}function F(y){return new C(y)}const u=new Set;function a(y,O,L,Y=!1){u.clear();for(const d in L){const m=y.get(d);if(!m)continue;const n=I(m,L[d]);if(u.add(m.name),m&&(Y||m.editable)){const e=(0,b.Qc)(m,n);if(e)return j((0,b.vP)(e,m,n));O[m.name]=n}}for(const d of y?.requiredFields??[])if(!u.has(d.name))return j(`missing required field "${d.name}"`);return null}function I(y,O){let L=O;return(0,b.H7)(y)&&"string"==typeof O?L=parseFloat(O):(0,b.qN)(y)&&null!=O&&"string"!=typeof O?L=String(O):(0,b.y2)(y)&&"string"==typeof O&&(L=(0,P.sG)(O)),(0,b.Pz)(L)}let T;function l(y,O){if(!y||!(0,A.JY)(O))return y;if("rings"in y||"paths"in y){if(null==T)throw new TypeError("geometry engine not loaded");return T.simplify(O,y)}return y}function B(){return(B=(0,U.Z)(function*(){return null==T&&(T=yield Promise.all([_.e(4918),_.e(8592),_.e(5994)]).then(_.bind(_,32825))),T})).apply(this,arguments)}function D(y,O){return S.apply(this,arguments)}function S(){return S=(0,U.Z)(function*(y,O){!(0,A.JY)(y)||"esriGeometryPolygon"!==O&&"esriGeometryPolyline"!==O||(yield function h(){return B.apply(this,arguments)}())}),S.apply(this,arguments)}}}]);