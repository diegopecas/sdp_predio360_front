"use strict";(self.webpackChunkpredio360_app=self.webpackChunkpredio360_app||[]).push([[2964],{92852:(ae,te,h)=>{h.d(te,{Es:()=>a,I_:()=>W,W7:()=>i,qM:()=>o});var g=h(26584),U=h(58817),$=h(63290),Q=h(61566),b=h(16396);const q=()=>$.Z.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function ee(r,n,p){let l="",c=0;for(;c<p;){const u=r[n+c];if(u<128)l+=String.fromCharCode(u),c++;else if(u>=192&&u<224){if(c+1>=p)throw new g.Z("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");l+=String.fromCharCode((31&u)<<6|63&r[n+c+1]),c+=2}else if(u>=224&&u<240){if(c+2>=p)throw new g.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");l+=String.fromCharCode((15&u)<<12|(63&r[n+c+1])<<6|63&r[n+c+2]),c+=3}else{if(!(u>=240&&u<248))throw new g.Z("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(c+3>=p)throw new g.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const I=(7&u)<<18|(63&r[n+c+1])<<12|(63&r[n+c+2])<<6|63&r[n+c+3];l+=I>=65536?String.fromCharCode(55296+(I-65536>>10),56320+(1023&I)):String.fromCharCode(I),c+=4}}}return l}function J(r,n){const p={byteOffset:0,byteCount:0,fields:Object.create(null)};let l=0;for(let c=0;c<n.length;c++){const u=n[c],I=u.valueType||u.type;p.fields[u.property]=(0,R[I])(r,l),l+=T[I].BYTES_PER_ELEMENT}return p.byteCount=l,p}function S(r,n,p){const l=[];let c,u,I=0;for(u=0;u<r;u+=1){if(c=n[u],c>0){if(l.push(ee(p,I,c-1)),0!==p[I+c-1])throw new g.Z("string-array-error","Invalid string array: missing null termination.")}else l.push(null);I+=c}return l}function W(r,n){return new T[n.valueType](r,n.byteOffset,n.count*n.valuesPerElement)}function F(r,n,p){if(n!==r&&q().error(`Invalid ${p} buffer size\n expected: ${r}, actual: ${n})`),n<r)throw new g.Z("buffer-too-small","Binary buffer is too small",{expectedSize:r,actualSize:n})}function i(r,n){const p=J(r,n&&n.header);let l=p.byteCount;const c={isDraco:!1,header:p,byteOffset:p.byteCount,byteCount:0,vertexAttributes:{}},u=p.fields,I=null!=u.vertexCount?u.vertexCount:u.count;for(const K of n.ordering){if(!n.vertexAttributes[K])continue;const X={...n.vertexAttributes[K],byteOffset:l,count:I};c.vertexAttributes[L[K]||"_"+K]=X,l+=A(X.valueType)*X.valuesPerElement*I}const N=u.faceCount;if(n.faces&&N){c.faces={};for(const K of n.ordering){if(!n.faces[K])continue;const X={...n.faces[K],byteOffset:l,count:N};c.faces[K]=X,l+=A(X.valueType)*X.valuesPerElement*N}}const D=u.featureCount;if(n.featureAttributes&&n.featureAttributeOrder&&D){c.featureAttributes={};for(const K of n.featureAttributeOrder){if(!n.featureAttributes[K])continue;const X={...n.featureAttributes[K],byteOffset:l,count:D};c.featureAttributes[K]=X,l+=("UInt64"===X.valueType?8:A(X.valueType))*X.valuesPerElement*D}}return F(l,r.byteLength,"geometry"),c.byteCount=l-c.byteOffset,c}function a(r,n){return r&&r.compressedAttributes&&"draco"===r.compressedAttributes.encoding?function j(r){const n={isDraco:!0,isLegacy:!1,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const p of r)switch(p){case"position":break;case"normal":n.normal=!0;break;case"uv0":n.uv0=!0;break;case"color":n.color=!0;break;case"uv-region":n.uvRegion=!0;break;case"feature-index":n.featureIndex=!0}return n}(r.compressedAttributes.attributes):r?function H(r){return{isDraco:!1,isLegacy:!1,color:null!=r.color,normal:null!=r.normal,uv0:null!=r.uv0,uvRegion:null!=r.uvRegion,featureIndex:null!=r.faceRange&&null!=r.featureId}}(r):function f(r){const n={isDraco:!1,isLegacy:!0,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const p of r.ordering)if(r.vertexAttributes[p])switch(p){case"position":break;case"normal":n.normal=!0;break;case"color":n.color=!0;break;case"uv0":n.uv0=!0;break;case"region":n.uvRegion=!0}return r.featureAttributes&&r.featureAttributeOrder&&(n.featureIndex=!0),n}(n)}const L={position:b.T.POSITION,normal:b.T.NORMAL,color:b.T.COLOR,uv0:b.T.UV0,region:b.T.UVREGION};function o(r,n,p){if("lepcc-rgb"===r.encoding)return(0,Q.IT)(n);if("lepcc-intensity"===r.encoding)return(0,Q.ti)(n);if(null!=r.encoding&&""!==r.encoding)throw new g.Z("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");r["attributeByteCounts "]&&!r.attributeByteCounts&&(q().warn("Warning: Trailing space in 'attributeByteCounts '."),r.attributeByteCounts=r["attributeByteCounts "]),"ObjectIds"===r.ordering[0]&&r.hasOwnProperty("objectIds")&&(q().warn("Warning: Case error in objectIds"),r.ordering[0]="objectIds");const l=function V(r,n,p){const l=null!=n.header?J(r,n.header):{byteOffset:0,byteCount:0,fields:{count:p}},c={header:l,byteOffset:l.byteCount,byteCount:0,entries:Object.create(null)};let u=l.byteCount;for(let I=0;I<n.ordering.length;I++){const N=n.ordering[I],D=(0,U.d9)(n[N]);if(D.count=l.fields.count??0,"String"===D.valueType){if(D.byteOffset=u,D.byteCount=l.fields[N+"ByteCount"],"UTF-8"!==D.encoding)throw new g.Z("unsupported-encoding","Unsupported String encoding.",{encoding:D.encoding});if(D.timeEncoding&&"ECMA_ISO8601"!==D.timeEncoding)throw new g.Z("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:D.timeEncoding})}else{if(!m(D.valueType))throw new g.Z("unsupported-value-type","Unsupported binary valueType",{valueType:D.valueType});{const K=A(D.valueType);u+=u%K!=0?K-u%K:0,D.byteOffset=u,D.byteCount=K*D.valuesPerElement*D.count}}u+=D.byteCount??0,c.entries[N]=D}return c.byteCount=u-c.byteOffset,c}(n,r,p);F(l.byteOffset+l.byteCount,n.byteLength,"attribute");const c=l.entries.attributeValues||l.entries.objectIds;if(c){if("String"===c.valueType){const u=l.entries.attributeByteCounts,I=W(n,u),N=function Y(r,n){return new Uint8Array(r,n.byteOffset,n.byteCount)}(n,c);return c.timeEncoding?function k(r,n,p){return S(r,n,p).map(l=>{const c=l?Date.parse(l):null;return c&&!Number.isNaN(c)?c:null})}(u.count,I,N):S(u.count,I,N)}return W(n,c)}throw new g.Z("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const T={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},R={Float32:(r,n)=>new DataView(r,0).getFloat32(n,!0),Float64:(r,n)=>new DataView(r,0).getFloat64(n,!0),UInt8:(r,n)=>new DataView(r,0).getUint8(n),Int8:(r,n)=>new DataView(r,0).getInt8(n),UInt16:(r,n)=>new DataView(r,0).getUint16(n,!0),Int16:(r,n)=>new DataView(r,0).getInt16(n,!0),UInt32:(r,n)=>new DataView(r,0).getUint32(n,!0),Int32:(r,n)=>new DataView(r,0).getInt32(n,!0)};function m(r){return T.hasOwnProperty(r)}function A(r){return m(r)?T[r].BYTES_PER_ELEMENT:0}},5590:(ae,te,h)=>{h.d(te,{c:()=>b,n:()=>J});var g=h(74741),U=h(29302),$=h(92383),Q=h(93146);function b(k,S,W,Y){const V=J(k,S,W),F=(0,g.Ue)();return(0,Q.B)(W,V,F,Y),F}const q=1,ee=5-q;function J(k,S,W){const Y=(0,U.Ue)(),F=2**(Math.ceil(Math.log(k[3])*Math.LOG2E/ee)*ee+q);if(W.isGeographic){const a=F/(0,$.Iu)(W).radius*180/Math.PI,f=Math.round(k[1]/a),j=Math.max(-90,Math.min(90,f*a)),L=a/Math.cos((Math.abs(j)-a/2)/180*Math.PI),o=Math.round(k[0]/L)*L;Y[0]=o,Y[1]=j}else{const a=Math.round(k[0]/F),f=Math.round(k[1]/F);Y[0]=a*F,Y[1]=f*F}const i=Math.round((k[2]+S)/F);return Y[2]=i*F,Y}},42964:(ae,te,h)=>{h.d(te,{Cx:()=>ze,HV:()=>Fe,Jf:()=>ne,Jx:()=>ge,OJ:()=>be,T2:()=>Ee,WD:()=>ke,X5:()=>A,Yb:()=>p,a7:()=>Ze,bf:()=>D,c$:()=>Ne,cr:()=>I,e8:()=>N,ei:()=>Ce,gn:()=>xe,hv:()=>n,ix:()=>Ke,ns:()=>c,p8:()=>Pe,pD:()=>u,tS:()=>r,tp:()=>me,tq:()=>Te,uC:()=>We,xe:()=>ye,yS:()=>Ae,zW:()=>Re});var g=h(15861),$=(h(29132),h(84792)),Q=h(85931),b=h(26584),q=h(8314),ee=h(55713),J=h(52113),k=h(74741),S=h(79800),W=h(29302),Y=h(55915),V=h(81863),F=h(1582),H=h(65401),i=h(97126),a=h(96854),f=h(92852),j=h(5590),L=h(2180),o=h(9044),T=h(93394),R=h(65234);function m(e){return e?parseInt(e.substring(e.lastIndexOf("/")+1,e.length),10):void 0}function A(e){if((0,q.Z)("disable-feature:i3s-draco")||!e)return!1;for(const t of e)for(const s of t.geometryBuffers)if("draco"===s.compressedAttributes?.encoding)return!0;return!1}function r(e,t,s,_){s.traverse(t,d=>{const y=d.serviceMbsInIndexSR;return(null!=y&&I(e,y))!==u.OUTSIDE&&(_(d),!0)})}function n(e,t,s){let _=0,d=0;for(let y=0;y<t.length&&_<e.length;y++)e[_]===t[y]&&(s(y)&&(e[d]=e[_],d++),_++);e.length=d}function p(e,t,s){let _=0,d=0;for(;_<s.length;)(0,Q.$A)(e,s[_])>=0===t&&(s[d]=s[_],d++),_++;s.length=d}const l=(0,H.Ue)();function c(e,t){if(0===t.rotationScale[1]&&0===t.rotationScale[2]&&0===t.rotationScale[3]&&0===t.rotationScale[5]&&0===t.rotationScale[6]&&0===t.rotationScale[7])return l[0]=(e[0]-t.position[0])/t.rotationScale[0],l[1]=(e[1]-t.position[1])/t.rotationScale[4],l[2]=(e[2]-t.position[0])/t.rotationScale[0],l[3]=(e[3]-t.position[1])/t.rotationScale[4],l}var u,e;function I(e,t){const s=t[0],_=t[1],d=t[3],y=e[0]-s,M=s-e[2],E=e[1]-_,O=_-e[3],v=Math.max(y,M,0),B=Math.max(E,O,0),C=v*v+B*B;return C>d*d?u.OUTSIDE:C>0?u.INTERSECTS_CENTER_OUTSIDE:-Math.max(y,M,E,O)>d?u.INSIDE:u.INTERSECTS_CENTER_INSIDE}function N(e,t,s){const _=[],d=s?.missingFields,y=s?.originalFields;for(const M of e){const E=M.toLowerCase();let O=!1;for(const v of t)if(E===v.name.toLowerCase()){_.push(v.name),O=!0,y&&y.push(M);break}!O&&d&&d.push(M)}return _}function D(e,t,s,_,d,y){return K.apply(this,arguments)}function K(){return K=(0,g.Z)(function*(e,t,s,_,d,y){if(0===t.length)return[];const M=e.attributeStorageInfo;if(null!=e.associatedLayer)try{return yield function ce(e,t,s,_,d){return le.apply(this,arguments)}(e.associatedLayer,t,s,_,y)}catch(E){if(e.associatedLayer.loaded)throw E}if(M){const E=function X(e,t,s){const _=new Map,d=[],y=s();for(const M of e){const E=M.attributes[t];for(let O=0;O<y.length;O++){const v=y[O],B=v.featureIds.indexOf(E);if(B>=0){let C=_.get(v.node);C||(C={node:v.node,indices:[],graphics:[]},d.push(C),_.set(v.node,C)),C.indices.push(B),C.graphics.push(M);for(let Z=O;Z>0;Z--)y[Z]=y[Z-1];y[0]=v;break}}}return d}(t,s,d);if(null==E)throw new b.Z("scenelayer:features-not-loaded","Tried to query attributes for unloaded features");const O=e.parsedUrl.path;return(yield Promise.all(E.map(v=>function ve(e,t,s,_,d,y,M,E){return ye(e,t,s.resources.attributes,_,d,y,M,E)}(O,M,v.node,v.indices,_,e.apiKey,e.customParameters,y).then(B=>{for(let C=0;C<v.graphics.length;C++){const Z=v.graphics[C],z=B[C];if(Z.attributes)for(const w in Z.attributes)w in z||(z[w]=Z.attributes[w]);Z.attributes=z}return v.graphics})))).flat()}throw new b.Z("scenelayer:no-attribute-source","This scene layer does not have a source for attributes available")}),K.apply(this,arguments)}function le(){return(le=(0,g.Z)(function*(e,t,s,_,d){t.sort((v,B)=>v.attributes[s]-B.attributes[s]);const y=t.map(v=>v.attributes[s]),M=[],E=N(_,e.fields,{originalFields:M}),O=yield he(e,y,E,d);for(let v=0;v<t.length;v++){const B=t[v],C=O[v],Z={};if(B.attributes)for(const z in B.attributes)Z[z]=B.attributes[z];for(let z=0;z<M.length;z++)Z[M[z]]=C[E[z]];B.attributes=Z}return t})).apply(this,arguments)}function he(e,t,s,_){const d=e.capabilities.query.maxRecordCount;if(null!=d&&t.length>d){const M=(0,Q.vr)(t,d);return Promise.all(M.map(E=>he(e,E,s,_))).then(E=>E.flat())}const y=new a.Z({objectIds:t,outFields:s,orderByFields:[e.objectIdField]});return e.queryFeatures(y,_).then(M=>{if(M&&M.features&&M.features.length===t.length)return M.features.map(E=>E.attributes);throw new b.Z("scenelayer:feature-not-in-associated-layer","Feature not found in associated feature layer")})}function ye(e,t,s,_,d,y,M,E){return ue.apply(this,arguments)}function ue(){return(ue=(0,g.Z)(function*(e,t,s,_,d,y,M,E){const O=[];for(const C of t)C&&d.includes(C.name)&&O.push({url:`${e}/nodes/${s}/attributes/${C.key}/0`,storageInfo:C});const v=yield Promise.allSettled(O.map(C=>(0,$.Z)(C.url,{responseType:"array-buffer",query:{...M,token:y},signal:E?.signal}).then(Z=>(0,f.qM)(C.storageInfo,Z.data)))),B=[];for(const C of _){const Z={};for(let z=0;z<v.length;z++){const w=v[z];"fulfilled"===w.status&&(Z[O[z].storageInfo.name]=ge(w.value,C))}B.push(Z)}return B})).apply(this,arguments)}(e=u||(u={}))[e.OUTSIDE=0]="OUTSIDE",e[e.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",e[e.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",e[e.INSIDE=3]="INSIDE";const Ue=-32768,Ie=-(2**31);function ge(e,t){if(!e)return null;const s=e[t];return(0,ee.z3)(e)?s===Ue?null:s:(0,ee.Hx)(e)?s===Ie?null:s:s!=s?null:s}function me(e){const t=e.store,s=t.indexCRS||t.geographicCRS,_=void 0===s?t.indexWKT:void 0;if(_){if(!e.spatialReference)throw new b.Z("layerview:no-store-spatial-reference-wkt-index-and-no-layer-spatial-reference","Found indexWKT in the scene layer store but no layer spatial reference",{});if(_!==e.spatialReference.wkt)throw new b.Z("layerview:store-spatial-reference-wkt-index-incompatible","The indexWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}const d=s?new R.Z(m(s)):e.spatialReference;return d.equals(e.spatialReference)?e.spatialReference:d}function Ee(e){const t=e.store,s=t.vertexCRS||t.projectedCRS,_=void 0===s?t.vertexWKT:void 0;if(_){if(!e.spatialReference)throw new b.Z("layerview:no-store-spatial-reference-wkt-vertex-and-no-layer-spatial-reference","Found vertexWKT in the scene layer store but no layer spatial reference",{});if(_!==e.spatialReference.wkt)throw new b.Z("layerview:store-spatial-reference-wkt-vertex-incompatible","The vertexWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}const d=s?new R.Z(m(s)):e.spatialReference;return d.equals(e.spatialReference)?e.spatialReference:d}function Ce(e,t){return null==t?"@null":t===(0,V.rS)(t)?"@ECEF":e.equals(t)?"":null!=t.wkid?"@"+t.wkid:null}function ne(e,t,s){if(!(0,Y.canProjectWithoutEngine)(e,t))throw new b.Z("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{});if("local"===s&&!function Oe(e,t){return e.equals(t)||e.isWGS84&&t.isWebMercator||e.isWebMercator&&t.isWGS84}(e,t))throw new b.Z("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{})}function Te(e,t,s){if(e.serviceUpdateTimeStamp?.lastUpdate!==t.serviceUpdateTimeStamp?.lastUpdate||!s.isEmpty||e.associatedLayer?.url!==t.associatedLayer?.url)throw new b.Z("layerview:recycle-failed")}function be(e,t,s){const _=me(e),d=Ee(e);ne(_,t,s),ne(d,t,s)}function Pe(e){if(null==e.store?.defaultGeometrySchema||!function De(e){return!(null!=e.geometryType&&"triangles"!==e.geometryType||null!=e.topology&&"PerAttributeArray"!==e.topology||null==e.vertexAttributes?.position)}(e.store.defaultGeometrySchema))throw new b.Z("scenelayer:unsupported-geometry-schema","The geometry schema of this scene layer is not supported.",{url:e.parsedUrl.path})}function xe(e,t){be(e,t.spatialReference,t.viewingMode)}function Re(e){if(null==e.store?.defaultGeometrySchema||!function Se(e){return!(null==e.geometryType||"points"!==e.geometryType||null!=e.topology&&"PerAttributeArray"!==e.topology||null!=e.encoding&&""!==e.encoding&&"lepcc-xyz"!==e.encoding||null==e.vertexAttributes?.position)}(e.store.defaultGeometrySchema))throw new b.Z("pointcloud:unsupported-geometry-schema","The geometry schema of this point cloud scene layer is not supported.",{})}function Ae(e,t){ne(e.spatialReference,t.spatialReference,t.viewingMode)}function Be(e){return"mesh-3d"===e.type}function Ze(e){if(null==e||!function Le(e){return"simple"===e.type||"class-breaks"===e.type||"unique-value"===e.type}(e)||("unique-value"===e.type||"class-breaks"===e.type)&&null==e.defaultSymbol)return!0;const t=e.getSymbols();if(0===t.length)return!0;for(const s of t){if(!Be(s)||0===s.symbolLayers.length)return!0;for(const _ of s.symbolLayers.items)if("fill"!==_.type||null==_.material?.color||"replace"!==_.material.colorMixMode)return!0}return!1}const We=(0,L.$s)({color:[0,0,0,0],opacity:0});class je{constructor(){this.edgeMaterial=null,this.material=null,this.castShadows=!0}}function Ke(e){const t=new je;let s=!1,_=!1;for(const d of e.symbolLayers.items)if("fill"===d.type&&d.enabled){const y=d.material,M=d.edges;if(null!=y&&!s){const E=y.color,O=(0,o.F5)(y.colorMixMode);t.material=null!=E?{color:[E.r/255,E.g/255,E.b/255],alpha:E.a,colorMixMode:O}:{color:[1,1,1],alpha:1,colorMixMode:o.a9.Multiply},t.castShadows=d.castShadows,s=!0}null==M||_||(t.edgeMaterial=(0,L.C8)(M,{}),_=!0)}return t.material||(t.material={color:[1,1,1],alpha:1,colorMixMode:o.a9.Multiply}),t}function Fe(e,t){return(0|e)+(0|t)|0}function ze(e,t,s,_,d,y,M){if(!y||0===y.length||null==t||!e.serviceMbsInIndexSR)return null;const E=(0,j.c)(e.serviceMbsInIndexSR,d,s,t);(0,J.U_)(oe,E);let O=null,B=1/0,C=-1/0;if(y.forEach(w=>(w=>{if("replace"!==w.type)return;const x=w.geometry;if(!x?.hasZ)return;(0,H.cS)(fe);const G=x.spatialReference||_,ie=x.rings.reduce((de,_e)=>_e.reduce((se,pe)=>((0,S.s)(P,pe[0],pe[1],pe[2]),(0,F.S)(P,G,P,t),(0,S.e)(P,P,oe),(0,H.Ho)(fe,P),Math.min(P[2],se)),de),1/0);(()=>{if(!O)if(O=Ve,(0,H.cS)(re),null!=e.serviceObbInIndexSR){e.serviceObbInIndexSR.transform(we,s,t,d,M),we.getCorners(O);for(const w of O)(0,S.e)(w,w,oe),(0,H.Ho)(re,w)}else{const w=e.serviceMbsInIndexSR;if(!w)return;const x=w[3];(0,F.S)((0,i.g)(w),s,P,t),(0,S.e)(P,P,oe),P[2]+=d;for(let G=0;G<8;++G){const se=O[G];(0,S.c)(se,[P[0]+(1&G?x:-x),P[1]+(2&G?x:-x),P[2]+(4&G?x:-x)]),(0,H.Ho)(re,se)}}})(),(0,H.kK)(re,fe)&&(B=Math.min(B,ie),C=Math.max(C,ie))})(w)),B===1/0)return null;const z=(w,x,G)=>{(0,S.e)(P,G,E),w[x]=P[0],w[x+1]=P[1],w[x+2]=P[2],x+=24,G[2]=B,(0,S.e)(P,G,E),w[x]=P[0],w[x+1]=P[1],w[x+2]=P[2],x+=24,G[2]=C,(0,S.e)(P,G,E),w[x]=P[0],w[x+1]=P[1],w[x+2]=P[2]};for(let w=0;w<8;++w)z(Me.data,3*w,O[w]);return(0,T.Qb)(Me)}function Ne(e){return e[3]>=0}function ke(e){null!=e&&(e[3]=-1)}const Ve=[(0,W.Ue)(),(0,W.Ue)(),(0,W.Ue)(),(0,W.Ue)(),(0,W.Ue)(),(0,W.Ue)(),(0,W.Ue)(),(0,W.Ue)()],fe=(0,H.Ue)(),re=(0,H.Ue)(),we=new T.Oo,P=(0,W.Ue)(),Me={data:new Array(72),size:3,exclusive:!0,stride:3},oe=(0,k.Ue)()},61566:(ae,te,h)=>{h.d(te,{Gi:()=>ee,IT:()=>Y,ti:()=>H});var g=h(26584);const U=!0,$={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function Q(i,a,f){return{identifier:String.fromCharCode.apply(null,new Uint8Array(i,f+$.identifierOffset,$.identifierLength)),version:a.getUint16(f+$.versionOffset,U),checksum:a.getUint32(f+$.checksumOffset,U)}}const b={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function ee(i){const a=new DataView(i,0);let f=0;const{identifier:j,version:L}=Q(i,a,f);if(f+=$.byteCount,"LEPCC     "!==j)throw new g.Z("lepcc-decode-error","Bad identifier");if(L>1)throw new g.Z("lepcc-decode-error","Unknown version");const o=function q(i,a){return{sizeLo:i.getUint32(a+b.sizeLo,U),sizeHi:i.getUint32(a+b.sizeHi,U),minX:i.getFloat64(a+b.minX,U),minY:i.getFloat64(a+b.minY,U),minZ:i.getFloat64(a+b.minZ,U),maxX:i.getFloat64(a+b.maxX,U),maxY:i.getFloat64(a+b.maxY,U),maxZ:i.getFloat64(a+b.maxZ,U),errorX:i.getFloat64(a+b.errorX,U),errorY:i.getFloat64(a+b.errorY,U),errorZ:i.getFloat64(a+b.errorZ,U),count:i.getUint32(a+b.count,U),reserved:i.getUint32(a+b.reserved,U)}}(a,f);if(f+=b.byteCount,o.sizeHi*2**32+o.sizeLo!==i.byteLength)throw new g.Z("lepcc-decode-error","Bad size");const T=new Float64Array(3*o.count),R=[],m=[],A=[],r=[];if(f=J(i,f,R),f=J(i,f,m),f=J(i,f,A),f=J(i,f,r),f!==i.byteLength)throw new g.Z("lepcc-decode-error","Bad length");let n=0,p=0;for(let l=0;l<R.length;l++){p+=R[l];let c=0;for(let u=0;u<m[l];u++){c+=A[n];const I=r[n];T[3*n]=Math.min(o.maxX,o.minX+2*o.errorX*c),T[3*n+1]=Math.min(o.maxY,o.minY+2*o.errorY*p),T[3*n+2]=Math.min(o.maxZ,o.minZ+2*o.errorZ*I),n++}}return{errorX:o.errorX,errorY:o.errorY,errorZ:o.errorZ,result:T}}function J(i,a,f){const j=[];a=k(i,a,j);const L=[];for(let o=0;o<j.length;o++){L.length=0,a=k(i,a,L);for(let T=0;T<L.length;T++)f.push(L[T]+j[o])}return a}function k(i,a,f){const j=new DataView(i,a),L=j.getUint8(0),o=31&L,T=!!(32&L),R=(192&L)>>6;let m=0;if(0===R)m=j.getUint32(1,U),a+=5;else if(1===R)m=j.getUint16(1,U),a+=3;else{if(2!==R)throw new g.Z("lepcc-decode-error","Bad count type");m=j.getUint8(1),a+=2}if(T)throw new g.Z("lepcc-decode-error","LUT not implemented");const A=Math.ceil(m*o/8),r=new Uint8Array(i,a,A);let n=0,p=0,l=0;const c=-1>>>32-o;for(let u=0;u<m;u++){for(;p<o;)n|=r[l]<<p,p+=8,l+=1;f[u]=n&c,n>>>=o,p-=o,p+o>32&&(n|=r[l-1]>>8-p)}return a+l}const S={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function Y(i){const a=new DataView(i,0);let f=0;const{identifier:j,version:L}=Q(i,a,f);if(f+=$.byteCount,"ClusterRGB"!==j)throw new g.Z("lepcc-decode-error","Bad identifier");if(L>1)throw new g.Z("lepcc-decode-error","Unknown version");const o=function W(i,a){return{sizeLo:i.getUint32(a+S.sizeLo,U),sizeHi:i.getUint32(a+S.sizeHi,U),count:i.getUint32(a+S.count,U),colorMapCount:i.getUint16(a+S.colorMapCount,U),lookupMethod:i.getUint8(a+S.lookupMethod),compressionMethod:i.getUint8(a+S.compressionMethod)}}(a,f);if(f+=S.byteCount,o.sizeHi*2**32+o.sizeLo!==i.byteLength)throw new g.Z("lepcc-decode-error","Bad size");if((2===o.lookupMethod||1===o.lookupMethod)&&0===o.compressionMethod){if(3*o.colorMapCount+o.count+f!==i.byteLength||o.colorMapCount>256)throw new g.Z("lepcc-decode-error","Bad count");const T=new Uint8Array(i,f,3*o.colorMapCount),R=new Uint8Array(i,f+3*o.colorMapCount,o.count),m=new Uint8Array(3*o.count);for(let A=0;A<o.count;A++){const r=R[A];m[3*A]=T[3*r],m[3*A+1]=T[3*r+1],m[3*A+2]=T[3*r+2]}return m}if(0===o.lookupMethod&&0===o.compressionMethod){if(3*o.count+f!==i.byteLength||0!==o.colorMapCount)throw new g.Z("lepcc-decode-error","Bad count");return new Uint8Array(i,f).slice()}if(o.lookupMethod<=2&&1===o.compressionMethod){if(f+3!==i.byteLength||1!==o.colorMapCount)throw new g.Z("lepcc-decode-error","Bad count");const T=a.getUint8(f),R=a.getUint8(f+1),m=a.getUint8(f+2),A=new Uint8Array(3*o.count);for(let r=0;r<o.count;r++)A[3*r]=T,A[3*r+1]=R,A[3*r+2]=m;return A}throw new g.Z("lepcc-decode-error","Bad method "+o.lookupMethod+","+o.compressionMethod)}const V={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function H(i){const a=new DataView(i,0);let f=0;const{identifier:j,version:L}=Q(i,a,f);if(f+=$.byteCount,"Intensity "!==j)throw new g.Z("lepcc-decode-error","Bad identifier");if(L>1)throw new g.Z("lepcc-decode-error","Unknown version");const o=function F(i,a){return{sizeLo:i.getUint32(a+V.sizeLo,U),sizeHi:i.getUint32(a+V.sizeHi,U),count:i.getUint32(a+V.count,U),scaleFactor:i.getUint16(a+V.scaleFactor,U),bitsPerPoint:i.getUint8(a+V.bitsPerPoint),reserved:i.getUint8(a+V.reserved)}}(a,f);if(f+=V.byteCount,o.sizeHi*2**32+o.sizeLo!==i.byteLength)throw new g.Z("lepcc-decode-error","Bad size");const T=new Uint16Array(o.count);if(8===o.bitsPerPoint){if(o.count+f!==i.byteLength)throw new g.Z("lepcc-decode-error","Bad size");const R=new Uint8Array(i,f,o.count);for(let m=0;m<o.count;m++)T[m]=R[m]*o.scaleFactor}else if(16===o.bitsPerPoint){if(2*o.count+f!==i.byteLength)throw new g.Z("lepcc-decode-error","Bad size");const R=new Uint16Array(i,f,o.count);for(let m=0;m<o.count;m++)T[m]=R[m]*o.scaleFactor}else{const R=[];if(k(i,f,R)!==i.byteLength)throw new g.Z("lepcc-decode-error","Bad size");for(let m=0;m<o.count;m++)T[m]=R[m]*o.scaleFactor}return T}}}]);